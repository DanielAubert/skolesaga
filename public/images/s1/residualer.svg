<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 550 400">
  <defs>
    <marker id="arrowRes" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="550" height="400" fill="#f8fafc"/>

  <!-- Title -->
  <text x="275" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#1e293b">Residualer</text>
  <text x="275" y="50" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#6b7280">Avvik mellom observert verdi og modellert verdi</text>

  <!-- Grid -->
  <g stroke="#e2e8f0" stroke-width="1">
    <line x1="80" y1="80" x2="80" y2="320"/>
    <line x1="80" y1="320" x2="480" y2="320"/>
    <!-- Horizontal grid lines -->
    <line x1="80" y1="140" x2="480" y2="140" stroke-dasharray="4,4"/>
    <line x1="80" y1="200" x2="480" y2="200" stroke-dasharray="4,4"/>
    <line x1="80" y1="260" x2="480" y2="260" stroke-dasharray="4,4"/>
  </g>

  <!-- Axes -->
  <g stroke="#374151" stroke-width="2">
    <line x1="80" y1="320" x2="490" y2="320" marker-end="url(#arrowRes)"/>
    <line x1="80" y1="330" x2="80" y2="70" marker-end="url(#arrowRes)"/>
  </g>

  <!-- Axis labels -->
  <text x="490" y="340" font-family="system-ui, sans-serif" font-size="14" fill="#374151">x</text>
  <text x="60" y="75" font-family="system-ui, sans-serif" font-size="14" fill="#374151">y</text>

  <!-- Regression line -->
  <line x1="100" y1="290" x2="460" y2="100" stroke="#3b82f6" stroke-width="2.5"/>

  <!-- Data points with residual lines -->
  <!-- Point 1 (above line) -->
  <circle cx="130" cy="260" r="6" fill="#ef4444"/>
  <line x1="130" y1="260" x2="130" y2="276" stroke="#22c55e" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 2 (below line) -->
  <circle cx="175" cy="270" r="6" fill="#ef4444"/>
  <line x1="175" y1="270" x2="175" y2="252" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 3 (above line) -->
  <circle cx="220" cy="200" r="6" fill="#ef4444"/>
  <line x1="220" y1="200" x2="220" y2="228" stroke="#22c55e" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 4 (below line) -->
  <circle cx="265" cy="220" r="6" fill="#ef4444"/>
  <line x1="265" y1="220" x2="265" y2="204" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 5 (above line) -->
  <circle cx="310" cy="155" r="6" fill="#ef4444"/>
  <line x1="310" y1="155" x2="310" y2="180" stroke="#22c55e" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 6 (on line - almost) -->
  <circle cx="355" cy="158" r="6" fill="#ef4444"/>
  <line x1="355" y1="158" x2="355" y2="156" stroke="#6b7280" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 7 (below line) -->
  <circle cx="400" cy="150" r="6" fill="#ef4444"/>
  <line x1="400" y1="150" x2="400" y2="132" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Point 8 (above line) -->
  <circle cx="445" cy="95" r="6" fill="#ef4444"/>
  <line x1="445" y1="95" x2="445" y2="108" stroke="#22c55e" stroke-width="2" stroke-dasharray="4,3"/>

  <!-- Points on regression line (for reference) -->
  <g fill="#3b82f6" opacity="0.5">
    <circle cx="130" cy="276" r="3"/>
    <circle cx="175" cy="252" r="3"/>
    <circle cx="220" cy="228" r="3"/>
    <circle cx="265" cy="204" r="3"/>
    <circle cx="310" cy="180" r="3"/>
    <circle cx="355" cy="156" r="3"/>
    <circle cx="400" cy="132" r="3"/>
    <circle cx="445" cy="108" r="3"/>
  </g>

  <!-- Legend -->
  <rect x="350" y="55" width="180" height="85" fill="white" stroke="#e2e8f0" rx="4"/>
  <circle cx="365" cy="75" r="5" fill="#ef4444"/>
  <text x="380" y="79" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Observert verdi (yi)</text>

  <line x1="360" y1="95" x2="370" y2="95" stroke="#3b82f6" stroke-width="2"/>
  <text x="380" y="99" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Regresjonslinje (y-hatt)</text>

  <line x1="360" y1="115" x2="370" y2="115" stroke="#22c55e" stroke-width="2" stroke-dasharray="3,2"/>
  <text x="380" y="119" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Positivt residual</text>

  <line x1="360" y1="130" x2="370" y2="130" stroke="#f59e0b" stroke-width="2" stroke-dasharray="3,2"/>
  <text x="380" y="134" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Negativt residual</text>

  <!-- Formula -->
  <text x="275" y="360" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" fill="#374151">Residual: e</text>
  <text x="299" y="363" font-family="system-ui, sans-serif" font-size="10" fill="#374151">i</text>
  <text x="310" y="360" font-family="system-ui, sans-serif" font-size="14" fill="#374151">= y</text>
  <text x="334" y="363" font-family="system-ui, sans-serif" font-size="10" fill="#374151">i</text>
  <text x="345" y="360" font-family="system-ui, sans-serif" font-size="14" fill="#374151">- y-hatt</text>
  <text x="395" y="363" font-family="system-ui, sans-serif" font-size="10" fill="#374151">i</text>

  <!-- Annotation -->
  <path d="M 232 195 Q 255 175 278 185" fill="none" stroke="#374151" stroke-width="1"/>
  <text x="282" y="183" font-family="system-ui, sans-serif" font-size="10" fill="#374151">residual</text>
</svg>