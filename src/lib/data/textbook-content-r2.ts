/**
 * Tekstbok kapitler for r2
 * Autogenerert fra textbook-content.ts
 */

import type { TextbookChapter } from '@/lib/types/textbook';

export const CHAPTER_R2_1_1: TextbookChapter = {
  id: 'r2-1-1',
  courseId: 'r2',
  chapterNumber: '1.1',
  title: 'Folger og tallmonstre',
  description: 'Introduksjon til følger, notasjon og eksplisitte formler.',
  estimatedMinutes: 50,
  competenceGoals: [
    'utforske rekursive sammenhenger og bruke ulike representasjoner',
    'forsta og bruke folgenotasjon',
    'finne eksplisitte formler for tallmonstre',
  ],
  content: [
    {
      id: 'r2-1-1-intro',
      type: 'text',
      content: `## Hva er en folge?

Har du noen gang lagt merke til monstre i tall?

- $2, 4, 6, 8, 10, \\ldots$ (partall)
- $1, 4, 9, 16, 25, \\ldots$ (kvadrattall)
- $1, 1, 2, 3, 5, 8, 13, \\ldots$ (Fibonacci-tall)

Slike ordnede lister av tall kalles **følger**. Folger dukker opp overalt - fra renter og befolkningsvekst til spiralmonstre i naturen.`,
    },
    {
      id: 'r2-1-1-def-1',
      type: 'definition',
      title: 'Folge',
      content: `En **folge** er en ordnet liste av tall der hvert tall har en bestemt plass (indeks).

Leddene skrives $a_1, a_2, a_3, \\ldots, a_n, \\ldots$

- $a_1$ er det **forste leddet**
- $a_n$ er det **n-te leddet** (generelle leddet)
- $n$ kalles **indeksen**`,
    },
    {
      id: 'r2-1-1-example-1',
      type: 'example',
      title: 'Eksempel 1: Lese av ledd',
      problem: 'La folgen være $1, 4, 9, 16, 25, \\ldots$. Finn $a_1$, $a_3$ og $a_5$.',
      solution: `$a_1 = 1$, $a_3 = 9$, $a_5 = 25$

Dette er kvadrattallene: $a_n = n^2$.`,
    },
    {
      id: 'r2-1-1-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-1-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'La $a_n = 2n + 3$. Finn $a_1$, $a_5$ og $a_{10}$.',
        solution: '$a_1 = 5$, $a_5 = 13$, $a_{10} = 23$',
        hints: ['Sett inn verdien av n i formelen.'],
      },
    },
    {
      id: 'r2-1-1-def-2',
      type: 'definition',
      title: 'Eksplisitt formel',
      content: `En **eksplisitt formel** $a_n = f(n)$ gir det n-te leddet direkte.

**Eksempler:**
- $a_n = 2n$ gir $2, 4, 6, 8, \\ldots$
- $a_n = n^2$ gir $1, 4, 9, 16, \\ldots$
- $a_n = 2^n$ gir $2, 4, 8, 16, \\ldots$`,
    },
    {
      id: 'r2-1-1-example-2',
      type: 'example',
      title: 'Eksempel 2: Bruke eksplisitt formel',
      problem: 'Gitt $a_n = 3n - 1$. a) Finn de fem forste leddene. b) Finn $a_{100}$.',
      solution: `a) $a_1 = 2$, $a_2 = 5$, $a_3 = 8$, $a_4 = 11$, $a_5 = 14$

b) $a_{100} = 3 \\cdot 100 - 1 = 299$`,
    },
    {
      id: 'r2-1-1-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-1-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv de fem forste leddene for $a_n = n^2$ og $a_n = 2^n$.',
        solution: '$n^2$: 1, 4, 9, 16, 25. $2^n$: 2, 4, 8, 16, 32',
        hints: ['Sett inn n = 1, 2, 3, 4, 5.'],
      },
    },
    {
      id: 'r2-1-1-def-3',
      type: 'definition',
      title: 'Rekursiv formel',
      content: `En **rekursiv formel** beskriver et ledd ved hjelp av foregaende ledd.

**Eksempel:**
- $a_1 = 2$
- $a_{n+1} = a_n + 3$

Gir folgen $2, 5, 8, 11, 14, \\ldots$`,
    },
    {
      id: 'r2-1-1-example-3',
      type: 'example',
      title: 'Eksempel 3: Fra rekursiv til eksplisitt',
      problem: 'Gitt $a_1 = 5$ og $a_{n+1} = a_n + 4$. Finn eksplisitt formel.',
      solution: `Folgen er $5, 9, 13, 17, 21, \\ldots$

$a_n = 5 + 4(n-1) = 4n + 1$`,
    },
    {
      id: 'r2-1-1-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-1-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Gitt $a_1 = 2$ og $a_{n+1} = a_n + 5$. Finn eksplisitt formel og $a_{20}$.',
        solution: '$a_n = 5n - 3$, $a_{20} = 97$',
        hints: ['Folgen er aritmetisk med d = 5.'],
      },
    },
    {
      id: 'r2-1-1-theorem-1',
      type: 'theorem',
      title: 'Viktige tallmonstre',
      content: `**Partall:** $a_n = 2n$

**Oddetall:** $a_n = 2n - 1$

**Kvadrattall:** $a_n = n^2$

**Trekanttall:** $a_n = \\frac{n(n+1)}{2}$`,
    },
    {
      id: 'r2-1-1-example-4',
      type: 'example',
      title: 'Eksempel 4: Finne formel fra monster',
      problem: 'Finn eksplisitt formel for $5, 8, 11, 14, \\ldots$',
      solution: `Differansen mellom leddene er konstant: $8-5 = 3$, $11-8 = 3$, osv.

Forste ledd er 5. Formelen blir:
$a_n = 5 + 3(n-1) = 3n + 2$`,
    },
    {
      id: 'r2-1-1-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-1-1-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn eksplisitt formel for $7, 11, 15, 19, \\ldots$',
        solution: '$a_n = 4n + 3$',
        hints: ['Finn differansen mellom leddene.'],
      },
    },
    {
      id: 'r2-1-1-def-4',
      type: 'definition',
      title: 'Fibonacci-folgen',
      content: `$F_1 = 1$, $F_2 = 1$, $F_n = F_{n-1} + F_{n-2}$

Gir: $1, 1, 2, 3, 5, 8, 13, 21, 34, \\ldots$`,
    },
    {
      id: 'r2-1-1-example-5',
      type: 'example',
      title: 'Eksempel 5: Fibonacci-tall',
      problem: 'Finn $F_8$ i Fibonacci-folgen.',
      solution: `$F_1 = 1, F_2 = 1$
$F_3 = 1+1 = 2$
$F_4 = 1+2 = 3$
$F_5 = 2+3 = 5$
$F_6 = 3+5 = 8$
$F_7 = 5+8 = 13$
$F_8 = 8+13 = 21$`,
    },
    {
      id: 'r2-1-1-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-1-1-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $F_{10}$ i Fibonacci-folgen.',
        solution: '$F_{10} = 55$',
        hints: ['Bygg opp folgen steg for steg fra $F_8 = 21$.'],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_1_2: TextbookChapter = {
  id: 'r2-1-2',
  courseId: 'r2',
  chapterNumber: '1.2',
  title: 'Aritmetiske følger',
  description: 'Folger med konstant differanse mellom hvert ledd.',
  estimatedMinutes: 50,
  competenceGoals: [
    'forsta og bruke formler for aritmetiske følger',
    'anvende aritmetiske følger i praktiske situasjoner',
  ],
  content: [
    {
      id: 'r2-1-2-intro',
      type: 'text',
      content: `## Hva er en aritmetisk folge?

Tenk deg at du sparer 500 kr hver maned. Sparesaldoen utvikler seg slik:
$$500, 1000, 1500, 2000, 2500, \\ldots$$

Differansen mellom hvert ledd er konstant (500 kr). Dette er en **aritmetisk folge**.`,
    },
    {
      id: 'r2-1-2-def-1',
      type: 'definition',
      title: 'Aritmetisk folge',
      content: `En **aritmetisk folge** er en folge der differansen mellom pafolgende ledd er konstant.

Differansen betegnes $d$: $d = a_{n+1} - a_n$

**Eksempler:**
- $3, 7, 11, 15, \\ldots$ har $d = 4$
- $20, 17, 14, 11, \\ldots$ har $d = -3$`,
    },
    {
      id: 'r2-1-2-example-1',
      type: 'example',
      title: 'Eksempel 1: Er folgen aritmetisk?',
      problem: 'Avgjer om $2, 5, 8, 11, 14, \\ldots$ er en aritmetisk folge.',
      solution: `Vi sjekker differansene:
$5 - 2 = 3$
$8 - 5 = 3$
$11 - 8 = 3$

Differansen er konstant, sa folgen er **aritmetisk** med $d = 3$.`,
    },
    {
      id: 'r2-1-2-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-2-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Avgjer om $100, 90, 80, 70, \\ldots$ er en aritmetisk folge. Finn i sa fall $d$.',
        solution: 'Ja, aritmetisk med $d = -10$',
        hints: ['Sjekk om differansen er konstant.'],
      },
    },
    {
      id: 'r2-1-2-theorem-1',
      type: 'theorem',
      title: 'Eksplisitt formel',
      content: `For en aritmetisk folge med forste ledd $a_1$ og differanse $d$:

$$a_n = a_1 + (n-1) \\cdot d$$`,
    },
    {
      id: 'r2-1-2-example-2',
      type: 'example',
      title: 'Eksempel 2: Finne et bestemt ledd',
      problem: 'En aritmetisk folge har $a_1 = 7$ og $d = 4$. Finn $a_{50}$.',
      solution: `$a_{50} = 7 + (50-1) \\cdot 4 = 7 + 196 = 203$`,
    },
    {
      id: 'r2-1-2-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-2-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'En aritmetisk folge har $a_1 = 5$ og $d = 3$. Finn $a_{100}$.',
        solution: '$a_{100} = 5 + 99 \\cdot 3 = 302$',
        hints: ['Bruk formelen $a_n = a_1 + (n-1)d$.'],
      },
    },
    {
      id: 'r2-1-2-example-3',
      type: 'example',
      title: 'Eksempel 3: Finne differansen',
      problem: 'I en aritmetisk folge er $a_3 = 11$ og $a_7 = 27$. Finn $d$.',
      solution: `Fra $a_3$ til $a_7$ er det $7 - 3 = 4$ steg.

$a_7 = a_3 + 4d$
$27 = 11 + 4d$
$d = 4$`,
    },
    {
      id: 'r2-1-2-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-2-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'I en aritmetisk folge er $a_5 = 20$ og $a_{10} = 35$. Finn $d$ og $a_1$.',
        solution: '$d = 3$, $a_1 = 8$',
        hints: ['Bruk at $a_{10} = a_5 + 5d$.', 'Deretter finn $a_1$ fra $a_5$.'],
      },
    },
    {
      id: 'r2-1-2-theorem-2',
      type: 'theorem',
      title: 'Sum av aritmetisk folge',
      content: `Summen av de $n$ forste leddene i en aritmetisk folge:

$$S_n = \\frac{n(a_1 + a_n)}{2} = \\frac{n}{2}(2a_1 + (n-1)d)$$`,
    },
    {
      id: 'r2-1-2-example-4',
      type: 'example',
      title: 'Eksempel 4: Summen av en aritmetisk folge',
      problem: 'Finn summen $1 + 2 + 3 + \\ldots + 100$.',
      solution: `Dette er en aritmetisk folge med $a_1 = 1$, $a_{100} = 100$, $n = 100$.

$S_{100} = \\frac{100(1 + 100)}{2} = \\frac{100 \\cdot 101}{2} = 5050$`,
    },
    {
      id: 'r2-1-2-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-1-2-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn summen $2 + 4 + 6 + \\ldots + 200$.',
        solution: '$S = \\frac{100(2 + 200)}{2} = 10100$',
        hints: ['Hvor mange ledd er det?'],
      },
    },
    {
      id: 'r2-1-2-example-5',
      type: 'example',
      title: 'Eksempel 5: Praktisk anvendelse',
      problem: 'Du sparer 1000 kr forste maned, og oker med 200 kr hver maned. Hvor mye har du spart etter 12 måneder?',
      solution: `$a_1 = 1000$, $d = 200$, $n = 12$

$S_{12} = \\frac{12}{2}(2 \\cdot 1000 + 11 \\cdot 200) = 6(2000 + 2200) = 25200$ kr`,
    },
    {
      id: 'r2-1-2-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-1-2-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et kinosal har 20 seter i forste rad, og hver rad har 2 seter mer enn raden foran. Hvor mange seter er det totalt i 15 rader?',
        solution: '$S_{15} = \\frac{15}{2}(2 \\cdot 20 + 14 \\cdot 2) = 510$ seter',
        hints: ['$a_1 = 20$, $d = 2$, $n = 15$.'],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_1: TextbookChapter = {
  id: 'r2-5-1',
  courseId: 'r2',
  chapterNumber: '5.1',
  title: 'Vektorer i tre dimensjoner',
  description: 'Introduksjon til romvektorer, koordinatsystemer i tre dimensjoner og vektornotasjon.',
  estimatedMinutes: 50,
  competenceGoals: [
    'forstå og bruke et tredimensjonalt koordinatsystem',
    'representere vektorer i rommet med koordinater',
    'beregne lengden av en vektor i rommet',
    'finne enhetsvektorer i tre dimensjoner',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-5-1-intro',
      type: 'text',
      content: `## Fra planet til rommet

I R1 lærte du om vektorer i planet, altså i to dimensjoner. Nå skal vi utvide dette til tre dimensjoner - rommet vi lever i.

Mange praktiske problemer krever at vi arbeider i tre dimensjoner:
- Fly og droner som beveger seg i luftrommet
- Krefter som virker på konstruksjoner i alle retninger
- Molekyler og krystallstrukturer i kjemi
- Grafikk i dataspill og animasjonsfilmer
- GPS og navigasjon

Heldigvis er overgangen fra to til tre dimensjoner ganske naturlig. De fleste regnereglene fra R1 gjelder fortsatt - vi legger bare til en ekstra koordinat.`,
    },
    {
      id: 'r2-5-1-vektor3d-bilde',
      type: 'image',
      src: '/images/r2/vektor-3d.svg',
      alt: 'Vektor i tre dimensjoner med x, y og z-komponenter',
      caption: 'Vektorer i rommet - tre koordinater (x, y, z)',
    },

    // ========== KOORDINATSYSTEMET ==========
    {
      id: 'r2-5-1-koordinatsystem',
      type: 'text',
      content: `## Det tredimensjonale koordinatsystemet

I to dimensjoner brukte vi $x$-aksen og $y$-aksen. I tre dimensjoner legger vi til en $z$-akse som star vinkelrett på de to andre.

Vi bruker et **rettvinklet** (eller **ortogonalt**) koordinatsystem der alle tre aksene star vinkelrett på hverandre. Det vanligste er et **høyrehåndssystem**:

**Høyrehåndsregelen:**
Hold høyre hånd med fingrene pekende langs positiv $x$-akse. Krøll fingrene mot positiv $y$-akse. Da peker tommelen i retning av positiv $z$-akse.

Et punkt $P$ i rommet angis med tre koordinater: $P = (x, y, z)$

- $x$-koordinaten angir avstanden langs $x$-aksen
- $y$-koordinaten angir avstanden langs $y$-aksen
- $z$-koordinaten angir høyden over $xy$-planet`,
    },

    // Definisjon: Koordinater i rommet
    {
      id: 'r2-5-1-def-koordinater',
      type: 'definition',
      title: 'Koordinater i rommet',
      content: `Et punkt $P$ i rommet beskrives entydig ved tre koordinater $(x, y, z)$.

- $xy$-planet er planet der $z = 0$
- $xz$-planet er planet der $y = 0$
- $yz$-planet er planet der $x = 0$
- Origo er punktet $O = (0, 0, 0)$`,
    },

    // Eksempel 1: Plotte punkter
    {
      id: 'r2-5-1-example-1',
      type: 'example',
      title: 'Eksempel 1: Punkter i rommet',
      problem: `Beskriv plasseringen av punktene:

a) $A = (3, 0, 0)$
b) $B = (2, 4, 0)$
c) $C = (1, 2, 3)$
d) $D = (0, 0, -2)$`,
      solution: `**Løsning:**

a) $A = (3, 0, 0)$ ligger på $x$-aksen, 3 enheter fra origo i positiv $x$-retning.

b) $B = (2, 4, 0)$ ligger i $xy$-planet (siden $z = 0$), 2 enheter langs $x$-aksen og 4 enheter langs $y$-aksen.

c) $C = (1, 2, 3)$ ligger 1 enhet langs $x$-aksen, 2 enheter langs $y$-aksen, og 3 enheter over $xy$-planet.

d) $D = (0, 0, -2)$ ligger på $z$-aksen, 2 enheter under $xy$-planet (negativ $z$-verdi).`,
    },

    // ========== VEKTORER I ROMMET ==========
    {
      id: 'r2-5-1-vektorer-intro',
      type: 'text',
      content: `## Vektorer i rommet

En **vektor** i rommet er, akkurat som i planet, en størrelse med både **lengde** og **retning**.

Vi skriver vektorer med pil over: $\\vec{a}$, $\\vec{b}$, $\\vec{v}$, eller med fete bokstaver: $\\mathbf{a}$, $\\mathbf{b}$, $\\mathbf{v}$.

En vektor fra punkt $A$ til punkt $B$ skrives $\\overrightarrow{AB}$.`,
    },

    // Definisjon: Vektor i rommet
    {
      id: 'r2-5-1-def-vektor',
      type: 'definition',
      title: 'Vektor i rommet',
      content: `En vektor $\\vec{a}$ i rommet kan skrives på komponentform:

$$\\vec{a} = [a_1, a_2, a_3]$$

der $a_1$, $a_2$ og $a_3$ er vektorens komponenter i henholdsvis $x$-, $y$- og $z$-retning.

Alternativt kan vi skrive vektoren som en lineærkombinasjon av enhetsvektorene:

$$\\vec{a} = a_1\\vec{i} + a_2\\vec{j} + a_3\\vec{k}$$

der $\\vec{i} = [1, 0, 0]$, $\\vec{j} = [0, 1, 0]$ og $\\vec{k} = [0, 0, 1]$ er enhetsvektorene langs aksene.`,
    },

    // ========== POSISJONSVEKTOR OG VEKTOR MELLOM PUNKTER ==========
    {
      id: 'r2-5-1-posisjonsvektor',
      type: 'text',
      content: `## Posisjonsvektor og vektor mellom to punkter

**Posisjonsvektoren** til et punkt $P = (x, y, z)$ er vektoren fra origo til $P$:

$$\\vec{OP} = [x, y, z]$$

For å finne vektoren $\\overrightarrow{AB}$ fra punkt $A = (a_1, a_2, a_3)$ til punkt $B = (b_1, b_2, b_3)$, bruker vi samme regel som i to dimensjoner:

$$\\overrightarrow{AB} = \\vec{OB} - \\vec{OA} = [b_1 - a_1, b_2 - a_2, b_3 - a_3]$$

Med andre ord: **slutt minus start** for hver koordinat.`,
    },

    // Eksempel 2: Vektor mellom punkter
    {
      id: 'r2-5-1-example-2',
      type: 'example',
      title: 'Eksempel 2: Finne vektor mellom to punkter',
      problem: `La $A = (1, 3, 2)$ og $B = (4, -1, 5)$.

a) Finn vektoren $\\overrightarrow{AB}$
b) Finn vektoren $\\overrightarrow{BA}$`,
      solution: `**Løsning:**

a) Vi bruker formelen slutt minus start:
$$\\overrightarrow{AB} = [4-1, -1-3, 5-2] = [3, -4, 3]$$

b) Vektoren $\\overrightarrow{BA}$ går motsatt vei:
$$\\overrightarrow{BA} = [1-4, 3-(-1), 2-5] = [-3, 4, -3]$$

Vi ser at $\\overrightarrow{BA} = -\\overrightarrow{AB}$, akkurat som forventet.`,
    },

    // ========== LENGDE AV VEKTOR ==========
    {
      id: 'r2-5-1-lengde-intro',
      type: 'text',
      content: `## Lengden av en vektor

Lengden (eller **normen**) til en vektor $\\vec{a} = [a_1, a_2, a_3]$ er en naturlig utvidelse av formelen fra to dimensjoner. Vi bruker Pytagoras' setning to ganger.`,
    },

    // Teorem: Lengdeformel
    {
      id: 'r2-5-1-theorem-lengde',
      type: 'theorem',
      title: 'Lengden av en vektor i rommet',
      content: `For en vektor $\\vec{a} = [a_1, a_2, a_3]$ er lengden gitt ved:

$$|\\vec{a}| = \\sqrt{a_1^2 + a_2^2 + a_3^2}$$

**Utledning:**
Tenk på vektoren $\\vec{a}$ som diagonalen i en eske med sider $a_1$, $a_2$ og $a_3$.

1. Først finner vi diagonalen i bunnen (i $xy$-planet): $d = \\sqrt{a_1^2 + a_2^2}$
2. Så bruker vi Pytagoras igjen med denne diagonalen og høyden $a_3$:
   $$|\\vec{a}| = \\sqrt{d^2 + a_3^2} = \\sqrt{a_1^2 + a_2^2 + a_3^2}$$`,
    },

    // Eksempel 3: Beregne lengde
    {
      id: 'r2-5-1-example-3',
      type: 'example',
      title: 'Eksempel 3: Lengde av vektor',
      problem: `Finn lengden av vektoren $\\vec{v} = [2, -3, 6]$.`,
      solution: `**Løsning:**

Vi bruker lengdeformelen:

$$|\\vec{v}| = \\sqrt{2^2 + (-3)^2 + 6^2} = \\sqrt{4 + 9 + 36} = \\sqrt{49} = 7$$

Lengden av $\\vec{v}$ er 7.`,
    },

    // ========== AVSTAND MELLOM PUNKTER ==========
    {
      id: 'r2-5-1-avstand',
      type: 'text',
      content: `## Avstand mellom to punkter

Avstanden mellom to punkter $A$ og $B$ er det samme som lengden av vektoren $\\overrightarrow{AB}$.`,
    },

    // Teorem: Avstandsformel
    {
      id: 'r2-5-1-theorem-avstand',
      type: 'theorem',
      title: 'Avstand mellom to punkter i rommet',
      content: `Avstanden mellom punktene $A = (a_1, a_2, a_3)$ og $B = (b_1, b_2, b_3)$ er:

$$|AB| = \\sqrt{(b_1-a_1)^2 + (b_2-a_2)^2 + (b_3-a_3)^2}$$`,
    },

    // Eksempel 4: Avstand mellom punkter
    {
      id: 'r2-5-1-example-4',
      type: 'example',
      title: 'Eksempel 4: Avstand mellom punkter',
      problem: `Finn avstanden mellom punktene $P = (1, -2, 3)$ og $Q = (4, 2, -1)$.`,
      solution: `**Løsning:**

Vi bruker avstandsformelen:

$$|PQ| = \\sqrt{(4-1)^2 + (2-(-2))^2 + (-1-3)^2}$$
$$= \\sqrt{3^2 + 4^2 + (-4)^2}$$
$$= \\sqrt{9 + 16 + 16}$$
$$= \\sqrt{41}$$

Avstanden er $\\sqrt{41} \\approx 6{,}40$.`,
    },

    // ========== ENHETSVEKTOR ==========
    {
      id: 'r2-5-1-enhetsvektor-intro',
      type: 'text',
      content: `## Enhetsvektor

En **enhetsvektor** er en vektor med lengde 1. Enhetsvektoren i samme retning som $\\vec{a}$ finner vi ved å dele $\\vec{a}$ på sin egen lengde.`,
    },

    // Definisjon: Enhetsvektor
    {
      id: 'r2-5-1-def-enhetsvektor',
      type: 'definition',
      title: 'Enhetsvektor',
      content: `Enhetsvektoren $\\hat{a}$ i samme retning som $\\vec{a}$ er:

$$\\hat{a} = \\frac{\\vec{a}}{|\\vec{a}|} = \\frac{1}{|\\vec{a}|} \\cdot \\vec{a}$$

Merk: $|\\hat{a}| = 1$`,
    },

    // Eksempel 5: Enhetsvektor
    {
      id: 'r2-5-1-example-5',
      type: 'example',
      title: 'Eksempel 5: Finne enhetsvektor',
      problem: `Finn enhetsvektoren i samme retning som $\\vec{u} = [3, 4, 0]$.`,
      solution: `**Løsning:**

Først finner vi lengden:
$$|\\vec{u}| = \\sqrt{3^2 + 4^2 + 0^2} = \\sqrt{9 + 16} = \\sqrt{25} = 5$$

Enhetsvektoren blir:
$$\\hat{u} = \\frac{1}{5}[3, 4, 0] = \\left[\\frac{3}{5}, \\frac{4}{5}, 0\\right]$$

**Kontroll:** $|\\hat{u}| = \\sqrt{\\left(\\frac{3}{5}\\right)^2 + \\left(\\frac{4}{5}\\right)^2 + 0^2} = \\sqrt{\\frac{9}{25} + \\frac{16}{25}} = \\sqrt{1} = 1$ ✓`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-5-1-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-5-1-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-1',
        number: '5.1.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Beskriv plasseringen av følgende punkter:',
        subTasks: [
          { label: 'a', task: '$P = (2, 3, 1)$', solution: '$P$ ligger 2 enheter langs $x$-aksen, 3 enheter langs $y$-aksen og 1 enhet over $xy$-planet.' },
          { label: 'b', task: '$Q = (0, 4, 0)$', solution: '$Q$ ligger på $y$-aksen, 4 enheter fra origo.' },
          { label: 'c', task: '$R = (-1, 2, 5)$', solution: '$R$ ligger 1 enhet i negativ $x$-retning, 2 enheter langs $y$-aksen og 5 enheter over $xy$-planet.' },
          { label: 'd', task: '$S = (3, 0, -2)$', solution: '$S$ ligger i $xz$-planet (siden $y = 0$), 3 enheter langs $x$-aksen og 2 enheter under $xy$-planet.' },
        ],
        solution: 'Se deloppgavene for beskrivelser.',
        hints: ['Hvilken akse eller hvilket plan ligger punktet på eller i?', 'Negativ $z$-verdi betyr under $xy$-planet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-5-1-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-2',
        number: '5.1.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn vektoren $\\overrightarrow{AB}$ når:',
        subTasks: [
          { label: 'a', task: '$A = (1, 2, 3)$ og $B = (4, 5, 6)$', solution: '$\\overrightarrow{AB} = [4-1, 5-2, 6-3] = [3, 3, 3]$' },
          { label: 'b', task: '$A = (0, 0, 0)$ og $B = (1, -2, 3)$', solution: '$\\overrightarrow{AB} = [1-0, -2-0, 3-0] = [1, -2, 3]$' },
          { label: 'c', task: '$A = (2, -1, 4)$ og $B = (-1, 3, 2)$', solution: '$\\overrightarrow{AB} = [-1-2, 3-(-1), 2-4] = [-3, 4, -2]$' },
          { label: 'd', task: '$A = (5, 2, -3)$ og $B = (5, 2, 4)$', solution: '$\\overrightarrow{AB} = [5-5, 2-2, 4-(-3)] = [0, 0, 7]$' },
        ],
        solution: 'a) $[3, 3, 3]$, b) $[1, -2, 3]$, c) $[-3, 4, -2]$, d) $[0, 0, 7]$',
        hints: ['Bruk formelen: slutt minus start for hver koordinat.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-5-1-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-3',
        number: '5.1.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn lengden av vektorene:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 2, 2]$', solution: '$|\\vec{a}| = \\sqrt{1^2 + 2^2 + 2^2} = \\sqrt{1 + 4 + 4} = \\sqrt{9} = 3$' },
          { label: 'b', task: '$\\vec{b} = [4, 0, 3]$', solution: '$|\\vec{b}| = \\sqrt{4^2 + 0^2 + 3^2} = \\sqrt{16 + 9} = \\sqrt{25} = 5$' },
          { label: 'c', task: '$\\vec{c} = [1, 1, 1]$', solution: '$|\\vec{c}| = \\sqrt{1^2 + 1^2 + 1^2} = \\sqrt{3}$' },
          { label: 'd', task: '$\\vec{d} = [6, -2, 3]$', solution: '$|\\vec{d}| = \\sqrt{6^2 + (-2)^2 + 3^2} = \\sqrt{36 + 4 + 9} = \\sqrt{49} = 7$' },
        ],
        solution: 'a) 3, b) 5, c) $\\sqrt{3}$, d) 7',
        hints: ['Bruk formelen $|\\vec{v}| = \\sqrt{v_1^2 + v_2^2 + v_3^2}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-5-1-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-4',
        number: '5.1.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn avstanden mellom punktene:',
        subTasks: [
          { label: 'a', task: '$A = (1, 0, 2)$ og $B = (3, 4, 2)$', solution: '$|AB| = \\sqrt{(3-1)^2 + (4-0)^2 + (2-2)^2} = \\sqrt{4 + 16 + 0} = \\sqrt{20} = 2\\sqrt{5}$' },
          { label: 'b', task: '$C = (2, -1, 3)$ og $D = (-1, 2, 7)$', solution: '$|CD| = \\sqrt{(-1-2)^2 + (2-(-1))^2 + (7-3)^2} = \\sqrt{9 + 9 + 16} = \\sqrt{34}$' },
          { label: 'c', task: '$E = (0, 0, 0)$ og $F = (1, 2, 2)$', solution: '$|EF| = \\sqrt{1^2 + 2^2 + 2^2} = \\sqrt{9} = 3$' },
        ],
        solution: 'a) $2\\sqrt{5}$, b) $\\sqrt{34}$, c) $3$',
        hints: ['Avstand = lengden av vektoren mellom punktene', 'Alternativt: bruk avstandsformelen direkte'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-5-1-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-5',
        number: '5.1.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn enhetsvektoren i samme retning som:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [4, 0, 3]$', solution: '$|\\vec{a}| = 5$, så $\\hat{a} = \\frac{1}{5}[4, 0, 3] = \\left[\\frac{4}{5}, 0, \\frac{3}{5}\\right]$' },
          { label: 'b', task: '$\\vec{b} = [1, 2, 2]$', solution: '$|\\vec{b}| = 3$, så $\\hat{b} = \\frac{1}{3}[1, 2, 2] = \\left[\\frac{1}{3}, \\frac{2}{3}, \\frac{2}{3}\\right]$' },
          { label: 'c', task: '$\\vec{c} = [2, -2, 1]$', solution: '$|\\vec{c}| = \\sqrt{4 + 4 + 1} = 3$, så $\\hat{c} = \\frac{1}{3}[2, -2, 1] = \\left[\\frac{2}{3}, -\\frac{2}{3}, \\frac{1}{3}\\right]$' },
        ],
        solution: 'a) $\\left[\\frac{4}{5}, 0, \\frac{3}{5}\\right]$, b) $\\left[\\frac{1}{3}, \\frac{2}{3}, \\frac{2}{3}\\right]$, c) $\\left[\\frac{2}{3}, -\\frac{2}{3}, \\frac{1}{3}\\right]$',
        hints: ['Finn først lengden, så del hver komponent på lengden.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-5-1-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-6',
        number: '5.1.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Et punkt $P$ har posisjonsvektor $\\vec{OP} = [2, 3, 1]$ og et punkt $Q$ har posisjonsvektor $\\vec{OQ} = [5, -1, 4]$.',
        subTasks: [
          { label: 'a', task: 'Finn koordinatene til $P$ og $Q$.', solution: '$P = (2, 3, 1)$ og $Q = (5, -1, 4)$' },
          { label: 'b', task: 'Finn vektoren $\\overrightarrow{PQ}$.', solution: '$\\overrightarrow{PQ} = [5-2, -1-3, 4-1] = [3, -4, 3]$' },
          { label: 'c', task: 'Finn lengden $|PQ|$.', solution: '$|PQ| = \\sqrt{3^2 + (-4)^2 + 3^2} = \\sqrt{9 + 16 + 9} = \\sqrt{34}$' },
          { label: 'd', task: 'Finn midtpunktet $M$ på linjestykket $PQ$.', solution: '$M = \\left(\\frac{2+5}{2}, \\frac{3+(-1)}{2}, \\frac{1+4}{2}\\right) = \\left(\\frac{7}{2}, 1, \\frac{5}{2}\\right)$' },
        ],
        solution: 'a) $P = (2, 3, 1)$, $Q = (5, -1, 4)$, b) $[3, -4, 3]$, c) $\\sqrt{34}$, d) $\\left(\\frac{7}{2}, 1, \\frac{5}{2}\\right)$',
        hints: ['Posisjonsvektoren har samme koordinater som punktet.', 'Midtpunktet: gjennomsnitt av koordinatene.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-5-1-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-7',
        number: '5.1.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Vis at trekanten med hjørner $A = (1, 0, 1)$, $B = (3, 2, 1)$ og $C = (1, 2, 3)$ er likebeint.',
        subTasks: [
          { label: 'a', task: 'Finn lengdene $|AB|$, $|BC|$ og $|AC|$.', solution: '$|AB| = \\sqrt{(3-1)^2 + (2-0)^2 + (1-1)^2} = \\sqrt{4+4+0} = \\sqrt{8} = 2\\sqrt{2}$\n\n$|BC| = \\sqrt{(1-3)^2 + (2-2)^2 + (3-1)^2} = \\sqrt{4+0+4} = \\sqrt{8} = 2\\sqrt{2}$\n\n$|AC| = \\sqrt{(1-1)^2 + (2-0)^2 + (3-1)^2} = \\sqrt{0+4+4} = \\sqrt{8} = 2\\sqrt{2}$' },
          { label: 'b', task: 'Hva slags trekant er dette?', solution: 'Siden $|AB| = |BC| = |AC| = 2\\sqrt{2}$, er alle sidene like lange. Dette er altså en **likesidet** trekant (som er et spesialtilfelle av likebeint).' },
        ],
        solution: 'Alle tre sidelengdene er $2\\sqrt{2}$, så trekanten er likesidet.',
        hints: ['Beregn alle tre sidelengdene.', 'Sammenlign lengdene.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-5-1-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-8',
        number: '5.1.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Punktet $A = (1, 2, 3)$ og punktet $B = (4, 6, 3)$ er gitt. Finn alle punkter $P$ på $z$-aksen som har lik avstand til $A$ og $B$.',
        subTasks: [
          { label: 'a', task: 'Skriv opp koordinatene til et generelt punkt $P$ på $z$-aksen.', solution: 'Et punkt på $z$-aksen har formen $P = (0, 0, z)$ for en eller annen $z$-verdi.' },
          { label: 'b', task: 'Sett opp likningen $|PA| = |PB|$.', solution: '$|PA|^2 = (1-0)^2 + (2-0)^2 + (3-z)^2 = 1 + 4 + (3-z)^2$\n\n$|PB|^2 = (4-0)^2 + (6-0)^2 + (3-z)^2 = 16 + 36 + (3-z)^2$\n\nSetter $|PA|^2 = |PB|^2$:\n$1 + 4 + (3-z)^2 = 16 + 36 + (3-z)^2$' },
          { label: 'c', task: 'Løs likningen og finn $P$.', solution: 'Fra likningen ser vi at $(3-z)^2$ kansellerer:\n$5 = 52$\n\nDette er en selvmotsigelse! Dermed finnes det **ingen** punkter på $z$-aksen med lik avstand til $A$ og $B$.' },
        ],
        solution: 'Det finnes ingen punkter på $z$-aksen med lik avstand til $A$ og $B$.',
        hints: ['Punkter på $z$-aksen har $x = y = 0$.', 'Kvadrer begge sider for å unngå røtter.', 'Hva skjer hvis likningen ikke har løsning?'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-5-1-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-9',
        number: '5.1.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En kule har sentrum i $S = (2, 1, 3)$ og går gjennom punktet $P = (4, 3, 6)$.',
        subTasks: [
          { label: 'a', task: 'Finn radien $r$ til kulen.', solution: '$r = |SP| = \\sqrt{(4-2)^2 + (3-1)^2 + (6-3)^2} = \\sqrt{4 + 4 + 9} = \\sqrt{17}$' },
          { label: 'b', task: 'Bestem om punktet $Q = (2, 1, 3 + \\sqrt{17})$ ligger på kulen.', solution: '$|SQ| = \\sqrt{(2-2)^2 + (1-1)^2 + (3+\\sqrt{17}-3)^2} = \\sqrt{0 + 0 + 17} = \\sqrt{17} = r$\n\nJa, $Q$ ligger på kulen.' },
          { label: 'c', task: 'Finn et punkt på kulen som ligger i $xy$-planet.', solution: 'I $xy$-planet er $z = 0$. Vi søker $(x, y, 0)$ slik at $|S(x,y,0)| = \\sqrt{17}$.\n\n$(x-2)^2 + (y-1)^2 + (0-3)^2 = 17$\n$(x-2)^2 + (y-1)^2 + 9 = 17$\n$(x-2)^2 + (y-1)^2 = 8$\n\nVelger f.eks. $x = 2$: $(y-1)^2 = 8 \\Rightarrow y = 1 + 2\\sqrt{2}$\n\nEtt punkt er $(2, 1 + 2\\sqrt{2}, 0)$.' },
        ],
        solution: 'a) $r = \\sqrt{17}$, b) Ja, c) F.eks. $(2, 1 + 2\\sqrt{2}, 0)$',
        hints: ['Radien er avstanden fra sentrum til et punkt på kulen.', 'Et punkt ligger på kulen hvis avstanden til sentrum er lik radien.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-5-1-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-1-ex-10',
        number: '5.1.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Skriv vektoren $\\vec{v} = [6, 3, -6]$ som summen av en vektor parallell med $\\vec{a} = [2, 1, -2]$ og en vektor ortogonal på $\\vec{a}$.',
        subTasks: [
          { label: 'a', task: 'Finn en vektor $\\vec{v}_{\\parallel}$ parallell med $\\vec{a}$ slik at $\\vec{v}_{\\parallel} = k\\vec{a}$ for et tall $k$.', solution: 'Hvis $\\vec{v} = k\\vec{a}$, må $[6, 3, -6] = k[2, 1, -2]$.\nFra første komponent: $6 = 2k \\Rightarrow k = 3$.\nSjekk: $3 \\cdot [2, 1, -2] = [6, 3, -6] = \\vec{v}$ ✓\n\nDermed er $\\vec{v}_{\\parallel} = \\vec{v} = [6, 3, -6]$.' },
          { label: 'b', task: 'Hva blir $\\vec{v}_{\\perp}$?', solution: 'Siden $\\vec{v} = \\vec{v}_{\\parallel} + \\vec{v}_{\\perp}$ og $\\vec{v}_{\\parallel} = \\vec{v}$, får vi:\n\n$\\vec{v}_{\\perp} = \\vec{v} - \\vec{v}_{\\parallel} = [6, 3, -6] - [6, 3, -6] = [0, 0, 0]$\n\nDen ortogonale komponenten er nullvektoren. Dette betyr at $\\vec{v}$ allerede er parallell med $\\vec{a}$.' },
        ],
        solution: '$\\vec{v}$ er allerede parallell med $\\vec{a}$ (med $k = 3$), så $\\vec{v}_{\\parallel} = [6, 3, -6]$ og $\\vec{v}_{\\perp} = [0, 0, 0]$.',
        hints: ['Sjekk om $\\vec{v}$ er et multiplum av $\\vec{a}$.', 'Hvis $\\vec{v} = k\\vec{a}$, så er hele $\\vec{v}$ parallell med $\\vec{a}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_2: TextbookChapter = {
  id: 'r2-5-2',
  courseId: 'r2',
  chapterNumber: '5.2',
  title: 'Vektorkoordinater og regning',
  description: 'Addisjon, subtraksjon og skalarmultiplikasjon av vektorer i rommet.',
  estimatedMinutes: 50,
  competenceGoals: [
    'addere og subtrahere vektorer i rommet',
    'multiplisere vektorer med skalarer',
    'forstå og anvende lineærkombinasjoner',
    'avgjøre om vektorer er parallelle',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-5-2-intro',
      type: 'text',
      content: `## Regning med vektorer i rommet

Vektorregning i tre dimensjoner fungerer på samme måte som i to dimensjoner. Vi utfører operasjonene komponent for komponent. I dette kapittelet ser vi på de grunnleggende regneoperasjonene: addisjon, subtraksjon og skalarmultiplikasjon.`,
    },

    // ========== ADDISJON ==========
    {
      id: 'r2-5-2-addisjon-intro',
      type: 'text',
      content: `## Addisjon av vektorer

Når vi adderer to vektorer, legger vi sammen tilsvarende komponenter.`,
    },

    // Definisjon: Vektoraddisjon
    {
      id: 'r2-5-2-def-addisjon',
      type: 'definition',
      title: 'Addisjon av vektorer',
      content: `For vektorer $\\vec{a} = [a_1, a_2, a_3]$ og $\\vec{b} = [b_1, b_2, b_3]$ er summen:

$$\\vec{a} + \\vec{b} = [a_1 + b_1, a_2 + b_2, a_3 + b_3]$$

**Geometrisk tolkning:** Legg $\\vec{b}$ i enden av $\\vec{a}$. Summen $\\vec{a} + \\vec{b}$ er vektoren fra starten av $\\vec{a}$ til enden av $\\vec{b}$.`,
    },

    // Eksempel 1: Addisjon
    {
      id: 'r2-5-2-example-1',
      type: 'example',
      title: 'Eksempel 1: Addisjon av vektorer',
      problem: `La $\\vec{a} = [2, -1, 3]$ og $\\vec{b} = [1, 4, -2]$. Finn $\\vec{a} + \\vec{b}$.`,
      solution: `**Løsning:**

Vi adderer komponent for komponent:

$$\\vec{a} + \\vec{b} = [2+1, -1+4, 3+(-2)] = [3, 3, 1]$$`,
    },

    // ========== SUBTRAKSJON ==========
    {
      id: 'r2-5-2-subtraksjon-intro',
      type: 'text',
      content: `## Subtraksjon av vektorer

Subtraksjon fungerer analogt med addisjon.`,
    },

    // Definisjon: Vektorsubtraksjon
    {
      id: 'r2-5-2-def-subtraksjon',
      type: 'definition',
      title: 'Subtraksjon av vektorer',
      content: `For vektorer $\\vec{a} = [a_1, a_2, a_3]$ og $\\vec{b} = [b_1, b_2, b_3]$ er differansen:

$$\\vec{a} - \\vec{b} = [a_1 - b_1, a_2 - b_2, a_3 - b_3]$$

**Geometrisk tolkning:** $\\vec{a} - \\vec{b}$ er vektoren fra enden av $\\vec{b}$ til enden av $\\vec{a}$ (når begge starter i samme punkt).`,
    },

    // Eksempel 2: Subtraksjon
    {
      id: 'r2-5-2-example-2',
      type: 'example',
      title: 'Eksempel 2: Subtraksjon av vektorer',
      problem: `La $\\vec{a} = [5, 2, -1]$ og $\\vec{b} = [3, -1, 4]$. Finn $\\vec{a} - \\vec{b}$ og $\\vec{b} - \\vec{a}$.`,
      solution: `**Løsning:**

$$\\vec{a} - \\vec{b} = [5-3, 2-(-1), -1-4] = [2, 3, -5]$$

$$\\vec{b} - \\vec{a} = [3-5, -1-2, 4-(-1)] = [-2, -3, 5]$$

Merk at $\\vec{b} - \\vec{a} = -(\\vec{a} - \\vec{b})$, akkurat som forventet.`,
    },

    // ========== SKALARMULTIPLIKASJON ==========
    {
      id: 'r2-5-2-skalar-intro',
      type: 'text',
      content: `## Skalarmultiplikasjon

Når vi multipliserer en vektor med et tall (en **skalar**), multipliserer vi hver komponent med dette tallet.`,
    },

    // Definisjon: Skalarmultiplikasjon
    {
      id: 'r2-5-2-def-skalar',
      type: 'definition',
      title: 'Skalarmultiplikasjon',
      content: `For en vektor $\\vec{a} = [a_1, a_2, a_3]$ og et tall $k$ er:

$$k\\vec{a} = [ka_1, ka_2, ka_3]$$

**Geometrisk tolkning:**
- $|k| > 1$: Vektoren blir lengre
- $|k| < 1$: Vektoren blir kortere
- $k < 0$: Vektoren snur retning
- $k = 0$: Gir nullvektoren $\\vec{0} = [0, 0, 0]$`,
    },

    // Eksempel 3: Skalarmultiplikasjon
    {
      id: 'r2-5-2-example-3',
      type: 'example',
      title: 'Eksempel 3: Skalarmultiplikasjon',
      problem: `La $\\vec{v} = [2, -3, 1]$. Finn:
a) $3\\vec{v}$
b) $-2\\vec{v}$
c) $\\frac{1}{2}\\vec{v}$`,
      solution: `**Løsning:**

a) $3\\vec{v} = 3[2, -3, 1] = [6, -9, 3]$

b) $-2\\vec{v} = -2[2, -3, 1] = [-4, 6, -2]$

c) $\\frac{1}{2}\\vec{v} = \\frac{1}{2}[2, -3, 1] = \\left[1, -\\frac{3}{2}, \\frac{1}{2}\\right]$`,
    },

    // ========== REGNEREGLER ==========
    {
      id: 'r2-5-2-regneregler',
      type: 'theorem',
      title: 'Regneregler for vektorer',
      content: `For vektorer $\\vec{a}$, $\\vec{b}$, $\\vec{c}$ og skalarer $k$, $m$ gjelder:

**Addisjon:**
1. $\\vec{a} + \\vec{b} = \\vec{b} + \\vec{a}$ (kommutativ)
2. $(\\vec{a} + \\vec{b}) + \\vec{c} = \\vec{a} + (\\vec{b} + \\vec{c})$ (assosiativ)
3. $\\vec{a} + \\vec{0} = \\vec{a}$ (nullvektor)
4. $\\vec{a} + (-\\vec{a}) = \\vec{0}$ (motsatt vektor)

**Skalarmultiplikasjon:**
5. $k(\\vec{a} + \\vec{b}) = k\\vec{a} + k\\vec{b}$ (distributiv)
6. $(k + m)\\vec{a} = k\\vec{a} + m\\vec{a}$ (distributiv)
7. $k(m\\vec{a}) = (km)\\vec{a}$ (assosiativ)
8. $1 \\cdot \\vec{a} = \\vec{a}$`,
    },

    // Eksempel 4: Kombinerte operasjoner
    {
      id: 'r2-5-2-example-4',
      type: 'example',
      title: 'Eksempel 4: Kombinerte operasjoner',
      problem: `La $\\vec{a} = [1, 2, -1]$ og $\\vec{b} = [3, 0, 2]$. Regn ut $2\\vec{a} - 3\\vec{b}$.`,
      solution: `**Løsning:**

Først regner vi ut hver del:
$$2\\vec{a} = 2[1, 2, -1] = [2, 4, -2]$$
$$3\\vec{b} = 3[3, 0, 2] = [9, 0, 6]$$

Så subtraherer vi:
$$2\\vec{a} - 3\\vec{b} = [2, 4, -2] - [9, 0, 6] = [2-9, 4-0, -2-6] = [-7, 4, -8]$$`,
    },

    // ========== LINEÆRKOMBINASJONER ==========
    {
      id: 'r2-5-2-linearkomb-intro',
      type: 'text',
      content: `## Lineærkombinasjoner

En **lineærkombinasjon** av vektorer er en sum der hver vektor er multiplisert med en skalar.`,
    },

    // Definisjon: Lineærkombinasjon
    {
      id: 'r2-5-2-def-linearkomb',
      type: 'definition',
      title: 'Lineærkombinasjon',
      content: `En **lineærkombinasjon** av vektorene $\\vec{v}_1, \\vec{v}_2, \\ldots, \\vec{v}_n$ er et uttrykk på formen:

$$k_1\\vec{v}_1 + k_2\\vec{v}_2 + \\cdots + k_n\\vec{v}_n$$

der $k_1, k_2, \\ldots, k_n$ er skalarer (tall).`,
    },

    // Eksempel 5: Lineærkombinasjon
    {
      id: 'r2-5-2-example-5',
      type: 'example',
      title: 'Eksempel 5: Lineærkombinasjon',
      problem: `Skriv vektoren $\\vec{w} = [7, 5, 3]$ som en lineærkombinasjon av $\\vec{u} = [1, 1, 1]$ og $\\vec{v} = [2, 1, 0]$.`,
      solution: `**Løsning:**

Vi søker $a$ og $b$ slik at $a\\vec{u} + b\\vec{v} = \\vec{w}$:

$$a[1, 1, 1] + b[2, 1, 0] = [7, 5, 3]$$
$$[a + 2b, a + b, a] = [7, 5, 3]$$

Fra tredje komponent: $a = 3$

Fra andre komponent: $3 + b = 5 \\Rightarrow b = 2$

**Kontroll:** $3[1, 1, 1] + 2[2, 1, 0] = [3, 3, 3] + [4, 2, 0] = [7, 5, 3]$ ✓

Altså: $\\vec{w} = 3\\vec{u} + 2\\vec{v}$`,
    },

    // ========== PARALLELLE VEKTORER ==========
    {
      id: 'r2-5-2-parallell-intro',
      type: 'text',
      content: `## Parallelle vektorer

To vektorer er **parallelle** hvis den ene er et skalarmultiplum av den andre.`,
    },

    // Definisjon: Parallelle vektorer
    {
      id: 'r2-5-2-def-parallell',
      type: 'definition',
      title: 'Parallelle vektorer',
      content: `Vektorene $\\vec{a}$ og $\\vec{b}$ (der $\\vec{b} \\neq \\vec{0}$) er **parallelle** hvis det finnes et tall $k$ slik at:

$$\\vec{a} = k\\vec{b}$$

Vi skriver $\\vec{a} \\parallel \\vec{b}$.

- Hvis $k > 0$: Vektorene peker i samme retning
- Hvis $k < 0$: Vektorene peker i motsatt retning`,
    },

    // Eksempel 6: Parallelle vektorer
    {
      id: 'r2-5-2-example-6',
      type: 'example',
      title: 'Eksempel 6: Avgjøre om vektorer er parallelle',
      problem: `Undersøk om følgende vektorpar er parallelle:
a) $\\vec{a} = [2, 4, 6]$ og $\\vec{b} = [1, 2, 3]$
b) $\\vec{c} = [3, -1, 2]$ og $\\vec{d} = [6, -2, 5]$`,
      solution: `**Løsning:**

a) Vi sjekker om $\\vec{a} = k\\vec{b}$ for et tall $k$:
$$[2, 4, 6] = k[1, 2, 3]$$

Fra første komponent: $2 = k \\cdot 1 \\Rightarrow k = 2$

Sjekk: $2 \\cdot [1, 2, 3] = [2, 4, 6] = \\vec{a}$ ✓

**Ja, $\\vec{a} \\parallel \\vec{b}$ med $k = 2$.**

b) Vi sjekker om $\\vec{c} = k\\vec{d}$:
- Fra første komponent: $3 = 6k \\Rightarrow k = \\frac{1}{2}$
- Fra andre komponent: $-1 = -2k \\Rightarrow k = \\frac{1}{2}$
- Fra tredje komponent: $2 = 5k \\Rightarrow k = \\frac{2}{5}$

Siden $k$-verdiene ikke er like, er vektorene **ikke parallelle**.`,
    },

    // ========== DELING AV LINJESTYKKE ==========
    {
      id: 'r2-5-2-deling-intro',
      type: 'text',
      content: `## Deling av linjestykke

Ved hjelp av vektorregning kan vi finne punkter som deler et linjestykke i et gitt forhold.`,
    },

    // Teorem: Delingspunkt
    {
      id: 'r2-5-2-theorem-deling',
      type: 'theorem',
      title: 'Delingspunkt på linjestykke',
      content: `La $A$ og $B$ være to punkter. Punktet $P$ som deler $AB$ i forholdet $m:n$ (der $|AP|:|PB| = m:n$) har posisjonsvektor:

$$\\vec{OP} = \\frac{n \\cdot \\vec{OA} + m \\cdot \\vec{OB}}{m + n}$$

**Spesialtilfelle:** Midtpunktet $M$ (der $m = n = 1$):
$$\\vec{OM} = \\frac{\\vec{OA} + \\vec{OB}}{2}$$`,
    },

    // Eksempel 7: Midtpunkt
    {
      id: 'r2-5-2-example-7',
      type: 'example',
      title: 'Eksempel 7: Midtpunkt og delingspunkt',
      problem: `La $A = (1, 3, 5)$ og $B = (7, -1, 2)$.

a) Finn midtpunktet $M$ på $AB$.
b) Finn punktet $P$ som deler $AB$ i forholdet $2:1$.`,
      solution: `**Løsning:**

a) Midtpunktet har koordinater:
$$M = \\left(\\frac{1+7}{2}, \\frac{3+(-1)}{2}, \\frac{5+2}{2}\\right) = \\left(4, 1, \\frac{7}{2}\\right)$$

b) For forholdet $2:1$ (med $m = 2$ og $n = 1$):
$$\\vec{OP} = \\frac{1 \\cdot \\vec{OA} + 2 \\cdot \\vec{OB}}{2 + 1} = \\frac{[1, 3, 5] + 2[7, -1, 2]}{3}$$
$$= \\frac{[1, 3, 5] + [14, -2, 4]}{3} = \\frac{[15, 1, 9]}{3} = [5, \\frac{1}{3}, 3]$$

Så $P = \\left(5, \\frac{1}{3}, 3\\right)$.`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-5-2-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-5-2-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-1',
        number: '5.2.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'La $\\vec{a} = [3, -1, 2]$ og $\\vec{b} = [1, 4, -3]$. Regn ut:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} + \\vec{b}$', solution: '$\\vec{a} + \\vec{b} = [3+1, -1+4, 2+(-3)] = [4, 3, -1]$' },
          { label: 'b', task: '$\\vec{a} - \\vec{b}$', solution: '$\\vec{a} - \\vec{b} = [3-1, -1-4, 2-(-3)] = [2, -5, 5]$' },
          { label: 'c', task: '$\\vec{b} - \\vec{a}$', solution: '$\\vec{b} - \\vec{a} = [1-3, 4-(-1), -3-2] = [-2, 5, -5]$' },
          { label: 'd', task: '$2\\vec{a} + 3\\vec{b}$', solution: '$2\\vec{a} + 3\\vec{b} = [6, -2, 4] + [3, 12, -9] = [9, 10, -5]$' },
        ],
        solution: 'a) $[4, 3, -1]$, b) $[2, -5, 5]$, c) $[-2, 5, -5]$, d) $[9, 10, -5]$',
        hints: ['Regn komponent for komponent.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-5-2-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-2',
        number: '5.2.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'La $\\vec{u} = [2, 0, -1]$, $\\vec{v} = [-1, 3, 2]$ og $\\vec{w} = [0, 1, 1]$. Regn ut:',
        subTasks: [
          { label: 'a', task: '$\\vec{u} + \\vec{v} + \\vec{w}$', solution: '$\\vec{u} + \\vec{v} + \\vec{w} = [2-1+0, 0+3+1, -1+2+1] = [1, 4, 2]$' },
          { label: 'b', task: '$2\\vec{u} - \\vec{v}$', solution: '$2\\vec{u} - \\vec{v} = [4, 0, -2] - [-1, 3, 2] = [5, -3, -4]$' },
          { label: 'c', task: '$\\vec{u} - 2\\vec{v} + 3\\vec{w}$', solution: '$\\vec{u} - 2\\vec{v} + 3\\vec{w} = [2, 0, -1] - [-2, 6, 4] + [0, 3, 3] = [4, -3, -2]$' },
        ],
        solution: 'a) $[1, 4, 2]$, b) $[5, -3, -4]$, c) $[4, -3, -2]$',
        hints: ['Beregn skalarmultiplikasjon først, så addisjon/subtraksjon.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-5-2-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-3',
        number: '5.2.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Undersøk om følgende vektorpar er parallelle:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [4, -2, 6]$ og $\\vec{b} = [2, -1, 3]$', solution: '$\\vec{a} = 2\\vec{b}$, så **ja, de er parallelle**.' },
          { label: 'b', task: '$\\vec{c} = [1, 2, 3]$ og $\\vec{d} = [2, 4, 5]$', solution: 'Fra komponent 1 og 2: $k = 2$. Fra komponent 3: $k = 5/3$. Ulike $k$-verdier, så **nei, ikke parallelle**.' },
          { label: 'c', task: '$\\vec{e} = [3, -6, 9]$ og $\\vec{f} = [-1, 2, -3]$', solution: '$\\vec{e} = -3\\vec{f}$, så **ja, de er parallelle** (motsatt retning).' },
        ],
        solution: 'a) Ja ($k = 2$), b) Nei, c) Ja ($k = -3$)',
        hints: ['Sjekk om forholdet mellom tilsvarende komponenter er det samme.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-5-2-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-4',
        number: '5.2.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $x$, $y$ og $z$ slik at $\\vec{a} + \\vec{b} = \\vec{c}$ når:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [x, 2, 3]$, $\\vec{b} = [1, y, -1]$, $\\vec{c} = [4, 5, z]$', solution: '$x + 1 = 4 \\Rightarrow x = 3$\n$2 + y = 5 \\Rightarrow y = 3$\n$3 + (-1) = z \\Rightarrow z = 2$' },
          { label: 'b', task: '$\\vec{a} = [2x, 1, -2]$, $\\vec{b} = [3, y-1, z]$, $\\vec{c} = [7, 4, 1]$', solution: '$2x + 3 = 7 \\Rightarrow x = 2$\n$1 + (y-1) = 4 \\Rightarrow y = 4$\n$-2 + z = 1 \\Rightarrow z = 3$' },
        ],
        solution: 'a) $x = 3$, $y = 3$, $z = 2$. b) $x = 2$, $y = 4$, $z = 3$.',
        hints: ['Sett opp en likning for hver komponent.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-5-2-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-5',
        number: '5.2.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn midtpunktet $M$ på linjestykket $AB$ når:',
        subTasks: [
          { label: 'a', task: '$A = (2, 4, 6)$ og $B = (8, 2, 4)$', solution: '$M = \\left(\\frac{2+8}{2}, \\frac{4+2}{2}, \\frac{6+4}{2}\\right) = (5, 3, 5)$' },
          { label: 'b', task: '$A = (-1, 3, 5)$ og $B = (5, -1, 3)$', solution: '$M = \\left(\\frac{-1+5}{2}, \\frac{3-1}{2}, \\frac{5+3}{2}\\right) = (2, 1, 4)$' },
          { label: 'c', task: '$A = (0, 0, 0)$ og $B = (4, -2, 6)$', solution: '$M = \\left(\\frac{0+4}{2}, \\frac{0-2}{2}, \\frac{0+6}{2}\\right) = (2, -1, 3)$' },
        ],
        solution: 'a) $(5, 3, 5)$, b) $(2, 1, 4)$, c) $(2, -1, 3)$',
        hints: ['Midtpunktet: gjennomsnitt av koordinatene.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-5-2-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-6',
        number: '5.2.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv vektoren $\\vec{w} = [5, 4, 7]$ som en lineærkombinasjon av $\\vec{u} = [1, 0, 1]$ og $\\vec{v} = [1, 1, 2]$.',
        subTasks: [
          { label: 'a', task: 'Sett opp likningssystemet.', solution: 'Vi søker $a$ og $b$ slik at $a\\vec{u} + b\\vec{v} = \\vec{w}$:\n$a[1, 0, 1] + b[1, 1, 2] = [5, 4, 7]$\n$[a + b, b, a + 2b] = [5, 4, 7]$\n\nLikninger:\n(1) $a + b = 5$\n(2) $b = 4$\n(3) $a + 2b = 7$' },
          { label: 'b', task: 'Løs systemet og skriv svaret.', solution: 'Fra (2): $b = 4$\nFra (1): $a + 4 = 5 \\Rightarrow a = 1$\nSjekk i (3): $1 + 2 \\cdot 4 = 9 \\neq 7$\n\n**Systemet er inkonsistent!** $\\vec{w}$ kan ikke skrives som lineærkombinasjon av $\\vec{u}$ og $\\vec{v}$.' },
        ],
        solution: '$\\vec{w}$ kan ikke skrives som en lineærkombinasjon av $\\vec{u}$ og $\\vec{v}$.',
        hints: ['Sett opp tre likninger, en for hver komponent.', 'Hva skjer hvis likningene ikke stemmer?'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-5-2-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-7',
        number: '5.2.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Punktene $A = (1, 2, 3)$ og $B = (7, 5, 9)$ er gitt. Finn punktet $P$ som deler $AB$ i forholdet:',
        subTasks: [
          { label: 'a', task: '$1:2$ (fra $A$)', solution: 'Med $m = 1$ og $n = 2$:\n$\\vec{OP} = \\frac{2 \\cdot \\vec{OA} + 1 \\cdot \\vec{OB}}{3} = \\frac{2[1,2,3] + [7,5,9]}{3} = \\frac{[9, 9, 15]}{3} = [3, 3, 5]$\n\n$P = (3, 3, 5)$' },
          { label: 'b', task: '$2:1$ (fra $A$)', solution: 'Med $m = 2$ og $n = 1$:\n$\\vec{OP} = \\frac{1 \\cdot \\vec{OA} + 2 \\cdot \\vec{OB}}{3} = \\frac{[1,2,3] + 2[7,5,9]}{3} = \\frac{[15, 12, 21]}{3} = [5, 4, 7]$\n\n$P = (5, 4, 7)$' },
        ],
        solution: 'a) $P = (3, 3, 5)$, b) $P = (5, 4, 7)$',
        hints: ['Bruk formelen for delingspunkt.', 'Vekten på $B$ er $m$, vekten på $A$ er $n$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-5-2-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-8',
        number: '5.2.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'I en trekant $ABC$ har vi $A = (1, 0, 2)$, $B = (3, 4, 0)$ og $C = (5, 2, 6)$. Tyngdepunktet $T$ i trekanten er gjennomsnittet av hjørnene.',
        subTasks: [
          { label: 'a', task: 'Finn koordinatene til tyngdepunktet $T$.', solution: '$T = \\left(\\frac{1+3+5}{3}, \\frac{0+4+2}{3}, \\frac{2+0+6}{3}\\right) = (3, 2, \\frac{8}{3})$' },
          { label: 'b', task: 'Vis at $\\overrightarrow{TA} + \\overrightarrow{TB} + \\overrightarrow{TC} = \\vec{0}$.', solution: '$\\overrightarrow{TA} = [1-3, 0-2, 2-\\frac{8}{3}] = [-2, -2, -\\frac{2}{3}]$\n\n$\\overrightarrow{TB} = [3-3, 4-2, 0-\\frac{8}{3}] = [0, 2, -\\frac{8}{3}]$\n\n$\\overrightarrow{TC} = [5-3, 2-2, 6-\\frac{8}{3}] = [2, 0, \\frac{10}{3}]$\n\nSum: $[-2+0+2, -2+2+0, -\\frac{2}{3}-\\frac{8}{3}+\\frac{10}{3}] = [0, 0, 0] = \\vec{0}$ ✓' },
        ],
        solution: 'a) $T = (3, 2, \\frac{8}{3})$, b) Se utregning.',
        hints: ['Tyngdepunktet er gjennomsnittet av hjørnenes koordinater.', 'Dette resultatet gjelder for alle trekanter.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-5-2-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-9',
        number: '5.2.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vektorene $\\vec{a} = [2, -1, 3]$, $\\vec{b} = [1, 2, -1]$ og $\\vec{c} = [k, 5, 1]$ er gitt. Finn verdien av $k$ slik at $\\vec{c}$ kan skrives som en lineærkombinasjon av $\\vec{a}$ og $\\vec{b}$.',
        subTasks: [
          { label: 'a', task: 'Sett opp likningssystemet $s\\vec{a} + t\\vec{b} = \\vec{c}$.', solution: '$s[2, -1, 3] + t[1, 2, -1] = [k, 5, 1]$\n\nGir likningene:\n(1) $2s + t = k$\n(2) $-s + 2t = 5$\n(3) $3s - t = 1$' },
          { label: 'b', task: 'Løs for $s$ og $t$ fra likning (2) og (3).', solution: 'Fra (2): $-s + 2t = 5$\nFra (3): $3s - t = 1$\n\nGang (3) med 2: $6s - 2t = 2$\nLegg til (2): $5s = 7 \\Rightarrow s = \\frac{7}{5}$\n\nSett inn i (3): $3 \\cdot \\frac{7}{5} - t = 1 \\Rightarrow t = \\frac{21}{5} - 1 = \\frac{16}{5}$' },
          { label: 'c', task: 'Finn $k$.', solution: 'Sett $s = \\frac{7}{5}$ og $t = \\frac{16}{5}$ inn i (1):\n$k = 2s + t = 2 \\cdot \\frac{7}{5} + \\frac{16}{5} = \\frac{14 + 16}{5} = 6$\n\n**Svar: $k = 6$**' },
        ],
        solution: '$k = 6$',
        hints: ['Bruk to av likningene til å finne $s$ og $t$.', 'Sett inn i den tredje likningen for å finne $k$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-5-2-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-2-ex-10',
        number: '5.2.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et parallellogram $ABCD$ har hjørner $A = (1, 2, 3)$, $B = (4, 3, 5)$ og $C = (6, 7, 8)$. Finn koordinatene til $D$.',
        subTasks: [
          { label: 'a', task: 'Bruk at $\\overrightarrow{AB} = \\overrightarrow{DC}$ til å finne $D$.', solution: '$\\overrightarrow{AB} = [4-1, 3-2, 5-3] = [3, 1, 2]$\n\n$\\overrightarrow{DC} = \\overrightarrow{AB}$ betyr at $C - D = [3, 1, 2]$\n\nDermed: $D = C - [3, 1, 2] = [6-3, 7-1, 8-2] = [3, 6, 6]$\n\n$D = (3, 6, 6)$' },
          { label: 'b', task: 'Verifiser at $\\overrightarrow{AD} = \\overrightarrow{BC}$.', solution: '$\\overrightarrow{AD} = [3-1, 6-2, 6-3] = [2, 4, 3]$\n\n$\\overrightarrow{BC} = [6-4, 7-3, 8-5] = [2, 4, 3]$\n\n$\\overrightarrow{AD} = \\overrightarrow{BC}$ ✓' },
        ],
        solution: '$D = (3, 6, 6)$',
        hints: ['I et parallellogram er motstående sider parallelle og like lange.', '$\\overrightarrow{AB} = \\overrightarrow{DC}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_3: TextbookChapter = {
  id: 'r2-5-3',
  courseId: 'r2',
  chapterNumber: '5.3',
  title: 'Skalarproduktet',
  description: 'Prikkproduktet av vektorer og dets anvendelser: vinkler og ortogonalitet.',
  estimatedMinutes: 55,
  competenceGoals: [
    'beregne skalarproduktet av to vektorer i rommet',
    'bruke skalarproduktet til å finne vinkler mellom vektorer',
    'avgjøre om vektorer er ortogonale',
    'projisere en vektor på en annen',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-5-3-intro',
      type: 'text',
      content: `## Hva er skalarproduktet?

Skalarproduktet (også kalt **prikkproduktet** eller **indreproduktet**) er en måte å "multiplisere" to vektorer på som gir et **tall** (en skalar) som resultat.

Skalarproduktet har mange viktige anvendelser:
- Finne vinkelen mellom to vektorer
- Avgjøre om to vektorer er ortogonale (vinkelrette)
- Projisere en vektor på en annen
- Beregne arbeid i fysikk ($W = \\vec{F} \\cdot \\vec{s}$)`,
    },

    // ========== DEFINISJON ==========
    {
      id: 'r2-5-3-def-skalarprodukt',
      type: 'definition',
      title: 'Skalarproduktet',
      content: `For vektorer $\\vec{a} = [a_1, a_2, a_3]$ og $\\vec{b} = [b_1, b_2, b_3]$ er **skalarproduktet** definert som:

$$\\vec{a} \\cdot \\vec{b} = a_1 b_1 + a_2 b_2 + a_3 b_3$$

Merk: Resultatet er et **tall**, ikke en vektor.

Vi bruker notasjonen $\\vec{a} \\cdot \\vec{b}$ (med prikk) eller $\\langle \\vec{a}, \\vec{b} \\rangle$.`,
    },

    // Eksempel 1: Beregne skalarprodukt
    {
      id: 'r2-5-3-example-1',
      type: 'example',
      title: 'Eksempel 1: Beregne skalarproduktet',
      problem: `Regn ut skalarproduktet $\\vec{a} \\cdot \\vec{b}$ når:

a) $\\vec{a} = [2, 3, 1]$ og $\\vec{b} = [4, -1, 2]$
b) $\\vec{a} = [1, 0, -2]$ og $\\vec{b} = [3, 5, 1]$`,
      solution: `**Løsning:**

a) $\\vec{a} \\cdot \\vec{b} = 2 \\cdot 4 + 3 \\cdot (-1) + 1 \\cdot 2 = 8 - 3 + 2 = 7$

b) $\\vec{a} \\cdot \\vec{b} = 1 \\cdot 3 + 0 \\cdot 5 + (-2) \\cdot 1 = 3 + 0 - 2 = 1$`,
    },

    // ========== REGNEREGLER ==========
    {
      id: 'r2-5-3-regneregler',
      type: 'theorem',
      title: 'Regneregler for skalarproduktet',
      content: `For vektorer $\\vec{a}$, $\\vec{b}$, $\\vec{c}$ og skalar $k$ gjelder:

1. $\\vec{a} \\cdot \\vec{b} = \\vec{b} \\cdot \\vec{a}$ (kommutativ)
2. $\\vec{a} \\cdot (\\vec{b} + \\vec{c}) = \\vec{a} \\cdot \\vec{b} + \\vec{a} \\cdot \\vec{c}$ (distributiv)
3. $(k\\vec{a}) \\cdot \\vec{b} = k(\\vec{a} \\cdot \\vec{b}) = \\vec{a} \\cdot (k\\vec{b})$
4. $\\vec{a} \\cdot \\vec{a} = |\\vec{a}|^2$ (lengde kvadrert)
5. $\\vec{a} \\cdot \\vec{0} = 0$`,
    },

    // ========== GEOMETRISK TOLKNING ==========
    {
      id: 'r2-5-3-geometrisk',
      type: 'text',
      content: `## Geometrisk tolkning av skalarproduktet

Det finnes en alternativ formel for skalarproduktet som involverer vinkelen mellom vektorene.`,
    },

    // Teorem: Geometrisk formel
    {
      id: 'r2-5-3-theorem-geometrisk',
      type: 'theorem',
      title: 'Geometrisk formel for skalarproduktet',
      content: `For vektorer $\\vec{a}$ og $\\vec{b}$ med vinkel $\\theta$ mellom seg:

$$\\vec{a} \\cdot \\vec{b} = |\\vec{a}| \\cdot |\\vec{b}| \\cdot \\cos\\theta$$

Denne formelen gir oss sammenhengen mellom skalarproduktet og vinkelen.`,
    },

    // ========== VINKEL MELLOM VEKTORER ==========
    {
      id: 'r2-5-3-vinkel-intro',
      type: 'text',
      content: `## Vinkel mellom to vektorer

Ved å kombinere de to formlene for skalarproduktet kan vi finne vinkelen mellom to vektorer.`,
    },

    // Teorem: Vinkelformel
    {
      id: 'r2-5-3-theorem-vinkel',
      type: 'theorem',
      title: 'Vinkel mellom to vektorer',
      content: `Vinkelen $\\theta$ mellom vektorene $\\vec{a}$ og $\\vec{b}$ er gitt ved:

$$\\cos\\theta = \\frac{\\vec{a} \\cdot \\vec{b}}{|\\vec{a}| \\cdot |\\vec{b}|}$$

der $0° \\leq \\theta \\leq 180°$ (eller $0 \\leq \\theta \\leq \\pi$ i radianer).`,
    },

    // Eksempel 2: Finne vinkel
    {
      id: 'r2-5-3-example-2',
      type: 'example',
      title: 'Eksempel 2: Finne vinkelen mellom to vektorer',
      problem: `Finn vinkelen mellom $\\vec{a} = [1, 2, 2]$ og $\\vec{b} = [3, 0, 4]$.`,
      solution: `**Løsning:**

**Steg 1:** Beregn skalarproduktet:
$$\\vec{a} \\cdot \\vec{b} = 1 \\cdot 3 + 2 \\cdot 0 + 2 \\cdot 4 = 3 + 0 + 8 = 11$$

**Steg 2:** Finn lengdene:
$$|\\vec{a}| = \\sqrt{1^2 + 2^2 + 2^2} = \\sqrt{9} = 3$$
$$|\\vec{b}| = \\sqrt{3^2 + 0^2 + 4^2} = \\sqrt{25} = 5$$

**Steg 3:** Bruk vinkelformelen:
$$\\cos\\theta = \\frac{11}{3 \\cdot 5} = \\frac{11}{15}$$

$$\\theta = \\arccos\\left(\\frac{11}{15}\\right) \\approx 42{,}8°$$`,
    },

    // ========== ORTOGONALE VEKTORER ==========
    {
      id: 'r2-5-3-ortogonal-intro',
      type: 'text',
      content: `## Ortogonale vektorer

Når vinkelen mellom to vektorer er $90°$, sier vi at de er **ortogonale** (vinkelrette).`,
    },

    // Teorem: Ortogonalitet
    {
      id: 'r2-5-3-theorem-ortogonal',
      type: 'theorem',
      title: 'Ortogonalitet',
      content: `To vektorer $\\vec{a}$ og $\\vec{b}$ er **ortogonale** hvis og bare hvis:

$$\\vec{a} \\cdot \\vec{b} = 0$$

Vi skriver $\\vec{a} \\perp \\vec{b}$.

**Forklaring:** Når $\\theta = 90°$ er $\\cos 90° = 0$, så $\\vec{a} \\cdot \\vec{b} = |\\vec{a}||\\vec{b}| \\cdot 0 = 0$.`,
    },

    // Eksempel 3: Ortogonalitet
    {
      id: 'r2-5-3-example-3',
      type: 'example',
      title: 'Eksempel 3: Sjekke ortogonalitet',
      problem: `Undersøk om vektorene er ortogonale:

a) $\\vec{a} = [2, 1, -1]$ og $\\vec{b} = [1, -3, -1]$
b) $\\vec{c} = [1, 2, 3]$ og $\\vec{d} = [3, 0, -1]$`,
      solution: `**Løsning:**

a) $\\vec{a} \\cdot \\vec{b} = 2 \\cdot 1 + 1 \\cdot (-3) + (-1) \\cdot (-1) = 2 - 3 + 1 = 0$

Siden $\\vec{a} \\cdot \\vec{b} = 0$, er $\\vec{a} \\perp \\vec{b}$. **Ja, de er ortogonale.**

b) $\\vec{c} \\cdot \\vec{d} = 1 \\cdot 3 + 2 \\cdot 0 + 3 \\cdot (-1) = 3 + 0 - 3 = 0$

Siden $\\vec{c} \\cdot \\vec{d} = 0$, er $\\vec{c} \\perp \\vec{d}$. **Ja, de er ortogonale.**`,
    },

    // Eksempel 4: Finne ortogonal vektor
    {
      id: 'r2-5-3-example-4',
      type: 'example',
      title: 'Eksempel 4: Finne en ortogonal vektor',
      problem: `Finn alle verdier av $k$ slik at $\\vec{u} = [2, k, 1]$ er ortogonal på $\\vec{v} = [3, -1, k]$.`,
      solution: `**Løsning:**

For at $\\vec{u} \\perp \\vec{v}$ må $\\vec{u} \\cdot \\vec{v} = 0$:

$$\\vec{u} \\cdot \\vec{v} = 2 \\cdot 3 + k \\cdot (-1) + 1 \\cdot k = 6 - k + k = 6$$

Vi får $6 = 0$, som er umulig.

**Konklusjon:** Det finnes ingen verdi av $k$ som gjør vektorene ortogonale.`,
    },

    // ========== PROJEKSJON ==========
    {
      id: 'r2-5-3-projeksjon-intro',
      type: 'text',
      content: `## Projeksjon av en vektor på en annen

Projeksjonen av $\\vec{a}$ på $\\vec{b}$ er den komponenten av $\\vec{a}$ som ligger langs $\\vec{b}$.`,
    },

    // Definisjon: Projeksjon
    {
      id: 'r2-5-3-def-projeksjon',
      type: 'definition',
      title: 'Projeksjonen av en vektor',
      content: `**Skalar projeksjon** av $\\vec{a}$ på $\\vec{b}$:
$$\\text{comp}_{\\vec{b}} \\vec{a} = \\frac{\\vec{a} \\cdot \\vec{b}}{|\\vec{b}|}$$

**Vektor projeksjon** av $\\vec{a}$ på $\\vec{b}$:
$$\\text{proj}_{\\vec{b}} \\vec{a} = \\frac{\\vec{a} \\cdot \\vec{b}}{|\\vec{b}|^2} \\vec{b} = \\frac{\\vec{a} \\cdot \\vec{b}}{\\vec{b} \\cdot \\vec{b}} \\vec{b}$$

Den skalare projeksjonen er et tall (lengden med fortegn), mens vektorprojeksjonen er en vektor parallell med $\\vec{b}$.`,
    },

    // Eksempel 5: Projeksjon
    {
      id: 'r2-5-3-example-5',
      type: 'example',
      title: 'Eksempel 5: Projeksjon av vektor',
      problem: `Finn projeksjonen av $\\vec{a} = [4, 3, 0]$ på $\\vec{b} = [2, 0, 0]$.`,
      solution: `**Løsning:**

**Steg 1:** Beregn skalarproduktet og lengden av $\\vec{b}$:
$$\\vec{a} \\cdot \\vec{b} = 4 \\cdot 2 + 3 \\cdot 0 + 0 \\cdot 0 = 8$$
$$|\\vec{b}|^2 = 2^2 + 0^2 + 0^2 = 4$$
$$|\\vec{b}| = 2$$

**Steg 2:** Skalar projeksjon:
$$\\text{comp}_{\\vec{b}} \\vec{a} = \\frac{8}{2} = 4$$

**Steg 3:** Vektor projeksjon:
$$\\text{proj}_{\\vec{b}} \\vec{a} = \\frac{8}{4} \\cdot [2, 0, 0] = 2 \\cdot [2, 0, 0] = [4, 0, 0]$$

Projeksjonen er vektoren $[4, 0, 0]$, som er komponenten av $\\vec{a}$ langs $x$-aksen.`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-5-3-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-5-3-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-1',
        number: '5.3.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut skalarproduktet $\\vec{a} \\cdot \\vec{b}$:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 2, 3]$, $\\vec{b} = [4, 5, 6]$', solution: '$\\vec{a} \\cdot \\vec{b} = 1 \\cdot 4 + 2 \\cdot 5 + 3 \\cdot 6 = 4 + 10 + 18 = 32$' },
          { label: 'b', task: '$\\vec{a} = [2, -1, 3]$, $\\vec{b} = [3, 2, -1]$', solution: '$\\vec{a} \\cdot \\vec{b} = 2 \\cdot 3 + (-1) \\cdot 2 + 3 \\cdot (-1) = 6 - 2 - 3 = 1$' },
          { label: 'c', task: '$\\vec{a} = [1, 0, -1]$, $\\vec{b} = [2, 5, 2]$', solution: '$\\vec{a} \\cdot \\vec{b} = 1 \\cdot 2 + 0 \\cdot 5 + (-1) \\cdot 2 = 2 + 0 - 2 = 0$' },
          { label: 'd', task: '$\\vec{a} = [4, -3, 0]$, $\\vec{b} = [0, 0, 5]$', solution: '$\\vec{a} \\cdot \\vec{b} = 4 \\cdot 0 + (-3) \\cdot 0 + 0 \\cdot 5 = 0$' },
        ],
        solution: 'a) 32, b) 1, c) 0, d) 0',
        hints: ['Multipliser tilsvarende komponenter og summer.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-5-3-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-2',
        number: '5.3.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Avgjør om vektorparene er ortogonale:',
        subTasks: [
          { label: 'a', task: '$\\vec{u} = [1, 2, -2]$, $\\vec{v} = [2, 1, 2]$', solution: '$\\vec{u} \\cdot \\vec{v} = 2 + 2 - 4 = 0$. **Ja, ortogonale.**' },
          { label: 'b', task: '$\\vec{u} = [3, 1, 2]$, $\\vec{v} = [1, -1, -1]$', solution: '$\\vec{u} \\cdot \\vec{v} = 3 - 1 - 2 = 0$. **Ja, ortogonale.**' },
          { label: 'c', task: '$\\vec{u} = [1, 1, 1]$, $\\vec{v} = [1, 1, -2]$', solution: '$\\vec{u} \\cdot \\vec{v} = 1 + 1 - 2 = 0$. **Ja, ortogonale.**' },
          { label: 'd', task: '$\\vec{u} = [2, 3, 1]$, $\\vec{v} = [1, -1, 1]$', solution: '$\\vec{u} \\cdot \\vec{v} = 2 - 3 + 1 = 0$. **Ja, ortogonale.**' },
        ],
        solution: 'Alle fire parene er ortogonale.',
        hints: ['Vektorene er ortogonale hvis $\\vec{u} \\cdot \\vec{v} = 0$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-5-3-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-3',
        number: '5.3.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn vinkelen mellom vektorene:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 1, 0]$', solution: '$\\vec{a} \\cdot \\vec{b} = 0$, $|\\vec{a}| = 1$, $|\\vec{b}| = 1$\n$\\cos\\theta = 0 \\Rightarrow \\theta = 90°$' },
          { label: 'b', task: '$\\vec{a} = [1, 1, 0]$, $\\vec{b} = [1, 0, 0]$', solution: '$\\vec{a} \\cdot \\vec{b} = 1$, $|\\vec{a}| = \\sqrt{2}$, $|\\vec{b}| = 1$\n$\\cos\\theta = \\frac{1}{\\sqrt{2}} \\Rightarrow \\theta = 45°$' },
          { label: 'c', task: '$\\vec{a} = [1, 1, 1]$, $\\vec{b} = [1, 1, 1]$', solution: '$\\vec{a} \\cdot \\vec{b} = 3$, $|\\vec{a}| = |\\vec{b}| = \\sqrt{3}$\n$\\cos\\theta = \\frac{3}{3} = 1 \\Rightarrow \\theta = 0°$' },
          { label: 'd', task: '$\\vec{a} = [2, 1, 2]$, $\\vec{b} = [1, -2, 0]$', solution: '$\\vec{a} \\cdot \\vec{b} = 2 - 2 + 0 = 0$, så $\\theta = 90°$' },
        ],
        solution: 'a) $90°$, b) $45°$, c) $0°$, d) $90°$',
        hints: ['Bruk $\\cos\\theta = \\frac{\\vec{a} \\cdot \\vec{b}}{|\\vec{a}||\\vec{b}|}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-5-3-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-4',
        number: '5.3.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn vinkelen mellom vektorene $\\vec{u} = [3, -1, 2]$ og $\\vec{v} = [1, 2, 1]$. Gi svaret i grader.',
        subTasks: [
          { label: 'a', task: 'Beregn $\\vec{u} \\cdot \\vec{v}$.', solution: '$\\vec{u} \\cdot \\vec{v} = 3 \\cdot 1 + (-1) \\cdot 2 + 2 \\cdot 1 = 3 - 2 + 2 = 3$' },
          { label: 'b', task: 'Beregn $|\\vec{u}|$ og $|\\vec{v}|$.', solution: '$|\\vec{u}| = \\sqrt{9 + 1 + 4} = \\sqrt{14}$\n$|\\vec{v}| = \\sqrt{1 + 4 + 1} = \\sqrt{6}$' },
          { label: 'c', task: 'Finn vinkelen $\\theta$.', solution: '$\\cos\\theta = \\frac{3}{\\sqrt{14} \\cdot \\sqrt{6}} = \\frac{3}{\\sqrt{84}} = \\frac{3}{2\\sqrt{21}}$\n$\\theta = \\arccos\\left(\\frac{3}{2\\sqrt{21}}\\right) \\approx 70{,}9°$' },
        ],
        solution: '$\\theta \\approx 70{,}9°$',
        hints: ['Bruk vinkelformelen.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-5-3-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-5',
        number: '5.3.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn verdien av $t$ slik at vektorene er ortogonale:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [t, 2, 1]$, $\\vec{b} = [3, -1, 1]$', solution: '$\\vec{a} \\cdot \\vec{b} = 3t - 2 + 1 = 3t - 1 = 0 \\Rightarrow t = \\frac{1}{3}$' },
          { label: 'b', task: '$\\vec{a} = [1, t, 2]$, $\\vec{b} = [4, 2, t]$', solution: '$\\vec{a} \\cdot \\vec{b} = 4 + 2t + 2t = 4 + 4t = 0 \\Rightarrow t = -1$' },
          { label: 'c', task: '$\\vec{a} = [t, t, 1]$, $\\vec{b} = [1, -1, t]$', solution: '$\\vec{a} \\cdot \\vec{b} = t - t + t = t = 0 \\Rightarrow t = 0$' },
        ],
        solution: 'a) $t = \\frac{1}{3}$, b) $t = -1$, c) $t = 0$',
        hints: ['Sett $\\vec{a} \\cdot \\vec{b} = 0$ og løs for $t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-5-3-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-6',
        number: '5.3.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn projeksjonen av $\\vec{a}$ på $\\vec{b}$:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [3, 4, 0]$, $\\vec{b} = [1, 0, 0]$', solution: '$\\text{proj}_{\\vec{b}} \\vec{a} = \\frac{3 \\cdot 1 + 4 \\cdot 0 + 0 \\cdot 0}{1}[1, 0, 0] = 3[1, 0, 0] = [3, 0, 0]$' },
          { label: 'b', task: '$\\vec{a} = [1, 2, 3]$, $\\vec{b} = [1, 1, 1]$', solution: '$\\vec{a} \\cdot \\vec{b} = 6$, $|\\vec{b}|^2 = 3$\n$\\text{proj}_{\\vec{b}} \\vec{a} = \\frac{6}{3}[1, 1, 1] = [2, 2, 2]$' },
          { label: 'c', task: '$\\vec{a} = [4, 3, 2]$, $\\vec{b} = [2, 0, 1]$', solution: '$\\vec{a} \\cdot \\vec{b} = 8 + 0 + 2 = 10$, $|\\vec{b}|^2 = 5$\n$\\text{proj}_{\\vec{b}} \\vec{a} = \\frac{10}{5}[2, 0, 1] = [4, 0, 2]$' },
        ],
        solution: 'a) $[3, 0, 0]$, b) $[2, 2, 2]$, c) $[4, 0, 2]$',
        hints: ['$\\text{proj}_{\\vec{b}} \\vec{a} = \\frac{\\vec{a} \\cdot \\vec{b}}{|\\vec{b}|^2} \\vec{b}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-5-3-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-7',
        number: '5.3.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'En trekant har hjørner $A = (1, 0, 0)$, $B = (0, 2, 0)$ og $C = (0, 0, 3)$. Finn vinkelen i hjørnet $A$.',
        subTasks: [
          { label: 'a', task: 'Finn vektorene $\\overrightarrow{AB}$ og $\\overrightarrow{AC}$.', solution: '$\\overrightarrow{AB} = [-1, 2, 0]$\n$\\overrightarrow{AC} = [-1, 0, 3]$' },
          { label: 'b', task: 'Beregn vinkelen mellom $\\overrightarrow{AB}$ og $\\overrightarrow{AC}$.', solution: '$\\overrightarrow{AB} \\cdot \\overrightarrow{AC} = 1 + 0 + 0 = 1$\n$|\\overrightarrow{AB}| = \\sqrt{5}$, $|\\overrightarrow{AC}| = \\sqrt{10}$\n$\\cos\\theta = \\frac{1}{\\sqrt{50}} = \\frac{1}{5\\sqrt{2}}$\n$\\theta = \\arccos\\left(\\frac{1}{5\\sqrt{2}}\\right) \\approx 81{,}9°$' },
        ],
        solution: 'Vinkelen i $A$ er ca. $81{,}9°$.',
        hints: ['Vinkelen i $A$ er vinkelen mellom $\\overrightarrow{AB}$ og $\\overrightarrow{AC}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-5-3-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-8',
        number: '5.3.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn alle verdier av $k$ slik at vinkelen mellom $\\vec{a} = [1, 1, k]$ og $\\vec{b} = [1, k, 1]$ er $60°$.',
        subTasks: [
          { label: 'a', task: 'Sett opp likningen ved hjelp av vinkelformelen.', solution: '$\\vec{a} \\cdot \\vec{b} = 1 + k + k = 1 + 2k$\n$|\\vec{a}| = \\sqrt{2 + k^2}$, $|\\vec{b}| = \\sqrt{2 + k^2}$\n$\\cos 60° = \\frac{1}{2}$\n\nLikning: $\\frac{1 + 2k}{2 + k^2} = \\frac{1}{2}$' },
          { label: 'b', task: 'Løs likningen.', solution: '$2(1 + 2k) = 2 + k^2$\n$2 + 4k = 2 + k^2$\n$k^2 - 4k = 0$\n$k(k - 4) = 0$\n$k = 0$ eller $k = 4$' },
        ],
        solution: '$k = 0$ eller $k = 4$',
        hints: ['Bruk at $\\cos 60° = \\frac{1}{2}$.', 'Sett inn i vinkelformelen og løs den kvadratiske likningen.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-5-3-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-9',
        number: '5.3.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vektoren $\\vec{v} = [3, 1, 2]$ skal dekomponeres i en komponent parallell med $\\vec{u} = [1, 1, 0]$ og en komponent ortogonal på $\\vec{u}$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}_{\\parallel}$, den parallelle komponenten.', solution: '$\\vec{v}_{\\parallel} = \\text{proj}_{\\vec{u}} \\vec{v} = \\frac{\\vec{v} \\cdot \\vec{u}}{|\\vec{u}|^2}\\vec{u} = \\frac{3 + 1 + 0}{2}[1, 1, 0] = 2[1, 1, 0] = [2, 2, 0]$' },
          { label: 'b', task: 'Finn $\\vec{v}_{\\perp}$, den ortogonale komponenten.', solution: '$\\vec{v}_{\\perp} = \\vec{v} - \\vec{v}_{\\parallel} = [3, 1, 2] - [2, 2, 0] = [1, -1, 2]$' },
          { label: 'c', task: 'Verifiser at $\\vec{v}_{\\perp} \\perp \\vec{u}$.', solution: '$\\vec{v}_{\\perp} \\cdot \\vec{u} = 1 \\cdot 1 + (-1) \\cdot 1 + 2 \\cdot 0 = 1 - 1 + 0 = 0$ ✓' },
        ],
        solution: '$\\vec{v}_{\\parallel} = [2, 2, 0]$, $\\vec{v}_{\\perp} = [1, -1, 2]$',
        hints: ['Den parallelle komponenten er projeksjonen.', 'Den ortogonale komponenten er $\\vec{v} - \\vec{v}_{\\parallel}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-5-3-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-3-ex-10',
        number: '5.3.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at for alle vektorer $\\vec{a}$ og $\\vec{b}$ gjelder: $|\\vec{a} + \\vec{b}|^2 + |\\vec{a} - \\vec{b}|^2 = 2(|\\vec{a}|^2 + |\\vec{b}|^2)$ (parallellogramidentiteten).',
        subTasks: [
          { label: 'a', task: 'Utvid $|\\vec{a} + \\vec{b}|^2$ ved hjelp av skalarproduktet.', solution: '$|\\vec{a} + \\vec{b}|^2 = (\\vec{a} + \\vec{b}) \\cdot (\\vec{a} + \\vec{b})$\n$= \\vec{a} \\cdot \\vec{a} + 2\\vec{a} \\cdot \\vec{b} + \\vec{b} \\cdot \\vec{b}$\n$= |\\vec{a}|^2 + 2\\vec{a} \\cdot \\vec{b} + |\\vec{b}|^2$' },
          { label: 'b', task: 'Utvid $|\\vec{a} - \\vec{b}|^2$ tilsvarende.', solution: '$|\\vec{a} - \\vec{b}|^2 = (\\vec{a} - \\vec{b}) \\cdot (\\vec{a} - \\vec{b})$\n$= |\\vec{a}|^2 - 2\\vec{a} \\cdot \\vec{b} + |\\vec{b}|^2$' },
          { label: 'c', task: 'Adder uttrykkene og vis identiteten.', solution: '$|\\vec{a} + \\vec{b}|^2 + |\\vec{a} - \\vec{b}|^2$\n$= (|\\vec{a}|^2 + 2\\vec{a} \\cdot \\vec{b} + |\\vec{b}|^2) + (|\\vec{a}|^2 - 2\\vec{a} \\cdot \\vec{b} + |\\vec{b}|^2)$\n$= 2|\\vec{a}|^2 + 2|\\vec{b}|^2$\n$= 2(|\\vec{a}|^2 + |\\vec{b}|^2)$ ✓' },
        ],
        solution: 'Se utledning i deloppgavene.',
        hints: ['Bruk at $|\\vec{v}|^2 = \\vec{v} \\cdot \\vec{v}$.', 'Bruk de distributive lovene for skalarprodukt.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_4: TextbookChapter = {
  id: 'r2-5-4',
  courseId: 'r2',
  chapterNumber: '5.4',
  title: 'Kryssproduktet',
  description: 'Vektorproduktet og dets geometriske egenskaper.',
  estimatedMinutes: 60,
  competenceGoals: [
    'beregne kryssproduktet av to vektorer',
    'forstå den geometriske tolkningen av kryssproduktet',
    'bruke kryssproduktet til å finne normalvektorer',
    'anvende høyrehåndsregelen for å bestemme retning',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-5-4-intro',
      type: 'text',
      content: `## Hva er kryssproduktet?

Kryssproduktet (også kalt **vektorproduktet**) er en annen måte å "multiplisere" to vektorer på. I motsetning til skalarproduktet, som gir et **tall**, gir kryssproduktet en ny **vektor**.

Den resulterende vektoren står **vinkelrett** på begge de opprinnelige vektorene, noe som gjør kryssproduktet svært nyttig for å finne normalvektorer til plan.

**Viktig:** Kryssproduktet er kun definert i tre dimensjoner!`,
    },
    {
      id: 'r2-5-4-kryssprodukt-bilde',
      type: 'image',
      src: '/images/r2/kryssprodukt.svg',
      alt: 'Kryssproduktet av to vektorer som gir en vinkelrett vektor',
      caption: 'Kryssproduktet - resultatet star vinkelrett pa begge vektorene',
    },

    // ========== DEFINISJON ==========
    {
      id: 'r2-5-4-def-kryssprodukt',
      type: 'definition',
      title: 'Kryssproduktet',
      content: `For vektorer $\\vec{a} = [a_1, a_2, a_3]$ og $\\vec{b} = [b_1, b_2, b_3]$ er **kryssproduktet** definert som:

$$\\vec{a} \\times \\vec{b} = [a_2 b_3 - a_3 b_2, \\, a_3 b_1 - a_1 b_3, \\, a_1 b_2 - a_2 b_1]$$

**Huskeregel med determinant:**
$$\\vec{a} \\times \\vec{b} = \\begin{vmatrix} \\vec{i} & \\vec{j} & \\vec{k} \\\\ a_1 & a_2 & a_3 \\\\ b_1 & b_2 & b_3 \\end{vmatrix}$$

der $\\vec{i}$, $\\vec{j}$, $\\vec{k}$ er enhetsvektorene langs aksene.`,
    },

    // Merknad om huskeregel
    {
      id: 'r2-5-4-huskeregel',
      type: 'note',
      content: `**Praktisk huskeregel for kryssproduktet:**

Tenk på komponentene syklisk: $1 \\to 2 \\to 3 \\to 1 \\to 2 \\to ...$

- Første komponent: $(a_2 b_3 - a_3 b_2)$ - "hopp over 1, bruk 2 og 3"
- Andre komponent: $(a_3 b_1 - a_1 b_3)$ - "hopp over 2, bruk 3 og 1"
- Tredje komponent: $(a_1 b_2 - a_2 b_1)$ - "hopp over 3, bruk 1 og 2"`,
    },

    // Eksempel 1: Beregne kryssprodukt
    {
      id: 'r2-5-4-example-1',
      type: 'example',
      title: 'Eksempel 1: Beregne kryssproduktet',
      problem: `Finn $\\vec{a} \\times \\vec{b}$ når $\\vec{a} = [2, 3, 1]$ og $\\vec{b} = [1, -1, 2]$.`,
      solution: `**Løsning:**

Vi bruker formelen komponent for komponent:

**Første komponent:** $a_2 b_3 - a_3 b_2 = 3 \\cdot 2 - 1 \\cdot (-1) = 6 + 1 = 7$

**Andre komponent:** $a_3 b_1 - a_1 b_3 = 1 \\cdot 1 - 2 \\cdot 2 = 1 - 4 = -3$

**Tredje komponent:** $a_1 b_2 - a_2 b_1 = 2 \\cdot (-1) - 3 \\cdot 1 = -2 - 3 = -5$

$$\\vec{a} \\times \\vec{b} = [7, -3, -5]$$`,
    },

    // ========== GEOMETRISKE EGENSKAPER ==========
    {
      id: 'r2-5-4-geometri-intro',
      type: 'text',
      content: `## Geometriske egenskaper`,
    },

    // Teorem: Kryssproduktet står vinkelrett
    {
      id: 'r2-5-4-theorem-vinkelrett',
      type: 'theorem',
      title: 'Kryssproduktet står vinkelrett på begge vektorer',
      content: `For alle vektorer $\\vec{a}$ og $\\vec{b}$ gjelder:

1. $(\\vec{a} \\times \\vec{b}) \\perp \\vec{a}$
2. $(\\vec{a} \\times \\vec{b}) \\perp \\vec{b}$

Med andre ord: Kryssproduktet $\\vec{a} \\times \\vec{b}$ er **ortogonalt** på både $\\vec{a}$ og $\\vec{b}$.`,
    },

    // Eksempel 2: Verifisere ortogonalitet
    {
      id: 'r2-5-4-example-2',
      type: 'example',
      title: 'Eksempel 2: Verifisere at kryssproduktet er ortogonalt',
      problem: `Verifiser at $\\vec{a} \\times \\vec{b}$ fra forrige eksempel er ortogonalt på både $\\vec{a}$ og $\\vec{b}$.`,
      solution: `**Løsning:**

Vi har $\\vec{a} = [2, 3, 1]$, $\\vec{b} = [1, -1, 2]$ og $\\vec{a} \\times \\vec{b} = [7, -3, -5]$.

**Sjekk 1:** Er $(\\vec{a} \\times \\vec{b}) \\perp \\vec{a}$?
$$(\\vec{a} \\times \\vec{b}) \\cdot \\vec{a} = 7 \\cdot 2 + (-3) \\cdot 3 + (-5) \\cdot 1 = 14 - 9 - 5 = 0 \\checkmark$$

**Sjekk 2:** Er $(\\vec{a} \\times \\vec{b}) \\perp \\vec{b}$?
$$(\\vec{a} \\times \\vec{b}) \\cdot \\vec{b} = 7 \\cdot 1 + (-3) \\cdot (-1) + (-5) \\cdot 2 = 7 + 3 - 10 = 0 \\checkmark$$

Bekreftet! Kryssproduktet er ortogonalt på begge vektorene.`,
    },

    // ========== HØYREHÅNDSREGELEN ==========
    {
      id: 'r2-5-4-hoyrehand-intro',
      type: 'text',
      content: `## Høyrehåndsregelen

Retningen til $\\vec{a} \\times \\vec{b}$ bestemmes av **høyrehåndsregelen**:

1. Pek fingrene på høyre hånd i retning av $\\vec{a}$
2. Krøll fingrene mot $\\vec{b}$
3. Tommelen peker nå i retning av $\\vec{a} \\times \\vec{b}$

**Alternativ:** Tenk på en skrue. Hvis du skrur fra $\\vec{a}$ mot $\\vec{b}$, beveger skruen seg i retning av $\\vec{a} \\times \\vec{b}$.`,
    },

    // ========== LENGDEN AV KRYSSPRODUKTET ==========
    {
      id: 'r2-5-4-lengde-intro',
      type: 'text',
      content: `## Lengden av kryssproduktet`,
    },

    // Teorem: Lengde
    {
      id: 'r2-5-4-theorem-lengde',
      type: 'theorem',
      title: 'Lengden av kryssproduktet',
      content: `Lengden av kryssproduktet er:

$$|\\vec{a} \\times \\vec{b}| = |\\vec{a}| \\cdot |\\vec{b}| \\cdot \\sin\\theta$$

der $\\theta$ er vinkelen mellom $\\vec{a}$ og $\\vec{b}$.

**Geometrisk tolkning:** $|\\vec{a} \\times \\vec{b}|$ er lik arealet av parallellogrammet utspent av $\\vec{a}$ og $\\vec{b}$.`,
    },

    // ========== REGNEREGLER ==========
    {
      id: 'r2-5-4-regneregler',
      type: 'theorem',
      title: 'Regneregler for kryssproduktet',
      content: `For vektorer $\\vec{a}$, $\\vec{b}$, $\\vec{c}$ og skalar $k$ gjelder:

1. $\\vec{a} \\times \\vec{b} = -(\\vec{b} \\times \\vec{a})$ (**antikommutativ** - rekkefølgen betyr noe!)
2. $\\vec{a} \\times (\\vec{b} + \\vec{c}) = \\vec{a} \\times \\vec{b} + \\vec{a} \\times \\vec{c}$ (distributiv)
3. $(k\\vec{a}) \\times \\vec{b} = k(\\vec{a} \\times \\vec{b}) = \\vec{a} \\times (k\\vec{b})$
4. $\\vec{a} \\times \\vec{a} = \\vec{0}$
5. $\\vec{a} \\times \\vec{0} = \\vec{0}$

**Viktig:** $\\vec{a} \\times \\vec{b} \\neq \\vec{b} \\times \\vec{a}$ (med mindre begge er $\\vec{0}$)`,
    },

    // Eksempel 3: Antikommutativitet
    {
      id: 'r2-5-4-example-3',
      type: 'example',
      title: 'Eksempel 3: Antikommutativitet',
      problem: `Vis at $\\vec{b} \\times \\vec{a} = -(\\vec{a} \\times \\vec{b})$ for $\\vec{a} = [1, 0, 2]$ og $\\vec{b} = [0, 1, 1]$.`,
      solution: `**Løsning:**

**Beregn $\\vec{a} \\times \\vec{b}$:**
- Første: $0 \\cdot 1 - 2 \\cdot 1 = -2$
- Andre: $2 \\cdot 0 - 1 \\cdot 1 = -1$
- Tredje: $1 \\cdot 1 - 0 \\cdot 0 = 1$

$\\vec{a} \\times \\vec{b} = [-2, -1, 1]$

**Beregn $\\vec{b} \\times \\vec{a}$:**
- Første: $1 \\cdot 2 - 1 \\cdot 0 = 2$
- Andre: $1 \\cdot 1 - 0 \\cdot 2 = 1$
- Tredje: $0 \\cdot 0 - 1 \\cdot 1 = -1$

$\\vec{b} \\times \\vec{a} = [2, 1, -1]$

Vi ser at $[2, 1, -1] = -[-2, -1, 1]$, så $\\vec{b} \\times \\vec{a} = -(\\vec{a} \\times \\vec{b})$ ✓`,
    },

    // ========== ENHETSVEKTORER ==========
    {
      id: 'r2-5-4-enhetsvektorer',
      type: 'text',
      content: `## Kryssprodukt av enhetsvektorene

De standard enhetsvektorene $\\vec{i}$, $\\vec{j}$, $\\vec{k}$ oppfyller:

$$\\vec{i} \\times \\vec{j} = \\vec{k}, \\quad \\vec{j} \\times \\vec{k} = \\vec{i}, \\quad \\vec{k} \\times \\vec{i} = \\vec{j}$$

Og omvendt rekkefølge gir negative resultater:

$$\\vec{j} \\times \\vec{i} = -\\vec{k}, \\quad \\vec{k} \\times \\vec{j} = -\\vec{i}, \\quad \\vec{i} \\times \\vec{k} = -\\vec{j}$$

**Huskeregel:** Syklisk rekkefølge ($i \\to j \\to k \\to i$) gir pluss, motsatt rekkefølge gir minus.`,
    },

    // ========== NORMALVEKTOR ==========
    {
      id: 'r2-5-4-normalvektor-intro',
      type: 'text',
      content: `## Finne normalvektor til et plan

En viktig anvendelse av kryssproduktet er å finne en **normalvektor** til et plan. Hvis vi har to vektorer $\\vec{u}$ og $\\vec{v}$ som ligger i planet, vil $\\vec{n} = \\vec{u} \\times \\vec{v}$ stå vinkelrett på planet.`,
    },

    // Eksempel 4: Normalvektor
    {
      id: 'r2-5-4-example-4',
      type: 'example',
      title: 'Eksempel 4: Finne normalvektor til et plan',
      problem: `Tre punkter $A = (1, 0, 2)$, $B = (3, 1, 1)$ og $C = (2, 2, 3)$ definerer et plan. Finn en normalvektor til dette planet.`,
      solution: `**Løsning:**

**Steg 1:** Finn to vektorer i planet:
$$\\overrightarrow{AB} = [3-1, 1-0, 1-2] = [2, 1, -1]$$
$$\\overrightarrow{AC} = [2-1, 2-0, 3-2] = [1, 2, 1]$$

**Steg 2:** Beregn kryssproduktet:
$$\\vec{n} = \\overrightarrow{AB} \\times \\overrightarrow{AC}$$

- Første: $1 \\cdot 1 - (-1) \\cdot 2 = 1 + 2 = 3$
- Andre: $(-1) \\cdot 1 - 2 \\cdot 1 = -1 - 2 = -3$
- Tredje: $2 \\cdot 2 - 1 \\cdot 1 = 4 - 1 = 3$

$$\\vec{n} = [3, -3, 3]$$

Dette kan forenkles til $\\vec{n} = [1, -1, 1]$ (delt på 3).`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-5-4-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-5-4-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-1',
        number: '5.4.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut kryssproduktet $\\vec{a} \\times \\vec{b}$:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 1, 0]$', solution: '$\\vec{a} \\times \\vec{b} = [0 \\cdot 0 - 0 \\cdot 1, 0 \\cdot 0 - 1 \\cdot 0, 1 \\cdot 1 - 0 \\cdot 0] = [0, 0, 1]$' },
          { label: 'b', task: '$\\vec{a} = [1, 2, 0]$, $\\vec{b} = [0, 0, 3]$', solution: '$\\vec{a} \\times \\vec{b} = [2 \\cdot 3 - 0 \\cdot 0, 0 \\cdot 0 - 1 \\cdot 3, 1 \\cdot 0 - 2 \\cdot 0] = [6, -3, 0]$' },
          { label: 'c', task: '$\\vec{a} = [1, 1, 1]$, $\\vec{b} = [2, 2, 2]$', solution: '$\\vec{a} \\times \\vec{b} = [1 \\cdot 2 - 1 \\cdot 2, 1 \\cdot 2 - 1 \\cdot 2, 1 \\cdot 2 - 1 \\cdot 2] = [0, 0, 0]$' },
        ],
        solution: 'a) $[0, 0, 1]$, b) $[6, -3, 0]$, c) $[0, 0, 0]$',
        hints: ['Bruk formelen komponent for komponent.', 'I c) er vektorene parallelle.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-5-4-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-2',
        number: '5.4.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut kryssproduktet $\\vec{u} \\times \\vec{v}$:',
        subTasks: [
          { label: 'a', task: '$\\vec{u} = [2, 1, 3]$, $\\vec{v} = [1, -1, 2]$', solution: '$(1 \\cdot 2 - 3 \\cdot (-1), 3 \\cdot 1 - 2 \\cdot 2, 2 \\cdot (-1) - 1 \\cdot 1) = (5, -1, -3)$' },
          { label: 'b', task: '$\\vec{u} = [3, 0, -1]$, $\\vec{v} = [2, 4, 0]$', solution: '$(0 \\cdot 0 - (-1) \\cdot 4, (-1) \\cdot 2 - 3 \\cdot 0, 3 \\cdot 4 - 0 \\cdot 2) = (4, -2, 12)$' },
        ],
        solution: 'a) $[5, -1, -3]$, b) $[4, -2, 12]$',
        hints: ['Første komponent: $u_2 v_3 - u_3 v_2$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-5-4-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-3',
        number: '5.4.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'La $\\vec{a} = [1, 2, -1]$ og $\\vec{b} = [3, 0, 2]$.',
        subTasks: [
          { label: 'a', task: 'Beregn $\\vec{a} \\times \\vec{b}$.', solution: '$(2 \\cdot 2 - (-1) \\cdot 0, (-1) \\cdot 3 - 1 \\cdot 2, 1 \\cdot 0 - 2 \\cdot 3) = (4, -5, -6)$' },
          { label: 'b', task: 'Verifiser at resultatet er ortogonalt på $\\vec{a}$.', solution: '$[4, -5, -6] \\cdot [1, 2, -1] = 4 - 10 + 6 = 0$ ✓' },
          { label: 'c', task: 'Verifiser at resultatet er ortogonalt på $\\vec{b}$.', solution: '$[4, -5, -6] \\cdot [3, 0, 2] = 12 + 0 - 12 = 0$ ✓' },
        ],
        solution: '$\\vec{a} \\times \\vec{b} = [4, -5, -6]$, og dette er ortogonalt på både $\\vec{a}$ og $\\vec{b}$.',
        hints: ['Bruk skalarproduktet for å sjekke ortogonalitet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-5-4-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-4',
        number: '5.4.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn en vektor som er ortogonal på både $\\vec{u} = [1, 1, 0]$ og $\\vec{v} = [1, 0, 1]$.',
        subTasks: [
          { label: 'a', task: 'Beregn $\\vec{u} \\times \\vec{v}$.', solution: '$\\vec{u} \\times \\vec{v} = (1 \\cdot 1 - 0 \\cdot 0, 0 \\cdot 1 - 1 \\cdot 1, 1 \\cdot 0 - 1 \\cdot 1) = (1, -1, -1)$' },
          { label: 'b', task: 'Finn en enhetsvektor i samme retning.', solution: '$|\\vec{n}| = \\sqrt{1 + 1 + 1} = \\sqrt{3}$\n$\\hat{n} = \\frac{1}{\\sqrt{3}}[1, -1, -1]$' },
        ],
        solution: '$\\vec{n} = [1, -1, -1]$ er ortogonal på begge. Enhetsvektoren er $\\frac{1}{\\sqrt{3}}[1, -1, -1]$.',
        hints: ['Kryssproduktet gir en vektor ortogonal på begge.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-5-4-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-5',
        number: '5.4.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Tre punkter $A = (1, 0, 0)$, $B = (0, 2, 0)$ og $C = (0, 0, 3)$ definerer et plan. Finn en normalvektor til planet.',
        subTasks: [
          { label: 'a', task: 'Finn $\\overrightarrow{AB}$ og $\\overrightarrow{AC}$.', solution: '$\\overrightarrow{AB} = [-1, 2, 0]$\n$\\overrightarrow{AC} = [-1, 0, 3]$' },
          { label: 'b', task: 'Beregn normalvektoren $\\vec{n} = \\overrightarrow{AB} \\times \\overrightarrow{AC}$.', solution: '$\\vec{n} = (2 \\cdot 3 - 0 \\cdot 0, 0 \\cdot (-1) - (-1) \\cdot 3, (-1) \\cdot 0 - 2 \\cdot (-1))$\n$= (6, 3, 2)$' },
        ],
        solution: '$\\vec{n} = [6, 3, 2]$',
        hints: ['Normalvektoren står vinkelrett på planet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-5-4-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-6',
        number: '5.4.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk regnereglene til å forenkle uttrykkene:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} \\times \\vec{a}$', solution: '$\\vec{a} \\times \\vec{a} = \\vec{0}$ (en vektor krysset med seg selv er alltid null)' },
          { label: 'b', task: '$\\vec{a} \\times \\vec{b} + \\vec{b} \\times \\vec{a}$', solution: '$\\vec{a} \\times \\vec{b} + \\vec{b} \\times \\vec{a} = \\vec{a} \\times \\vec{b} - \\vec{a} \\times \\vec{b} = \\vec{0}$' },
          { label: 'c', task: '$2(\\vec{a} \\times \\vec{b}) - \\vec{a} \\times (2\\vec{b})$', solution: '$2(\\vec{a} \\times \\vec{b}) - 2(\\vec{a} \\times \\vec{b}) = \\vec{0}$' },
        ],
        solution: 'Alle uttrykkene forenkles til $\\vec{0}$.',
        hints: ['Bruk antikommutativitet: $\\vec{b} \\times \\vec{a} = -(\\vec{a} \\times \\vec{b})$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-5-4-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-7',
        number: '5.4.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn lengden av $\\vec{a} \\times \\vec{b}$ når $|\\vec{a}| = 3$, $|\\vec{b}| = 4$ og vinkelen mellom dem er $30°$.',
        subTasks: [
          { label: 'a', task: 'Bruk formelen $|\\vec{a} \\times \\vec{b}| = |\\vec{a}||\\vec{b}|\\sin\\theta$.', solution: '$|\\vec{a} \\times \\vec{b}| = 3 \\cdot 4 \\cdot \\sin 30° = 12 \\cdot \\frac{1}{2} = 6$' },
        ],
        solution: '$|\\vec{a} \\times \\vec{b}| = 6$',
        hints: ['$\\sin 30° = \\frac{1}{2}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-5-4-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-8',
        number: '5.4.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at for alle vektorer $\\vec{a}$, $\\vec{b}$ og $\\vec{c}$ gjelder: $(\\vec{a} \\times \\vec{b}) \\cdot \\vec{c} = \\vec{a} \\cdot (\\vec{b} \\times \\vec{c})$.',
        subTasks: [
          { label: 'a', task: 'Regn ut begge sider for $\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 1, 0]$, $\\vec{c} = [0, 0, 1]$.', solution: 'Venstre side: $\\vec{a} \\times \\vec{b} = [0, 0, 1]$, så $(\\vec{a} \\times \\vec{b}) \\cdot \\vec{c} = 1$.\n\nHøyre side: $\\vec{b} \\times \\vec{c} = [1, 0, 0]$, så $\\vec{a} \\cdot (\\vec{b} \\times \\vec{c}) = 1$.\n\nBegge sider gir 1. ✓' },
          { label: 'b', task: 'Hva representerer dette tallet geometrisk?', solution: 'Tallet $(\\vec{a} \\times \\vec{b}) \\cdot \\vec{c}$ er volumet av parallellpipedumet (den tredimensjonale parallellogrammet) utspent av $\\vec{a}$, $\\vec{b}$ og $\\vec{c}$.' },
        ],
        solution: 'Identiteten holder, og representerer volumet av parallellpipedumet.',
        hints: ['Dette kalles "trippelproduktet" eller "skalart trippelprodukt".'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-5-4-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-9',
        number: '5.4.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn alle vektorer $\\vec{v} = [x, y, z]$ som er ortogonale på både $\\vec{a} = [1, 2, 1]$ og $\\vec{b} = [2, 1, -1]$.',
        subTasks: [
          { label: 'a', task: 'Metode 1: Bruk kryssproduktet.', solution: '$\\vec{a} \\times \\vec{b} = (2 \\cdot (-1) - 1 \\cdot 1, 1 \\cdot 2 - 1 \\cdot (-1), 1 \\cdot 1 - 2 \\cdot 2)$\n$= (-3, 3, -3) = -3(1, -1, 1)$\n\nAlle vektorer $\\vec{v} = t[1, -1, 1]$ for $t \\in \\mathbb{R}$ er ortogonale på begge.' },
          { label: 'b', task: 'Metode 2: Sett opp likningssystemet.', solution: '$\\vec{v} \\cdot \\vec{a} = 0: x + 2y + z = 0$\n$\\vec{v} \\cdot \\vec{b} = 0: 2x + y - z = 0$\n\nFra andre: $z = 2x + y$. Sett inn i første:\n$x + 2y + 2x + y = 0 \\Rightarrow 3x + 3y = 0 \\Rightarrow y = -x$\nDa: $z = 2x - x = x$\n\n$\\vec{v} = [x, -x, x] = x[1, -1, 1]$' },
        ],
        solution: 'Alle vektorer på formen $\\vec{v} = t[1, -1, 1]$ for $t \\neq 0$.',
        hints: ['Kryssproduktet gir én slik vektor. Alle multipla er også ortogonale på begge.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-5-4-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-4-ex-10',
        number: '5.4.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'La $\\vec{a}$, $\\vec{b}$ og $\\vec{c}$ være vilkårlige vektorer. Vis at $\\vec{a} \\times (\\vec{b} \\times \\vec{c}) = (\\vec{a} \\cdot \\vec{c})\\vec{b} - (\\vec{a} \\cdot \\vec{b})\\vec{c}$ (BAC-CAB-regelen).',
        subTasks: [
          { label: 'a', task: 'Verifiser formelen for $\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 1, 0]$, $\\vec{c} = [0, 0, 1]$.', solution: 'Venstre side:\n$\\vec{b} \\times \\vec{c} = [1, 0, 0]$\n$\\vec{a} \\times [1, 0, 0] = [0, 0, 0]$\n\nHøyre side:\n$\\vec{a} \\cdot \\vec{c} = 0$, $\\vec{a} \\cdot \\vec{b} = 0$\n$0 \\cdot \\vec{b} - 0 \\cdot \\vec{c} = [0, 0, 0]$\n\nBegge sider gir $\\vec{0}$. ✓' },
          { label: 'b', task: 'Verifiser for $\\vec{a} = [1, 1, 0]$, $\\vec{b} = [1, 0, 1]$, $\\vec{c} = [0, 1, 1]$.', solution: 'Venstre side:\n$\\vec{b} \\times \\vec{c} = [-1, -1, 1]$\n$\\vec{a} \\times [-1, -1, 1] = [1, -1, 0]$\n\nHøyre side:\n$\\vec{a} \\cdot \\vec{c} = 1$, $\\vec{a} \\cdot \\vec{b} = 1$\n$1 \\cdot [1, 0, 1] - 1 \\cdot [0, 1, 1] = [1, -1, 0]$ ✓' },
        ],
        solution: 'Formelen er verifisert i begge tilfeller.',
        hints: ['Denne formelen kalles "vector triple product expansion" eller BAC-CAB.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_5: TextbookChapter = {
  id: 'r2-5-5',
  courseId: 'r2',
  chapterNumber: '5.5',
  title: 'Areal og volum med vektorer',
  description: 'Beregne areal og volum ved hjelp av kryss- og skalarprodukt.',
  estimatedMinutes: 55,
  competenceGoals: [
    'beregne arealet av et parallellogram med vektorer',
    'beregne arealet av en trekant i rommet',
    'beregne volumet av et parallellpipedum',
    'bruke trippelproduktet til volumberegning',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-5-5-intro',
      type: 'text',
      content: `## Areal og volum med vektorer

Vektorregning gir oss elegante metoder for å beregne areal og volum av geometriske figurer i rommet. I dette kapittelet lærer vi hvordan kryssproduktet og trippelproduktet brukes til slike beregninger.`,
    },

    // ========== AREAL AV PARALLELLOGRAM ==========
    {
      id: 'r2-5-5-parallellogram-intro',
      type: 'text',
      content: `## Arealet av et parallellogram

Et parallellogram utspent av vektorene $\\vec{a}$ og $\\vec{b}$ har et åreal som kan beregnes ved hjelp av kryssproduktet.`,
    },

    // Teorem: Areal av parallellogram
    {
      id: 'r2-5-5-theorem-parallellogram',
      type: 'theorem',
      title: 'Arealet av et parallellogram',
      content: `Arealet $A$ av parallellogrammet utspent av $\\vec{a}$ og $\\vec{b}$ er:

$$A = |\\vec{a} \\times \\vec{b}|$$

**Forklaring:** Fra formelen $|\\vec{a} \\times \\vec{b}| = |\\vec{a}||\\vec{b}|\\sin\\theta$ ser vi at dette er grunnlinje ganget med høyde, som er formelen for arealet av et parallellogram.`,
    },

    // Eksempel 1: Areal av parallellogram
    {
      id: 'r2-5-5-example-1',
      type: 'example',
      title: 'Eksempel 1: Areal av parallellogram',
      problem: `Finn arealet av parallellogrammet utspent av $\\vec{a} = [1, 2, 0]$ og $\\vec{b} = [3, 0, 4]$.`,
      solution: `**Løsning:**

**Steg 1:** Beregn kryssproduktet:
$$\\vec{a} \\times \\vec{b} = [2 \\cdot 4 - 0 \\cdot 0, \\, 0 \\cdot 3 - 1 \\cdot 4, \\, 1 \\cdot 0 - 2 \\cdot 3]$$
$$= [8, -4, -6]$$

**Steg 2:** Finn lengden:
$$|\\vec{a} \\times \\vec{b}| = \\sqrt{8^2 + (-4)^2 + (-6)^2} = \\sqrt{64 + 16 + 36} = \\sqrt{116} = 2\\sqrt{29}$$

Arealet er $2\\sqrt{29} \\approx 10{,}77$.`,
    },

    // ========== AREAL AV TREKANT ==========
    {
      id: 'r2-5-5-trekant-intro',
      type: 'text',
      content: `## Arealet av en trekant

En trekant er halvparten av et parallellogram, så vi får en enkel formel.`,
    },

    // Teorem: Areal av trekant
    {
      id: 'r2-5-5-theorem-trekant',
      type: 'theorem',
      title: 'Arealet av en trekant',
      content: `Arealet $A$ av trekanten med hjørner $A$, $B$ og $C$ er:

$$A = \\frac{1}{2}|\\overrightarrow{AB} \\times \\overrightarrow{AC}|$$

Alternativt kan vi bruke hvilke som helst to sidevektorer fra samme hjørne.`,
    },

    // Eksempel 2: Areal av trekant
    {
      id: 'r2-5-5-example-2',
      type: 'example',
      title: 'Eksempel 2: Areal av trekant i rommet',
      problem: `Finn arealet av trekanten med hjørner $A = (1, 0, 0)$, $B = (0, 2, 0)$ og $C = (0, 0, 3)$.`,
      solution: `**Løsning:**

**Steg 1:** Finn sidevektorene fra $A$:
$$\\overrightarrow{AB} = [-1, 2, 0]$$
$$\\overrightarrow{AC} = [-1, 0, 3]$$

**Steg 2:** Beregn kryssproduktet:
$$\\overrightarrow{AB} \\times \\overrightarrow{AC} = [2 \\cdot 3 - 0 \\cdot 0, \\, 0 \\cdot (-1) - (-1) \\cdot 3, \\, (-1) \\cdot 0 - 2 \\cdot (-1)]$$
$$= [6, 3, 2]$$

**Steg 3:** Finn lengden og del på 2:
$$|\\overrightarrow{AB} \\times \\overrightarrow{AC}| = \\sqrt{36 + 9 + 4} = \\sqrt{49} = 7$$

$$A = \\frac{1}{2} \\cdot 7 = 3{,}5$$

Arealet av trekanten er $3{,}5$.`,
    },

    // ========== VOLUM AV PARALLELLPIPEDUM ==========
    {
      id: 'r2-5-5-volum-intro',
      type: 'text',
      content: `## Volumet av et parallellpipedum

Et **parallellpipedum** er en tredimensjonal figur der alle seks sideflater er parallellogrammer. Tenk på det som en "skjev boks" utspent av tre vektorer.`,
    },

    // Definisjon: Trippelprodukt
    {
      id: 'r2-5-5-def-trippelprodukt',
      type: 'definition',
      title: 'Det skalare trippelproduktet',
      content: `**Trippelproduktet** av tre vektorer $\\vec{a}$, $\\vec{b}$ og $\\vec{c}$ er:

$$[\\vec{a}, \\vec{b}, \\vec{c}] = \\vec{a} \\cdot (\\vec{b} \\times \\vec{c}) = (\\vec{a} \\times \\vec{b}) \\cdot \\vec{c}$$

Dette kan også beregnes som en $3 \\times 3$ determinant:

$$[\\vec{a}, \\vec{b}, \\vec{c}] = \\begin{vmatrix} a_1 & a_2 & a_3 \\\\ b_1 & b_2 & b_3 \\\\ c_1 & c_2 & c_3 \\end{vmatrix}$$`,
    },

    // Teorem: Volum av parallellpipedum
    {
      id: 'r2-5-5-theorem-volum',
      type: 'theorem',
      title: 'Volumet av et parallellpipedum',
      content: `Volumet $V$ av parallellpipedumet utspent av $\\vec{a}$, $\\vec{b}$ og $\\vec{c}$ er:

$$V = |[\\vec{a}, \\vec{b}, \\vec{c}]| = |\\vec{a} \\cdot (\\vec{b} \\times \\vec{c})|$$

**Merk:** Vi tar absoluttverdien fordi trippelproduktet kan være negativt (avhengig av orienteringen av vektorene).`,
    },

    // Eksempel 3: Volum av parallellpipedum
    {
      id: 'r2-5-5-example-3',
      type: 'example',
      title: 'Eksempel 3: Volum av parallellpipedum',
      problem: `Finn volumet av parallellpipedumet utspent av $\\vec{a} = [1, 0, 0]$, $\\vec{b} = [1, 2, 0]$ og $\\vec{c} = [1, 2, 3]$.`,
      solution: `**Løsning:**

**Steg 1:** Beregn $\\vec{b} \\times \\vec{c}$:
$$\\vec{b} \\times \\vec{c} = [2 \\cdot 3 - 0 \\cdot 2, \\, 0 \\cdot 1 - 1 \\cdot 3, \\, 1 \\cdot 2 - 2 \\cdot 1] = [6, -3, 0]$$

**Steg 2:** Beregn skalarproduktet $\\vec{a} \\cdot (\\vec{b} \\times \\vec{c})$:
$$\\vec{a} \\cdot [6, -3, 0] = 1 \\cdot 6 + 0 \\cdot (-3) + 0 \\cdot 0 = 6$$

**Steg 3:** Ta absoluttverdien:
$$V = |6| = 6$$

Volumet er 6.`,
    },

    // ========== VOLUM AV TETRAEDER ==========
    {
      id: 'r2-5-5-tetraeder-intro',
      type: 'text',
      content: `## Volumet av et tetraeder

Et **tetraeder** er en pyramide med fire trekantflater. Volumet er en sjettedel av det tilsvarende parallellpipedumet.`,
    },

    // Teorem: Volum av tetraeder
    {
      id: 'r2-5-5-theorem-tetraeder',
      type: 'theorem',
      title: 'Volumet av et tetraeder',
      content: `Et tetraeder med hjørner $A$, $B$, $C$ og $D$ har volum:

$$V = \\frac{1}{6}|\\overrightarrow{AB} \\cdot (\\overrightarrow{AC} \\times \\overrightarrow{AD})|$$

Dette følger av at et tetraeder har volum $\\frac{1}{3}$ av en prismebase, og at prismen har volum $\\frac{1}{2}$ av parallellpipedumet.`,
    },

    // Eksempel 4: Volum av tetraeder
    {
      id: 'r2-5-5-example-4',
      type: 'example',
      title: 'Eksempel 4: Volum av tetraeder',
      problem: `Finn volumet av tetraederet med hjørner $A = (0, 0, 0)$, $B = (1, 0, 0)$, $C = (0, 1, 0)$ og $D = (0, 0, 1)$.`,
      solution: `**Løsning:**

**Steg 1:** Finn kantvektorene fra $A$:
$$\\overrightarrow{AB} = [1, 0, 0]$$
$$\\overrightarrow{AC} = [0, 1, 0]$$
$$\\overrightarrow{AD} = [0, 0, 1]$$

**Steg 2:** Beregn $\\overrightarrow{AC} \\times \\overrightarrow{AD}$:
$$\\overrightarrow{AC} \\times \\overrightarrow{AD} = [1 \\cdot 1 - 0 \\cdot 0, \\, 0 \\cdot 0 - 0 \\cdot 1, \\, 0 \\cdot 0 - 1 \\cdot 0] = [1, 0, 0]$$

**Steg 3:** Beregn trippelproduktet:
$$\\overrightarrow{AB} \\cdot [1, 0, 0] = 1$$

**Steg 4:** Finn volumet:
$$V = \\frac{1}{6}|1| = \\frac{1}{6}$$

Volumet av tetraederet er $\\frac{1}{6}$.`,
    },

    // ========== KOPLANARE VEKTORER ==========
    {
      id: 'r2-5-5-koplanar-intro',
      type: 'text',
      content: `## Koplanare vektorer

Tre vektorer er **koplanare** hvis de alle ligger i samme plan. Dette skjer når trippelproduktet er null.`,
    },

    // Teorem: Koplanaritet
    {
      id: 'r2-5-5-theorem-koplanar',
      type: 'theorem',
      title: 'Test for koplanaritet',
      content: `Tre vektorer $\\vec{a}$, $\\vec{b}$ og $\\vec{c}$ er koplanare hvis og bare hvis:

$$[\\vec{a}, \\vec{b}, \\vec{c}] = \\vec{a} \\cdot (\\vec{b} \\times \\vec{c}) = 0$$

**Geometrisk tolkning:** Hvis vektorene er koplanare, har parallellpipedumet volum null - det er "flatt".`,
    },

    // Eksempel 5: Koplanaritet
    {
      id: 'r2-5-5-example-5',
      type: 'example',
      title: 'Eksempel 5: Undersøke koplanaritet',
      problem: `Undersøk om vektorene $\\vec{a} = [1, 2, 3]$, $\\vec{b} = [4, 5, 6]$ og $\\vec{c} = [7, 8, 9]$ er koplanare.`,
      solution: `**Løsning:**

Vi beregner trippelproduktet:

**Steg 1:** Finn $\\vec{b} \\times \\vec{c}$:
$$\\vec{b} \\times \\vec{c} = [5 \\cdot 9 - 6 \\cdot 8, \\, 6 \\cdot 7 - 4 \\cdot 9, \\, 4 \\cdot 8 - 5 \\cdot 7]$$
$$= [45 - 48, 42 - 36, 32 - 35] = [-3, 6, -3]$$

**Steg 2:** Finn $\\vec{a} \\cdot (\\vec{b} \\times \\vec{c})$:
$$[1, 2, 3] \\cdot [-3, 6, -3] = -3 + 12 - 9 = 0$$

Siden trippelproduktet er 0, er vektorene **koplanare**.

(Dette gir mening fordi $\\vec{c} = \\vec{a} + \\vec{b}$: $[1,2,3] + [4,5,6] + [2,1,0] = [7,8,9]$... Nei, la oss sjekke: de ligger faktisk i et plan fordi $\\vec{c} - \\vec{b} = [3, 3, 3]$ og $\\vec{b} - \\vec{a} = [3, 3, 3]$, så de er i aritmetisk progresjon.)`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-5-5-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-5-5-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-1',
        number: '5.5.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn arealet av parallellogrammet utspent av vektorene:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 0, 0]$ og $\\vec{b} = [0, 2, 0]$', solution: '$\\vec{a} \\times \\vec{b} = [0, 0, 2]$, $|\\vec{a} \\times \\vec{b}| = 2$. Areal = 2.' },
          { label: 'b', task: '$\\vec{a} = [3, 0, 0]$ og $\\vec{b} = [0, 0, 4]$', solution: '$\\vec{a} \\times \\vec{b} = [0, -12, 0]$, $|\\vec{a} \\times \\vec{b}| = 12$. Areal = 12.' },
          { label: 'c', task: '$\\vec{a} = [1, 1, 0]$ og $\\vec{b} = [0, 1, 1]$', solution: '$\\vec{a} \\times \\vec{b} = [1, -1, 1]$, $|\\vec{a} \\times \\vec{b}| = \\sqrt{3}$. Areal = $\\sqrt{3}$.' },
        ],
        solution: 'a) 2, b) 12, c) $\\sqrt{3}$',
        hints: ['Areal = $|\\vec{a} \\times \\vec{b}|$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-5-5-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-2',
        number: '5.5.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn arealet av trekanten med hjørner:',
        subTasks: [
          { label: 'a', task: '$A = (0, 0, 0)$, $B = (1, 0, 0)$, $C = (0, 1, 0)$', solution: '$\\overrightarrow{AB} \\times \\overrightarrow{AC} = [0, 0, 1]$. Areal = $\\frac{1}{2} \\cdot 1 = \\frac{1}{2}$.' },
          { label: 'b', task: '$A = (1, 1, 1)$, $B = (2, 1, 1)$, $C = (1, 2, 1)$', solution: '$\\overrightarrow{AB} = [1, 0, 0]$, $\\overrightarrow{AC} = [0, 1, 0]$. Kryssprodukt = $[0, 0, 1]$. Areal = $\\frac{1}{2}$.' },
        ],
        solution: 'a) $\\frac{1}{2}$, b) $\\frac{1}{2}$',
        hints: ['Trekantareal = $\\frac{1}{2}|\\overrightarrow{AB} \\times \\overrightarrow{AC}|$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-5-5-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-3',
        number: '5.5.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn arealet av trekanten med hjørner $A = (1, 2, 3)$, $B = (4, 0, 5)$ og $C = (2, 1, 0)$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\overrightarrow{AB}$ og $\\overrightarrow{AC}$.', solution: '$\\overrightarrow{AB} = [3, -2, 2]$, $\\overrightarrow{AC} = [1, -1, -3]$' },
          { label: 'b', task: 'Beregn $\\overrightarrow{AB} \\times \\overrightarrow{AC}$.', solution: '$\\overrightarrow{AB} \\times \\overrightarrow{AC} = [(-2)(-3) - 2(-1), 2(1) - 3(-3), 3(-1) - (-2)(1)]$\n$= [6 + 2, 2 + 9, -3 + 2] = [8, 11, -1]$' },
          { label: 'c', task: 'Finn arealet.', solution: '$|[8, 11, -1]| = \\sqrt{64 + 121 + 1} = \\sqrt{186}$\nAreal = $\\frac{1}{2}\\sqrt{186} \\approx 6{,}82$' },
        ],
        solution: 'Arealet er $\\frac{1}{2}\\sqrt{186}$.',
        hints: ['Husk å dele på 2 for trekant.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-5-5-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-4',
        number: '5.5.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn volumet av parallellpipedumet utspent av:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 1, 0]$, $\\vec{c} = [0, 0, 1]$', solution: '$\\vec{b} \\times \\vec{c} = [1, 0, 0]$\n$\\vec{a} \\cdot [1, 0, 0] = 1$\nVolum = $|1| = 1$' },
          { label: 'b', task: '$\\vec{a} = [2, 0, 0]$, $\\vec{b} = [0, 3, 0]$, $\\vec{c} = [0, 0, 4]$', solution: '$\\vec{b} \\times \\vec{c} = [12, 0, 0]$\n$\\vec{a} \\cdot [12, 0, 0] = 24$\nVolum = 24' },
        ],
        solution: 'a) 1, b) 24',
        hints: ['Volum = $|\\vec{a} \\cdot (\\vec{b} \\times \\vec{c})|$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-5-5-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-5',
        number: '5.5.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn volumet av tetraederet med hjørner $A = (0, 0, 0)$, $B = (2, 0, 0)$, $C = (0, 3, 0)$ og $D = (0, 0, 4)$.',
        subTasks: [
          { label: 'a', task: 'Finn kantvektorene fra $A$.', solution: '$\\overrightarrow{AB} = [2, 0, 0]$, $\\overrightarrow{AC} = [0, 3, 0]$, $\\overrightarrow{AD} = [0, 0, 4]$' },
          { label: 'b', task: 'Beregn trippelproduktet.', solution: '$\\overrightarrow{AC} \\times \\overrightarrow{AD} = [12, 0, 0]$\n$\\overrightarrow{AB} \\cdot [12, 0, 0] = 24$' },
          { label: 'c', task: 'Finn volumet.', solution: '$V = \\frac{1}{6}|24| = 4$' },
        ],
        solution: 'Volumet er 4.',
        hints: ['Tetraedervolum = $\\frac{1}{6}$ ganger trippelproduktet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-5-5-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-6',
        number: '5.5.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Undersøk om vektorene er koplanare:',
        subTasks: [
          { label: 'a', task: '$\\vec{a} = [1, 0, 1]$, $\\vec{b} = [0, 1, 1]$, $\\vec{c} = [1, 1, 2]$', solution: '$\\vec{b} \\times \\vec{c} = [1 \\cdot 2 - 1 \\cdot 1, 1 \\cdot 1 - 0 \\cdot 2, 0 \\cdot 1 - 1 \\cdot 1] = [1, 1, -1]$\n$\\vec{a} \\cdot [1, 1, -1] = 1 + 0 - 1 = 0$\n**Ja, koplanare.** (Merk: $\\vec{c} = \\vec{a} + \\vec{b}$)' },
          { label: 'b', task: '$\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 1, 0]$, $\\vec{c} = [1, 1, 1]$', solution: '$\\vec{b} \\times \\vec{c} = [-1, 0, 1]$\n$\\vec{a} \\cdot [-1, 0, 1] = -1 \\neq 0$\n**Nei, ikke koplanare.**' },
        ],
        solution: 'a) Ja, b) Nei',
        hints: ['Vektorene er koplanare hvis trippelproduktet er 0.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-5-5-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-7',
        number: '5.5.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Et parallellogram har hjørner $A = (1, 0, 2)$, $B = (3, 1, 1)$, $C$ og $D = (2, 2, 3)$, der $ABCD$ er et parallellogram (i den rekkefølgen).',
        subTasks: [
          { label: 'a', task: 'Finn koordinatene til $C$.', solution: 'I et parallellogram er $\\overrightarrow{AB} = \\overrightarrow{DC}$.\n$\\overrightarrow{AB} = [2, 1, -1]$\n$C = D + \\overrightarrow{AB} = (2+2, 2+1, 3-1) = (4, 3, 2)$' },
          { label: 'b', task: 'Finn arealet av parallellogrammet.', solution: '$\\overrightarrow{AB} = [2, 1, -1]$, $\\overrightarrow{AD} = [1, 2, 1]$\n$\\overrightarrow{AB} \\times \\overrightarrow{AD} = [1 \\cdot 1 - (-1) \\cdot 2, (-1) \\cdot 1 - 2 \\cdot 1, 2 \\cdot 2 - 1 \\cdot 1] = [3, -3, 3]$\nAreal = $|[3, -3, 3]| = 3\\sqrt{3}$' },
        ],
        solution: 'a) $C = (4, 3, 2)$, b) Areal = $3\\sqrt{3}$',
        hints: ['Bruk at motstående sider i et parallellogram er like.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-5-5-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-8',
        number: '5.5.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at arealet av trekanten med hjørner $(x_1, y_1)$, $(x_2, y_2)$ og $(x_3, y_3)$ i $xy$-planet er $\\frac{1}{2}|x_1(y_2 - y_3) + x_2(y_3 - y_1) + x_3(y_1 - y_2)|$.',
        subTasks: [
          { label: 'a', task: 'Skriv hjørnene som 3D-punkter med $z = 0$.', solution: '$A = (x_1, y_1, 0)$, $B = (x_2, y_2, 0)$, $C = (x_3, y_3, 0)$' },
          { label: 'b', task: 'Finn kryssproduktet $\\overrightarrow{AB} \\times \\overrightarrow{AC}$.', solution: '$\\overrightarrow{AB} = [x_2 - x_1, y_2 - y_1, 0]$\n$\\overrightarrow{AC} = [x_3 - x_1, y_3 - y_1, 0]$\n$\\overrightarrow{AB} \\times \\overrightarrow{AC} = [0, 0, (x_2-x_1)(y_3-y_1) - (y_2-y_1)(x_3-x_1)]$' },
          { label: 'c', task: 'Utvid og forenkle $z$-komponenten.', solution: '$(x_2-x_1)(y_3-y_1) - (y_2-y_1)(x_3-x_1)$\n$= x_2 y_3 - x_2 y_1 - x_1 y_3 + x_1 y_1 - y_2 x_3 + y_2 x_1 + y_1 x_3 - y_1 x_1$\n$= x_1(y_2 - y_3) + x_2(y_3 - y_1) + x_3(y_1 - y_2)$' },
        ],
        solution: 'Arealet blir $\\frac{1}{2}|x_1(y_2 - y_3) + x_2(y_3 - y_1) + x_3(y_1 - y_2)|$.',
        hints: ['I planet har kryssproduktet bare $z$-komponent.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-5-5-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-9',
        number: '5.5.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn volumet av tetraederet med hjørner $A = (1, 1, 1)$, $B = (2, 3, 1)$, $C = (1, 2, 3)$ og $D = (3, 1, 2)$.',
        subTasks: [
          { label: 'a', task: 'Finn kantvektorene fra $A$.', solution: '$\\overrightarrow{AB} = [1, 2, 0]$\n$\\overrightarrow{AC} = [0, 1, 2]$\n$\\overrightarrow{AD} = [2, 0, 1]$' },
          { label: 'b', task: 'Beregn trippelproduktet.', solution: '$\\overrightarrow{AC} \\times \\overrightarrow{AD} = [1 \\cdot 1 - 2 \\cdot 0, 2 \\cdot 2 - 0 \\cdot 1, 0 \\cdot 0 - 1 \\cdot 2] = [1, 4, -2]$\n$\\overrightarrow{AB} \\cdot [1, 4, -2] = 1 + 8 + 0 = 9$' },
          { label: 'c', task: 'Finn volumet.', solution: '$V = \\frac{1}{6}|9| = \\frac{3}{2}$' },
        ],
        solution: 'Volumet er $\\frac{3}{2}$.',
        hints: ['Bruk tetraederformelen med $\\frac{1}{6}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-5-5-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-5-ex-10',
        number: '5.5.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Fire punkter $A = (0, 0, 0)$, $B = (1, 0, 0)$, $C = (0, 1, 0)$ og $D = (a, b, c)$ danner et tetraeder med volum $\\frac{1}{3}$. Finn en sammenheng mellom $a$, $b$ og $c$.',
        subTasks: [
          { label: 'a', task: 'Sett opp volumformelen.', solution: '$\\overrightarrow{AB} = [1, 0, 0]$, $\\overrightarrow{AC} = [0, 1, 0]$, $\\overrightarrow{AD} = [a, b, c]$\n$\\overrightarrow{AC} \\times \\overrightarrow{AD} = [c, 0, -a]$ (sjekk: $[1 \\cdot c - 0 \\cdot b, 0 \\cdot a - 0 \\cdot c, 0 \\cdot b - 1 \\cdot a] = [c, 0, -a]$)\n$\\overrightarrow{AB} \\cdot [c, 0, -a] = c$' },
          { label: 'b', task: 'Løs for sammenhengen.', solution: '$V = \\frac{1}{6}|c| = \\frac{1}{3}$\n$|c| = 2$\n$c = 2$ eller $c = -2$\n\nSammenhengen er at $c = \\pm 2$ (uavhengig av $a$ og $b$).' },
        ],
        solution: '$c = 2$ eller $c = -2$',
        hints: ['Volumet avhenger bare av høyden over grunnflaten.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_6: TextbookChapter = {
  id: 'r2-5-6',
  courseId: 'r2',
  chapterNumber: '5.6',
  title: 'Ligninger for plan',
  description: 'Lær om ulike måter å beskrive plan i rommet: parameterframstilling, normalvektorform og determinantform.',
  estimatedMinutes: 55,
  competenceGoals: [
    'Kunne sette opp parameterframstilling for et plan',
    'Kunne finne normalvektoren til et plan',
    'Kunne skrive planligninger på normalform',
    'Kunne avgjøre om punkter ligger i et plan',
  ],
  content: [
    {
      id: 'r2-5-6-intro',
      type: 'text',
      content: `## Innledning

Et plan i rommet kan beskrives på flere måter. I dette kapittelet skal vi lære tre hovedmetoder:

1. **Parameterframstilling** - ved hjelp av et punkt og to retningsvektorer
2. **Normalvektorform** - ved hjelp av et punkt og en normalvektor
3. **Determinantform** - ved hjelp av tre punkter

Alle disse metodene gir oss verktøy til å arbeide med plan i rommet, for eksempel for å finne skjæringspunkter, vinkler og avstander.`,
    },
    {
      id: 'r2-5-6-planrom-bilde',
      type: 'image',
      src: '/images/r2/plan-rom.svg',
      alt: 'Et plan i rommet med normalvektor og punkter',
      caption: 'Plan i rommet - normalvektor og parameterframstilling',
    },
    {
      id: 'r2-5-6-def-param',
      type: 'definition',
      title: 'Parameterframstilling for et plan',
      content: `Et plan gjennom punktet $P_0 = (x_0, y_0, z_0)$ med retningsvektorer $\\vec{u} = [u_1, u_2, u_3]$ og $\\vec{v} = [v_1, v_2, v_3]$ (som ikke er parallelle) kan skrives:

$$\\vec{r} = \\vec{r_0} + s \\cdot \\vec{u} + t \\cdot \\vec{v}$$

hvor $s$ og $t$ er reelle tall (parametere).

På koordinatform:
$$\\begin{cases} x = x_0 + s \\cdot u_1 + t \\cdot v_1 \\\\ y = y_0 + s \\cdot u_2 + t \\cdot v_2 \\\\ z = z_0 + s \\cdot u_3 + t \\cdot v_3 \\end{cases}$$`,
    },
    {
      id: 'r2-5-6-example1',
      type: 'example',
      title: 'Parameterframstilling gjennom tre punkter',
      problem: 'Finn parameterframstillingen for planet gjennom punktene $A = (1, 2, 3)$, $B = (4, 2, 1)$ og $C = (2, 5, 0)$.',
      solution: `Vi velger $A$ som basispunkt og finner retningsvektorene:

$\\vec{u} = \\overrightarrow{AB} = [4-1, 2-2, 1-3] = [3, 0, -2]$

$\\vec{v} = \\overrightarrow{AC} = [2-1, 5-2, 0-3] = [1, 3, -3]$

**Parameterframstillingen** blir:
$$\\vec{r} = [1, 2, 3] + s \\cdot [3, 0, -2] + t \\cdot [1, 3, -3]$$

På koordinatform:
$$\\begin{cases} x = 1 + 3s + t \\\\ y = 2 + 3t \\\\ z = 3 - 2s - 3t \\end{cases}$$`,
    },
    {
      id: 'r2-5-6-def-normal',
      type: 'definition',
      title: 'Normalvektor og normalform',
      content: `En **normalvektor** $\\vec{n}$ til et plan er en vektor som står vinkelrett på planet.

Hvis $\\vec{u}$ og $\\vec{v}$ er retningsvektorer for planet, er normalvektoren:
$$\\vec{n} = \\vec{u} \\times \\vec{v}$$

**Planligningen på normalform**: Et plan med normalvektor $\\vec{n} = [a, b, c]$ gjennom punktet $(x_0, y_0, z_0)$ har ligningen:
$$a(x - x_0) + b(y - y_0) + c(z - z_0) = 0$$

eller på **standardform**:
$$ax + by + cz = d$$
hvor $d = ax_0 + by_0 + cz_0$.`,
    },
    {
      id: 'r2-5-6-example2',
      type: 'example',
      title: 'Fra parameterframstilling til normalform',
      problem: 'Finn normalformen for planet fra forrige eksempel, gjennom $A = (1, 2, 3)$, $B = (4, 2, 1)$ og $C = (2, 5, 0)$.',
      solution: `Vi har retningsvektorene $\\vec{u} = [3, 0, -2]$ og $\\vec{v} = [1, 3, -3]$.

**Normalvektoren** finner vi med kryssproduktet:
$$\\vec{n} = \\vec{u} \\times \\vec{v} = \\begin{vmatrix} \\vec{i} & \\vec{j} & \\vec{k} \\\\ 3 & 0 & -2 \\\\ 1 & 3 & -3 \\end{vmatrix}$$

$$= \\vec{i}(0 \\cdot (-3) - (-2) \\cdot 3) - \\vec{j}(3 \\cdot (-3) - (-2) \\cdot 1) + \\vec{k}(3 \\cdot 3 - 0 \\cdot 1)$$
$$= \\vec{i}(0 + 6) - \\vec{j}(-9 + 2) + \\vec{k}(9 - 0)$$
$$= [6, 7, 9]$$

**Planligningen** med $A = (1, 2, 3)$ og $\\vec{n} = [6, 7, 9]$:
$$6(x - 1) + 7(y - 2) + 9(z - 3) = 0$$
$$6x - 6 + 7y - 14 + 9z - 27 = 0$$
$$6x + 7y + 9z = 47$$`,
    },
    {
      id: 'r2-5-6-theorem',
      type: 'theorem',
      title: 'Avlesning av normalvektor',
      content: `For et plan med ligning $ax + by + cz = d$ er normalvektoren:
$$\\vec{n} = [a, b, c]$$

Koeffisientene foran $x$, $y$ og $z$ gir altså direkte normalvektoren.`,
    },
    {
      id: 'r2-5-6-example3',
      type: 'example',
      title: 'Parallelle plan',
      problem: 'Undersøk om planene $\\alpha: 2x - 4y + 6z = 12$ og $\\beta: x - 2y + 3z = 5$ er parallelle.',
      solution: `Vi finner normalvektorene:

$\\vec{n}_\\alpha = [2, -4, 6]$

$\\vec{n}_\\beta = [1, -2, 3]$

Vi ser at $\\vec{n}_\\alpha = 2 \\cdot \\vec{n}_\\beta$, så normalvektorene er parallelle.

**Konklusjon**: Planene er **parallelle**.

For å sjekke om de er identiske, tester vi om et punkt i det ene planet også ligger i det andre:
- Fra $\\alpha$ med $x = 0, y = 0$: $6z = 12 \\Rightarrow z = 2$. Punktet $(0, 0, 2)$ ligger i $\\alpha$.
- Setter vi inn i $\\beta$: $0 - 0 + 3 \\cdot 2 = 6 \\neq 5$.

Planene er **parallelle, men ikke identiske**.`,
    },
    {
      id: 'r2-5-6-example4',
      type: 'example',
      title: 'Plan gjennom punkt med gitt normalvektor',
      problem: 'Finn ligningen for planet gjennom $P = (2, -1, 4)$ med normalvektor $\\vec{n} = [3, 1, -2]$.',
      solution: `Vi bruker normalformen direkte:
$$3(x - 2) + 1(y - (-1)) + (-2)(z - 4) = 0$$
$$3x - 6 + y + 1 - 2z + 8 = 0$$
$$3x + y - 2z = -3$$

**Svar**: $3x + y - 2z = -3$`,
    },
    {
      id: 'r2-5-6-def-det',
      type: 'definition',
      title: 'Determinantform for plan',
      content: `Et plan gjennom tre punkter $P_1 = (x_1, y_1, z_1)$, $P_2 = (x_2, y_2, z_2)$ og $P_3 = (x_3, y_3, z_3)$ kan skrives som:

$$\\begin{vmatrix} x - x_1 & y - y_1 & z - z_1 \\\\ x_2 - x_1 & y_2 - y_1 & z_2 - z_1 \\\\ x_3 - x_1 & y_3 - y_1 & z_3 - z_1 \\end{vmatrix} = 0$$

Denne determinanten utvides til en lineær ligning i $x$, $y$ og $z$.`,
    },
    {
      id: 'r2-5-6-example5',
      type: 'example',
      title: 'Punkt i planet?',
      problem: 'Ligger punktet $Q = (3, 5, 1)$ i planet $2x - y + 3z = 4$?',
      solution: `Vi setter inn koordinatene til $Q$ i planligningen:
$$2 \\cdot 3 - 5 + 3 \\cdot 1 = 6 - 5 + 3 = 4 \\checkmark$$

Siden venstre side er lik høyre side, ligger $Q$ **i planet**.`,
    },
    {
      id: 'r2-5-6-note',
      type: 'note',
      content: `**Sjekke om et punkt ligger i et plan:**

Et punkt $(x_0, y_0, z_0)$ ligger i planet $ax + by + cz = d$ hvis og bare hvis:
$$ax_0 + by_0 + cz_0 = d$$`,
    },
    {
      id: 'r2-5-6-exercise1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex1',
        number: '5.6.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn normalvektoren til planet $4x - 2y + 5z = 10$.',
        solution: 'Normalvektoren avleses direkte fra koeffisientene: $\\vec{n} = [4, -2, 5]$.',
        hints: ['Koeffisientene foran x, y og z gir normalvektoren.'],
      },
    },
    {
      id: 'r2-5-6-exercise2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex2',
        number: '5.6.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv opp parameterframstillingen for planet gjennom $P = (2, 1, 0)$ med retningsvektorer $\\vec{u} = [1, 0, 1]$ og $\\vec{v} = [0, 1, -1]$.',
        solution: `Parameterframstillingen blir:
$$\\vec{r} = [2, 1, 0] + s \\cdot [1, 0, 1] + t \\cdot [0, 1, -1]$$

På koordinatform:
$$\\begin{cases} x = 2 + s \\\\ y = 1 + t \\\\ z = s - t \\end{cases}$$`,
      },
    },
    {
      id: 'r2-5-6-exercise3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex3',
        number: '5.6.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn ligningen for planet gjennom punktene $A = (1, 0, 0)$, $B = (0, 2, 0)$ og $C = (0, 0, 3)$.',
        solution: `**Retningsvektorer**:
$\\vec{u} = \\overrightarrow{AB} = [-1, 2, 0]$
$\\vec{v} = \\overrightarrow{AC} = [-1, 0, 3]$

**Normalvektor** (kryssprodukt):
$\\vec{n} = \\vec{u} \\times \\vec{v} = [2 \\cdot 3 - 0 \\cdot 0, 0 \\cdot (-1) - (-1) \\cdot 3, (-1) \\cdot 0 - 2 \\cdot (-1)]$
$= [6, 3, 2]$

**Planligning** med $A = (1, 0, 0)$:
$6(x - 1) + 3(y - 0) + 2(z - 0) = 0$
$6x + 3y + 2z = 6$`,
        hints: ['Finn først retningsvektorene, deretter normalvektoren med kryssproduktet.'],
      },
    },
    {
      id: 'r2-5-6-exercise4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex4',
        number: '5.6.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Avgjør om punktet $Q = (2, 1, -1)$ ligger i planet $3x - 2y + 4z = 0$.',
        solution: `Vi setter inn koordinatene:
$3 \\cdot 2 - 2 \\cdot 1 + 4 \\cdot (-1) = 6 - 2 - 4 = 0 \\checkmark$

Siden uttrykket er lik 0 (høyre side), ligger $Q$ **i planet**.`,
      },
    },
    {
      id: 'r2-5-6-exercise5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex5',
        number: '5.6.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn ligningen for planet som går gjennom $P = (1, 2, 3)$ og er parallelt med planet $2x + y - z = 5$.',
        solution: `Et parallelt plan har samme normalvektor: $\\vec{n} = [2, 1, -1]$.

Planligningen med punktet $P = (1, 2, 3)$:
$2(x - 1) + 1(y - 2) - 1(z - 3) = 0$
$2x - 2 + y - 2 - z + 3 = 0$
$2x + y - z = 1$`,
        hints: ['Parallelle plan har samme normalvektor.'],
      },
    },
    {
      id: 'r2-5-6-exercise6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex6',
        number: '5.6.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn ligningen for planet gjennom origo som inneholder vektorene $\\vec{a} = [1, 2, 1]$ og $\\vec{b} = [2, 1, -1]$.',
        solution: `**Normalvektor**:
$\\vec{n} = \\vec{a} \\times \\vec{b} = [2 \\cdot (-1) - 1 \\cdot 1, 1 \\cdot 2 - 1 \\cdot (-1), 1 \\cdot 1 - 2 \\cdot 2]$
$= [-2 - 1, 2 + 1, 1 - 4] = [-3, 3, -3]$

Vi kan forenkle til $\\vec{n} = [1, -1, 1]$.

**Planligning** gjennom origo:
$1 \\cdot x - 1 \\cdot y + 1 \\cdot z = 0$
$x - y + z = 0$`,
      },
    },
    {
      id: 'r2-5-6-exercise7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex7',
        number: '5.6.7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn skjæringspunktet mellom planet $2x - y + z = 4$ og linjen som går gjennom $A = (1, 0, 1)$ med retningsvektor $\\vec{v} = [1, 1, 1]$.',
        solution: `**Parameterframstilling for linjen**:
$\\begin{cases} x = 1 + t \\\\ y = t \\\\ z = 1 + t \\end{cases}$

**Setter inn i planligningen**:
$2(1 + t) - t + (1 + t) = 4$
$2 + 2t - t + 1 + t = 4$
$3 + 2t = 4$
$t = \\frac{1}{2}$

**Skjæringspunktet**:
$x = 1 + \\frac{1}{2} = \\frac{3}{2}$, $y = \\frac{1}{2}$, $z = 1 + \\frac{1}{2} = \\frac{3}{2}$

**Svar**: $\\left(\\frac{3}{2}, \\frac{1}{2}, \\frac{3}{2}\\right)$`,
        hints: ['Sett opp parameterframstilling for linjen og sett inn i planligningen.'],
      },
    },
    {
      id: 'r2-5-6-exercise8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex8',
        number: '5.6.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn ligningen for planet som inneholder linjen $\\ell: \\vec{r} = [1, 0, 2] + t[1, 1, 0]$ og punktet $P = (0, 2, 1)$.',
        solution: `**Punkter på linjen**: $A = (1, 0, 2)$ (for $t = 0$) og retningsvektor $\\vec{u} = [1, 1, 0]$.

**Andre retningsvektor**: $\\vec{v} = \\overrightarrow{AP} = [0-1, 2-0, 1-2] = [-1, 2, -1]$

**Normalvektor**:
$\\vec{n} = \\vec{u} \\times \\vec{v} = [1 \\cdot (-1) - 0 \\cdot 2, 0 \\cdot (-1) - 1 \\cdot (-1), 1 \\cdot 2 - 1 \\cdot (-1)]$
$= [-1, 1, 3]$

**Planligning** med $A = (1, 0, 2)$:
$-1(x - 1) + 1(y - 0) + 3(z - 2) = 0$
$-x + 1 + y + 3z - 6 = 0$
$-x + y + 3z = 5$

Eller: $x - y - 3z = -5$`,
      },
    },
    {
      id: 'r2-5-6-exercise9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex9',
        number: '5.6.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn skjæringslinjen mellom planene $\\alpha: x + 2y - z = 3$ og $\\beta: 2x - y + z = 1$.',
        solution: `**Metode**: Finn retningsvektor og ett punkt på linjen.

**Retningsvektoren** er parallell med begge plan, altså vinkelrett på begge normalvektorer:
$\\vec{n}_\\alpha = [1, 2, -1]$, $\\vec{n}_\\beta = [2, -1, 1]$

$\\vec{v} = \\vec{n}_\\alpha \\times \\vec{n}_\\beta = [2 \\cdot 1 - (-1) \\cdot (-1), (-1) \\cdot 2 - 1 \\cdot 1, 1 \\cdot (-1) - 2 \\cdot 2]$
$= [2 - 1, -2 - 1, -1 - 4] = [1, -3, -5]$

**Finn et punkt** ved å sette $z = 0$:
$x + 2y = 3$ og $2x - y = 1$

Fra andre ligning: $y = 2x - 1$. Sett inn i første: $x + 2(2x - 1) = 3 \\Rightarrow 5x = 5 \\Rightarrow x = 1$, $y = 1$.

Punkt: $(1, 1, 0)$

**Skjæringslinje**:
$$\\vec{r} = [1, 1, 0] + t[1, -3, -5]$$`,
        hints: ['Retningsvektoren til skjæringslinjen er kryssproduktet av normalvektorene.'],
      },
    },
    {
      id: 'r2-5-6-exercise10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-6-ex10',
        number: '5.6.10',
        type: 'upload',
        difficulty: 'vanskelig',
        task: `Et tetraeder har hjørner i $A = (0, 0, 0)$, $B = (4, 0, 0)$, $C = (0, 3, 0)$ og $D = (0, 0, 5)$.

a) Finn ligningen for planet gjennom $B$, $C$ og $D$.
b) Finn vinkelen mellom dette planet og $xy$-planet.`,
        solution: `**a)** Retningsvektorer:
$\\vec{u} = \\overrightarrow{BC} = [-4, 3, 0]$, $\\vec{v} = \\overrightarrow{BD} = [-4, 0, 5]$

Normalvektor:
$\\vec{n} = \\vec{u} \\times \\vec{v} = [3 \\cdot 5 - 0 \\cdot 0, 0 \\cdot (-4) - (-4) \\cdot 5, (-4) \\cdot 0 - 3 \\cdot (-4)]$
$= [15, 20, 12]$

Planligning med $B = (4, 0, 0)$:
$15(x - 4) + 20y + 12z = 0$
$15x + 20y + 12z = 60$

**b)** $xy$-planet har normalvektor $\\vec{n}_{xy} = [0, 0, 1]$.

Vinkelen $\\theta$ mellom planene:
$\\cos \\theta = \\frac{|\\vec{n} \\cdot \\vec{n}_{xy}|}{|\\vec{n}| \\cdot |\\vec{n}_{xy}|} = \\frac{|12|}{\\sqrt{15^2 + 20^2 + 12^2} \\cdot 1} = \\frac{12}{\\sqrt{769}}$

$\\theta = \\arccos\\left(\\frac{12}{\\sqrt{769}}\\right) \\approx 64.4°$`,
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_7: TextbookChapter = {
  id: 'r2-5-7',
  courseId: 'r2',
  chapterNumber: '5.7',
  title: 'Linjer i rommet',
  description: 'Lær om parameterframstilling for linjer i rommet, skjæring mellom linjer, og vinkler mellom linjer.',
  estimatedMinutes: 50,
  competenceGoals: [
    'Kunne sette opp parameterframstilling for en linje i rommet',
    'Kunne finne skjæringspunktet mellom to linjer',
    'Kunne avgjøre om linjer er parallelle, skjærende eller vindskjeve',
    'Kunne beregne vinkelen mellom to linjer',
  ],
  content: [
    {
      id: 'r2-5-7-intro',
      type: 'text',
      content: `## Innledning

En linje i rommet kan ikke beskrives med én enkelt ligning slik som i planet. I stedet bruker vi **parameterframstilling**, som beskriver alle punkter på linjen ved hjelp av én parameter.

I dette kapittelet skal vi lære å:
- Sette opp parameterframstilling for linjer
- Finne skjæringspunkter mellom linjer
- Klassifisere linjepar (parallelle, skjærende, vindskjeve)
- Beregne vinkler mellom linjer`,
    },
    {
      id: 'r2-5-7-linjerom-bilde',
      type: 'image',
      src: '/images/r2/linje-rom.svg',
      alt: 'En linje i rommet med parameterframstilling',
      caption: 'Linje i rommet - punkt og retningsvektor',
    },
    {
      id: 'r2-5-7-def-param',
      type: 'definition',
      title: 'Parameterframstilling for en linje',
      content: `En linje gjennom punktet $P_0 = (x_0, y_0, z_0)$ med retningsvektor $\\vec{v} = [a, b, c]$ kan skrives:

$$\\vec{r} = \\vec{r_0} + t \\cdot \\vec{v}$$

hvor $t$ er en reell parameter.

**På koordinatform**:
$$\\begin{cases} x = x_0 + at \\\\ y = y_0 + bt \\\\ z = z_0 + ct \\end{cases}$$

Ulike verdier av $t$ gir ulike punkter på linjen.`,
    },
    {
      id: 'r2-5-7-example1',
      type: 'example',
      title: 'Linje gjennom to punkter',
      problem: 'Finn parameterframstillingen for linjen gjennom $A = (1, 2, 3)$ og $B = (4, -1, 5)$.',
      solution: `**Retningsvektoren** er:
$$\\vec{v} = \\overrightarrow{AB} = [4-1, -1-2, 5-3] = [3, -3, 2]$$

Med $A$ som basispunkt får vi:
$$\\vec{r} = [1, 2, 3] + t[3, -3, 2]$$

**På koordinatform**:
$$\\begin{cases} x = 1 + 3t \\\\ y = 2 - 3t \\\\ z = 3 + 2t \\end{cases}$$

**Kontroll**: For $t = 0$ får vi $A = (1, 2, 3)$. For $t = 1$ får vi $(4, -1, 5) = B$. `,
    },
    {
      id: 'r2-5-7-note1',
      type: 'note',
      content: `**Samme linje, ulike framstillinger:**

En linje kan beskrives på uendelig mange måter ved å velge:
- Forskjellige basispunkt på linjen
- Forskjellige retningsvektorer (parallelle vektorer)

For eksempel beskriver $\\vec{r} = [4, -1, 5] + t[-6, 6, -4]$ samme linje som i eksempelet over.`,
    },
    {
      id: 'r2-5-7-def-class',
      type: 'definition',
      title: 'Klassifisering av linjepar',
      content: `To linjer i rommet kan være:

1. **Parallelle**: Retningsvektorene er parallelle ($\\vec{v}_1 = k \\cdot \\vec{v}_2$)
   - *Sammenfallende*: Linjene er identiske
   - *Ekte parallelle*: Linjene skjærer ikke

2. **Skjærende**: Linjene har nøyaktig ett felles punkt

3. **Vindskjeve**: Linjene ligger ikke i samme plan og har ingen felles punkter`,
    },
    {
      id: 'r2-5-7-example2',
      type: 'example',
      title: 'Finne skjæringspunkt',
      problem: `Finn eventuelt skjæringspunkt mellom linjene:
- $\\ell_1: \\vec{r} = [1, 2, 0] + s[1, 1, 1]$
- $\\ell_2: \\vec{r} = [2, 1, 1] + t[1, -1, 0]$`,
      solution: `For at linjene skal skjære, må det finnes $s$ og $t$ slik at punktene er like:

$$\\begin{cases} 1 + s = 2 + t \\\\ 2 + s = 1 - t \\\\ 0 + s = 1 + 0 \\cdot t \\end{cases}$$

Fra tredje ligning: $s = 1$

Setter inn i første ligning: $1 + 1 = 2 + t \\Rightarrow t = 0$

**Kontroll** i andre ligning: $2 + 1 = 3$ og $1 - 0 = 1$. Dette stemmer **ikke**!

**Konklusjon**: Linjene skjærer ikke.

Siden retningsvektorene $[1, 1, 1]$ og $[1, -1, 0]$ ikke er parallelle, er linjene **vindskjeve**.`,
    },
    {
      id: 'r2-5-7-example3',
      type: 'example',
      title: 'Skjærende linjer',
      problem: `Finn skjæringspunktet mellom:
- $\\ell_1: \\vec{r} = [0, 1, 2] + s[1, 2, 1]$
- $\\ell_2: \\vec{r} = [3, 5, 1] + t[1, 1, -1]$`,
      solution: `Vi setter koordinatene like:

$$\\begin{cases} s = 3 + t \\\\ 1 + 2s = 5 + t \\\\ 2 + s = 1 - t \\end{cases}$$

Fra første: $s = 3 + t$

Setter inn i andre: $1 + 2(3 + t) = 5 + t \\Rightarrow 1 + 6 + 2t = 5 + t \\Rightarrow t = -2$

Da er $s = 3 + (-2) = 1$

**Kontroll** i tredje: $2 + 1 = 3$ og $1 - (-2) = 3$. Stemmer!

**Skjæringspunktet** (sett inn $s = 1$ i $\\ell_1$):
$$(0 + 1, 1 + 2, 2 + 1) = (1, 3, 3)$$`,
    },
    {
      id: 'r2-5-7-theorem',
      type: 'theorem',
      title: 'Vinkel mellom linjer',
      content: `Vinkelen $\\theta$ mellom to linjer med retningsvektorer $\\vec{v}_1$ og $\\vec{v}_2$ er gitt ved:

$$\\cos \\theta = \\frac{|\\vec{v}_1 \\cdot \\vec{v}_2|}{|\\vec{v}_1| \\cdot |\\vec{v}_2|}$$

Vi bruker absoluttverdi fordi vi ønsker den spisse vinkelen ($0° \\leq \\theta \\leq 90°$).`,
    },
    {
      id: 'r2-5-7-example4',
      type: 'example',
      title: 'Vinkel mellom linjer',
      problem: `Finn vinkelen mellom linjene:
- $\\ell_1: \\vec{r} = [1, 0, 2] + s[2, 1, 1]$
- $\\ell_2: \\vec{r} = [0, 1, 0] + t[1, -1, 2]$`,
      solution: `**Retningsvektorer**: $\\vec{v}_1 = [2, 1, 1]$ og $\\vec{v}_2 = [1, -1, 2]$

**Skalarprodukt**:
$$\\vec{v}_1 \\cdot \\vec{v}_2 = 2 \\cdot 1 + 1 \\cdot (-1) + 1 \\cdot 2 = 2 - 1 + 2 = 3$$

**Lengder**:
$$|\\vec{v}_1| = \\sqrt{4 + 1 + 1} = \\sqrt{6}$$
$$|\\vec{v}_2| = \\sqrt{1 + 1 + 4} = \\sqrt{6}$$

**Vinkelen**:
$$\\cos \\theta = \\frac{|3|}{\\sqrt{6} \\cdot \\sqrt{6}} = \\frac{3}{6} = 0.5$$

$$\\theta = \\arccos(0.5) = 60°$$`,
    },
    {
      id: 'r2-5-7-example5',
      type: 'example',
      title: 'Er linjene parallelle?',
      problem: `Undersøk om linjene er parallelle:
- $\\ell_1: \\vec{r} = [1, 2, 3] + s[2, -4, 6]$
- $\\ell_2: \\vec{r} = [0, 0, 1] + t[-1, 2, -3]$`,
      solution: `Vi sjekker om retningsvektorene er parallelle:

$\\vec{v}_1 = [2, -4, 6]$ og $\\vec{v}_2 = [-1, 2, -3]$

Vi ser at $\\vec{v}_1 = -2 \\cdot \\vec{v}_2$:
$$[2, -4, 6] = -2 \\cdot [-1, 2, -3] = [2, -4, 6] \\checkmark$$

**Konklusjon**: Linjene er **parallelle**.

For å sjekke om de er identiske, tester vi om et punkt fra $\\ell_2$ ligger på $\\ell_1$:

Punktet $(0, 0, 1)$ fra $\\ell_2$: Ligger det på $\\ell_1$?
$$\\begin{cases} 0 = 1 + 2s \\Rightarrow s = -\\frac{1}{2} \\\\ 0 = 2 - 4s \\Rightarrow s = \\frac{1}{2} \\end{cases}$$

Ulike verdier av $s$ betyr at punktet **ikke** ligger på $\\ell_1$.

Linjene er **parallelle, men ikke sammenfallende**.`,
    },
    {
      id: 'r2-5-7-warning',
      type: 'warning',
      title: 'Vindskjeve linjer',
      content: `I tre dimensjoner kan to linjer være **vindskjeve** - de skjærer ikke og er ikke parallelle. Dette er en viktig forskjell fra planet, der to linjer enten er parallelle eller skjærende.

Vindskjeve linjer ligger i ulike plan og "passerer forbi hverandre" uten å møtes.`,
    },
    {
      id: 'r2-5-7-exercise1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex1',
        number: '5.7.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv parameterframstillingen for linjen gjennom $P = (2, -1, 3)$ med retningsvektor $\\vec{v} = [1, 4, -2]$.',
        solution: `Parameterframstillingen blir:
$$\\vec{r} = [2, -1, 3] + t[1, 4, -2]$$

På koordinatform:
$$\\begin{cases} x = 2 + t \\\\ y = -1 + 4t \\\\ z = 3 - 2t \\end{cases}$$`,
      },
    },
    {
      id: 'r2-5-7-exercise2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex2',
        number: '5.7.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn parameterframstillingen for linjen gjennom $A = (3, 1, 2)$ og $B = (1, 4, -1)$.',
        solution: `Retningsvektor: $\\vec{v} = \\overrightarrow{AB} = [1-3, 4-1, -1-2] = [-2, 3, -3]$

Parameterframstilling:
$$\\vec{r} = [3, 1, 2] + t[-2, 3, -3]$$`,
      },
    },
    {
      id: 'r2-5-7-exercise3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex3',
        number: '5.7.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Ligger punktet $Q = (5, 7, 0)$ på linjen $\\ell: \\vec{r} = [1, 3, 2] + t[2, 2, -1]$?',
        solution: `Vi sjekker om det finnes en $t$-verdi som gir $Q$:

$$\\begin{cases} 5 = 1 + 2t \\Rightarrow t = 2 \\\\ 7 = 3 + 2t \\Rightarrow t = 2 \\\\ 0 = 2 - t \\Rightarrow t = 2 \\end{cases}$$

Alle ligninger gir $t = 2$, så $Q$ **ligger på linjen**.`,
        hints: ['Sett inn koordinatene og løs for t. Hvis alle ligninger gir samme t, ligger punktet på linjen.'],
      },
    },
    {
      id: 'r2-5-7-exercise4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex4',
        number: '5.7.4',
        type: 'classic',
        difficulty: 'medium',
        task: `Avgjør om linjene er parallelle, skjærende eller vindskjeve:
- $\\ell_1: \\vec{r} = [1, 0, 1] + s[1, 2, 3]$
- $\\ell_2: \\vec{r} = [2, 2, 4] + t[2, 4, 6]$`,
        solution: `Retningsvektorer: $\\vec{v}_1 = [1, 2, 3]$ og $\\vec{v}_2 = [2, 4, 6]$

Vi ser at $\\vec{v}_2 = 2 \\cdot \\vec{v}_1$, så linjene er **parallelle**.

Sjekk om de er identiske - ligger $(2, 2, 4)$ på $\\ell_1$?
$$\\begin{cases} 2 = 1 + s \\Rightarrow s = 1 \\\\ 2 = 0 + 2s \\Rightarrow s = 1 \\\\ 4 = 1 + 3s \\Rightarrow s = 1 \\end{cases}$$

Alle gir $s = 1$, så linjene er **identiske/sammenfallende**.`,
      },
    },
    {
      id: 'r2-5-7-exercise5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex5',
        number: '5.7.5',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn skjæringspunktet mellom:
- $\\ell_1: \\vec{r} = [2, 1, 0] + s[1, -1, 2]$
- $\\ell_2: \\vec{r} = [4, 0, 3] + t[1, 0, -1]$`,
        solution: `Setter koordinatene like:
$$\\begin{cases} 2 + s = 4 + t \\\\ 1 - s = 0 \\\\ 2s = 3 - t \\end{cases}$$

Fra andre ligning: $s = 1$

Fra første: $2 + 1 = 4 + t \\Rightarrow t = -1$

Kontroll i tredje: $2 \\cdot 1 = 2$ og $3 - (-1) = 4$. Stemmer **ikke**.

**Konklusjon**: Linjene er **vindskjeve**.`,
        hints: ['Sett opp likningssystem og sjekk om løsningen er konsistent.'],
      },
    },
    {
      id: 'r2-5-7-exercise6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex6',
        number: '5.7.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn vinkelen mellom linjene $\\ell_1: \\vec{r} = [0, 0, 0] + s[1, 1, 0]$ og $\\ell_2: \\vec{r} = [1, 0, 1] + t[0, 1, 1]$.',
        solution: `Retningsvektorer: $\\vec{v}_1 = [1, 1, 0]$ og $\\vec{v}_2 = [0, 1, 1]$

Skalarprodukt: $\\vec{v}_1 \\cdot \\vec{v}_2 = 0 + 1 + 0 = 1$

Lengder: $|\\vec{v}_1| = \\sqrt{2}$, $|\\vec{v}_2| = \\sqrt{2}$

Vinkel: $\\cos \\theta = \\frac{|1|}{\\sqrt{2} \\cdot \\sqrt{2}} = \\frac{1}{2}$

$\\theta = \\arccos(0.5) = 60°$`,
      },
    },
    {
      id: 'r2-5-7-exercise7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex7',
        number: '5.7.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn ligningen for linjen som går gjennom $P = (1, 2, 3)$ og er parallell med linjen $\\ell: \\vec{r} = [0, 1, 0] + t[2, -1, 4]$.',
        solution: `En parallell linje har samme retningsvektor: $\\vec{v} = [2, -1, 4]$

Parameterframstilling med basispunkt $P$:
$$\\vec{r} = [1, 2, 3] + t[2, -1, 4]$$

På koordinatform:
$$\\begin{cases} x = 1 + 2t \\\\ y = 2 - t \\\\ z = 3 + 4t \\end{cases}$$`,
      },
    },
    {
      id: 'r2-5-7-exercise8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex8',
        number: '5.7.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn skjæringspunktet mellom:
- $\\ell_1: \\vec{r} = [1, 2, 1] + s[2, 1, 3]$
- $\\ell_2: \\vec{r} = [3, 0, 4] + t[-1, 2, 0]$`,
        solution: `Setter koordinatene like:
$$\\begin{cases} 1 + 2s = 3 - t \\\\ 2 + s = 2t \\\\ 1 + 3s = 4 \\end{cases}$$

Fra tredje: $3s = 3 \\Rightarrow s = 1$

Fra andre: $2 + 1 = 2t \\Rightarrow t = \\frac{3}{2}$

Kontroll i første: $1 + 2 = 3$ og $3 - \\frac{3}{2} = \\frac{3}{2}$. Stemmer **ikke**.

**Konklusjon**: Linjene er **vindskjeve**.`,
        hints: ['Løs likningssystemet og sjekk alle tre ligninger.'],
      },
    },
    {
      id: 'r2-5-7-exercise9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex9',
        number: '5.7.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn parameterframstillingen for linjen som går gjennom punktet $P = (2, 1, -1)$ og skjærer begge linjene:
- $\\ell_1$: $x$-aksen
- $\\ell_2$: Linjen $\\vec{r} = [0, 1, 1] + t[1, 0, 0]$`,
        solution: `$x$-aksen har framstilling $\\vec{r} = t[1, 0, 0]$, så punkter på $x$-aksen er $(a, 0, 0)$.

Linjen $\\ell_2$ har punkter $(t, 1, 1)$.

Linjen gjennom $P = (2, 1, -1)$ og $(a, 0, 0)$ har retningsvektor $[a-2, -1, 1]$.

For at denne linjen også skal gå gjennom $(t, 1, 1)$, må:
$$\\overrightarrow{P(t,1,1)} = k \\cdot [a-2, -1, 1]$$
$$[t-2, 0, 2] = k \\cdot [a-2, -1, 1]$$

Fra andre komponent: $0 = -k \\Rightarrow k = 0$

Men $k = 0$ gir $[t-2, 0, 2] = [0, 0, 0]$, som krever $t = 2$ og $2 = 0$. Umulig!

**Konklusjon**: Det finnes ingen slik linje.`,
      },
    },
    {
      id: 'r2-5-7-exercise10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-7-ex10',
        number: '5.7.10',
        type: 'upload',
        difficulty: 'vanskelig',
        task: `En linje $\\ell$ går gjennom punktet $A = (1, 2, 3)$ og er vinkelrett på planet $\\alpha: 2x - y + 2z = 5$.

a) Finn parameterframstillingen for $\\ell$.
b) Finn skjæringspunktet mellom $\\ell$ og $\\alpha$.
c) Finn avstanden fra $A$ til planet $\\alpha$.`,
        solution: `**a)** Normalvektoren til planet er $\\vec{n} = [2, -1, 2]$.

Siden linjen er vinkelrett på planet, er den parallell med normalvektoren.

Parameterframstilling:
$$\\vec{r} = [1, 2, 3] + t[2, -1, 2]$$

**b)** Setter inn i planligningen:
$2(1 + 2t) - (2 - t) + 2(3 + 2t) = 5$
$2 + 4t - 2 + t + 6 + 4t = 5$
$6 + 9t = 5$
$t = -\\frac{1}{9}$

Skjæringspunkt:
$x = 1 - \\frac{2}{9} = \\frac{7}{9}$, $y = 2 + \\frac{1}{9} = \\frac{19}{9}$, $z = 3 - \\frac{2}{9} = \\frac{25}{9}$

**Skjæringspunkt**: $\\left(\\frac{7}{9}, \\frac{19}{9}, \\frac{25}{9}\\right)$

**c)** Avstanden fra $A$ til skjæringspunktet:
$d = |t| \\cdot |\\vec{n}| = \\frac{1}{9} \\cdot \\sqrt{4 + 1 + 4} = \\frac{1}{9} \\cdot 3 = \\frac{1}{3}$`,
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_5_8: TextbookChapter = {
  id: 'r2-5-8',
  courseId: 'r2',
  chapterNumber: '5.8',
  title: 'Avstand punkt-linje og punkt-plan',
  description: 'Lær formler og metoder for å beregne avstanden fra et punkt til en linje eller et plan i rommet.',
  estimatedMinutes: 55,
  competenceGoals: [
    'Kunne beregne avstanden fra et punkt til et plan',
    'Kunne beregne avstanden fra et punkt til en linje',
    'Kunne beregne avstanden mellom parallelle linjer',
    'Kunne beregne avstanden mellom vindskjeve linjer',
  ],
  content: [
    {
      id: 'r2-5-8-intro',
      type: 'text',
      content: `## Innledning

I dette kapittelet skal vi lære å beregne avstander i rommet:
- Avstand fra et punkt til et plan
- Avstand fra et punkt til en linje
- Avstand mellom parallelle plan og linjer
- Avstand mellom vindskjeve linjer

Disse avstandsberegningene har mange praktiske anvendelser, fra arkitektur og ingeniørfag til datagrafikk og fysikk.`,
    },
    {
      id: 'r2-5-8-theorem-plan',
      type: 'theorem',
      title: 'Avstand fra punkt til plan',
      content: `Avstanden $d$ fra punktet $P = (x_0, y_0, z_0)$ til planet $ax + by + cz = e$ er:

$$d = \\frac{|ax_0 + by_0 + cz_0 - e|}{\\sqrt{a^2 + b^2 + c^2}}$$

Formelen kan huskes som: **|Venstre side minus høyre side| delt på lengden av normalvektoren**.`,
    },
    {
      id: 'r2-5-8-example1',
      type: 'example',
      title: 'Avstand fra punkt til plan',
      problem: 'Finn avstanden fra punktet $P = (2, 3, 1)$ til planet $\\alpha: 2x - 2y + z = 6$.',
      solution: `Vi bruker formelen med $a = 2$, $b = -2$, $c = 1$, $e = 6$ og $(x_0, y_0, z_0) = (2, 3, 1)$:

$$d = \\frac{|2 \\cdot 2 + (-2) \\cdot 3 + 1 \\cdot 1 - 6|}{\\sqrt{2^2 + (-2)^2 + 1^2}}$$

$$= \\frac{|4 - 6 + 1 - 6|}{\\sqrt{4 + 4 + 1}}$$

$$= \\frac{|-7|}{\\sqrt{9}} = \\frac{7}{3}$$

**Svar**: Avstanden er $\\frac{7}{3} \\approx 2.33$ lengdeenheter.`,
    },
    {
      id: 'r2-5-8-note1',
      type: 'note',
      content: `**Geometrisk tolkning:**

Avstanden fra punkt til plan måles langs normalen til planet. Fotpunktet (det nærmeste punktet i planet) finner vi ved å gå fra punktet i retning $\\pm\\vec{n}$ til vi treffer planet.`,
    },
    {
      id: 'r2-5-8-example2',
      type: 'example',
      title: 'Finn fotpunktet',
      problem: 'Finn det nærmeste punktet (fotpunktet) i planet $x + 2y + 2z = 9$ til punktet $P = (1, 0, 2)$.',
      solution: `**Steg 1**: Normalvektoren til planet er $\\vec{n} = [1, 2, 2]$.

**Steg 2**: Linjen gjennom $P$ vinkelrett på planet:
$$\\vec{r} = [1, 0, 2] + t[1, 2, 2]$$

**Steg 3**: Finn $t$ der linjen treffer planet:
$$(1 + t) + 2(2t) + 2(2 + 2t) = 9$$
$$1 + t + 4t + 4 + 4t = 9$$
$$5 + 9t = 9$$
$$t = \\frac{4}{9}$$

**Steg 4**: Fotpunktet:
$$F = \\left(1 + \\frac{4}{9}, 0 + \\frac{8}{9}, 2 + \\frac{8}{9}\\right) = \\left(\\frac{13}{9}, \\frac{8}{9}, \\frac{26}{9}\\right)$$`,
    },
    {
      id: 'r2-5-8-def-linje',
      type: 'definition',
      title: 'Avstand fra punkt til linje',
      content: `Avstanden fra punktet $P$ til linjen $\\ell: \\vec{r} = \\vec{r_0} + t\\vec{v}$ kan beregnes slik:

La $Q$ være et vilkårlig punkt på linjen (f.eks. $\\vec{r_0}$). Da er:

$$d = \\frac{|\\overrightarrow{QP} \\times \\vec{v}|}{|\\vec{v}|}$$

Alternativt kan vi bruke projeksjon:
1. Finn projeksjonen av $\\overrightarrow{QP}$ på $\\vec{v}$
2. Avstanden er lengden av komponenten vinkelrett på $\\vec{v}$`,
    },
    {
      id: 'r2-5-8-example3',
      type: 'example',
      title: 'Avstand fra punkt til linje',
      problem: 'Finn avstanden fra punktet $P = (3, 4, 5)$ til linjen $\\ell: \\vec{r} = [1, 1, 1] + t[1, 2, 2]$.',
      solution: `Vi velger $Q = (1, 1, 1)$ på linjen og $\\vec{v} = [1, 2, 2]$.

**Vektor fra Q til P**:
$$\\overrightarrow{QP} = [3-1, 4-1, 5-1] = [2, 3, 4]$$

**Kryssprodukt** $\\overrightarrow{QP} \\times \\vec{v}$:
$$= \\begin{vmatrix} \\vec{i} & \\vec{j} & \\vec{k} \\\\ 2 & 3 & 4 \\\\ 1 & 2 & 2 \\end{vmatrix}$$
$$= \\vec{i}(3 \\cdot 2 - 4 \\cdot 2) - \\vec{j}(2 \\cdot 2 - 4 \\cdot 1) + \\vec{k}(2 \\cdot 2 - 3 \\cdot 1)$$
$$= \\vec{i}(6 - 8) - \\vec{j}(4 - 4) + \\vec{k}(4 - 3)$$
$$= [-2, 0, 1]$$

**Lengder**:
$$|\\overrightarrow{QP} \\times \\vec{v}| = \\sqrt{4 + 0 + 1} = \\sqrt{5}$$
$$|\\vec{v}| = \\sqrt{1 + 4 + 4} = 3$$

**Avstand**:
$$d = \\frac{\\sqrt{5}}{3} \\approx 0.745$$`,
    },
    {
      id: 'r2-5-8-theorem-parallelle',
      type: 'theorem',
      title: 'Avstand mellom parallelle plan',
      content: `Avstanden mellom de parallelle planene $ax + by + cz = e_1$ og $ax + by + cz = e_2$ er:

$$d = \\frac{|e_1 - e_2|}{\\sqrt{a^2 + b^2 + c^2}}$$

**Merk**: Planene må ha samme normalvektor (samme koeffisienter) for å være parallelle.`,
    },
    {
      id: 'r2-5-8-example4',
      type: 'example',
      title: 'Avstand mellom parallelle plan',
      problem: 'Finn avstanden mellom planene $\\alpha: 2x - y + 2z = 3$ og $\\beta: 2x - y + 2z = 12$.',
      solution: `Planene har samme normalvektor $\\vec{n} = [2, -1, 2]$, så de er parallelle.

**Avstand**:
$$d = \\frac{|3 - 12|}{\\sqrt{4 + 1 + 4}} = \\frac{9}{3} = 3$$

**Svar**: Avstanden mellom planene er 3 lengdeenheter.`,
    },
    {
      id: 'r2-5-8-example5',
      type: 'example',
      title: 'Avstand mellom parallelle linjer',
      problem: `Finn avstanden mellom de parallelle linjene:
- $\\ell_1: \\vec{r} = [1, 0, 0] + s[2, 1, 2]$
- $\\ell_2: \\vec{r} = [0, 3, 1] + t[2, 1, 2]$`,
      solution: `Siden linjene er parallelle, bruker vi avstand punkt-linje.

Vi finner avstanden fra et punkt på $\\ell_2$ (f.eks. $(0, 3, 1)$) til $\\ell_1$.

$Q = (1, 0, 0)$ på $\\ell_1$, $\\vec{v} = [2, 1, 2]$

$\\overrightarrow{QP} = [0-1, 3-0, 1-0] = [-1, 3, 1]$

**Kryssprodukt**:
$$\\overrightarrow{QP} \\times \\vec{v} = \\begin{vmatrix} \\vec{i} & \\vec{j} & \\vec{k} \\\\ -1 & 3 & 1 \\\\ 2 & 1 & 2 \\end{vmatrix}$$
$$= [3 \\cdot 2 - 1 \\cdot 1, 1 \\cdot 2 - (-1) \\cdot 2, (-1) \\cdot 1 - 3 \\cdot 2]$$
$$= [5, 4, -7]$$

**Avstand**:
$$d = \\frac{\\sqrt{25 + 16 + 49}}{\\sqrt{4 + 1 + 4}} = \\frac{\\sqrt{90}}{3} = \\frac{3\\sqrt{10}}{3} = \\sqrt{10} \\approx 3.16$$`,
    },
    {
      id: 'r2-5-8-def-vindskjeve',
      type: 'definition',
      title: 'Avstand mellom vindskjeve linjer',
      content: `For to vindskjeve linjer $\\ell_1: \\vec{r} = \\vec{a} + s\\vec{u}$ og $\\ell_2: \\vec{r} = \\vec{b} + t\\vec{v}$ er den korteste avstanden:

$$d = \\frac{|(\\vec{b} - \\vec{a}) \\cdot (\\vec{u} \\times \\vec{v})|}{|\\vec{u} \\times \\vec{v}|}$$

**Tolkning**: Vektoren $\\vec{u} \\times \\vec{v}$ er vinkelrett på begge linjer. Vi projiserer forbindelsesvektoren på denne normalen.`,
    },
    {
      id: 'r2-5-8-example6',
      type: 'example',
      title: 'Avstand mellom vindskjeve linjer',
      problem: `Finn avstanden mellom de vindskjeve linjene:
- $\\ell_1: \\vec{r} = [1, 0, 0] + s[1, 1, 0]$
- $\\ell_2: \\vec{r} = [0, 0, 1] + t[0, 1, 1]$`,
      solution: `Vi har $\\vec{a} = [1, 0, 0]$, $\\vec{b} = [0, 0, 1]$, $\\vec{u} = [1, 1, 0]$, $\\vec{v} = [0, 1, 1]$.

**Kryssprodukt** $\\vec{u} \\times \\vec{v}$:
$$= [1 \\cdot 1 - 0 \\cdot 1, 0 \\cdot 0 - 1 \\cdot 1, 1 \\cdot 1 - 1 \\cdot 0] = [1, -1, 1]$$

**Forbindelsesvektor**:
$$\\vec{b} - \\vec{a} = [0-1, 0-0, 1-0] = [-1, 0, 1]$$

**Skalarprodukt**:
$$(\\vec{b} - \\vec{a}) \\cdot (\\vec{u} \\times \\vec{v}) = (-1) \\cdot 1 + 0 \\cdot (-1) + 1 \\cdot 1 = -1 + 0 + 1 = 0$$

Vent, dette gir $d = 0$! La oss sjekke om linjene faktisk skjærer...

$[1 + s, s, 0] = [0, t, 1 + t]$

Fra tredje komponent: $0 = 1 + t \\Rightarrow t = -1$

Fra første: $1 + s = 0 \\Rightarrow s = -1$

Fra andre: $-1 = -1 \\checkmark$

**Linjene skjærer i punktet $(0, -1, 0)$!**`,
    },
    {
      id: 'r2-5-8-warning',
      type: 'warning',
      title: 'Kontroller alltid',
      content: `Når du beregner avstand mellom linjer:
1. Sjekk først om linjene er parallelle (samme retningsvektor opp til skalering)
2. Hvis ikke parallelle, sjekk om de skjærer (avstand = 0)
3. Hvis de verken er parallelle eller skjærer, er de vindskjeve`,
    },
    {
      id: 'r2-5-8-example7',
      type: 'example',
      title: 'Ekte vindskjeve linjer',
      problem: `Finn avstanden mellom:
- $\\ell_1: \\vec{r} = [0, 0, 0] + s[1, 0, 0]$ ($x$-aksen)
- $\\ell_2: \\vec{r} = [0, 1, 1] + t[0, 0, 1]$`,
      solution: `$\\vec{a} = [0, 0, 0]$, $\\vec{b} = [0, 1, 1]$, $\\vec{u} = [1, 0, 0]$, $\\vec{v} = [0, 0, 1]$

**Kryssprodukt** $\\vec{u} \\times \\vec{v}$:
$$= [0 \\cdot 1 - 0 \\cdot 0, 0 \\cdot 0 - 1 \\cdot 1, 1 \\cdot 0 - 0 \\cdot 0] = [0, -1, 0]$$

**Forbindelsesvektor**:
$$\\vec{b} - \\vec{a} = [0, 1, 1]$$

**Skalarprodukt**:
$$(\\vec{b} - \\vec{a}) \\cdot (\\vec{u} \\times \\vec{v}) = 0 \\cdot 0 + 1 \\cdot (-1) + 1 \\cdot 0 = -1$$

**Avstand**:
$$d = \\frac{|-1|}{\\sqrt{0 + 1 + 0}} = \\frac{1}{1} = 1$$`,
    },
    {
      id: 'r2-5-8-exercise1',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex1',
        number: '5.8.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn avstanden fra punktet $P = (1, 2, 3)$ til planet $x + y + z = 0$.',
        solution: `$$d = \\frac{|1 + 2 + 3 - 0|}{\\sqrt{1 + 1 + 1}} = \\frac{6}{\\sqrt{3}} = \\frac{6\\sqrt{3}}{3} = 2\\sqrt{3} \\approx 3.46$$`,
      },
    },
    {
      id: 'r2-5-8-exercise2',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex2',
        number: '5.8.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn avstanden fra origo til planet $3x - 4y + 12z = 26$.',
        solution: `$$d = \\frac{|3 \\cdot 0 - 4 \\cdot 0 + 12 \\cdot 0 - 26|}{\\sqrt{9 + 16 + 144}} = \\frac{26}{\\sqrt{169}} = \\frac{26}{13} = 2$$`,
        hints: ['Origo har koordinater (0, 0, 0).'],
      },
    },
    {
      id: 'r2-5-8-exercise3',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex3',
        number: '5.8.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn avstanden fra punktet $P = (2, 1, 0)$ til linjen $\\ell: \\vec{r} = [0, 0, 0] + t[1, 1, 1]$.',
        solution: `$Q = (0, 0, 0)$, $\\vec{v} = [1, 1, 1]$, $\\overrightarrow{QP} = [2, 1, 0]$

Kryssprodukt:
$\\overrightarrow{QP} \\times \\vec{v} = [1 \\cdot 1 - 0 \\cdot 1, 0 \\cdot 1 - 2 \\cdot 1, 2 \\cdot 1 - 1 \\cdot 1] = [1, -2, 1]$

Avstand:
$d = \\frac{\\sqrt{1 + 4 + 1}}{\\sqrt{3}} = \\frac{\\sqrt{6}}{\\sqrt{3}} = \\sqrt{2} \\approx 1.41$`,
        hints: ['Bruk formelen med kryssprodukt.'],
      },
    },
    {
      id: 'r2-5-8-exercise4',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex4',
        number: '5.8.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn avstanden mellom de parallelle planene $2x + 2y + z = 10$ og $2x + 2y + z = 1$.',
        solution: `$$d = \\frac{|10 - 1|}{\\sqrt{4 + 4 + 1}} = \\frac{9}{3} = 3$$`,
      },
    },
    {
      id: 'r2-5-8-exercise5',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex5',
        number: '5.8.5',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn det nærmeste punktet (fotpunktet) i planet $2x + y - 2z = 1$ til punktet $P = (3, 1, 2)$.`,
        solution: `Normalvektor: $\\vec{n} = [2, 1, -2]$

Linje gjennom $P$ vinkelrett på planet:
$\\vec{r} = [3, 1, 2] + t[2, 1, -2]$

Setter inn i planligningen:
$2(3 + 2t) + (1 + t) - 2(2 - 2t) = 1$
$6 + 4t + 1 + t - 4 + 4t = 1$
$3 + 9t = 1$
$t = -\\frac{2}{9}$

Fotpunkt:
$F = \\left(3 - \\frac{4}{9}, 1 - \\frac{2}{9}, 2 + \\frac{4}{9}\\right) = \\left(\\frac{23}{9}, \\frac{7}{9}, \\frac{22}{9}\\right)$`,
      },
    },
    {
      id: 'r2-5-8-exercise6',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex6',
        number: '5.8.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn avstanden fra punktet $P = (4, 5, 6)$ til linjen $\\ell: \\vec{r} = [1, 2, 3] + t[1, 1, 1]$.',
        solution: `$Q = (1, 2, 3)$, $\\vec{v} = [1, 1, 1]$, $\\overrightarrow{QP} = [3, 3, 3]$

Kryssprodukt:
$\\overrightarrow{QP} \\times \\vec{v} = [3 \\cdot 1 - 3 \\cdot 1, 3 \\cdot 1 - 3 \\cdot 1, 3 \\cdot 1 - 3 \\cdot 1] = [0, 0, 0]$

Kryssproduktet er null, som betyr at $\\overrightarrow{QP}$ er parallell med $\\vec{v}$.

**Punktet $P$ ligger på linjen!** Avstanden er $0$.`,
      },
    },
    {
      id: 'r2-5-8-exercise7',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex7',
        number: '5.8.7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Avgjør om linjene er parallelle, skjærende eller vindskjeve, og finn eventuelt avstanden:
- $\\ell_1: \\vec{r} = [1, 1, 0] + s[1, 0, 1]$
- $\\ell_2: \\vec{r} = [0, 2, 0] + t[1, 0, 1]$`,
        solution: `Retningsvektorene er like: $\\vec{v} = [1, 0, 1]$. Linjene er **parallelle**.

Avstand fra $(0, 2, 0)$ til $\\ell_1$:

$\\overrightarrow{QP} = [0-1, 2-1, 0-0] = [-1, 1, 0]$

$\\overrightarrow{QP} \\times \\vec{v} = [1 \\cdot 1 - 0 \\cdot 0, 0 \\cdot 1 - (-1) \\cdot 1, (-1) \\cdot 0 - 1 \\cdot 1] = [1, 1, -1]$

$d = \\frac{\\sqrt{1 + 1 + 1}}{\\sqrt{1 + 0 + 1}} = \\frac{\\sqrt{3}}{\\sqrt{2}} = \\sqrt{\\frac{3}{2}} \\approx 1.22$`,
        hints: ['Sjekk først om retningsvektorene er parallelle.'],
      },
    },
    {
      id: 'r2-5-8-exercise8',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex8',
        number: '5.8.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn avstanden mellom de vindskjeve linjene:
- $\\ell_1: \\vec{r} = [2, 0, 1] + s[1, 1, 0]$
- $\\ell_2: \\vec{r} = [0, 1, 0] + t[0, 1, 1]$`,
        solution: `$\\vec{a} = [2, 0, 1]$, $\\vec{b} = [0, 1, 0]$, $\\vec{u} = [1, 1, 0]$, $\\vec{v} = [0, 1, 1]$

Kryssprodukt $\\vec{u} \\times \\vec{v}$:
$= [1 \\cdot 1 - 0 \\cdot 1, 0 \\cdot 0 - 1 \\cdot 1, 1 \\cdot 1 - 1 \\cdot 0] = [1, -1, 1]$

Forbindelsesvektor:
$\\vec{b} - \\vec{a} = [-2, 1, -1]$

Skalarprodukt:
$(\\vec{b} - \\vec{a}) \\cdot (\\vec{u} \\times \\vec{v}) = -2 \\cdot 1 + 1 \\cdot (-1) + (-1) \\cdot 1 = -2 - 1 - 1 = -4$

Avstand:
$d = \\frac{|-4|}{\\sqrt{1 + 1 + 1}} = \\frac{4}{\\sqrt{3}} = \\frac{4\\sqrt{3}}{3} \\approx 2.31$`,
      },
    },
    {
      id: 'r2-5-8-exercise9',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex9',
        number: '5.8.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et plan $\\alpha$ går gjennom punktet $A = (1, 1, 1)$ og er parallelt med vektorene $\\vec{u} = [1, 2, 0]$ og $\\vec{v} = [0, 1, 1]$. Finn avstanden fra origo til dette planet.',
        solution: `Normalvektor:
$\\vec{n} = \\vec{u} \\times \\vec{v} = [2 \\cdot 1 - 0 \\cdot 1, 0 \\cdot 0 - 1 \\cdot 1, 1 \\cdot 1 - 2 \\cdot 0] = [2, -1, 1]$

Planligning med $A = (1, 1, 1)$:
$2(x - 1) - 1(y - 1) + 1(z - 1) = 0$
$2x - 2 - y + 1 + z - 1 = 0$
$2x - y + z = 2$

Avstand fra origo:
$d = \\frac{|2 \\cdot 0 - 0 + 0 - 2|}{\\sqrt{4 + 1 + 1}} = \\frac{2}{\\sqrt{6}} = \\frac{2\\sqrt{6}}{6} = \\frac{\\sqrt{6}}{3} \\approx 0.82$`,
      },
    },
    {
      id: 'r2-5-8-exercise10',
      type: 'exercise',
      exercise: {
        id: 'r2-5-8-ex10',
        number: '5.8.10',
        type: 'upload',
        difficulty: 'vanskelig',
        task: `Et tetraeder har hjørner i $A = (0, 0, 0)$, $B = (3, 0, 0)$, $C = (0, 4, 0)$ og $D = (0, 0, 5)$.

a) Finn ligningen for planet gjennom $B$, $C$ og $D$.
b) Finn avstanden fra $A$ til dette planet.
c) Bruk resultatet til å beregne volumet av tetraederet.`,
        solution: `**a)** Retningsvektorer fra $B$:
$\\vec{u} = \\overrightarrow{BC} = [-3, 4, 0]$, $\\vec{v} = \\overrightarrow{BD} = [-3, 0, 5]$

Normalvektor:
$\\vec{n} = \\vec{u} \\times \\vec{v} = [4 \\cdot 5 - 0 \\cdot 0, 0 \\cdot (-3) - (-3) \\cdot 5, (-3) \\cdot 0 - 4 \\cdot (-3)]$
$= [20, 15, 12]$

Planligning med $B = (3, 0, 0)$:
$20(x - 3) + 15y + 12z = 0$
$20x + 15y + 12z = 60$

**b)** Avstand fra $A = (0, 0, 0)$:
$d = \\frac{|20 \\cdot 0 + 15 \\cdot 0 + 12 \\cdot 0 - 60|}{\\sqrt{400 + 225 + 144}} = \\frac{60}{\\sqrt{769}}$

$d \\approx 2.16$

**c)** Areal av trekant $BCD$:
$|\\vec{u} \\times \\vec{v}| = \\sqrt{769}$
$\\text{Areal} = \\frac{\\sqrt{769}}{2}$

Volum:
$V = \\frac{1}{3} \\cdot \\text{Areal} \\cdot h = \\frac{1}{3} \\cdot \\frac{\\sqrt{769}}{2} \\cdot \\frac{60}{\\sqrt{769}} = \\frac{60}{6} = 10$

**Svar**: Volumet er $10$ kubikkenheter.`,
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_1_3: TextbookChapter = {
  id: 'r2-1-3',
  courseId: 'r2',
  chapterNumber: '1.3',
  title: 'Geometriske følger',
  description: 'Folger med konstant kvotient mellom hvert ledd.',
  estimatedMinutes: 50,
  competenceGoals: [
    'forsta og bruke formler for geometriske følger',
    'anvende geometriske følger i praktiske situasjoner',
  ],
  content: [
    {
      id: 'r2-1-3-intro',
      type: 'text',
      content: `## Hva er en geometrisk folge?

I forrige kapittel sa vi på aritmetiske følger, der vi adderer en fast differanse $d$ for a ga fra ett ledd til det neste. Na skal vi se på **geometriske følger**.

I en geometrisk folge gar vi fra ett ledd til det neste ved a **multiplisere** med et fast tall $k$, som kalles **kvotienten**.

**Eksempler fra hverdagen:**
- Rentes rente (banksparing og lan)
- Befolkningsvekst
- Radioaktiv nedbrytning`,
    },
    {
      id: 'r2-1-3-def-1',
      type: 'definition',
      title: 'Geometrisk folge',
      content: `En **geometrisk folge** er en folge der forholdet mellom pafolgende ledd er konstant.

Kvotienten betegnes $k$: $k = \\frac{a_{n+1}}{a_n}$

**Eksempler:**
- $2, 6, 18, 54, \\ldots$ har $k = 3$
- $100, 50, 25, \\ldots$ har $k = 0{,}5$`,
    },
    {
      id: 'r2-1-3-example-1',
      type: 'example',
      title: 'Eksempel 1: Er folgen geometrisk?',
      problem: 'Avgjer om $3, 6, 12, 24, 48, \\ldots$ er en geometrisk folge.',
      solution: `Vi sjekker forholdene:
$\\frac{6}{3} = 2$
$\\frac{12}{6} = 2$
$\\frac{24}{12} = 2$

Forholdet er konstant, sa folgen er **geometrisk** med $k = 2$.`,
    },
    {
      id: 'r2-1-3-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-3-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Avgjer om $81, 27, 9, 3, \\ldots$ er en geometrisk folge. Finn i sa fall $k$.',
        solution: 'Ja, geometrisk med $k = \\frac{1}{3}$',
        hints: ['Sjekk om forholdet mellom pafolgende ledd er konstant.'],
      },
    },
    {
      id: 'r2-1-3-theorem-1',
      type: 'theorem',
      title: 'Eksplisitt formel',
      content: `For en geometrisk folge med forste ledd $a_1$ og kvotient $k$:

$$a_n = a_1 \\cdot k^{n-1}$$`,
    },
    {
      id: 'r2-1-3-example-2',
      type: 'example',
      title: 'Eksempel 2: Finne et bestemt ledd',
      problem: 'En geometrisk folge har $a_1 = 5$ og $k = 2$. Finn $a_8$.',
      solution: `$a_8 = 5 \\cdot 2^{8-1} = 5 \\cdot 2^7 = 5 \\cdot 128 = 640$`,
    },
    {
      id: 'r2-1-3-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-3-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'En geometrisk folge har $a_1 = 4$ og $k = 3$. Finn $a_6$.',
        solution: '$a_6 = 4 \\cdot 3^5 = 4 \\cdot 243 = 972$',
        hints: ['Bruk formelen $a_n = a_1 \\cdot k^{n-1}$.'],
      },
    },
    {
      id: 'r2-1-3-example-3',
      type: 'example',
      title: 'Eksempel 3: Finne kvotienten',
      problem: 'I en geometrisk folge er $a_2 = 12$ og $a_5 = 324$. Finn $k$.',
      solution: `Fra $a_2$ til $a_5$ er det $5 - 2 = 3$ steg.

$a_5 = a_2 \\cdot k^3$
$324 = 12 \\cdot k^3$
$k^3 = 27$
$k = 3$`,
    },
    {
      id: 'r2-1-3-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-3-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'I en geometrisk folge er $a_3 = 20$ og $a_6 = 540$. Finn $k$ og $a_1$.',
        solution: '$k = 3$, $a_1 = \\frac{20}{9}$',
        hints: ['Bruk at $a_6 = a_3 \\cdot k^3$.', 'Deretter finn $a_1$ fra $a_3$.'],
      },
    },
    {
      id: 'r2-1-3-text-vekst',
      type: 'text',
      content: `## Vekstfaktor og prosentvis endring

Kvotienten $k$ kalles ofte **vekstfaktoren**:

$$k = 1 + \\frac{p}{100}$$

der $p$ er prosentvis endring.

**Eksempler:**
- 5% okning: $k = 1{,}05$
- 3% nedgang: $k = 0{,}97$`,
    },
    {
      id: 'r2-1-3-example-4',
      type: 'example',
      title: 'Eksempel 4: Rentes rente',
      problem: 'Du setter 10 000 kr i banken med 4% arlig rente. Hvor mye har du etter 5 ar?',
      solution: `Vekstfaktoren er $k = 1{,}04$.

$a_5 = 10\\,000 \\cdot 1{,}04^5 = 10\\,000 \\cdot 1{,}2167 \\approx 12\\,167$ kr`,
    },
    {
      id: 'r2-1-3-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-1-3-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'En bil mister 15% av verdien hvert ar. Den kostet 300 000 kr ny. Hva er den verdt etter 3 ar?',
        solution: '$k = 0{,}85$, verdi = $300\\,000 \\cdot 0{,}85^3 \\approx 184\\,109$ kr',
        hints: ['15% nedgang betyr $k = 1 - 0{,}15 = 0{,}85$.'],
      },
    },
    {
      id: 'r2-1-3-example-5',
      type: 'example',
      title: 'Eksempel 5: Halveringstid',
      problem: 'Et radioaktivt stoff har halveringstid på 10 ar. Du starter med 200 gram. Hvor mye er igjen etter 30 år?',
      solution: `Halveringstid betyr $k = 0{,}5$ per periode.

30 år = 3 halveringsperioder.

$a_3 = 200 \\cdot 0{,}5^3 = 200 \\cdot 0{,}125 = 25$ gram`,
    },
    {
      id: 'r2-1-3-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-1-3-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Bakterier dobler seg hver time. Du starter med 100 bakterier. Nar er det over 10 000?',
        solution: '$100 \\cdot 2^n > 10\\,000 \\Rightarrow 2^n > 100 \\Rightarrow n > 6{,}64$. Etter 7 timer.',
        hints: ['Dobling betyr $k = 2$. Los $100 \\cdot 2^n > 10\\,000$.'],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_1_4: TextbookChapter = {
  id: 'r2-1-4',
  courseId: 'r2',
  chapterNumber: '1.4',
  title: 'Rekker og summasjon',
  description: 'Summer av følger og sigmanotasjon.',
  estimatedMinutes: 55,
  competenceGoals: [
    'bruke sigmanotasjon til a skrive summer',
    'beregne summer av aritmetiske og geometriske følger',
  ],
  content: [
    {
      id: 'r2-1-4-intro',
      type: 'text',
      content: `## Fra følger til rekker

En **rekke** er summen av leddene i en folge.

Tenk deg at du sparer 1000 kr hver maned. Etter 6 måneder har du spart:
$$1000 + 1000 + 1000 + 1000 + 1000 + 1000 = 6000 \\text{ kr}$$

Dette er et eksempel på en rekke.`,
    },
    {
      id: 'r2-1-4-def-1',
      type: 'definition',
      title: 'Sigmanotasjon',
      content: `Summer skrives med det greske bokstaven sigma: $\\Sigma$

$$\\sum_{k=1}^{n} a_k = a_1 + a_2 + a_3 + \\cdots + a_n$$

- $k$ er summeringsindeksen
- 1 er nedre grense
- $n$ er ovre grense`,
    },
    {
      id: 'r2-1-4-example-1',
      type: 'example',
      title: 'Eksempel 1: Beregne en sum',
      problem: 'Beregn $\\displaystyle\\sum_{k=1}^{4} k^2$.',
      solution: `Vi setter inn $k = 1, 2, 3, 4$:

$\\sum_{k=1}^{4} k^2 = 1^2 + 2^2 + 3^2 + 4^2 = 1 + 4 + 9 + 16 = 30$`,
    },
    {
      id: 'r2-1-4-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-4-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Beregn $\\displaystyle\\sum_{k=1}^{5} 2k$.',
        solution: '$2 + 4 + 6 + 8 + 10 = 30$',
        hints: ['Sett inn $k = 1, 2, 3, 4, 5$ og legg sammen.'],
      },
    },
    {
      id: 'r2-1-4-example-2',
      type: 'example',
      title: 'Eksempel 2: Skrive med sigmanotasjon',
      problem: 'Skriv summen $5 + 10 + 15 + 20 + 25$ med sigmanotasjon.',
      solution: `Leddene er $5 \\cdot 1, 5 \\cdot 2, 5 \\cdot 3, 5 \\cdot 4, 5 \\cdot 5$.

Det generelle leddet er $a_k = 5k$.

$$5 + 10 + 15 + 20 + 25 = \\sum_{k=1}^{5} 5k$$`,
    },
    {
      id: 'r2-1-4-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-4-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv summen $1 + 4 + 9 + 16 + 25 + 36$ med sigmanotasjon.',
        solution: '$\\sum_{k=1}^{6} k^2$',
        hints: ['Dette er kvadrattallene.'],
      },
    },
    {
      id: 'r2-1-4-theorem-1',
      type: 'theorem',
      title: 'Sum av aritmetisk rekke',
      content: `For en aritmetisk folge:

$$S_n = \\frac{n(a_1 + a_n)}{2}$$

**Alternativt:**
$$S_n = \\frac{n}{2}(2a_1 + (n-1)d)$$`,
    },
    {
      id: 'r2-1-4-example-3',
      type: 'example',
      title: 'Eksempel 3: Sum av aritmetisk rekke',
      problem: 'Finn summen $1 + 2 + 3 + \\ldots + 100$.',
      solution: `$a_1 = 1$, $a_{100} = 100$, $n = 100$

$S_{100} = \\frac{100(1 + 100)}{2} = \\frac{100 \\cdot 101}{2} = 5050$`,
    },
    {
      id: 'r2-1-4-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-4-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn summen $3 + 6 + 9 + \\ldots + 99$.',
        solution: 'Det er 33 ledd. $S = \\frac{33(3 + 99)}{2} = \\frac{33 \\cdot 102}{2} = 1683$',
        hints: ['Finn forst hvor mange ledd det er.'],
      },
    },
    {
      id: 'r2-1-4-theorem-2',
      type: 'theorem',
      title: 'Sum av geometrisk rekke',
      content: `For en geometrisk folge med $k \\neq 1$:

$$S_n = a_1 \\cdot \\frac{k^n - 1}{k - 1}$$`,
    },
    {
      id: 'r2-1-4-example-4',
      type: 'example',
      title: 'Eksempel 4: Sum av geometrisk rekke',
      problem: 'Finn summen $2 + 4 + 8 + 16 + 32$.',
      solution: `$a_1 = 2$, $k = 2$, $n = 5$

$S_5 = 2 \\cdot \\frac{2^5 - 1}{2 - 1} = 2 \\cdot \\frac{31}{1} = 62$`,
    },
    {
      id: 'r2-1-4-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-1-4-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn summen $1 + 3 + 9 + 27 + 81 + 243$.',
        solution: '$a_1 = 1$, $k = 3$, $n = 6$. $S_6 = 1 \\cdot \\frac{3^6 - 1}{3 - 1} = \\frac{728}{2} = 364$',
        hints: ['Bruk formelen $S_n = a_1 \\cdot \\frac{k^n - 1}{k - 1}$.'],
      },
    },
    {
      id: 'r2-1-4-example-5',
      type: 'example',
      title: 'Eksempel 5: Praktisk anvendelse',
      problem: 'Du sparer 500 kr forste maned, og oker med 100 kr hver maned. Hvor mye har du spart etter 12 måneder?',
      solution: `Dette er en aritmetisk folge: $a_1 = 500$, $d = 100$, $n = 12$.

$a_{12} = 500 + 11 \\cdot 100 = 1600$

$S_{12} = \\frac{12(500 + 1600)}{2} = \\frac{12 \\cdot 2100}{2} = 12\\,600$ kr`,
    },
    {
      id: 'r2-1-4-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-1-4-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et kinosal har 15 seter i forste rad og 3 flere i hver rad. Det er 10 rader. Hvor mange seter er det totalt?',
        solution: '$a_1 = 15$, $d = 3$, $n = 10$. $a_{10} = 15 + 27 = 42$. $S_{10} = \\frac{10(15 + 42)}{2} = 285$ seter',
        hints: ['Dette er en aritmetisk rekke.'],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_1_5: TextbookChapter = {
  id: 'r2-1-5',
  courseId: 'r2',
  chapterNumber: '1.5',
  title: 'Uendelige rekker og konvergens',
  description: 'Lar om uendelige rekker, konvergens og divergens.',
  estimatedMinutes: 55,
  competenceGoals: ['utforske eigenskapar ved ulike foljer'],
  content: [
    {
      id: 'r2-1-5-intro',
      type: 'text',
      content: `## Uendelige rekker

I forrige kapittel sa vi på endelige rekker - summer med et bestemt antall ledd. Men hva skjer nar vi lar antall ledd ga mot uendelig?

Tenk på rekken $1 + \\frac{1}{2} + \\frac{1}{4} + \\frac{1}{8} + \\cdots$. Selv om vi legger sammen uendelig mange ledd, vokser ikke summen over alle grenser - den narmer seg tallet 2.`,
    },
    {
      id: 'r2-1-5-konvergens-bilde',
      type: 'image',
      src: '/images/r2/rekker-konvergens.svg',
      alt: 'Illustrasjon av konvergens og divergens for rekker',
      caption: 'Konvergens av rekker - delsummene narmer seg en grense',
    },
    {
      id: 'r2-1-5-def-1',
      type: 'definition',
      title: 'Uendelig rekke',
      content: `En **uendelig rekke** er summen av uendelig mange ledd:

$$\\sum_{n=1}^{\\infty} a_n = a_1 + a_2 + a_3 + \\cdots$$

Den $n$-te **delsummen** er $S_n = a_1 + a_2 + \\cdots + a_n$.`,
    },
    {
      id: 'r2-1-5-def-2',
      type: 'definition',
      title: 'Konvergens og divergens',
      content: `En uendelig rekke **konvergerer** hvis folgen av delsummer $\\{S_n\\}$ har en endelig grenseverdi:

$$S = \\lim_{n \\to \\infty} S_n$$

Da sier vi at rekken har **summen** $S$. Hvis grenseverdien ikke eksisterer eller er uendelig, sier vi at rekken **divergerer**.`,
    },
    {
      id: 'r2-1-5-taylor-bilde',
      type: 'image',
      src: '/images/r2/taylor-polynom.svg',
      alt: 'Illustrasjon av Taylor-polynom som tilnarming til en funksjon',
      caption: 'Taylor-polynom - tilnarming av funksjoner ved hjelp av uendelige rekker',
    },
    {
      id: 'r2-1-5-example-1',
      type: 'example',
      title: 'Eksempel 1: Geometrisk rekke',
      problem: 'Finn summen av den uendelige geometriske rekken $1 + \\frac{1}{2} + \\frac{1}{4} + \\frac{1}{8} + \\cdots$',
      solution: `Vi har $a_1 = 1$ og $k = \\frac{1}{2}$.

**Delsummene:**
- $S_1 = 1$
- $S_2 = 1{,}5$
- $S_3 = 1{,}75$
- $S_4 = 1{,}875$

Nar $n \\to \\infty$, gar $(\\frac{1}{2})^n \\to 0$, sa:
$$S = \\frac{1}{1 - \\frac{1}{2}} = 2$$

**Svar:** Rekken konvergerer mot $2$.`,
    },
    {
      id: 'r2-1-5-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-5-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn summen av den uendelige geometriske rekken $3 + 1 + \\frac{1}{3} + \\frac{1}{9} + \\cdots$',
        solution: 'Her er $a_1 = 3$ og $k = \\frac{1}{3}$. Summen blir $S = \\frac{3}{1 - \\frac{1}{3}} = \\frac{3}{\\frac{2}{3}} = \\frac{9}{2} = 4{,}5$',
        hints: ['Identifiser $a_1$ og $k$.', 'Bruk formelen $S = \\frac{a_1}{1-k}$.'],
      },
    },
    {
      id: 'r2-1-5-theorem-1',
      type: 'theorem',
      title: 'Uendelig geometrisk rekke',
      content: `For en geometrisk rekke med forste ledd $a_1$ og kvotient $k$ der $|k| < 1$:

$$\\sum_{n=1}^{\\infty} a_1 \\cdot k^{n-1} = \\frac{a_1}{1 - k}$$

Hvis $|k| \\geq 1$, divergerer rekken.`,
    },
    {
      id: 'r2-1-5-example-2',
      type: 'example',
      title: 'Eksempel 2: Sprettball',
      problem: 'En ball slippes fra 10 m og spretter til 60% av forrige høyde. Finn total strekning.',
      solution: `Forste fall: 10 m ned.
Forste sprett: 6 m opp + 6 m ned = 12 m
Andre sprett: 3,6 m opp + 3,6 m ned = 7,2 m

Total strekning:
$$S = 10 + 2(6 + 3{,}6 + 2{,}16 + \\cdots)$$

Rekken $6 + 3{,}6 + \\cdots$ er geometrisk med $a_1 = 6$, $k = 0{,}6$:
$$S = 10 + 2 \\cdot \\frac{6}{1-0{,}6} = 10 + 2 \\cdot 15 = 40 \\text{ m}$$`,
    },
    {
      id: 'r2-1-5-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-5-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'En pendel svinger med avtagende amplitude. Forste utslag er 20 cm, og hvert pafolgende utslag er 75% av det forrige. Finn den totale strekningen pendelen tilbakelegger.',
        solution: 'Total strekning = $20 + 2 \\cdot \\frac{15}{1-0{,}75} = 20 + 2 \\cdot 60 = 140$ cm',
        hints: ['Hvert utslag telles dobbelt (begge veier).'],
      },
    },
    {
      id: 'r2-1-5-text-2',
      type: 'text',
      content: `## Divergente rekker

Ikke alle uendelige rekker konvergerer. Den **harmoniske rekken** $1 + \\frac{1}{2} + \\frac{1}{3} + \\frac{1}{4} + \\cdots$ divergerer, selv om leddene gar mot null.`,
    },
    {
      id: 'r2-1-5-theorem-2',
      type: 'theorem',
      title: 'Nodvendig betingelse for konvergens',
      content: `Hvis rekken $\\sum_{n=1}^{\\infty} a_n$ konvergerer, sa ma $\\lim_{n \\to \\infty} a_n = 0$.

**Merk:** Dette er nodvendig, men ikke tilstrekkelig. At $a_n \\to 0$ garanterer ikke konvergens!`,
    },
    {
      id: 'r2-1-5-example-3',
      type: 'example',
      title: 'Eksempel 3: Harmonisk rekke',
      problem: 'Undersok om den harmoniske rekken $\\sum_{n=1}^{\\infty} \\frac{1}{n}$ konvergerer.',
      solution: `Leddene gar mot null: $\\lim_{n \\to \\infty} \\frac{1}{n} = 0$

Men rekken divergerer! Vi kan gruppere leddene:
$$1 + \\frac{1}{2} + \\left(\\frac{1}{3} + \\frac{1}{4}\\right) + \\left(\\frac{1}{5} + \\cdots + \\frac{1}{8}\\right) + \\cdots$$

Hver gruppe er storre enn $\\frac{1}{2}$, sa summen vokser uten grense.`,
    },
    {
      id: 'r2-1-5-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-5-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Avgjer om rekken $\\sum_{n=1}^{\\infty} \\frac{n}{n+1}$ konvergerer eller divergerer.',
        solution: '$\\lim_{n \\to \\infty} \\frac{n}{n+1} = 1 \\neq 0$, sa rekken divergerer.',
        hints: ['Finn grenseverdien til leddene.'],
      },
    },
    {
      id: 'r2-1-5-theorem-3',
      type: 'theorem',
      title: 'p-rekker',
      content: `Rekken $\\sum_{n=1}^{\\infty} \\frac{1}{n^p}$ konvergerer hvis $p > 1$ og divergerer hvis $p \\leq 1$.`,
    },
    {
      id: 'r2-1-5-example-4',
      type: 'example',
      title: 'Eksempel 4: p-rekker',
      problem: 'Avgjer om $\\sum_{n=1}^{\\infty} \\frac{1}{n^2}$ og $\\sum_{n=1}^{\\infty} \\frac{1}{\\sqrt{n}}$ konvergerer.',
      solution: `**Rekke 1:** $p = 2 > 1$, sa rekken **konvergerer**.

**Rekke 2:** $p = \\frac{1}{2} < 1$, sa rekken **divergerer**.`,
    },
    {
      id: 'r2-1-5-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-1-5-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Avgjer om rekken $\\sum_{n=1}^{\\infty} \\frac{1}{n^{1{,}5}}$ konvergerer.',
        solution: '$p = 1{,}5 > 1$, sa rekken konvergerer.',
        hints: ['Bruk setningen om p-rekker.'],
      },
    },
    {
      id: 'r2-1-5-text-3',
      type: 'text',
      content: `## Oppsummering

| Type rekke | Betingelse | Konklusjon |
|------------|------------|------------|
| Geometrisk | $|k| < 1$ | Konvergerer, sum $= \\frac{a_1}{1-k}$ |
| Geometrisk | $|k| \\geq 1$ | Divergerer |
| p-rekke | $p > 1$ | Konvergerer |
| p-rekke | $p \\leq 1$ | Divergerer |`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_1_6: TextbookChapter = {
  id: 'r2-1-6',
  courseId: 'r2',
  chapterNumber: '1.6',
  title: 'Induksjonsbevis',
  description: 'Lar matematisk induksjon - en bevismetode for pastand som gjelder for alle naturlige tall.',
  estimatedMinutes: 60,
  competenceGoals: ['analysere og forsta matematiske bevis'],
  content: [
    {
      id: 'r2-1-6-intro',
      type: 'text',
      content: `## Matematisk induksjon

Hvordan kan vi bevise at en formel gjelder for *alle* naturlige tall? Vi kan ikke sjekke uendelig mange tilfeller.

**Matematisk induksjon** lar oss bevise pastander for alle naturlige tall ved a bruke et endelig argument. Tenk på dominobrikker: hvis den forste faller og hver brikke velter den neste, faller alle.`,
    },
    {
      id: 'r2-1-6-def-1',
      type: 'definition',
      title: 'Matematisk induksjon',
      content: `For a bevise at $P(n)$ gjelder for alle $n \\geq n_0$:

**1. Basisteg:** Vis at $P(n_0)$ er sann (vanligvis $n_0 = 1$)

**2. Induksjonssteg:** Anta at $P(k)$ er sann. Vis at dette medforer at $P(k+1)$ er sann.

**Konklusjon:** Da gjelder $P(n)$ for alle $n \\geq n_0$.`,
    },
    {
      id: 'r2-1-6-example-1',
      type: 'example',
      title: 'Eksempel 1: Sumformel',
      problem: 'Bevis at $1 + 2 + 3 + \\cdots + n = \\frac{n(n+1)}{2}$ for alle $n \\geq 1$.',
      solution: `La $P(n)$: $1 + 2 + \\cdots + n = \\frac{n(n+1)}{2}$

**Basisteg ($n = 1$):**
VS: $1$, HS: $\\frac{1 \\cdot 2}{2} = 1$ ✓

**Induksjonssteg:**
Anta $P(k)$: $1 + 2 + \\cdots + k = \\frac{k(k+1)}{2}$

Vis $P(k+1)$:
$$1 + 2 + \\cdots + k + (k+1) = \\frac{k(k+1)}{2} + (k+1)$$
$$= \\frac{k(k+1) + 2(k+1)}{2} = \\frac{(k+1)(k+2)}{2}$$

Dette er $P(k+1)$! ✓`,
    },
    {
      id: 'r2-1-6-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-6-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bevis ved induksjon at $1 + 3 + 5 + \\cdots + (2n-1) = n^2$ for alle $n \\geq 1$.',
        solution: 'Basisteg: $1 = 1^2$ ✓. Induksjonssteg: $k^2 + (2k+1) = (k+1)^2$ ✓',
        hints: ['Sjekk formelen for $n = 1$.', 'Legg til $(2k+1)$ på begge sider.'],
      },
    },
    {
      id: 'r2-1-6-example-2',
      type: 'example',
      title: 'Eksempel 2: Ulikhet',
      problem: 'Bevis ved induksjon at $2^n > n$ for alle $n \\geq 1$.',
      solution: `**Basisteg ($n = 1$):**
$2^1 = 2 > 1$ ✓

**Induksjonssteg:**
Anta $2^k > k$.

$$2^{k+1} = 2 \\cdot 2^k > 2k \\geq k + 1$$
(siden $k \\geq 1$)

Altsa $2^{k+1} > k + 1$ ✓`,
    },
    {
      id: 'r2-1-6-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-6-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Bevis ved induksjon at $n! > 2^n$ for alle $n \\geq 4$.',
        solution: 'Basisteg: $4! = 24 > 16 = 2^4$ ✓. Induksjonssteg: $(k+1)! = (k+1) \\cdot k! > (k+1) \\cdot 2^k > 2 \\cdot 2^k = 2^{k+1}$',
        hints: ['Basisteg: Sjekk $n = 4$.', 'Bruk at $k+1 > 2$ for $k \\geq 4$.'],
      },
    },
    {
      id: 'r2-1-6-example-3',
      type: 'example',
      title: 'Eksempel 3: Delelighet',
      problem: 'Bevis at $n^3 - n$ er delelig med 6 for alle $n \\geq 1$.',
      solution: `**Basisteg ($n = 1$):**
$1^3 - 1 = 0$, og $6 | 0$ ✓

**Induksjonssteg:**
$(k+1)^3 - (k+1) = (k^3 - k) + 3k(k+1)$

- $(k^3 - k)$ er delelig med 6 (indukhyp)
- $k(k+1)$ er delelig med 2 (to pafolgende tall)
- Dermed er $3k(k+1)$ delelig med 6

Summen er delelig med 6. ✓`,
    },
    {
      id: 'r2-1-6-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-6-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bevis at $4^n - 1$ er delelig med 3 for alle $n \\geq 1$.',
        solution: 'Basisteg: $4^1 - 1 = 3$ ✓. Induksjonssteg: $4^{k+1} - 1 = 4(4^k - 1) + 3$, begge ledd delelig med 3.',
        hints: ['Skriv om $4^{k+1}$ som $4 \\cdot 4^k$.'],
      },
    },
    {
      id: 'r2-1-6-text-2',
      type: 'text',
      content: `## Oppsummering

**Tips for induksjonsbevis:**
- Formuler pastanden $P(n)$ klart
- Sjekk alltid basisteget forst
- Bruk induksjonshypotesen eksplisitt
- Vis tydelig hvordan du far $P(k+1)$ fra $P(k)$`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_1_7: TextbookChapter = {
  id: 'r2-1-7',
  courseId: 'r2',
  chapterNumber: '1.7',
  title: 'Rekursive sammenhenger og programmering',
  description: 'Bruk programmering til å utforske følger og rekker.',
  estimatedMinutes: 55,
  competenceGoals: ['utforske rekursive samanhengar ved a bruke programmering'],
  content: [
    {
      id: 'r2-1-7-intro',
      type: 'text',
      content: `## Programmering og rekursjon

Programmering er et kraftig verktøy for å utforske matematiske sammenhenger. Vi kan bruke Python til å generere følger, beregne summer og simulere rekursive prosesser.`,
    },
    {
      id: 'r2-1-7-def-1',
      type: 'definition',
      title: 'Rekursjon',
      content: `En **rekursiv definisjon** definerer en verdi ved hjelp av tidligere verdier.

For følger: $a_n = f(a_{n-1}, a_{n-2}, \\ldots)$

En rekursiv definisjon trenger alltid **startverdier** (basiskasus).`,
    },
    {
      id: 'r2-1-7-example-1',
      type: 'example',
      title: 'Eksempel 1: Aritmetisk folge i Python',
      problem: 'Skriv et program som genererer de 10 forste leddene i folgen $a_n = 3 + 5(n-1)$.',
      solution: `\`\`\`python
# Rekursiv metode
a = 3  # Startverdi
for n in range(1, 11):
    print(f"a_{n} = {a}")
    a = a + 5  # a_n = a_{n-1} + 5
\`\`\`

**Utskrift:**
a_1 = 3, a_2 = 8, a_3 = 13, ..., a_10 = 48`,
    },
    {
      id: 'r2-1-7-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-1-7-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv et Python-program som genererer de 15 forste leddene i folgen med $a_1 = 10$ og $d = -3$.',
        solution: 'Programmet skal gi: 10, 7, 4, 1, -2, -5, ..., -32',
        hints: ['Bruk en for-lokke.', 'Oppdater $a$ med $a = a - 3$.'],
      },
    },
    {
      id: 'r2-1-7-example-2',
      type: 'example',
      title: 'Eksempel 2: Fibonacci i Python',
      problem: 'Skriv et program som beregner de 20 forste Fibonacci-tallene.',
      solution: `\`\`\`python
fib = [1, 1]
for i in range(2, 20):
    fib.append(fib[i-1] + fib[i-2])

for i, f in enumerate(fib, 1):
    print(f"F_{i} = {f}")
\`\`\`

**Utskrift:** F_1 = 1, F_2 = 1, F_3 = 2, ..., F_20 = 6765`,
    },
    {
      id: 'r2-1-7-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-1-7-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn forholdet $\\frac{F_n}{F_{n-1}}$ for store $n$. Hva skjer?',
        solution: 'Forholdet konvergerer mot det gylne snitt $\\phi \\approx 1{,}618$.',
        hints: ['Legg til beregning av fib[i]/fib[i-1].'],
      },
    },
    {
      id: 'r2-1-7-text-2',
      type: 'text',
      content: `## Rekursive funksjoner

En **rekursiv funksjon** er en funksjon som kaller seg selv. Den ma ha et basiskasus som stopper rekursjonen.`,
    },
    {
      id: 'r2-1-7-example-3',
      type: 'example',
      title: 'Eksempel 3: Fakultet rekursivt',
      problem: 'Implementer fakultet $n! = n \\cdot (n-1)!$ som en rekursiv funksjon.',
      solution: `\`\`\`python
def fakultet(n):
    if n <= 1:
        return 1
    return n * fakultet(n - 1)

for i in range(10):
    print(f"{i}! = {fakultet(i)}")
\`\`\``,
    },
    {
      id: 'r2-1-7-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-1-7-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv en rekursiv funksjon for det n-te Fibonacci-tallet.',
        solution: 'def fib(n): return 1 if n <= 2 else fib(n-1) + fib(n-2)',
        hints: ['Basiskasus: $F_1 = F_2 = 1$.'],
      },
    },
    {
      id: 'r2-1-7-example-4',
      type: 'example',
      title: 'Eksempel 4: Simulere sprettball',
      problem: 'Simuler en ball fra 10 m som spretter til 80% av forrige høyde.',
      solution: `\`\`\`python
h = 10
total = h
while h > 0.001:
    h = h * 0.8
    total += 2 * h

print(f"Total strekning: {total:.2f} m")
\`\`\`

**Utskrift:** Total strekning: 90.00 m (narmer seg teoretisk 90)`,
    },
    {
      id: 'r2-1-7-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-1-7-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Modifiser programmet til å finne nar ballen spretter under 1 cm.',
        solution: 'Med sprettfaktor 0.8 trengs det 42 sprett.',
        hints: ['Tell antall iterasjoner.'],
      },
    },
    {
      id: 'r2-1-7-text-3',
      type: 'text',
      content: `## Oppsummering

**Rekursjon i programmering:**
- Rekursive definisjoner kan implementeres som rekursive funksjoner
- Alternativt bruker vi lokker (iterasjon)
- Rekursive funksjoner ma alltid ha et basiskasus

**Typiske anvendelser:**
| Problem | Rekursiv formel |
|---------|-----------------|
| Aritmetisk folge | $a_n = a_{n-1} + d$ |
| Geometrisk folge | $a_n = k \\cdot a_{n-1}$ |
| Fibonacci | $F_n = F_{n-1} + F_{n-2}$ |
| Fakultet | $n! = n \\cdot (n-1)!$ |`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_1: TextbookChapter = {
  id: 'r2-2-1',
  courseId: 'r2',
  chapterNumber: '2.1',
  title: 'Repetisjon av derivasjon',
  description: 'Gjennomgang av derivasjonsregler fra R1.',
  estimatedMinutes: 45,
  competenceGoals: [
    'beherske grunnleggende derivasjonsregler',
    'kunne derivere sammensatte funksjoner',
    'anvende produkt- og kvotientregelen',
    'bruke kjerneregelen på sammensatte funksjoner',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-2-1-intro',
      type: 'text',
      content: `## Derivasjon - en oversikt

I R1 lærte du å derivere funksjoner. Derivasjon handler om å finne den momentane endringsraten til en funksjon, altså hvor raskt funksjonen endrer seg i et bestemt punkt.

I dette kapittelet repeterer vi de viktigste derivasjonsreglene før vi går videre til nye temaer i R2.`,
    },

    // ========== GRUNNLEGGENDE REGLER ==========
    {
      id: 'r2-2-1-grunnleggende-intro',
      type: 'text',
      content: `## Grunnleggende derivasjonsregler

Vi starter med de enkleste reglene som danner grunnlaget for all derivasjon.`,
    },

    // Definisjon: Konstantregel
    {
      id: 'r2-2-1-def-konstantregel',
      type: 'definition',
      title: 'Konstantregelen',
      content: `Hvis $f(x) = c$ der $c$ er en konstant, så er

$$f'(x) = 0$$

En konstant funksjon har ingen endring, derfor er den deriverte lik null.`,
    },

    // Definisjon: Potensregel
    {
      id: 'r2-2-1-def-potensregel',
      type: 'definition',
      title: 'Potensregelen',
      content: `Hvis $f(x) = x^n$ der $n$ er et reelt tall, så er

$$f'(x) = n \\cdot x^{n-1}$$

Eksponenten flyttes ned som en faktor, og den nye eksponenten blir én mindre.`,
    },

    // Definisjon: Sumregel
    {
      id: 'r2-2-1-def-sumregel',
      type: 'definition',
      title: 'Sumregelen',
      content: `Hvis $f(x) = g(x) + h(x)$, så er

$$f'(x) = g'(x) + h'(x)$$

Den deriverte av en sum er summen av de deriverte. Tilsvarende gjelder for differanser.`,
    },

    // Definisjon: Konstantfaktor
    {
      id: 'r2-2-1-def-konstantfaktor',
      type: 'definition',
      title: 'Konstantfaktorregel',
      content: `Hvis $f(x) = c \\cdot g(x)$ der $c$ er en konstant, så er

$$f'(x) = c \\cdot g'(x)$$

En konstant faktor kan "tas utenfor" derivasjonen.`,
    },

    // Eksempel 1: Grunnleggende derivasjon
    {
      id: 'r2-2-1-example-1',
      type: 'example',
      title: 'Eksempel 1: Grunnleggende derivasjon',
      problem: `Deriver følgende funksjoner:

a) $f(x) = 5$
b) $g(x) = x^4$
c) $h(x) = 3x^5 - 2x^3 + 7x - 4$`,
      solution: `**Løsning:**

a) $f(x) = 5$ er en konstant, så:
$$f'(x) = 0$$

b) $g(x) = x^4$

Vi bruker potensregelen:
$$g'(x) = 4x^{4-1} = 4x^3$$

c) $h(x) = 3x^5 - 2x^3 + 7x - 4$

Vi bruker sum- og konstantfaktorregelen på hvert ledd:
$$h'(x) = 3 \\cdot 5x^4 - 2 \\cdot 3x^2 + 7 \\cdot 1 - 0 = 15x^4 - 6x^2 + 7$$`,
    },

    // Oppgave 1
    {
      id: 'r2-2-1-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-1-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Deriver funksjonene.',
        subTasks: [
          { label: 'a', task: '$f(x) = x^7$', solution: '$f\'(x) = 7x^6$' },
          { label: 'b', task: '$g(x) = 4x^3 - 2x^2 + x$', solution: '$g\'(x) = 12x^2 - 4x + 1$' },
          { label: 'c', task: '$h(x) = \\frac{1}{2}x^6 - 3x^4 + 5$', solution: '$h\'(x) = 3x^5 - 12x^3$' },
          { label: 'd', task: '$p(x) = x^{-2} + x^{-1}$', solution: '$p\'(x) = -2x^{-3} - x^{-2} = -\\frac{2}{x^3} - \\frac{1}{x^2}$' },
        ],
        hints: [
          'Bruk potensregelen: $(x^n)\' = nx^{n-1}$',
          'Husk at en konstant derivert gir 0',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== PRODUKTREGEL OG KVOTIENTREGEL ==========
    {
      id: 'r2-2-1-prodkvot-intro',
      type: 'text',
      content: `## Produktregel og kvotientregel

Når vi skal derivere produkter eller brøker av funksjoner, trenger vi egne regler.`,
    },

    // Definisjon: Produktregel
    {
      id: 'r2-2-1-def-produktregel',
      type: 'definition',
      title: 'Produktregelen',
      content: `Hvis $f(x) = g(x) \\cdot h(x)$, så er

$$f'(x) = g'(x) \\cdot h(x) + g(x) \\cdot h'(x)$$

Huskeregel: "Den deriverte av den første ganger den andre, pluss den første ganger den deriverte av den andre."`,
    },

    // Definisjon: Kvotientregel
    {
      id: 'r2-2-1-def-kvotientregel',
      type: 'definition',
      title: 'Kvotientregelen',
      content: `Hvis $f(x) = \\frac{g(x)}{h(x)}$ der $h(x) \\neq 0$, så er

$$f'(x) = \\frac{g'(x) \\cdot h(x) - g(x) \\cdot h'(x)}{[h(x)]^2}$$

Huskeregel: "Deriverte av teller ganger nevner, minus teller ganger deriverte av nevner, alt delt på nevner i andre."`,
    },

    // Eksempel 2: Produktregel
    {
      id: 'r2-2-1-example-2',
      type: 'example',
      title: 'Eksempel 2: Produktregelen',
      problem: `Deriver $f(x) = (x^2 + 1)(x^3 - 2x)$ ved hjelp av produktregelen.`,
      solution: `**Løsning:**

La $g(x) = x^2 + 1$ og $h(x) = x^3 - 2x$.

Da er $g'(x) = 2x$ og $h'(x) = 3x^2 - 2$.

Vi bruker produktregelen:
$$f'(x) = g'(x) \\cdot h(x) + g(x) \\cdot h'(x)$$

$$f'(x) = 2x \\cdot (x^3 - 2x) + (x^2 + 1) \\cdot (3x^2 - 2)$$

$$f'(x) = 2x^4 - 4x^2 + 3x^4 - 2x^2 + 3x^2 - 2$$

$$f'(x) = 5x^4 - 3x^2 - 2$$

**Kontroll:** Vi kan også gange ut først: $f(x) = x^5 - 2x^3 + x^3 - 2x = x^5 - x^3 - 2x$, og derivere: $f'(x) = 5x^4 - 3x^2 - 2$ ✓`,
    },

    // Oppgave 2
    {
      id: 'r2-2-1-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-1-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk produktregelen til å derivere funksjonene.',
        subTasks: [
          { label: 'a', task: '$f(x) = x^2 \\cdot (x + 1)$', solution: '$f\'(x) = 2x(x+1) + x^2 \\cdot 1 = 2x^2 + 2x + x^2 = 3x^2 + 2x$' },
          { label: 'b', task: '$g(x) = (2x - 1)(x^2 + 3)$', solution: '$g\'(x) = 2(x^2 + 3) + (2x-1) \\cdot 2x = 2x^2 + 6 + 4x^2 - 2x = 6x^2 - 2x + 6$' },
          { label: 'c', task: '$h(x) = (x^3 + 2)(x^2 - 1)$', solution: '$h\'(x) = 3x^2(x^2 - 1) + (x^3 + 2) \\cdot 2x = 3x^4 - 3x^2 + 2x^4 + 4x = 5x^4 - 3x^2 + 4x$' },
        ],
        hints: [
          'Identifiser $g(x)$ og $h(x)$, og finn $g\'(x)$ og $h\'(x)$',
          'Husk: $f\'(x) = g\'(x) \\cdot h(x) + g(x) \\cdot h\'(x)$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Eksempel 3: Kvotientregel
    {
      id: 'r2-2-1-example-3',
      type: 'example',
      title: 'Eksempel 3: Kvotientregelen',
      problem: `Deriver $f(x) = \\frac{x^2 + 1}{x - 1}$ ved hjelp av kvotientregelen.`,
      solution: `**Løsning:**

La $g(x) = x^2 + 1$ (teller) og $h(x) = x - 1$ (nevner).

Da er $g'(x) = 2x$ og $h'(x) = 1$.

Vi bruker kvotientregelen:
$$f'(x) = \\frac{g'(x) \\cdot h(x) - g(x) \\cdot h'(x)}{[h(x)]^2}$$

$$f'(x) = \\frac{2x \\cdot (x - 1) - (x^2 + 1) \\cdot 1}{(x - 1)^2}$$

$$f'(x) = \\frac{2x^2 - 2x - x^2 - 1}{(x - 1)^2}$$

$$f'(x) = \\frac{x^2 - 2x - 1}{(x - 1)^2}$$`,
    },

    // Oppgave 3
    {
      id: 'r2-2-1-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-1-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk kvotientregelen til å derivere funksjonene.',
        subTasks: [
          { label: 'a', task: '$f(x) = \\frac{x}{x + 2}$', solution: '$f\'(x) = \\frac{1 \\cdot (x+2) - x \\cdot 1}{(x+2)^2} = \\frac{x + 2 - x}{(x+2)^2} = \\frac{2}{(x+2)^2}$' },
          { label: 'b', task: '$g(x) = \\frac{x^2}{x - 1}$', solution: '$g\'(x) = \\frac{2x(x-1) - x^2 \\cdot 1}{(x-1)^2} = \\frac{2x^2 - 2x - x^2}{(x-1)^2} = \\frac{x^2 - 2x}{(x-1)^2} = \\frac{x(x-2)}{(x-1)^2}$' },
          { label: 'c', task: '$h(x) = \\frac{x^2 - 4}{x + 3}$', solution: '$h\'(x) = \\frac{2x(x+3) - (x^2-4) \\cdot 1}{(x+3)^2} = \\frac{2x^2 + 6x - x^2 + 4}{(x+3)^2} = \\frac{x^2 + 6x + 4}{(x+3)^2}$' },
        ],
        hints: [
          'Identifiser teller $g(x)$ og nevner $h(x)$',
          'Husk: teller derivert ganger nevner, minus teller ganger nevner derivert',
          'Del på nevner i andre',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== KJERNEREGELEN ==========
    {
      id: 'r2-2-1-kjerne-intro',
      type: 'text',
      content: `## Kjerneregelen (chain rule)

Kjerneregelen brukes når vi skal derivere sammensatte funksjoner, altså funksjoner der en funksjon er satt inn i en annen.`,
    },

    // Definisjon: Kjerneregelen
    {
      id: 'r2-2-1-def-kjerneregel',
      type: 'definition',
      title: 'Kjerneregelen',
      content: `Hvis $f(x) = g(u)$ der $u = h(x)$ (en "kjerne"), så er

$$f'(x) = g'(u) \\cdot h'(x)$$

eller skrevet på en annen måte:

$$\\frac{df}{dx} = \\frac{dg}{du} \\cdot \\frac{du}{dx}$$

Huskeregel: "Deriver ytre funksjon med hensyn på kjernen, gang med den deriverte av kjernen."`,
    },

    // Eksempel 4: Kjerneregelen
    {
      id: 'r2-2-1-example-4',
      type: 'example',
      title: 'Eksempel 4: Kjerneregelen',
      problem: `Deriver følgende funksjoner ved hjelp av kjerneregelen:

a) $f(x) = (3x + 2)^5$
b) $g(x) = \\sqrt{x^2 + 1}$`,
      solution: `**Løsning:**

a) $f(x) = (3x + 2)^5$

La kjernen være $u = 3x + 2$, så $f = u^5$.

Ytre derivert: $\\frac{df}{du} = 5u^4$

Indre derivert (kjernens deriverte): $\\frac{du}{dx} = 3$

Kjerneregelen gir:
$$f'(x) = 5u^4 \\cdot 3 = 5(3x + 2)^4 \\cdot 3 = 15(3x + 2)^4$$

b) $g(x) = \\sqrt{x^2 + 1} = (x^2 + 1)^{1/2}$

La kjernen være $u = x^2 + 1$, så $g = u^{1/2}$.

Ytre derivert: $\\frac{dg}{du} = \\frac{1}{2}u^{-1/2} = \\frac{1}{2\\sqrt{u}}$

Indre derivert: $\\frac{du}{dx} = 2x$

Kjerneregelen gir:
$$g'(x) = \\frac{1}{2\\sqrt{x^2 + 1}} \\cdot 2x = \\frac{x}{\\sqrt{x^2 + 1}}$$`,
    },

    // Oppgave 4
    {
      id: 'r2-2-1-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-1-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk kjerneregelen til å derivere funksjonene.',
        subTasks: [
          { label: 'a', task: '$f(x) = (2x - 5)^4$', solution: '$u = 2x - 5$. $f\'(x) = 4(2x-5)^3 \\cdot 2 = 8(2x-5)^3$' },
          { label: 'b', task: '$g(x) = (x^3 + 2x)^3$', solution: '$u = x^3 + 2x$. $g\'(x) = 3(x^3 + 2x)^2 \\cdot (3x^2 + 2)$' },
          { label: 'c', task: '$h(x) = \\sqrt{4x + 1}$', solution: '$u = 4x + 1$. $h\'(x) = \\frac{1}{2\\sqrt{4x+1}} \\cdot 4 = \\frac{2}{\\sqrt{4x+1}}$' },
          { label: 'd', task: '$p(x) = \\frac{1}{(x^2 + 1)^2}$', solution: '$p(x) = (x^2+1)^{-2}$. $p\'(x) = -2(x^2+1)^{-3} \\cdot 2x = \\frac{-4x}{(x^2+1)^3}$' },
        ],
        hints: [
          'Identifiser kjernen $u$',
          'Deriver ytre funksjon med hensyn på $u$',
          'Gang med $u\' = \\frac{du}{dx}$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== SPESIELLE FUNKSJONER ==========
    {
      id: 'r2-2-1-spesielle-intro',
      type: 'text',
      content: `## Derivasjon av spesielle funksjoner

Noen funksjoner har spesielle derivasjonsregler som vi må kunne utenat.`,
    },

    // Teorem: Eksponentialfunksjon
    {
      id: 'r2-2-1-theorem-exp',
      type: 'theorem',
      title: 'Derivasjon av eksponentialfunksjoner',
      content: `$$\\frac{d}{dx}(e^x) = e^x$$

$$\\frac{d}{dx}(a^x) = a^x \\cdot \\ln a \\quad \\text{(for } a > 0, a \\neq 1\\text{)}$$

Med kjerneregelen: $\\frac{d}{dx}(e^{u}) = e^{u} \\cdot u'$`,
    },

    // Teorem: Logaritmefunksjon
    {
      id: 'r2-2-1-theorem-ln',
      type: 'theorem',
      title: 'Derivasjon av logaritmefunksjoner',
      content: `$$\\frac{d}{dx}(\\ln x) = \\frac{1}{x}$$

$$\\frac{d}{dx}(\\log_a x) = \\frac{1}{x \\ln a}$$

Med kjerneregelen: $\\frac{d}{dx}(\\ln u) = \\frac{1}{u} \\cdot u' = \\frac{u'}{u}$`,
    },

    // Teorem: Trigonometriske funksjoner
    {
      id: 'r2-2-1-theorem-trig',
      type: 'theorem',
      title: 'Derivasjon av trigonometriske funksjoner',
      content: `$$\\frac{d}{dx}(\\sin x) = \\cos x$$

$$\\frac{d}{dx}(\\cos x) = -\\sin x$$

$$\\frac{d}{dx}(\\tan x) = \\frac{1}{\\cos^2 x} = 1 + \\tan^2 x$$

Med kjerneregelen:
- $(\\sin u)' = \\cos u \\cdot u'$
- $(\\cos u)' = -\\sin u \\cdot u'$`,
    },

    // Eksempel 5: Spesielle funksjoner
    {
      id: 'r2-2-1-example-5',
      type: 'example',
      title: 'Eksempel 5: Derivasjon av spesielle funksjoner',
      problem: `Deriver følgende funksjoner:

a) $f(x) = e^{3x}$
b) $g(x) = \\ln(x^2 + 1)$
c) $h(x) = \\sin(2x)$
d) $p(x) = x^2 \\cdot e^x$`,
      solution: `**Løsning:**

a) $f(x) = e^{3x}$

La $u = 3x$, så $u' = 3$.
$$f'(x) = e^{3x} \\cdot 3 = 3e^{3x}$$

b) $g(x) = \\ln(x^2 + 1)$

La $u = x^2 + 1$, så $u' = 2x$.
$$g'(x) = \\frac{1}{x^2 + 1} \\cdot 2x = \\frac{2x}{x^2 + 1}$$

c) $h(x) = \\sin(2x)$

La $u = 2x$, så $u' = 2$.
$$h'(x) = \\cos(2x) \\cdot 2 = 2\\cos(2x)$$

d) $p(x) = x^2 \\cdot e^x$

Her må vi bruke produktregelen med $g(x) = x^2$ og $h(x) = e^x$.
$$p'(x) = 2x \\cdot e^x + x^2 \\cdot e^x = e^x(2x + x^2) = e^x \\cdot x(x + 2)$$`,
    },

    // Oppgave 5
    {
      id: 'r2-2-1-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-1-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Deriver funksjonene. Bruk kjerneregelen der det er nødvendig.',
        subTasks: [
          { label: 'a', task: '$f(x) = e^{-x^2}$', solution: '$u = -x^2$, $u\' = -2x$. $f\'(x) = e^{-x^2} \\cdot (-2x) = -2x \\cdot e^{-x^2}$' },
          { label: 'b', task: '$g(x) = \\ln(\\sin x)$', solution: '$u = \\sin x$, $u\' = \\cos x$. $g\'(x) = \\frac{\\cos x}{\\sin x} = \\cot x$' },
          { label: 'c', task: '$h(x) = \\cos(x^3)$', solution: '$u = x^3$, $u\' = 3x^2$. $h\'(x) = -\\sin(x^3) \\cdot 3x^2 = -3x^2 \\sin(x^3)$' },
          { label: 'd', task: '$p(x) = e^x \\cdot \\sin x$', solution: 'Produktregel: $p\'(x) = e^x \\sin x + e^x \\cos x = e^x(\\sin x + \\cos x)$' },
          { label: 'e', task: '$q(x) = \\frac{\\ln x}{x}$', solution: 'Kvotientregel: $q\'(x) = \\frac{\\frac{1}{x} \\cdot x - \\ln x \\cdot 1}{x^2} = \\frac{1 - \\ln x}{x^2}$' },
        ],
        hints: [
          'For sammensetninger, identifiser kjernen først',
          'Ved produkt av funksjoner, bruk produktregelen',
          'Ved brøker, bruk kvotientregelen',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-2-1-oppsummering',
      type: 'text',
      content: `## Oppsummering av derivasjonsregler

**Grunnleggende regler:**
- Konstantregelen: $(c)' = 0$
- Potensregelen: $(x^n)' = nx^{n-1}$
- Sumregelen: $(f + g)' = f' + g'$
- Konstantfaktorregel: $(c \\cdot f)' = c \\cdot f'$

**Produkt- og kvotientregler:**
- Produktregelen: $(f \\cdot g)' = f' \\cdot g + f \\cdot g'$
- Kvotientregelen: $\\left(\\frac{f}{g}\\right)' = \\frac{f' \\cdot g - f \\cdot g'}{g^2}$

**Kjerneregelen:**
- $(g(u))' = g'(u) \\cdot u'$ der $u = h(x)$

**Spesielle funksjoner:**
- $(e^x)' = e^x$
- $(\\ln x)' = \\frac{1}{x}$
- $(\\sin x)' = \\cos x$
- $(\\cos x)' = -\\sin x$`,
    },

    // Formelsamling
    {
      id: 'r2-2-1-formler',
      type: 'collapsible',
      title: 'Komplett formelsamling for derivasjon',
      buttonText: 'Vis formelsamling',
      content: [
        {
          id: 'r2-2-1-formel-tabell',
          type: 'text',
          content: `| Funksjon $f(x)$ | Derivert $f'(x)$ |
|-----------------|------------------|
| $c$ (konstant) | $0$ |
| $x^n$ | $nx^{n-1}$ |
| $e^x$ | $e^x$ |
| $a^x$ | $a^x \\ln a$ |
| $\\ln x$ | $\\frac{1}{x}$ |
| $\\log_a x$ | $\\frac{1}{x \\ln a}$ |
| $\\sin x$ | $\\cos x$ |
| $\\cos x$ | $-\\sin x$ |
| $\\tan x$ | $\\frac{1}{\\cos^2 x}$ |`,
        },
      ],
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_2: TextbookChapter = {
  id: 'r2-2-2',
  courseId: 'r2',
  chapterNumber: '2.2',
  title: 'Ubestemt integral',
  description: 'Antiderivasjon og grunnleggende integrasjonsregler.',
  estimatedMinutes: 50,
  competenceGoals: [
    'forsta sammenhengen mellom derivasjon og integrasjon',
    'beherske grunnleggende integrasjonsregler',
  ],
  content: [
    // ========== INNLEDNING ==========
    {
      id: 'r2-2-2-intro',
      type: 'text',
      content: `## Hva er integrasjon?

I forrige kapittel lærte vi å derivere funksjoner. Nå skal vi lære den *omvendte* operasjonen: **integrasjon**.

Derivasjon svarer på spørsmålet: *Hva er vekstfarten til en funksjon?*

Integrasjon svarer på spørsmålet: *Hvilken funksjon har denne vekstfarten?*

Hvis vi vet at $f'(x) = 2x$, hvilken funksjon $f(x)$ ga denne deriverte? Vi vet at $(x^2)' = 2x$, så $f(x) = x^2$ er én løsning. Men det finnes flere!`,
    },

    // ========== DEFINISJON: ANTIDERIVERT ==========
    {
      id: 'r2-2-2-def-antiderivert',
      type: 'definition',
      title: 'Antiderivert',
      content: `En funksjon $F(x)$ kalles en **antiderivert** til $f(x)$ dersom

$$F'(x) = f(x)$$

Vi sier at $F(x)$ er en antiderivert til $f(x)$ fordi derivasjon av $F$ gir tilbake $f$.`,
    },

    // ========== EKSEMPEL 1: Finne antiderivert ==========
    {
      id: 'r2-2-2-example-1',
      type: 'example',
      title: 'Eksempel 1: Finne en antiderivert',
      problem: `Finn en antiderivert til $f(x) = 3x^2$.`,
      solution: `**Løsning:**

Vi leter etter en funksjon $F(x)$ slik at $F'(x) = 3x^2$.

Vi vet at $(x^3)' = 3x^2$.

Derfor er $F(x) = x^3$ en antiderivert til $f(x) = 3x^2$.

**Sjekk:** $F'(x) = (x^3)' = 3x^2 = f(x)$ ✓`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-2-2-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-2-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn en antiderivert til hver funksjon. Sjekk svaret ved å derivere.',
        subTasks: [
          { label: 'a', task: '$f(x) = 4x^3$', solution: '$F(x) = x^4$ fordi $(x^4)\' = 4x^3$' },
          { label: 'b', task: '$f(x) = 5x^4$', solution: '$F(x) = x^5$ fordi $(x^5)\' = 5x^4$' },
          { label: 'c', task: '$f(x) = 2x$', solution: '$F(x) = x^2$ fordi $(x^2)\' = 2x$' },
          { label: 'd', task: '$f(x) = 6x^5$', solution: '$F(x) = x^6$ fordi $(x^6)\' = 6x^5$' },
        ],
        solution: 'a) $x^4$, b) $x^5$, c) $x^2$, d) $x^6$',
        hints: [
          'Tenk: Hvilken funksjon blir $f(x)$ når vi deriverer?',
          'Husk at $(x^n)\' = nx^{n-1}$',
        ],
      },
    },

    // ========== INTEGRASJONSKONSTANTEN ==========
    {
      id: 'r2-2-2-konstant-intro',
      type: 'text',
      content: `## Integrasjonskonstanten $C$

La oss se på funksjonene $F_1(x) = x^2$, $F_2(x) = x^2 + 5$ og $F_3(x) = x^2 - 3$.

Alle disse har samme derivert:
- $F_1'(x) = 2x$
- $F_2'(x) = 2x$
- $F_3'(x) = 2x$

Dette betyr at alle tre er antideriverte til $f(x) = 2x$!

Generelt: Hvis $F(x)$ er en antiderivert til $f(x)$, så er også $F(x) + C$ en antiderivert for enhver konstant $C$.`,
    },

    // ========== DEFINISJON: UBESTEMT INTEGRAL ==========
    {
      id: 'r2-2-2-def-ubestemt-integral',
      type: 'definition',
      title: 'Ubestemt integral',
      content: `Det **ubestemte integralet** til $f(x)$ skrives

$$\\int f(x) \\, dx = F(x) + C$$

der $F(x)$ er en antiderivert til $f(x)$ og $C$ er en vilkårlig konstant kalt **integrasjonskonstanten**.

Symbolet $\\int$ kalles integraltegnet, $f(x)$ kalles integranden, og $dx$ viser hvilken variabel vi integrerer med hensyn på.`,
    },

    // ========== EKSEMPEL 2: Ubestemt integral med konstant ==========
    {
      id: 'r2-2-2-example-2',
      type: 'example',
      title: 'Eksempel 2: Ubestemt integral',
      problem: `Finn det ubestemte integralet $\\displaystyle\\int 6x^5 \\, dx$.`,
      solution: `**Løsning:**

Vi leter etter en funksjon $F(x)$ slik at $F'(x) = 6x^5$.

Vi vet at $(x^6)' = 6x^5$.

Derfor er:

$$\\int 6x^5 \\, dx = x^6 + C$$

Integrasjonskonstanten $C$ må alltid være med fordi $x^6 + C$ er en antiderivert for alle verdier av $C$.`,
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-2-2-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-2-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn det ubestemte integralet. Husk integrasjonskonstanten $C$.',
        subTasks: [
          { label: 'a', task: '$\\displaystyle\\int 2x \\, dx$', solution: '$\\int 2x \\, dx = x^2 + C$' },
          { label: 'b', task: '$\\displaystyle\\int 4x^3 \\, dx$', solution: '$\\int 4x^3 \\, dx = x^4 + C$' },
          { label: 'c', task: '$\\displaystyle\\int 7x^6 \\, dx$', solution: '$\\int 7x^6 \\, dx = x^7 + C$' },
          { label: 'd', task: '$\\displaystyle\\int 10x^9 \\, dx$', solution: '$\\int 10x^9 \\, dx = x^{10} + C$' },
        ],
        solution: 'a) $x^2 + C$, b) $x^4 + C$, c) $x^7 + C$, d) $x^{10} + C$',
        hints: [
          'Hva må du derivere for å få integranden?',
          'Ikke glem $+ C$ på slutten!',
        ],
      },
    },

    // ========== POTENSREGELEN FOR INTEGRASJON ==========
    {
      id: 'r2-2-2-potensregel-intro',
      type: 'text',
      content: `## Potensregelen for integrasjon

Nå skal vi utlede en generell regel for å integrere potensfunksjoner.

Vi vet at $(x^n)' = nx^{n-1}$. Hva om vi vil integrere $x^n$?

Hvis $(x^{n+1})' = (n+1)x^n$, så er $x^{n+1}$ nesten en antiderivert til $x^n$.

Men vi får faktoren $(n+1)$ som vi må kvitte oss med. Løsningen er å dele på $(n+1)$:

$$\\left(\\frac{x^{n+1}}{n+1}\\right)' = \\frac{(n+1)x^n}{n+1} = x^n$$`,
    },

    // ========== TEOREM: POTENSREGELEN ==========
    {
      id: 'r2-2-2-theorem-potens',
      type: 'theorem',
      title: 'Potensregelen for integrasjon',
      content: `For alle $n \\neq -1$ gjelder:

$$\\int x^n \\, dx = \\frac{x^{n+1}}{n+1} + C$$

**Spesialtilfelle:** For $n = 0$ får vi $\\int 1 \\, dx = x + C$.

**Merk:** Regelen gjelder ikke for $n = -1$ fordi vi da ville delt på null. Integralet $\\int x^{-1} \\, dx = \\int \\frac{1}{x} \\, dx$ behandles senere.`,
    },

    // ========== EKSEMPEL 3: Bruke potensregelen ==========
    {
      id: 'r2-2-2-example-3',
      type: 'example',
      title: 'Eksempel 3: Bruke potensregelen',
      problem: `Finn integralene:

a) $\\displaystyle\\int x^4 \\, dx$

b) $\\displaystyle\\int x^{-3} \\, dx$

c) $\\displaystyle\\int \\sqrt{x} \\, dx$`,
      solution: `**Løsning:**

**a)** Vi bruker potensregelen med $n = 4$:
$$\\int x^4 \\, dx = \\frac{x^{4+1}}{4+1} + C = \\frac{x^5}{5} + C$$

**b)** Vi bruker potensregelen med $n = -3$:
$$\\int x^{-3} \\, dx = \\frac{x^{-3+1}}{-3+1} + C = \\frac{x^{-2}}{-2} + C = -\\frac{1}{2x^2} + C$$

**c)** Først skriver vi om: $\\sqrt{x} = x^{1/2}$. Potensregelen med $n = \\frac{1}{2}$:
$$\\int x^{1/2} \\, dx = \\frac{x^{1/2+1}}{1/2+1} + C = \\frac{x^{3/2}}{3/2} + C = \\frac{2}{3}x^{3/2} + C = \\frac{2}{3}\\sqrt{x^3} + C$$`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-2-2-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-2-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk potensregelen til å finne integralene.',
        subTasks: [
          { label: 'a', task: '$\\displaystyle\\int x^5 \\, dx$', solution: '$\\int x^5 \\, dx = \\frac{x^6}{6} + C$' },
          { label: 'b', task: '$\\displaystyle\\int x^{-2} \\, dx$', solution: '$\\int x^{-2} \\, dx = \\frac{x^{-1}}{-1} + C = -\\frac{1}{x} + C$' },
          { label: 'c', task: '$\\displaystyle\\int x^{-4} \\, dx$', solution: '$\\int x^{-4} \\, dx = \\frac{x^{-3}}{-3} + C = -\\frac{1}{3x^3} + C$' },
          { label: 'd', task: '$\\displaystyle\\int \\sqrt[3]{x} \\, dx$', solution: '$\\sqrt[3]{x} = x^{1/3}$, så $\\int x^{1/3} \\, dx = \\frac{x^{4/3}}{4/3} + C = \\frac{3}{4}x^{4/3} + C$' },
          { label: 'e', task: '$\\displaystyle\\int \\frac{1}{x^5} \\, dx$', solution: '$\\frac{1}{x^5} = x^{-5}$, så $\\int x^{-5} \\, dx = \\frac{x^{-4}}{-4} + C = -\\frac{1}{4x^4} + C$' },
        ],
        solution: 'a) $\\frac{x^6}{6} + C$, b) $-\\frac{1}{x} + C$, c) $-\\frac{1}{3x^3} + C$, d) $\\frac{3}{4}x^{4/3} + C$, e) $-\\frac{1}{4x^4} + C$',
        hints: [
          'Skriv om røtter og brøker til potensform først',
          'Husk formelen: $\\int x^n \\, dx = \\frac{x^{n+1}}{n+1} + C$',
          'Å dele på en brøk er det samme som å gange med den omvendte brøken',
        ],
      },
    },

    // ========== REGNEREGLER FOR INTEGRALER ==========
    {
      id: 'r2-2-2-regneregler-intro',
      type: 'text',
      content: `## Regneregler for integraler

Akkurat som for derivasjon har vi nyttige regneregler som gjør integrasjon enklere.`,
    },

    // ========== TEOREM: SUMREGEL OG KONSTANTFAKTORREGEL ==========
    {
      id: 'r2-2-2-theorem-regler',
      type: 'theorem',
      title: 'Sumregel og konstantfaktorregel',
      content: `**Sumregelen:**
$$\\int \\bigl(f(x) + g(x)\\bigr) \\, dx = \\int f(x) \\, dx + \\int g(x) \\, dx$$

**Differansregelen:**
$$\\int \\bigl(f(x) - g(x)\\bigr) \\, dx = \\int f(x) \\, dx - \\int g(x) \\, dx$$

**Konstantfaktorregelen:**
$$\\int k \\cdot f(x) \\, dx = k \\cdot \\int f(x) \\, dx$$

der $k$ er en konstant.`,
    },

    // ========== EKSEMPEL 4: Bruke regnereglene ==========
    {
      id: 'r2-2-2-example-4',
      type: 'example',
      title: 'Eksempel 4: Bruke regnereglene',
      problem: `Finn integralene:

a) $\\displaystyle\\int 5x^3 \\, dx$

b) $\\displaystyle\\int (x^2 + 3x) \\, dx$

c) $\\displaystyle\\int (4x^3 - 2x + 7) \\, dx$`,
      solution: `**Løsning:**

**a)** Konstantfaktorregelen:
$$\\int 5x^3 \\, dx = 5 \\int x^3 \\, dx = 5 \\cdot \\frac{x^4}{4} + C = \\frac{5x^4}{4} + C$$

**b)** Sumregelen:
$$\\int (x^2 + 3x) \\, dx = \\int x^2 \\, dx + \\int 3x \\, dx = \\frac{x^3}{3} + 3 \\cdot \\frac{x^2}{2} + C = \\frac{x^3}{3} + \\frac{3x^2}{2} + C$$

**c)** Sum- og konstantfaktorregelen:
$$\\int (4x^3 - 2x + 7) \\, dx = 4 \\cdot \\frac{x^4}{4} - 2 \\cdot \\frac{x^2}{2} + 7x + C = x^4 - x^2 + 7x + C$$

**Merk:** Vi trenger bare én integrasjonskonstant $C$ til slutt.`,
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-2-2-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-2-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn integralene ved å bruke sum- og konstantfaktorregelen.',
        subTasks: [
          { label: 'a', task: '$\\displaystyle\\int 3x^2 \\, dx$', solution: '$\\int 3x^2 \\, dx = 3 \\cdot \\frac{x^3}{3} + C = x^3 + C$' },
          { label: 'b', task: '$\\displaystyle\\int (x^4 + x^2) \\, dx$', solution: '$\\int (x^4 + x^2) \\, dx = \\frac{x^5}{5} + \\frac{x^3}{3} + C$' },
          { label: 'c', task: '$\\displaystyle\\int (6x^2 - 4x + 1) \\, dx$', solution: '$\\int (6x^2 - 4x + 1) \\, dx = 6 \\cdot \\frac{x^3}{3} - 4 \\cdot \\frac{x^2}{2} + x + C = 2x^3 - 2x^2 + x + C$' },
          { label: 'd', task: '$\\displaystyle\\int (2x^5 - 3x^3 + x) \\, dx$', solution: '$\\int (2x^5 - 3x^3 + x) \\, dx = 2 \\cdot \\frac{x^6}{6} - 3 \\cdot \\frac{x^4}{4} + \\frac{x^2}{2} + C = \\frac{x^6}{3} - \\frac{3x^4}{4} + \\frac{x^2}{2} + C$' },
          { label: 'e', task: '$\\displaystyle\\int \\left(\\frac{1}{2}x^4 - \\frac{2}{3}x^3\\right) \\, dx$', solution: '$\\int \\left(\\frac{1}{2}x^4 - \\frac{2}{3}x^3\\right) \\, dx = \\frac{1}{2} \\cdot \\frac{x^5}{5} - \\frac{2}{3} \\cdot \\frac{x^4}{4} + C = \\frac{x^5}{10} - \\frac{x^4}{6} + C$' },
        ],
        solution: 'a) $x^3 + C$, b) $\\frac{x^5}{5} + \\frac{x^3}{3} + C$, c) $2x^3 - 2x^2 + x + C$, d) $\\frac{x^6}{3} - \\frac{3x^4}{4} + \\frac{x^2}{2} + C$, e) $\\frac{x^5}{10} - \\frac{x^4}{6} + C$',
        hints: [
          'Integrer ledd for ledd',
          'Trekk ut konstantfaktorer først',
          'Forenkle svaret hvis mulig',
        ],
      },
    },

    // ========== INTEGRASJON AV POLYNOMER ==========
    {
      id: 'r2-2-2-polynom-intro',
      type: 'text',
      content: `## Integrasjon av polynomer

Med potensregelen og regnereglene kan vi nå integrere alle polynomer.

**Generell metode:**
1. Skriv polynomet som en sum av ledd
2. Integrer hvert ledd for seg med potensregelen
3. Legg til integrasjonskonstanten $C$

For et polynom $p(x) = a_nx^n + a_{n-1}x^{n-1} + \\cdots + a_1x + a_0$ får vi:

$$\\int p(x) \\, dx = \\frac{a_n x^{n+1}}{n+1} + \\frac{a_{n-1} x^n}{n} + \\cdots + \\frac{a_1 x^2}{2} + a_0 x + C$$`,
    },

    // ========== EKSEMPEL 5: Integrasjon av polynomer ==========
    {
      id: 'r2-2-2-example-5',
      type: 'example',
      title: 'Eksempel 5: Integrasjon av polynomer',
      problem: `Finn integralene:

a) $\\displaystyle\\int (x^3 - 4x^2 + 5x - 2) \\, dx$

b) $\\displaystyle\\int (x+2)(x-3) \\, dx$

c) $\\displaystyle\\int \\frac{x^3 - 2x}{x} \\, dx$`,
      solution: `**Løsning:**

**a)** Integrer ledd for ledd:
$$\\int (x^3 - 4x^2 + 5x - 2) \\, dx = \\frac{x^4}{4} - \\frac{4x^3}{3} + \\frac{5x^2}{2} - 2x + C$$

**b)** Først utvider vi parentesene:
$$(x+2)(x-3) = x^2 - 3x + 2x - 6 = x^2 - x - 6$$

Så integrerer vi:
$$\\int (x^2 - x - 6) \\, dx = \\frac{x^3}{3} - \\frac{x^2}{2} - 6x + C$$

**c)** Først forenkler vi ved å dele hvert ledd på $x$:
$$\\frac{x^3 - 2x}{x} = \\frac{x^3}{x} - \\frac{2x}{x} = x^2 - 2$$

Så integrerer vi:
$$\\int (x^2 - 2) \\, dx = \\frac{x^3}{3} - 2x + C$$`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-2-2-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-2-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn integralene. Forenkle uttrykket først hvis nødvendig.',
        subTasks: [
          { label: 'a', task: '$\\displaystyle\\int (2x^4 - 3x^3 + x^2 - 5) \\, dx$', solution: '$\\int (2x^4 - 3x^3 + x^2 - 5) \\, dx = \\frac{2x^5}{5} - \\frac{3x^4}{4} + \\frac{x^3}{3} - 5x + C$' },
          { label: 'b', task: '$\\displaystyle\\int (x+1)^2 \\, dx$', solution: '$(x+1)^2 = x^2 + 2x + 1$, så $\\int (x^2 + 2x + 1) \\, dx = \\frac{x^3}{3} + x^2 + x + C$' },
          { label: 'c', task: '$\\displaystyle\\int (2x-1)(x+3) \\, dx$', solution: '$(2x-1)(x+3) = 2x^2 + 6x - x - 3 = 2x^2 + 5x - 3$, så $\\int (2x^2 + 5x - 3) \\, dx = \\frac{2x^3}{3} + \\frac{5x^2}{2} - 3x + C$' },
          { label: 'd', task: '$\\displaystyle\\int \\frac{x^4 + x^2}{x^2} \\, dx$', solution: '$\\frac{x^4 + x^2}{x^2} = x^2 + 1$, så $\\int (x^2 + 1) \\, dx = \\frac{x^3}{3} + x + C$' },
          { label: 'e', task: '$\\displaystyle\\int \\frac{(x+1)(x-1)}{x} \\, dx$', solution: '$(x+1)(x-1) = x^2 - 1$, så $\\frac{x^2-1}{x} = x - \\frac{1}{x}$. Da får vi $\\int \\left(x - \\frac{1}{x}\\right) \\, dx = \\frac{x^2}{2} - \\ln|x| + C$' },
        ],
        solution: 'a) $\\frac{2x^5}{5} - \\frac{3x^4}{4} + \\frac{x^3}{3} - 5x + C$, b) $\\frac{x^3}{3} + x^2 + x + C$, c) $\\frac{2x^3}{3} + \\frac{5x^2}{2} - 3x + C$, d) $\\frac{x^3}{3} + x + C$, e) $\\frac{x^2}{2} - \\ln|x| + C$',
        hints: [
          'Utvid parenteser eller forenkle brøker før du integrerer',
          'Husk at $\\frac{a+b}{c} = \\frac{a}{c} + \\frac{b}{c}$',
          'I oppgave e) dukker $\\ln|x|$ opp fordi $\\int \\frac{1}{x} \\, dx = \\ln|x| + C$',
        ],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-2-2-oppsummering',
      type: 'text',
      content: `## Oppsummering

**Antiderivert:** $F(x)$ er en antiderivert til $f(x)$ hvis $F'(x) = f(x)$

**Ubestemt integral:** $\\displaystyle\\int f(x) \\, dx = F(x) + C$

**Potensregelen:** $\\displaystyle\\int x^n \\, dx = \\frac{x^{n+1}}{n+1} + C$ for $n \\neq -1$

**Sumregelen:** $\\displaystyle\\int (f + g) \\, dx = \\int f \\, dx + \\int g \\, dx$

**Konstantfaktorregelen:** $\\displaystyle\\int k \\cdot f \\, dx = k \\cdot \\int f \\, dx$

**Tips:**
- Sjekk alltid svaret ved å derivere!
- Ikke glem integrasjonskonstanten $C$
- Forenkle uttrykket før du integrerer`,
    },

    // ========== ADVARSEL ==========
    {
      id: 'r2-2-2-warning',
      type: 'warning',
      title: 'Vanlige feil',
      content: `- **Glemme $C$**: Det ubestemte integralet inneholder alltid en integrasjonskonstant.
- **Feil i potensregelen**: Husk at eksponenten økes med 1, og vi deler på den nye eksponenten.
- **$\\int \\frac{1}{x} \\, dx \\neq \\frac{x^0}{0}$**: Potensregelen gjelder ikke for $n = -1$. Her er svaret $\\ln|x| + C$.`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_3: TextbookChapter = {
  id: 'r2-2-3',
  courseId: 'r2',
  chapterNumber: '2.3',
  title: 'Integrasjon av 1/x og eksponentialfunksjoner',
  description: 'Spesielle integraler med ln og e^x.',
  estimatedMinutes: 50,
  competenceGoals: [
    'integrere 1/x og eksponentialfunksjoner',
    'bruke kjerneregelen ved integrasjon',
  ],
  content: [
    {
      id: 'r2-2-3-intro',
      type: 'text',
      content: `## Integrasjon av spesielle funksjoner

I dette kapittelet skal vi se på integrasjon av funksjoner som gir logaritmer og eksponentialfunksjoner som resultat. Disse integralene dukker opp i mange praktiske sammenhenger, blant annet ved modellering av vekst, forfall og strømning.

Vi starter med det viktige integralet av $\\frac{1}{x}$, som gir den naturlige logaritmen.`,
    },
    {
      id: 'r2-2-3-def-1',
      type: 'definition',
      title: 'Integralet av 1/x',
      content: `For $x \\neq 0$ har vi:

$$\\int \\frac{1}{x} \\, dx = \\ln|x| + C$$

Vi bruker **absoluttverdi** fordi $\\ln x$ bare er definert for $x > 0$, men $\\frac{1}{x}$ er definert for alle $x \\neq 0$.

**Verifisering:** Vi kan sjekke dette ved å derivere: $\\frac{d}{dx}[\\ln|x|] = \\frac{1}{x}$`,
    },
    {
      id: 'r2-2-3-example-1',
      type: 'example',
      title: 'Eksempel 1: Grunnleggende integral med 1/x',
      problem: 'Regn ut $\\displaystyle\\int \\frac{3}{x} \\, dx$.',
      solution: `Vi trekker konstanten utenfor integralet:

$$\\int \\frac{3}{x} \\, dx = 3 \\int \\frac{1}{x} \\, dx = 3\\ln|x| + C$$`,
    },
    {
      id: 'r2-2-3-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut $\\displaystyle\\int \\frac{5}{x} \\, dx$.',
        solution: '$5\\ln|x| + C$',
        hints: ['Trekk konstanten 5 utenfor integralet.'],
      },
    },
    {
      id: 'r2-2-3-def-2',
      type: 'definition',
      title: 'Integralet av e^x',
      content: `Den naturlige eksponentialfunksjonen $e^x$ er sin egen deriverte, og dermed også sitt eget integral:

$$\\int e^x \\, dx = e^x + C$$

Dette er en av de enkleste og viktigste integralformlene.`,
    },
    {
      id: 'r2-2-3-example-2',
      type: 'example',
      title: 'Eksempel 2: Integral med e^x',
      problem: 'Regn ut $\\displaystyle\\int (e^x + 2x) \\, dx$.',
      solution: `Vi integrerer ledd for ledd:

$$\\int (e^x + 2x) \\, dx = \\int e^x \\, dx + \\int 2x \\, dx = e^x + x^2 + C$$`,
    },
    {
      id: 'r2-2-3-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut $\\displaystyle\\int (3e^x - 4x) \\, dx$.',
        solution: '$3e^x - 2x^2 + C$',
        hints: ['Integrer ledd for ledd. Husk at $\\int x \\, dx = \\frac{x^2}{2}$.'],
      },
    },
    {
      id: 'r2-2-3-def-3',
      type: 'definition',
      title: 'Integralet av e^(kx)',
      content: `For en konstant $k \\neq 0$:

$$\\int e^{kx} \\, dx = \\frac{1}{k} e^{kx} + C$$

**Verifisering:** $\\frac{d}{dx}\\left[\\frac{1}{k} e^{kx}\\right] = \\frac{1}{k} \\cdot k \\cdot e^{kx} = e^{kx}$`,
    },
    {
      id: 'r2-2-3-example-3',
      type: 'example',
      title: 'Eksempel 3: Integral med e^(kx)',
      problem: 'Regn ut $\\displaystyle\\int e^{3x} \\, dx$ og $\\displaystyle\\int e^{-2x} \\, dx$.',
      solution: `**a)** For $e^{3x}$ har vi $k = 3$:
$$\\int e^{3x} \\, dx = \\frac{1}{3} e^{3x} + C$$

**b)** For $e^{-2x}$ har vi $k = -2$:
$$\\int e^{-2x} \\, dx = \\frac{1}{-2} e^{-2x} + C = -\\frac{1}{2} e^{-2x} + C$$`,
    },
    {
      id: 'r2-2-3-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Regn ut $\\displaystyle\\int 4e^{5x} \\, dx$ og $\\displaystyle\\int e^{-x} \\, dx$.',
        solution: '$\\frac{4}{5}e^{5x} + C$ og $-e^{-x} + C$',
        hints: ['Bruk formelen $\\int e^{kx} \\, dx = \\frac{1}{k}e^{kx} + C$.'],
      },
    },
    {
      id: 'r2-2-3-def-4',
      type: 'definition',
      title: 'Integralet av a^x',
      content: `For en konstant $a > 0$, $a \\neq 1$:

$$\\int a^x \\, dx = \\frac{a^x}{\\ln a} + C$$

**Verifisering:** Vi vet at $\\frac{d}{dx}[a^x] = a^x \\ln a$, derfor:
$$\\frac{d}{dx}\\left[\\frac{a^x}{\\ln a}\\right] = \\frac{a^x \\ln a}{\\ln a} = a^x$$`,
    },
    {
      id: 'r2-2-3-example-4',
      type: 'example',
      title: 'Eksempel 4: Integral med a^x',
      problem: 'Regn ut $\\displaystyle\\int 2^x \\, dx$.',
      solution: `Vi bruker formelen med $a = 2$:

$$\\int 2^x \\, dx = \\frac{2^x}{\\ln 2} + C$$

Dette kan skrives som $\\frac{2^x}{\\ln 2} + C \\approx 1{,}44 \\cdot 2^x + C$`,
    },
    {
      id: 'r2-2-3-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Regn ut $\\displaystyle\\int 3^x \\, dx$ og $\\displaystyle\\int 5 \\cdot 2^x \\, dx$.',
        solution: '$\\frac{3^x}{\\ln 3} + C$ og $\\frac{5 \\cdot 2^x}{\\ln 2} + C$',
        hints: ['Bruk formelen $\\int a^x \\, dx = \\frac{a^x}{\\ln a} + C$.'],
      },
    },
    {
      id: 'r2-2-3-theorem-1',
      type: 'theorem',
      title: 'Kjerneregelen for integrasjon',
      content: `Hvis $u = g(x)$ er en deriverbar funksjon, så har vi:

$$\\int f(g(x)) \\cdot g'(x) \\, dx = F(g(x)) + C$$

der $F$ er en antiderivert av $f$.

**Spesielt for logaritmer:**
$$\\int \\frac{g'(x)}{g(x)} \\, dx = \\ln|g(x)| + C$$

**Spesielt for eksponentialfunksjoner:**
$$\\int g'(x) \\cdot e^{g(x)} \\, dx = e^{g(x)} + C$$`,
    },
    {
      id: 'r2-2-3-example-5',
      type: 'example',
      title: 'Eksempel 5: Kjerneregelen med ln',
      problem: 'Regn ut $\\displaystyle\\int \\frac{2x}{x^2 + 1} \\, dx$.',
      solution: `Vi setter $g(x) = x^2 + 1$. Da er $g'(x) = 2x$.

Integralet har formen $\\int \\frac{g'(x)}{g(x)} \\, dx$, så vi bruker kjerneregelen:

$$\\int \\frac{2x}{x^2 + 1} \\, dx = \\ln|x^2 + 1| + C = \\ln(x^2 + 1) + C$$

(Vi slipper absoluttverdi siden $x^2 + 1 > 0$ for alle $x$.)`,
    },
    {
      id: 'r2-2-3-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Regn ut $\\displaystyle\\int \\frac{3x^2}{x^3 + 5} \\, dx$ og $\\displaystyle\\int \\frac{\\cos x}{\\sin x} \\, dx$.',
        solution: '$\\ln|x^3 + 5| + C$ og $\\ln|\\sin x| + C$',
        hints: [
          'For det forste: Hva er den deriverte av $x^3 + 5$?',
          'For det andre: Hva er den deriverte av $\\sin x$?',
          'Begge har formen $\\int \\frac{g\'(x)}{g(x)} \\, dx = \\ln|g(x)| + C$.',
        ],
      },
    },
    {
      id: 'r2-2-3-note-1',
      type: 'note',
      content: `**Tips for a gjenkjenne kjerneregel-integraler:**

1. Se etter en brok der telleren er den deriverte av nevneren
2. Se etter et produkt der den ene faktoren er den deriverte av "kjernen" i den andre faktoren
3. Hvis du ser $e^{\\text{noe}}$, sjekk om "noe" sin deriverte ogsa er til stede`,
    },
    {
      id: 'r2-2-3-example-6',
      type: 'example',
      title: 'Eksempel 6: Kjerneregelen med e^x',
      problem: 'Regn ut $\\displaystyle\\int 2x \\cdot e^{x^2} \\, dx$.',
      solution: `Vi setter $g(x) = x^2$. Da er $g'(x) = 2x$.

Integralet har formen $\\int g'(x) \\cdot e^{g(x)} \\, dx$, sa:

$$\\int 2x \\cdot e^{x^2} \\, dx = e^{x^2} + C$$

**Kontroll:** $\\frac{d}{dx}[e^{x^2}] = e^{x^2} \\cdot 2x = 2x \\cdot e^{x^2}$ \\checkmark`,
    },
    {
      id: 'r2-2-3-ex-6',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-6',
        number: '6',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Regn ut $\\displaystyle\\int (3x^2 + 2) \\cdot e^{x^3 + 2x} \\, dx$.',
        solution: '$e^{x^3 + 2x} + C$',
        hints: [
          'Hva er den deriverte av eksponenten $x^3 + 2x$?',
          'Sammenlign med formelen $\\int g\'(x) \\cdot e^{g(x)} \\, dx = e^{g(x)} + C$.',
        ],
      },
    },
    {
      id: 'r2-2-3-def-5',
      type: 'definition',
      title: 'Bestemt integral med ln og e^x',
      content: `For bestemte integraler bruker vi analysens fundamentalteorem:

$$\\int_a^b \\frac{1}{x} \\, dx = \\Big[\\ln|x|\\Big]_a^b = \\ln|b| - \\ln|a|$$

$$\\int_a^b e^x \\, dx = \\Big[e^x\\Big]_a^b = e^b - e^a$$

**Merk:** For $\\int \\frac{1}{x} \\, dx$ ma $a$ og $b$ ha samme fortegn (begge positive eller begge negative).`,
    },
    {
      id: 'r2-2-3-example-7',
      type: 'example',
      title: 'Eksempel 7: Bestemt integral',
      problem: 'Regn ut $\\displaystyle\\int_1^e \\frac{1}{x} \\, dx$ og $\\displaystyle\\int_0^2 e^x \\, dx$.',
      solution: `**a)** $\\displaystyle\\int_1^e \\frac{1}{x} \\, dx = \\Big[\\ln|x|\\Big]_1^e = \\ln e - \\ln 1 = 1 - 0 = 1$

**b)** $\\displaystyle\\int_0^2 e^x \\, dx = \\Big[e^x\\Big]_0^2 = e^2 - e^0 = e^2 - 1 \\approx 6{,}39$`,
    },
    {
      id: 'r2-2-3-ex-7',
      type: 'exercise',
      exercise: {
        id: 'r2-2-3-ex-7',
        number: '7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Regn ut $\\displaystyle\\int_1^4 \\frac{2}{x} \\, dx$ og $\\displaystyle\\int_0^1 3e^{2x} \\, dx$.',
        solution: '$2\\ln 4 = 4\\ln 2 \\approx 2{,}77$ og $\\frac{3}{2}(e^2 - 1) \\approx 9{,}60$',
        hints: [
          'For det forste: Trekk ut konstanten 2, bruk sa formelen.',
          'For det andre: $\\int e^{2x} \\, dx = \\frac{1}{2}e^{2x}$.',
        ],
      },
    },
    {
      id: 'r2-2-3-summary',
      type: 'text',
      content: `## Oppsummering

| Funksjon | Integral |
|----------|----------|
| $\\frac{1}{x}$ | $\\ln|x| + C$ |
| $e^x$ | $e^x + C$ |
| $e^{kx}$ | $\\frac{1}{k}e^{kx} + C$ |
| $a^x$ | $\\frac{a^x}{\\ln a} + C$ |
| $\\frac{g'(x)}{g(x)}$ | $\\ln|g(x)| + C$ |
| $g'(x) \\cdot e^{g(x)}$ | $e^{g(x)} + C$ |`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_4: TextbookChapter = {
  id: 'r2-2-4',
  courseId: 'r2',
  chapterNumber: '2.4',
  title: 'Bestemt integral som grenseverdi',
  description: 'Integralet som grense for en sum av rektangler.',
  estimatedMinutes: 55,
  competenceGoals: [
    'forsta integralet som en grenseverdi av summer',
    'beregne Riemannsummer',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-2-4-intro',
      type: 'text',
      content: `## Areal under en kurve

Hvordan finner vi arealet under en kurve? For rektangler og trekanter har vi enkle formler, men hva med arealet under en buet kurve som $f(x) = x^2$?

Ideen er gammel - allerede Arkimedes (ca. 250 f.Kr.) brukte en genial metode: **Del opp arealet i mange smale rektangler**, og la antallet rektangler ga mot uendelig.

Denne ideen er selve grunnlaget for integrasjon og kalles **Riemannsummen**, oppkalt etter den tyske matematikeren Bernhard Riemann (1826-1866).`,
    },
    {
      id: 'r2-2-4-riemann-bilde',
      type: 'image',
      src: '/images/r2/integrasjon-riemann.svg',
      alt: 'Riemannsum med rektangler under en kurve',
      caption: 'Riemannsum - arealet tilnarmet med rektangler',
    },
    {
      id: 'r2-2-4-areal-bilde',
      type: 'image',
      src: '/images/r2/integrasjon-areal.svg',
      alt: 'Areal under en kurve beregnet med integral',
      caption: 'Bestemt integral - areal under kurven',
    },

    // ========== DEFINISJON 1: Inndeling ==========
    {
      id: 'r2-2-4-def-1',
      type: 'definition',
      title: 'Inndeling av et intervall',
      content: `La $[a, b]$ være et lukket intervall. En **inndeling** av $[a, b]$ i $n$ delintervaller er gitt ved punktene:

$$a = x_0 < x_1 < x_2 < \\cdots < x_{n-1} < x_n = b$$

Hvert delintervall har bredde:
$$\\Delta x = \\frac{b - a}{n}$$

nar vi bruker **lik inndeling** (alle delintervaller like brede).`,
    },

    // ========== EKSEMPEL 1 ==========
    {
      id: 'r2-2-4-example-1',
      type: 'example',
      title: 'Eksempel 1: Inndeling av et intervall',
      problem: 'Del intervallet $[0, 4]$ inn i 4 like delintervaller. Finn delingspunktene og bredden $\\Delta x$.',
      solution: `**Løsning:**

Bredden av hvert delintervall:
$$\\Delta x = \\frac{b - a}{n} = \\frac{4 - 0}{4} = 1$$

Delingspunktene blir:
- $x_0 = 0$
- $x_1 = 1$
- $x_2 = 2$
- $x_3 = 3$
- $x_4 = 4$

Delintervallene er: $[0, 1]$, $[1, 2]$, $[2, 3]$, $[3, 4]$.`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-2-4-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-4-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Del intervallet $[1, 5]$ inn i 8 like delintervaller. Finn $\\Delta x$ og skriv opp alle delingspunktene $x_0, x_1, \\ldots, x_8$.',
        solution: '$\\Delta x = \\frac{5-1}{8} = 0{,}5$. Delingspunkter: $x_0 = 1$, $x_1 = 1{,}5$, $x_2 = 2$, $x_3 = 2{,}5$, $x_4 = 3$, $x_5 = 3{,}5$, $x_6 = 4$, $x_7 = 4{,}5$, $x_8 = 5$.',
        hints: ['Bruk formelen $\\Delta x = \\frac{b-a}{n}$.', 'Hvert delingspunkt er $x_i = a + i \\cdot \\Delta x$.'],
      },
    },

    // ========== DEFINISJON 2: Riemannsum ==========
    {
      id: 'r2-2-4-def-2',
      type: 'definition',
      title: 'Riemannsum',
      content: `La $f$ være en funksjon definert på $[a, b]$, og la intervallet være delt i $n$ like delintervaller med bredde $\\Delta x = \\frac{b-a}{n}$.

En **Riemannsum** er summen av arealene til $n$ rektangler:

$$S_n = \\sum_{i=1}^{n} f(x_i^*) \\cdot \\Delta x$$

der $x_i^*$ er et punkt i det $i$-te delintervallet.

**Vanlige valg for $x_i^*$:**
- **Venstresum**: $x_i^* = x_{i-1}$ (venstre endepunkt)
- **Hoyresum**: $x_i^* = x_i$ (hoyre endepunkt)
- **Midtpunktsum**: $x_i^* = \\frac{x_{i-1} + x_i}{2}$ (midtpunktet)`,
    },

    // ========== EKSEMPEL 2 ==========
    {
      id: 'r2-2-4-example-2',
      type: 'example',
      title: 'Eksempel 2: Beregne en Riemannsum',
      problem: 'La $f(x) = x^2$ på $[0, 2]$. Beregn hoyresummen $S_4$ med $n = 4$ delintervaller.',
      solution: `**Løsning:**

**Steg 1:** Finn $\\Delta x$:
$$\\Delta x = \\frac{2 - 0}{4} = 0{,}5$$

**Steg 2:** Finn delingspunktene:
$$x_0 = 0, \\quad x_1 = 0{,}5, \\quad x_2 = 1, \\quad x_3 = 1{,}5, \\quad x_4 = 2$$

**Steg 3:** For hoyresum bruker vi $x_1, x_2, x_3, x_4$:
$$S_4 = f(0{,}5) \\cdot 0{,}5 + f(1) \\cdot 0{,}5 + f(1{,}5) \\cdot 0{,}5 + f(2) \\cdot 0{,}5$$

**Steg 4:** Beregn funksjonsverdiene:
$$S_4 = 0{,}25 \\cdot 0{,}5 + 1 \\cdot 0{,}5 + 2{,}25 \\cdot 0{,}5 + 4 \\cdot 0{,}5$$
$$S_4 = 0{,}125 + 0{,}5 + 1{,}125 + 2 = 3{,}75$$

**Kommentar:** Den eksakte verdien av $\\int_0^2 x^2 \\, dx = \\frac{8}{3} \\approx 2{,}67$. Hoyresummen overestimerer fordi $f(x) = x^2$ er voksende.`,
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-2-4-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-4-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'La $f(x) = x^2$ på $[0, 2]$. Beregn **venstresummen** $S_4$ med $n = 4$ delintervaller.',
        solution: 'Venstresummen bruker $x_0, x_1, x_2, x_3$: $S_4 = f(0) \\cdot 0{,}5 + f(0{,}5) \\cdot 0{,}5 + f(1) \\cdot 0{,}5 + f(1{,}5) \\cdot 0{,}5 = 0 + 0{,}125 + 0{,}5 + 1{,}125 = 1{,}75$.',
        hints: ['Venstresummen bruker venstre endepunkt i hvert delintervall.', 'Funksjonsverdiene er $f(0) = 0$, $f(0{,}5) = 0{,}25$, $f(1) = 1$, $f(1{,}5) = 2{,}25$.'],
      },
    },

    // ========== TEOREM: Over- og undersum ==========
    {
      id: 'r2-2-4-theorem-1',
      type: 'theorem',
      title: 'Over- og undersum',
      content: `For en **voksende** funksjon $f$ på $[a, b]$:
- **Venstresummen** er en **undersum** (underestimerer arealet)
- **Hoyresummen** er en **oversum** (overestimerer arealet)

For en **avtagende** funksjon er det motsatt.

**Viktig observasjon:** Nar $n \\to \\infty$, vil bade over- og undersummen konvergere mot det eksakte arealet.`,
    },

    // ========== EKSEMPEL 3 ==========
    {
      id: 'r2-2-4-example-3',
      type: 'example',
      title: 'Eksempel 3: Sigmanotasjon for Riemannsum',
      problem: 'Skriv hoyresummen for $f(x) = x^2$ på $[0, 3]$ med $n$ delintervaller ved hjelp av sigmanotasjon.',
      solution: `**Løsning:**

**Steg 1:** Finn $\\Delta x$ og delingspunktene:
$$\\Delta x = \\frac{3 - 0}{n} = \\frac{3}{n}$$
$$x_i = 0 + i \\cdot \\frac{3}{n} = \\frac{3i}{n}$$

**Steg 2:** Skriv hoyresummen:
$$S_n = \\sum_{i=1}^{n} f(x_i) \\cdot \\Delta x = \\sum_{i=1}^{n} \\left(\\frac{3i}{n}\\right)^2 \\cdot \\frac{3}{n}$$

**Steg 3:** Forenkle:
$$S_n = \\sum_{i=1}^{n} \\frac{9i^2}{n^2} \\cdot \\frac{3}{n} = \\frac{27}{n^3} \\sum_{i=1}^{n} i^2$$`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-2-4-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-4-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv hoyresummen for $f(x) = 2x$ på $[0, 4]$ med $n$ delintervaller ved hjelp av sigmanotasjon. Forenkle uttrykket.',
        solution: '$\\Delta x = \\frac{4}{n}$, $x_i = \\frac{4i}{n}$. Hoyresummen: $S_n = \\sum_{i=1}^{n} 2 \\cdot \\frac{4i}{n} \\cdot \\frac{4}{n} = \\frac{32}{n^2} \\sum_{i=1}^{n} i$.',
        hints: ['Finn forst $\\Delta x$ og $x_i$.', 'Sett inn i formelen $S_n = \\sum_{i=1}^{n} f(x_i) \\cdot \\Delta x$.'],
      },
    },

    // ========== DEFINISJON 3: Viktige summeformler ==========
    {
      id: 'r2-2-4-def-3',
      type: 'definition',
      title: 'Viktige summeformler',
      content: `For å beregne Riemannsummer trenger vi disse summeformlene:

$$\\sum_{i=1}^{n} 1 = n$$

$$\\sum_{i=1}^{n} i = \\frac{n(n+1)}{2}$$

$$\\sum_{i=1}^{n} i^2 = \\frac{n(n+1)(2n+1)}{6}$$

$$\\sum_{i=1}^{n} i^3 = \\left(\\frac{n(n+1)}{2}\\right)^2$$`,
    },

    // ========== EKSEMPEL 4 ==========
    {
      id: 'r2-2-4-example-4',
      type: 'example',
      title: 'Eksempel 4: Beregne grenseverdi av Riemannsum',
      problem: 'Finn $\\displaystyle\\int_0^3 x^2 \\, dx$ ved a ta grenseverdien $\\lim_{n \\to \\infty} S_n$.',
      solution: `**Løsning:**

Fra Eksempel 3 har vi:
$$S_n = \\frac{27}{n^3} \\sum_{i=1}^{n} i^2 = \\frac{27}{n^3} \\cdot \\frac{n(n+1)(2n+1)}{6}$$

**Forenkle:**
$$S_n = \\frac{27 \\cdot n(n+1)(2n+1)}{6n^3} = \\frac{27(n+1)(2n+1)}{6n^2}$$

**Utvid telleren:**
$$S_n = \\frac{27(2n^2 + 3n + 1)}{6n^2} = \\frac{27 \\cdot 2n^2 + 27 \\cdot 3n + 27}{6n^2}$$

$$S_n = \\frac{54n^2 + 81n + 27}{6n^2} = 9 + \\frac{13{,}5}{n} + \\frac{4{,}5}{n^2}$$

**Ta grenseverdien:**
$$\\lim_{n \\to \\infty} S_n = \\lim_{n \\to \\infty} \\left(9 + \\frac{13{,}5}{n} + \\frac{4{,}5}{n^2}\\right) = 9$$

**Svar:** $\\displaystyle\\int_0^3 x^2 \\, dx = 9$`,
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-2-4-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-4-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Bruk grenseverdien av en Riemannsum til a vise at $\\displaystyle\\int_0^4 2x \\, dx = 16$.',
        solution: 'Fra oppgave 3: $S_n = \\frac{32}{n^2} \\sum_{i=1}^{n} i = \\frac{32}{n^2} \\cdot \\frac{n(n+1)}{2} = \\frac{16(n+1)}{n} = 16 + \\frac{16}{n}$. Grenseverdi: $\\lim_{n \\to \\infty} S_n = 16$.',
        hints: ['Bruk summeformelen $\\sum_{i=1}^{n} i = \\frac{n(n+1)}{2}$.', 'Del opp broket og finn grenseverdien nar $n \\to \\infty$.'],
      },
    },

    // ========== DEFINISJON 4: Bestemt integral ==========
    {
      id: 'r2-2-4-def-4',
      type: 'definition',
      title: 'Det bestemte integralet',
      content: `La $f$ være en kontinuerlig funksjon på $[a, b]$. Det **bestemte integralet** av $f$ fra $a$ til $b$ er definert som:

$$\\int_a^b f(x) \\, dx = \\lim_{n \\to \\infty} \\sum_{i=1}^{n} f(x_i^*) \\cdot \\Delta x$$

der $\\Delta x = \\frac{b-a}{n}$ og $x_i^*$ er et vilkarlig punkt i det $i$-te delintervallet.

**Tolkning:**
- Hvis $f(x) \\geq 0$ på $[a, b]$, gir integralet **arealet** mellom grafen og $x$-aksen.
- Hvis $f(x) < 0$ noen steder, far vi **fortegnsarealet** (negativt bidrag under $x$-aksen).`,
    },

    // ========== EKSEMPEL 5 ==========
    {
      id: 'r2-2-4-example-5',
      type: 'example',
      title: 'Eksempel 5: Integral som areal',
      problem: 'Beregn $\\displaystyle\\int_0^2 3 \\, dx$ bade geometrisk og ved Riemannsum.',
      solution: `**Løsning:**

**Geometrisk:**
Funksjonen $f(x) = 3$ er en horisontal linje. Arealet er et rektangel med bredde $2 - 0 = 2$ og høyde $3$:
$$A = 2 \\cdot 3 = 6$$

**Ved Riemannsum:**
$$S_n = \\sum_{i=1}^{n} f(x_i) \\cdot \\Delta x = \\sum_{i=1}^{n} 3 \\cdot \\frac{2}{n} = \\frac{6}{n} \\sum_{i=1}^{n} 1 = \\frac{6}{n} \\cdot n = 6$$

$$\\lim_{n \\to \\infty} S_n = 6$$

**Svar:** $\\displaystyle\\int_0^2 3 \\, dx = 6$`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-2-4-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-4-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn $\\displaystyle\\int_1^4 5 \\, dx$ bade geometrisk og ved a bruke definisjonen av det bestemte integralet (Riemannsum).',
        solution: 'Geometrisk: Rektangel med bredde $4-1=3$ og høyde $5$, sa $A = 15$. Riemannsum: $S_n = \\sum_{i=1}^{n} 5 \\cdot \\frac{3}{n} = \\frac{15}{n} \\cdot n = 15$. Svar: $\\int_1^4 5 \\, dx = 15$.',
        hints: ['Tegn grafen til $f(x) = 5$ og finn arealet av rektangelet.', 'For Riemannsum: $\\Delta x = \\frac{4-1}{n} = \\frac{3}{n}$.'],
      },
    },

    // ========== AVSLUTTENDE MERKNAD ==========
    {
      id: 'r2-2-4-note',
      type: 'note',
      content: `**Oppsummering:**

Definisjonen av det bestemte integralet som grenseverdi av en Riemannsum gir oss en presis matematisk forstaelse av hva et integral er. I praksis bruker vi imidlertid **analysens fundamentalteorem** (som vi ser i neste kapittel) for å beregne integraler - det er mye enklere enn a ta grenseverdier av summer!

Riemannsummer er likevel viktige:
- De gir **intuisjon** for hva et integral betyr
- De brukes i **numerisk integrasjon** nar vi ikke kan finne en antiderivert
- De danner grunnlaget for **flerdimensjonale integraler**`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_5: TextbookChapter = {
  id: 'r2-2-5',
  courseId: 'r2',
  chapterNumber: '2.5',
  title: 'Analysens fundamentalsetning',
  description: 'Sammenhengen mellom derivasjon og integrasjon.',
  estimatedMinutes: 50,
  competenceGoals: [
    'forsta og anvende analysens fundamentalsetning',
    'beregne bestemte integraler ved hjelp av antideriverte',
  ],
  content: [
    {
      id: 'r2-2-5-intro',
      type: 'text',
      content: `## Sammenhengen mellom derivasjon og integrasjon

Derivasjon og integrasjon er de to grunnleggende operasjonene i kalkulus. Men er de egentlig to helt uavhengige operasjoner?

**Analysens fundamentalsetning** gir et oppsiktsvekkende svar: Derivasjon og integrasjon er *inverse operasjoner* - de opphever hverandre!

Dette betyr at vi kan beregne bestemte integraler (arealer) ved hjelp av antideriverte, noe som forenkler mange beregninger dramatisk.`,
    },
    {
      id: 'r2-2-5-def-1',
      type: 'definition',
      title: 'Antiderivert',
      content: `En funksjon $F(x)$ kalles en **antiderivert** (eller primitiv funksjon) til $f(x)$ dersom:
$$F'(x) = f(x)$$

**Eksempler:**
- $F(x) = x^2$ er en antiderivert til $f(x) = 2x$ fordi $(x^2)' = 2x$
- $F(x) = \\sin x$ er en antiderivert til $f(x) = \\cos x$ fordi $(\\sin x)' = \\cos x$

**Merk:** Hvis $F(x)$ er en antiderivert til $f(x)$, er ogsa $F(x) + C$ en antiderivert for enhver konstant $C$.`,
    },
    {
      id: 'r2-2-5-example-1',
      type: 'example',
      title: 'Eksempel 1: Finne antideriverte',
      problem: 'Finn en antiderivert til $f(x) = 3x^2 + 2x$.',
      solution: `Vi soker $F(x)$ slik at $F'(x) = 3x^2 + 2x$.

For $3x^2$: Siden $(x^3)' = 3x^2$, er $x^3$ en antiderivert.

For $2x$: Siden $(x^2)' = 2x$, er $x^2$ en antiderivert.

Dermed er:
$$F(x) = x^3 + x^2$$

**Kontroll:** $F'(x) = 3x^2 + 2x = f(x)$ \\checkmark`,
    },
    {
      id: 'r2-2-5-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-5-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn en antiderivert til $f(x) = 4x^3 - 6x$.',
        solution: '$F(x) = x^4 - 3x^2$ (eller $F(x) = x^4 - 3x^2 + C$)',
        hints: ['Hva ma du derivere for a fa $4x^3$?', 'Hva ma du derivere for a fa $6x$?'],
      },
    },
    {
      id: 'r2-2-5-theorem-1',
      type: 'theorem',
      title: 'Analysens fundamentalsetning - del 1',
      content: `La $f$ være en kontinuerlig funksjon på $[a, b]$. Definer funksjonen $F$ ved:
$$F(x) = \\int_a^x f(t) \\, dt$$

Da er $F$ deriverbar på $(a, b)$, og:
$$F'(x) = f(x)$$

**Med andre ord:** Integralet av $f$ fra $a$ til $x$ gir en funksjon som har $f$ som sin deriverte.

Dette betyr at integrasjon og derivasjon er inverse operasjoner!`,
    },
    {
      id: 'r2-2-5-text-1',
      type: 'text',
      content: `### Geometrisk tolkning

Tenk deg at $F(x) = \\int_a^x f(t) \\, dt$ representerer arealet under grafen til $f$ fra $a$ til $x$.

Nar vi oker $x$ litt, oker arealet med omtrent $f(x) \\cdot \\Delta x$ (et smalt rektangel).

Endringsraten til arealet er derfor:
$$F'(x) = \\lim_{\\Delta x \\to 0} \\frac{F(x + \\Delta x) - F(x)}{\\Delta x} = f(x)$$`,
    },
    {
      id: 'r2-2-5-example-2',
      type: 'example',
      title: 'Eksempel 2: Bruke fundamentalsetningen del 1',
      problem: 'La $F(x) = \\int_1^x (t^2 + 1) \\, dt$. Finn $F\'(x)$.',
      solution: `Ifølge analysens fundamentalsetning del 1:
$$F'(x) = f(x)$$

der $f(t) = t^2 + 1$.

Dermed:
$$F'(x) = x^2 + 1$$

**Merk:** Vi trenger ikke å beregne integralet! Fundamentalsetningen sier at den deriverte av integralet er integranden (med $t$ erstattet av $x$).`,
    },
    {
      id: 'r2-2-5-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-5-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'La $G(x) = \\int_0^x \\sin t \\, dt$. Finn $G\'(x)$.',
        solution: '$G\'(x) = \\sin x$',
        hints: ['Bruk fundamentalsetningen del 1 direkte.', 'Du trenger ikke å beregne integralet.'],
      },
    },
    {
      id: 'r2-2-5-theorem-2',
      type: 'theorem',
      title: 'Analysens fundamentalsetning - del 2',
      content: `La $f$ være en kontinuerlig funksjon på $[a, b]$, og la $F$ være en antiderivert til $f$. Da er:
$$\\int_a^b f(x) \\, dx = F(b) - F(a)$$

**Dette er hovedresultatet:** For å beregne et bestemt integral, finner vi en antiderivert og evaluerer forskjellen $F(b) - F(a)$.`,
    },
    {
      id: 'r2-2-5-def-2',
      type: 'definition',
      title: 'Newton-Leibniz-notasjon',
      content: `Vi skriver:
$$\\left[F(x)\\right]_a^b = F(b) - F(a)$$

Hakeparentesen med grenser kalles **evalueringsnotasjon** eller **Newton-Leibniz-notasjon**.

**Eksempel:**
$$\\left[x^2\\right]_1^3 = 3^2 - 1^2 = 9 - 1 = 8$$`,
    },
    {
      id: 'r2-2-5-example-3',
      type: 'example',
      title: 'Eksempel 3: Beregne bestemt integral',
      problem: 'Beregn $\\int_1^4 2x \\, dx$.',
      solution: `**Steg 1:** Finn en antiderivert til $f(x) = 2x$.

$F(x) = x^2$ (siden $(x^2)' = 2x$)

**Steg 2:** Bruk fundamentalsetningen del 2.

$$\\int_1^4 2x \\, dx = \\left[x^2\\right]_1^4 = 4^2 - 1^2 = 16 - 1 = 15$$

**Svar:** $\\int_1^4 2x \\, dx = 15$`,
    },
    {
      id: 'r2-2-5-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-5-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Beregn $\\int_0^3 6x^2 \\, dx$.',
        solution: '$\\left[2x^3\\right]_0^3 = 2 \\cdot 27 - 0 = 54$',
        hints: ['Finn antiderivert til $6x^2$.', 'Bruk formelen $\\int x^n dx = \\frac{x^{n+1}}{n+1}$.'],
      },
    },
    {
      id: 'r2-2-5-example-4',
      type: 'example',
      title: 'Eksempel 4: Integral med flere ledd',
      problem: 'Beregn $\\int_1^2 (3x^2 - 4x + 1) \\, dx$.',
      solution: `**Steg 1:** Finn antiderivert ledd for ledd.

For $3x^2$: antiderivert er $x^3$
For $-4x$: antiderivert er $-2x^2$
For $1$: antiderivert er $x$

$F(x) = x^3 - 2x^2 + x$

**Steg 2:** Evaluer.

$$\\int_1^2 (3x^2 - 4x + 1) \\, dx = \\left[x^3 - 2x^2 + x\\right]_1^2$$

$$= (2^3 - 2 \\cdot 2^2 + 2) - (1^3 - 2 \\cdot 1^2 + 1)$$

$$= (8 - 8 + 2) - (1 - 2 + 1)$$

$$= 2 - 0 = 2$$`,
    },
    {
      id: 'r2-2-5-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-5-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn $\\int_0^1 (4x^3 + 3x^2 - 2x) \\, dx$.',
        solution: '$\\left[x^4 + x^3 - x^2\\right]_0^1 = (1 + 1 - 1) - 0 = 1$',
        hints: ['Integrer ledd for ledd.', 'Antiderivert til $x^n$ er $\\frac{x^{n+1}}{n+1}$.'],
      },
    },
    {
      id: 'r2-2-5-note-1',
      type: 'note',
      content: `**Viktig observasjon:**

Konstanten $C$ i ubestemte integraler forsvinner nar vi beregner bestemte integraler!

$(F(b) + C) - (F(a) + C) = F(b) - F(a)$

Derfor trenger vi ikke skrive $+C$ nar vi regner bestemte integraler.`,
    },
    {
      id: 'r2-2-5-example-5',
      type: 'example',
      title: 'Eksempel 5: Areal under graf',
      problem: 'Finn arealet under grafen til $f(x) = x^2$ mellom $x = 0$ og $x = 3$.',
      solution: `Arealet er gitt ved det bestemte integralet:
$$A = \\int_0^3 x^2 \\, dx$$

**Steg 1:** Antiderivert til $x^2$ er $\\frac{x^3}{3}$.

**Steg 2:** Evaluer.
$$A = \\left[\\frac{x^3}{3}\\right]_0^3 = \\frac{3^3}{3} - \\frac{0^3}{3} = \\frac{27}{3} - 0 = 9$$

**Svar:** Arealet er 9 arealenheter.

**Geometrisk:** Dette er arealet mellom parabelen $y = x^2$, $x$-aksen, og de vertikale linjene $x = 0$ og $x = 3$.`,
    },
    {
      id: 'r2-2-5-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-5-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn arealet under grafen til $f(x) = \\sqrt{x} = x^{1/2}$ mellom $x = 1$ og $x = 4$.',
        solution: '$A = \\left[\\frac{2x^{3/2}}{3}\\right]_1^4 = \\frac{2 \\cdot 8}{3} - \\frac{2 \\cdot 1}{3} = \\frac{16}{3} - \\frac{2}{3} = \\frac{14}{3}$',
        hints: [
          'Skriv $\\sqrt{x}$ som $x^{1/2}$.',
          'Antiderivert til $x^{1/2}$ er $\\frac{x^{3/2}}{3/2} = \\frac{2x^{3/2}}{3}$.',
          'Husk at $4^{3/2} = (\\sqrt{4})^3 = 8$.',
        ],
      },
    },
    {
      id: 'r2-2-5-theorem-3',
      type: 'theorem',
      title: 'Sammendrag av integrasjonsregler',
      content: `Med fundamentalsetningen kan vi beregne bestemte integraler ved hjelp av disse antideriverte:

| $f(x)$ | $F(x)$ (antiderivert) |
|--------|----------------------|
| $x^n$ ($n \\neq -1$) | $\\frac{x^{n+1}}{n+1}$ |
| $\\frac{1}{x}$ | $\\ln |x|$ |
| $e^x$ | $e^x$ |
| $\\sin x$ | $-\\cos x$ |
| $\\cos x$ | $\\sin x$ |

**Regneregler:**
- $\\int_a^b k \\cdot f(x) \\, dx = k \\cdot \\int_a^b f(x) \\, dx$
- $\\int_a^b [f(x) \\pm g(x)] \\, dx = \\int_a^b f(x) \\, dx \\pm \\int_a^b g(x) \\, dx$`,
    },
    {
      id: 'r2-2-5-warning-1',
      type: 'warning',
      title: 'Vanlige feil',
      content: `**Feil 1:** Glemme a bytte fortegn ved nedre grense.
- Riktig: $[x^2]_1^3 = 3^2 - 1^2 = 8$
- Feil: $[x^2]_1^3 = 3^2 + 1^2 = 10$

**Feil 2:** Glemme potensregelen ved integrasjon.
- Riktig: $\\int x^2 dx = \\frac{x^3}{3}$
- Feil: $\\int x^2 dx = \\frac{x^2}{2}$

**Feil 3:** Sette inn grensene i feil rekkefolge.
- Riktig: $[F(x)]_a^b = F(b) - F(a)$ (ovre minus nedre)
- Feil: $[F(x)]_a^b = F(a) - F(b)$`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_6: TextbookChapter = {
  id: 'r2-2-6',
  courseId: 'r2',
  chapterNumber: '2.6',
  title: 'Areal under grafer',
  description: 'Beregne areal ved hjelp av bestemt integral.',
  estimatedMinutes: 50,
  competenceGoals: [
    'beregne areal under grafer',
    'handtere negative funksjonsverdier ved arealberegning',
    'bruke integralregning til å finne arealer mellom kurver og akser',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-2-6-intro',
      type: 'text',
      content: `## Areal og integrasjon

En av de viktigste anvendelsene av integralregning er arealberegning. Historisk sett var det nettopp problemet med å finne arealer under kurver som ledet til utviklingen av integralregning.

I dette kapittelet skal vi se hvordan det bestemte integralet kan brukes til å beregne arealer, og hva vi ma ta hensyn til nar funksjonen tar negative verdier.`,
    },

    // ========== AREAL NAR f(x) >= 0 ==========
    {
      id: 'r2-2-6-positiv-intro',
      type: 'text',
      content: `## Areal nar $f(x) \\geq 0$

Nar en funksjon $f(x)$ er ikke-negativ på et intervall $[a, b]$, gir det bestemte integralet direkte arealet av omradet mellom grafen og $x$-aksen.`,
    },

    // Definisjon: Areal under graf
    {
      id: 'r2-2-6-def-areal-positiv',
      type: 'definition',
      title: 'Areal under graf (positiv funksjon)',
      content: `La $f$ være en kontinuerlig funksjon med $f(x) \\geq 0$ for alle $x \\in [a, b]$.

Da er arealet $A$ av omradet mellom grafen til $f$, $x$-aksen og linjene $x = a$ og $x = b$ gitt ved:

$$A = \\int_a^b f(x) \\, dx$$`,
    },

    // Eksempel 1: Enkelt areal
    {
      id: 'r2-2-6-example-1',
      type: 'example',
      title: 'Eksempel 1: Areal under parabel',
      problem: `Finn arealet av omradet begrenset av grafen til $f(x) = x^2$, $x$-aksen og linjene $x = 0$ og $x = 3$.`,
      solution: `**Løsning:**

Funksjonen $f(x) = x^2$ er ikke-negativ for alle $x$, sa vi kan bruke integralet direkte.

$$A = \\int_0^3 x^2 \\, dx$$

Vi finner en antiderivert: $F(x) = \\frac{x^3}{3}$

$$A = \\left[ \\frac{x^3}{3} \\right]_0^3 = \\frac{3^3}{3} - \\frac{0^3}{3} = \\frac{27}{3} - 0 = 9$$

**Svar:** Arealet er $9$ arealenheter.`,
    },

    // Oppgave 1
    {
      id: 'r2-2-6-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-6-ex-1',
        number: '2.6.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn arealet av omradet begrenset av grafen, $x$-aksen og de oppgitte linjene.',
        subTasks: [
          {
            label: 'a',
            task: '$f(x) = x^3$ fra $x = 0$ til $x = 2$',
            solution: '$A = \\int_0^2 x^3 \\, dx = \\left[ \\frac{x^4}{4} \\right]_0^2 = \\frac{16}{4} - 0 = 4$',
          },
          {
            label: 'b',
            task: '$f(x) = \\sqrt{x}$ fra $x = 0$ til $x = 4$',
            solution: '$A = \\int_0^4 \\sqrt{x} \\, dx = \\int_0^4 x^{1/2} \\, dx = \\left[ \\frac{2x^{3/2}}{3} \\right]_0^4 = \\frac{2 \\cdot 8}{3} - 0 = \\frac{16}{3}$',
          },
          {
            label: 'c',
            task: '$f(x) = e^x$ fra $x = 0$ til $x = 2$',
            solution: '$A = \\int_0^2 e^x \\, dx = \\left[ e^x \\right]_0^2 = e^2 - e^0 = e^2 - 1 \\approx 6{,}39$',
          },
        ],
        solution: 'a) $4$, b) $\\frac{16}{3}$, c) $e^2 - 1$',
        hints: [
          'Sjekk at funksjonen er ikke-negativ på intervallet.',
          'Finn antiderivert og bruk innsettingsformelen.',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== NAR INTEGRALET BLIR NEGATIVT ==========
    {
      id: 'r2-2-6-negativ-intro',
      type: 'text',
      content: `## Nar integralet blir negativt

Hva skjer nar funksjonen er negativ på hele eller deler av intervallet? Da gir det bestemte integralet en **negativ verdi** for de omradene der grafen ligger under $x$-aksen.

Dette er fordi integralet maler "fortegnsareal" - positivt over aksen og negativt under.`,
    },

    // Eksempel 2: Negativt integral
    {
      id: 'r2-2-6-example-2',
      type: 'example',
      title: 'Eksempel 2: Integral under x-aksen',
      problem: `Regn ut $\\int_0^2 (x - 3) \\, dx$ og forklar resultatet geometrisk.`,
      solution: `**Løsning:**

$$\\int_0^2 (x - 3) \\, dx = \\left[ \\frac{x^2}{2} - 3x \\right]_0^2 = \\left( \\frac{4}{2} - 6 \\right) - (0 - 0) = 2 - 6 = -4$$

Integralet er negativt!

**Geometrisk forklaring:**
Funksjonen $f(x) = x - 3$ er negativ for $x < 3$. Pa intervallet $[0, 2]$ ligger hele grafen under $x$-aksen.

Integralet $-4$ representerer "fortegnsarealet". Det faktiske arealet mellom grafen og $x$-aksen er $|{-4}| = 4$ arealenheter.`,
    },

    // Definisjon: Fortegnsareal
    {
      id: 'r2-2-6-def-fortegnsareal',
      type: 'definition',
      title: 'Fortegnsareal',
      content: `Det bestemte integralet $\\int_a^b f(x) \\, dx$ gir **fortegnsarealet** mellom grafen til $f$ og $x$-aksen:

- Omrader der $f(x) > 0$ bidrar med **positivt** areal
- Omrader der $f(x) < 0$ bidrar med **negativt** areal

Integralet kan derfor være null selv om det faktiske arealet er stort, dersom positive og negative bidrag kansellerer hverandre.`,
    },

    // Oppgave 2
    {
      id: 'r2-2-6-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-6-ex-2',
        number: '2.6.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut integralene og forklar fortegnet på svaret.',
        subTasks: [
          {
            label: 'a',
            task: '$\\int_0^4 (x - 4) \\, dx$',
            solution: '$\\int_0^4 (x - 4) \\, dx = \\left[ \\frac{x^2}{2} - 4x \\right]_0^4 = (8 - 16) - 0 = -8$. Negativt fordi $f(x) = x - 4 < 0$ for $x < 4$.',
          },
          {
            label: 'b',
            task: '$\\int_{-2}^0 x^3 \\, dx$',
            solution: '$\\int_{-2}^0 x^3 \\, dx = \\left[ \\frac{x^4}{4} \\right]_{-2}^0 = 0 - \\frac{16}{4} = -4$. Negativt fordi $x^3 < 0$ for $x < 0$.',
          },
          {
            label: 'c',
            task: '$\\int_{-1}^1 x \\, dx$',
            solution: '$\\int_{-1}^1 x \\, dx = \\left[ \\frac{x^2}{2} \\right]_{-1}^1 = \\frac{1}{2} - \\frac{1}{2} = 0$. Null fordi de positive og negative bidragene kansellerer.',
          },
        ],
        solution: 'a) $-8$, b) $-4$, c) $0$',
        hints: [
          'Tenk på hvor funksjonen er positiv og hvor den er negativ.',
          'Integralet av en odde funksjon over et symmetrisk intervall er null.',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== ABSOLUTT AREAL ==========
    {
      id: 'r2-2-6-absolutt-intro',
      type: 'text',
      content: `## Absolutt areal

Nar vi skal finne det **faktiske arealet** (i arealenheter) mellom en graf og $x$-aksen, ma vi ta hensyn til at arealet alltid er positivt.

Vi bruker da absoluttverdien av funksjonen for a sikre at alle bidrag teller positivt.`,
    },

    // Definisjon: Absolutt areal
    {
      id: 'r2-2-6-def-absolutt-areal',
      type: 'definition',
      title: 'Absolutt areal',
      content: `Det **absolutte arealet** mellom grafen til $f$ og $x$-aksen på intervallet $[a, b]$ er:

$$A = \\int_a^b |f(x)| \\, dx$$

I praksis beregner vi dette ved a:
1. Finne nullpunktene til $f$ på $[a, b]$
2. Dele opp i delintervaller der $f$ har konstant fortegn
3. Ta absoluttverdien av hvert delintegral
4. Summere alle bidragene`,
    },

    // Eksempel 3: Absolutt areal
    {
      id: 'r2-2-6-example-3',
      type: 'example',
      title: 'Eksempel 3: Absolutt areal',
      problem: `Finn det absolutte arealet mellom grafen til $f(x) = x^2 - 4$ og $x$-aksen på intervallet $[-3, 3]$.`,
      solution: `**Løsning:**

**Steg 1: Finn nullpunktene**
$x^2 - 4 = 0$
$x^2 = 4$
$x = \\pm 2$

**Steg 2: Bestem fortegn på hvert delintervall**
- For $x \\in [-3, -2]$: $f(x) > 0$ (over $x$-aksen)
- For $x \\in [-2, 2]$: $f(x) < 0$ (under $x$-aksen)
- For $x \\in [2, 3]$: $f(x) > 0$ (over $x$-aksen)

**Steg 3: Beregn hvert delintegral**

$I_1 = \\int_{-3}^{-2} (x^2 - 4) \\, dx = \\left[ \\frac{x^3}{3} - 4x \\right]_{-3}^{-2}$
$= \\left( -\\frac{8}{3} + 8 \\right) - \\left( -9 + 12 \\right) = \\frac{16}{3} - 3 = \\frac{7}{3}$

$I_2 = \\int_{-2}^{2} (x^2 - 4) \\, dx = \\left[ \\frac{x^3}{3} - 4x \\right]_{-2}^{2}$
$= \\left( \\frac{8}{3} - 8 \\right) - \\left( -\\frac{8}{3} + 8 \\right) = -\\frac{16}{3} - \\frac{16}{3} = -\\frac{32}{3}$

$I_3 = \\int_{2}^{3} (x^2 - 4) \\, dx = \\left[ \\frac{x^3}{3} - 4x \\right]_{2}^{3}$
$= \\left( 9 - 12 \\right) - \\left( \\frac{8}{3} - 8 \\right) = -3 + \\frac{16}{3} = \\frac{7}{3}$

**Steg 4: Summer absoluttverdiene**
$A = |I_1| + |I_2| + |I_3| = \\frac{7}{3} + \\frac{32}{3} + \\frac{7}{3} = \\frac{46}{3}$

**Svar:** Det absolutte arealet er $\\frac{46}{3} \\approx 15{,}3$ arealenheter.`,
    },

    // Oppgave 3
    {
      id: 'r2-2-6-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-6-ex-3',
        number: '2.6.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn det absolutte arealet mellom grafen og $x$-aksen på det oppgitte intervallet.',
        subTasks: [
          {
            label: 'a',
            task: '$f(x) = x^2 - 1$ på $[-2, 2]$',
            solution: `Nullpunkter: $x = \\pm 1$.
$I_1 = \\int_{-2}^{-1} (x^2 - 1) \\, dx = \\frac{4}{3}$
$I_2 = \\int_{-1}^{1} (x^2 - 1) \\, dx = -\\frac{4}{3}$
$I_3 = \\int_{1}^{2} (x^2 - 1) \\, dx = \\frac{4}{3}$
$A = \\frac{4}{3} + \\frac{4}{3} + \\frac{4}{3} = 4$`,
          },
          {
            label: 'b',
            task: '$f(x) = \\sin x$ på $[0, 2\\pi]$',
            solution: `Nullpunkter: $x = 0, \\pi, 2\\pi$.
$I_1 = \\int_{0}^{\\pi} \\sin x \\, dx = [-\\cos x]_0^{\\pi} = 2$
$I_2 = \\int_{\\pi}^{2\\pi} \\sin x \\, dx = [-\\cos x]_{\\pi}^{2\\pi} = -2$
$A = |2| + |-2| = 4$`,
          },
        ],
        solution: 'a) $4$, b) $4$',
        hints: [
          'Finn forst nullpunktene til funksjonen.',
          'Del opp integralet ved nullpunktene.',
          'Husk a ta absoluttverdien av hvert delintegral.',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== SYSTEMATISK METODE ==========
    {
      id: 'r2-2-6-metode-intro',
      type: 'text',
      content: `## Systematisk fremgangsmate

Nar du skal beregne areal mellom en graf og $x$-aksen, er det viktig a folge en systematisk metode. Her er en oppskrift som fungerer i alle tilfeller.`,
    },

    // Teorem: Fremgangsmate
    {
      id: 'r2-2-6-theorem-metode',
      type: 'theorem',
      title: 'Fremgangsmate for arealberegning',
      content: `For å finne arealet mellom grafen til $f(x)$ og $x$-aksen på $[a, b]$:

**1. Finn nullpunktene**
Los $f(x) = 0$ for $x \\in [a, b]$. Kall nullpunktene $x_1, x_2, \\ldots, x_n$ (i stigende rekkefolge).

**2. Del opp intervallet**
Intervallet deles opp i: $[a, x_1], [x_1, x_2], \\ldots, [x_n, b]$

**3. Beregn hvert delintegral**
For hvert delintervall $[x_i, x_{i+1}]$, beregn $\\int_{x_i}^{x_{i+1}} f(x) \\, dx$

**4. Summer absoluttverdiene**
$$A = \\sum |\\text{delintegral}|$$`,
    },

    // Eksempel 4: Tredjegradspolynom
    {
      id: 'r2-2-6-example-4',
      type: 'example',
      title: 'Eksempel 4: Areal for tredjegradsfunksjon',
      problem: `Finn arealet mellom grafen til $f(x) = x^3 - 4x$ og $x$-aksen.`,
      solution: `**Løsning:**

**Steg 1: Finn nullpunktene**
$x^3 - 4x = 0$
$x(x^2 - 4) = 0$
$x(x-2)(x+2) = 0$
$x = -2, 0, 2$

**Steg 2: Bestem fortegn**
Vi tester et punkt i hvert intervall:
- $f(-3) = -27 + 12 = -15 < 0$ (under aksen)
- $f(-1) = -1 + 4 = 3 > 0$ (over aksen)
- $f(1) = 1 - 4 = -3 < 0$ (under aksen)
- $f(3) = 27 - 12 = 15 > 0$ (over aksen)

Vi beregner arealet på $[-2, 2]$:

**Steg 3: Beregn delintegralene**

$I_1 = \\int_{-2}^{0} (x^3 - 4x) \\, dx = \\left[ \\frac{x^4}{4} - 2x^2 \\right]_{-2}^{0}$
$= 0 - (4 - 8) = 0 - (-4) = 4$

$I_2 = \\int_{0}^{2} (x^3 - 4x) \\, dx = \\left[ \\frac{x^4}{4} - 2x^2 \\right]_{0}^{2}$
$= (4 - 8) - 0 = -4$

**Steg 4: Summer absoluttverdiene**
$A = |4| + |-4| = 4 + 4 = 8$

**Svar:** Arealet er $8$ arealenheter.

**Merk:** Grafen er symmetrisk om origo (odde funksjon), sa de to omradene har like stort areal.`,
    },

    // Oppgave 4
    {
      id: 'r2-2-6-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-6-ex-4',
        number: '2.6.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn arealet mellom grafen og $x$-aksen.',
        subTasks: [
          {
            label: 'a',
            task: '$f(x) = x^3 - x$ på $[-1, 1]$',
            solution: `Nullpunkter: $x(x^2-1) = 0 \\Rightarrow x = -1, 0, 1$.
$I_1 = \\int_{-1}^{0} (x^3 - x) \\, dx = \\left[ \\frac{x^4}{4} - \\frac{x^2}{2} \\right]_{-1}^{0} = 0 - (\\frac{1}{4} - \\frac{1}{2}) = \\frac{1}{4}$
$I_2 = \\int_{0}^{1} (x^3 - x) \\, dx = (\\frac{1}{4} - \\frac{1}{2}) - 0 = -\\frac{1}{4}$
$A = \\frac{1}{4} + \\frac{1}{4} = \\frac{1}{2}$`,
          },
          {
            label: 'b',
            task: '$f(x) = x^2 - 3x + 2$ på $[0, 3]$',
            solution: `Nullpunkter: $(x-1)(x-2) = 0 \\Rightarrow x = 1, 2$.
$I_1 = \\int_{0}^{1} (x^2 - 3x + 2) \\, dx = [\\frac{x^3}{3} - \\frac{3x^2}{2} + 2x]_0^1 = \\frac{1}{3} - \\frac{3}{2} + 2 = \\frac{5}{6}$
$I_2 = \\int_{1}^{2} (x^2 - 3x + 2) \\, dx = -\\frac{1}{6}$
$I_3 = \\int_{2}^{3} (x^2 - 3x + 2) \\, dx = \\frac{5}{6}$
$A = \\frac{5}{6} + \\frac{1}{6} + \\frac{5}{6} = \\frac{11}{6}$`,
          },
        ],
        solution: 'a) $\\frac{1}{2}$, b) $\\frac{11}{6}$',
        hints: [
          'Faktoriser for å finne nullpunktene.',
          'Vurderer fortegnet til funksjonen mellom nullpunktene.',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== PRAKTISKE ANVENDELSER ==========
    {
      id: 'r2-2-6-anvendelser-intro',
      type: 'text',
      content: `## Praktiske anvendelser

Arealberegning med integraler har mange praktiske anvendelser:

- **Fysikk:** Arbeid utfort av en variabel kraft, strekning fra hastighetsfunksjon
- **Okonomi:** Totalt overskudd, konsumentoverskudd
- **Biologi:** Populasjonsvekst over tid
- **Teknikk:** Beregning av materialmengder

La oss se på noen eksempler.`,
    },

    // Eksempel 5: Praktisk anvendelse
    {
      id: 'r2-2-6-example-5',
      type: 'example',
      title: 'Eksempel 5: Hastighet og strekning',
      problem: `En bil har hastighet gitt ved $v(t) = 20 - 4t$ (m/s) der $t$ er tiden i sekunder.

a) Finn den totale tilbakelagte strekningen for $t \\in [0, 10]$.
b) Finn bilens posisjon etter 10 sekunder dersom den starter i $x = 0$.`,
      solution: `**Løsning:**

Forst finner vi nar bilen stopper og snur:
$v(t) = 0 \\Rightarrow 20 - 4t = 0 \\Rightarrow t = 5$ s

**a) Total tilbakelagt strekning**

Strekning er alltid positiv, sa vi ma ta absoluttverdien:

For $t \\in [0, 5]$: $v(t) > 0$ (bilen kjorer fremover)
For $t \\in [5, 10]$: $v(t) < 0$ (bilen rygger)

$s_1 = \\int_0^5 (20 - 4t) \\, dt = [20t - 2t^2]_0^5 = 100 - 50 = 50$ m

$s_2 = \\int_5^{10} (20 - 4t) \\, dt = [20t - 2t^2]_5^{10} = (200 - 200) - (100 - 50) = -50$ m

Total strekning $= |50| + |-50| = 100$ m

**b) Posisjon etter 10 sekunder**

Posisjon = startposisjon + netto forflytning:

$x(10) = 0 + \\int_0^{10} (20 - 4t) \\, dt = 50 + (-50) = 0$ m

Bilen er tilbake ved startposisjonen!

**Svar:** a) 100 m, b) 0 m (tilbake ved start)`,
    },

    // Oppgave 5
    {
      id: 'r2-2-6-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-6-ex-5',
        number: '2.6.5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los oppgavene.',
        subTasks: [
          {
            label: 'a',
            task: 'En partikkel beveger seg langs en linje med hastighet $v(t) = t^2 - 4t + 3$ (m/s). Finn den totale tilbakelagte strekningen for $t \\in [0, 4]$.',
            solution: `Nullpunkter: $t^2 - 4t + 3 = (t-1)(t-3) = 0 \\Rightarrow t = 1, 3$.
$I_1 = \\int_0^1 (t^2 - 4t + 3) \\, dt = [\\frac{t^3}{3} - 2t^2 + 3t]_0^1 = \\frac{1}{3} - 2 + 3 = \\frac{4}{3}$
$I_2 = \\int_1^3 (t^2 - 4t + 3) \\, dt = -\\frac{4}{3}$
$I_3 = \\int_3^4 (t^2 - 4t + 3) \\, dt = \\frac{4}{3}$
Strekning $= \\frac{4}{3} + \\frac{4}{3} + \\frac{4}{3} = 4$ m`,
          },
          {
            label: 'b',
            task: 'Vannstanden i en elv endrer seg med $h\'(t) = \\cos(\\frac{\\pi t}{6})$ (cm/time) der $t$ er timer etter midnatt. Finn den totale endringen i vannstand fra $t = 0$ til $t = 12$.',
            solution: `$\\int_0^{12} \\cos(\\frac{\\pi t}{6}) \\, dt = [\\frac{6}{\\pi} \\sin(\\frac{\\pi t}{6})]_0^{12} = \\frac{6}{\\pi}(\\sin(2\\pi) - \\sin(0)) = 0$ cm.
Netto endring er 0, men total bevegelse: nullpunkter ved $t = 3, 9$.
$I_1 = \\int_0^3 \\cos(\\frac{\\pi t}{6}) \\, dt = \\frac{6}{\\pi}$
$I_2 = \\int_3^9 \\cos(\\frac{\\pi t}{6}) \\, dt = -\\frac{12}{\\pi}$
$I_3 = \\int_9^{12} \\cos(\\frac{\\pi t}{6}) \\, dt = \\frac{6}{\\pi}$
Total $= \\frac{6}{\\pi} + \\frac{12}{\\pi} + \\frac{6}{\\pi} = \\frac{24}{\\pi} \\approx 7{,}64$ cm`,
          },
        ],
        solution: 'a) 4 m, b) $\\frac{24}{\\pi} \\approx 7{,}64$ cm',
        hints: [
          'Finn forst nullpunktene til hastighetsfunksjonen.',
          'Strekning krever absoluttverdier, posisjon/forflytning gjor det ikke.',
          'Husk substitusjon for trigonometriske integraler.',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-2-6-oppsummering',
      type: 'text',
      content: `## Oppsummering

I dette kapittelet har vi laert:

1. **Areal under positiv graf:** $A = \\int_a^b f(x) \\, dx$ nar $f(x) \\geq 0$

2. **Fortegnsareal:** Integralet gir positivt bidrag over $x$-aksen og negativt under

3. **Absolutt areal:** $A = \\int_a^b |f(x)| \\, dx$
   - Finn nullpunktene
   - Del opp ved nullpunktene
   - Summer absoluttverdiene av delintegralene

4. **Praktiske anvendelser:** Strekning vs. forflytning, totale mengder`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_2_7: TextbookChapter = {
  id: 'r2-2-7',
  courseId: 'r2',
  chapterNumber: '2.7',
  title: 'Areal mellom kurver',
  description: 'Beregne areal mellom to grafer.',
  estimatedMinutes: 50,
  competenceGoals: [
    'beregne areal mellom to kurver',
    'finne skjaeringspunkter og sette opp integraler',
  ],
  content: [
    {
      id: 'r2-2-7-intro',
      type: 'text',
      content: `## Areal mellom kurver

I tidligere kapitler har vi lart å beregne arealet mellom en graf og $x$-aksen ved hjelp av bestemte integraler. Na skal vi utvide dette til å beregne arealet mellom **to kurver**.

Dette er nyttig i mange praktiske sammenhenger:
- Finne arealet av et omrade begrenset av to funksjoner
- Beregne differansen mellom to storrelser over tid
- Analysere omrader i okonomi, fysikk og biologi

For å beregne areal mellom kurver ma vi:
1. Finne skjaeringspunktene (integrasjonsgrensene)
2. Avgjore hvilken funksjon som ligger overst
3. Sette opp og lose integralet`,
    },
    {
      id: 'r2-2-7-def-1',
      type: 'definition',
      title: 'Areal mellom to kurver',
      content: `Nar $f(x) \\geq g(x)$ for alle $x$ i intervallet $[a, b]$, er arealet mellom grafene til $f$ og $g$ gitt ved:

$$A = \\int_a^b \\left( f(x) - g(x) \\right) \\, dx$$

Her er $f(x)$ den **ovre** funksjonen og $g(x)$ den **nedre** funksjonen.

**Viktig:** Vi trekker alltid den nedre funksjonen fra den ovre, slik at integranden blir positiv.`,
    },
    {
      id: 'r2-2-7-example-1',
      type: 'example',
      title: 'Eksempel 1: Areal mellom parabel og linje',
      problem: `Finn arealet av omradet begrenset av $f(x) = 4 - x^2$ og $g(x) = 0$ (x-aksen) for $x \\in [-2, 2]$.`,
      solution: `**Steg 1: Identifiser ovre og nedre funksjon**

For $x \\in [-2, 2]$ er $f(x) = 4 - x^2 \\geq 0$, sa $f(x)$ er den ovre funksjonen og $g(x) = 0$ er den nedre.

**Steg 2: Sett opp integralet**

$$A = \\int_{-2}^{2} \\left( (4 - x^2) - 0 \\right) \\, dx = \\int_{-2}^{2} (4 - x^2) \\, dx$$

**Steg 3: Beregn integralet**

$$A = \\left[ 4x - \\frac{x^3}{3} \\right]_{-2}^{2}$$

$$= \\left( 4 \\cdot 2 - \\frac{2^3}{3} \\right) - \\left( 4 \\cdot (-2) - \\frac{(-2)^3}{3} \\right)$$

$$= \\left( 8 - \\frac{8}{3} \\right) - \\left( -8 + \\frac{8}{3} \\right)$$

$$= 8 - \\frac{8}{3} + 8 - \\frac{8}{3} = 16 - \\frac{16}{3} = \\frac{48 - 16}{3} = \\frac{32}{3}$$

**Svar:** Arealet er $\\frac{32}{3}$ areal enheter.`,
    },
    {
      id: 'r2-2-7-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-2-7-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: `Finn arealet av omradet begrenset av $f(x) = x^2$ og $g(x) = 0$ (x-aksen) for $x \\in [0, 3]$.`,
        solution: `$A = \\int_0^3 x^2 \\, dx = \\left[ \\frac{x^3}{3} \\right]_0^3 = \\frac{27}{3} - 0 = 9$`,
        hints: [
          'Her er $f(x) = x^2$ den ovre funksjonen og $g(x) = 0$ den nedre.',
          'Integrer $x^2$ fra 0 til 3.',
        ],
      },
    },
    {
      id: 'r2-2-7-def-2',
      type: 'definition',
      title: 'Finne skjaeringspunkter',
      content: `For å finne **skjaeringspunktene** mellom to kurver $f(x)$ og $g(x)$, loser vi ligningen:

$$f(x) = g(x)$$

Løsningene gir $x$-koordinatene til skjaeringspunktene. Disse brukes som **integrasjonsgrenser** nar vi beregner arealet mellom kurvene.`,
    },
    {
      id: 'r2-2-7-example-2',
      type: 'example',
      title: 'Eksempel 2: Finn skjaeringspunkter og beregn areal',
      problem: `Finn arealet av omradet begrenset av $f(x) = x + 2$ og $g(x) = x^2$.`,
      solution: `**Steg 1: Finn skjaeringspunktene**

Setter $f(x) = g(x)$:
$$x + 2 = x^2$$
$$x^2 - x - 2 = 0$$
$$(x - 2)(x + 1) = 0$$
$$x = 2 \\quad \\text{eller} \\quad x = -1$$

**Steg 2: Avgjor hvilken funksjon som er overst**

For $x = 0$ (et punkt mellom $-1$ og $2$):
- $f(0) = 0 + 2 = 2$
- $g(0) = 0^2 = 0$

Siden $f(0) > g(0)$, er $f(x) = x + 2$ den ovre funksjonen i intervallet $[-1, 2]$.

**Steg 3: Sett opp og beregn integralet**

$$A = \\int_{-1}^{2} \\left( (x + 2) - x^2 \\right) \\, dx = \\int_{-1}^{2} (x + 2 - x^2) \\, dx$$

$$= \\left[ \\frac{x^2}{2} + 2x - \\frac{x^3}{3} \\right]_{-1}^{2}$$

For $x = 2$:
$$\\frac{4}{2} + 4 - \\frac{8}{3} = 2 + 4 - \\frac{8}{3} = 6 - \\frac{8}{3} = \\frac{18 - 8}{3} = \\frac{10}{3}$$

For $x = -1$:
$$\\frac{1}{2} - 2 + \\frac{1}{3} = \\frac{3 + 2}{6} - 2 = \\frac{5}{6} - 2 = -\\frac{7}{6}$$

$$A = \\frac{10}{3} - \\left( -\\frac{7}{6} \\right) = \\frac{10}{3} + \\frac{7}{6} = \\frac{20}{6} + \\frac{7}{6} = \\frac{27}{6} = \\frac{9}{2}$$

**Svar:** Arealet er $\\frac{9}{2}$ arealenheter.`,
    },
    {
      id: 'r2-2-7-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-2-7-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn arealet av omradet begrenset av $f(x) = 6 - x$ og $g(x) = x^2$.`,
        solution: `Skjaeringspunkter: $6 - x = x^2 \\Rightarrow x^2 + x - 6 = 0 \\Rightarrow (x+3)(x-2) = 0 \\Rightarrow x = -3$ eller $x = 2$.

$f(x)$ er overst i $[-3, 2]$.

$A = \\int_{-3}^{2} (6 - x - x^2) \\, dx = \\left[ 6x - \\frac{x^2}{2} - \\frac{x^3}{3} \\right]_{-3}^{2} = \\frac{125}{6}$`,
        hints: [
          'Los $6 - x = x^2$ for å finne skjaeringspunktene.',
          'Sjekk hvilken funksjon som er størst for en $x$-verdi mellom skjaeringspunktene.',
        ],
      },
    },
    {
      id: 'r2-2-7-theorem-1',
      type: 'theorem',
      title: 'Nar kurvene krysser hverandre',
      content: `Dersom kurvene $f(x)$ og $g(x)$ **krysser hverandre** i intervallet $[a, b]$, ma vi dele opp integralet.

La $c$ være et skjaeringspunkt der $a < c < b$.

- Hvis $f(x) \\geq g(x)$ på $[a, c]$ og $g(x) \\geq f(x)$ på $[c, b]$:

$$A = \\int_a^c (f(x) - g(x)) \\, dx + \\int_c^b (g(x) - f(x)) \\, dx$$

**Alternativt** kan vi bruke absoluttverdi:

$$A = \\int_a^b |f(x) - g(x)| \\, dx$$`,
    },
    {
      id: 'r2-2-7-example-3',
      type: 'example',
      title: 'Eksempel 3: Kurver som krysser hverandre',
      problem: `Finn arealet mellom $f(x) = x^3$ og $g(x) = x$ for $x \\in [-1, 1]$.`,
      solution: `**Steg 1: Finn skjaeringspunktene**

$$x^3 = x$$
$$x^3 - x = 0$$
$$x(x^2 - 1) = 0$$
$$x(x-1)(x+1) = 0$$
$$x = -1, \\quad x = 0, \\quad x = 1$$

**Steg 2: Avgjor hvilken funksjon som er overst i hvert delintervall**

For $x = -0.5$ (mellom $-1$ og $0$):
- $f(-0.5) = (-0.5)^3 = -0.125$
- $g(-0.5) = -0.5$

Siden $-0.125 > -0.5$, er $f(x) = x^3$ overst på $[-1, 0]$.

For $x = 0.5$ (mellom $0$ og $1$):
- $f(0.5) = 0.125$
- $g(0.5) = 0.5$

Siden $0.5 > 0.125$, er $g(x) = x$ overst på $[0, 1]$.

**Steg 3: Del opp integralet**

$$A = \\int_{-1}^{0} (x^3 - x) \\, dx + \\int_{0}^{1} (x - x^3) \\, dx$$

**Forste integral:**
$$\\int_{-1}^{0} (x^3 - x) \\, dx = \\left[ \\frac{x^4}{4} - \\frac{x^2}{2} \\right]_{-1}^{0} = 0 - \\left( \\frac{1}{4} - \\frac{1}{2} \\right) = 0 - \\left( -\\frac{1}{4} \\right) = \\frac{1}{4}$$

**Andre integral:**
$$\\int_{0}^{1} (x - x^3) \\, dx = \\left[ \\frac{x^2}{2} - \\frac{x^4}{4} \\right]_{0}^{1} = \\left( \\frac{1}{2} - \\frac{1}{4} \\right) - 0 = \\frac{1}{4}$$

**Totalt areal:**
$$A = \\frac{1}{4} + \\frac{1}{4} = \\frac{1}{2}$$

**Svar:** Arealet er $\\frac{1}{2}$ arealenheter.`,
    },
    {
      id: 'r2-2-7-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-2-7-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn arealet mellom $f(x) = x^2$ og $g(x) = 2x$ for $x \\in [0, 3]$.`,
        solution: `Skjaeringspunkter i $[0, 3]$: $x^2 = 2x \\Rightarrow x(x-2) = 0 \\Rightarrow x = 0$ eller $x = 2$.

Pa $[0, 2]$ er $g(x) = 2x$ overst. Pa $[2, 3]$ er $f(x) = x^2$ overst.

$A = \\int_0^2 (2x - x^2) \\, dx + \\int_2^3 (x^2 - 2x) \\, dx$

$= \\left[ x^2 - \\frac{x^3}{3} \\right]_0^2 + \\left[ \\frac{x^3}{3} - x^2 \\right]_2^3$

$= \\left( 4 - \\frac{8}{3} \\right) + \\left( 9 - 9 - \\frac{8}{3} + 4 \\right) = \\frac{4}{3} + \\frac{4}{3} = \\frac{8}{3}$`,
        hints: [
          'Finn forst hvor $x^2 = 2x$ i intervallet $[0, 3]$.',
          'Kurvene krysser hverandre, sa du ma dele opp integralet.',
        ],
      },
    },
    {
      id: 'r2-2-7-tip-1',
      type: 'tip',
      content: `**Praktisk tips for a avgjore hvilken funksjon som er overst:**

1. Velg en $x$-verdi mellom skjaeringspunktene
2. Beregn $f(x)$ og $g(x)$ for denne verdien
3. Den funksjonen med størst verdi er den ovre

Alternativt kan du tegne en skisse av grafene.`,
    },
    {
      id: 'r2-2-7-example-4',
      type: 'example',
      title: 'Eksempel 4: Areal mellom to parabler',
      problem: `Finn arealet av omradet begrenset av $f(x) = 4 - x^2$ og $g(x) = x^2 - 2$.`,
      solution: `**Steg 1: Finn skjaeringspunktene**

$$4 - x^2 = x^2 - 2$$
$$6 = 2x^2$$
$$x^2 = 3$$
$$x = \\pm\\sqrt{3}$$

**Steg 2: Avgjor hvilken funksjon som er overst**

For $x = 0$:
- $f(0) = 4$
- $g(0) = -2$

Siden $4 > -2$, er $f(x) = 4 - x^2$ den ovre funksjonen.

**Steg 3: Beregn integralet**

$$A = \\int_{-\\sqrt{3}}^{\\sqrt{3}} \\left( (4 - x^2) - (x^2 - 2) \\right) \\, dx$$

$$= \\int_{-\\sqrt{3}}^{\\sqrt{3}} (6 - 2x^2) \\, dx$$

Siden integranden er en **partall-funksjon** (symmetrisk om $y$-aksen), kan vi forenkle:

$$A = 2 \\int_{0}^{\\sqrt{3}} (6 - 2x^2) \\, dx$$

$$= 2 \\left[ 6x - \\frac{2x^3}{3} \\right]_{0}^{\\sqrt{3}}$$

$$= 2 \\left( 6\\sqrt{3} - \\frac{2(\\sqrt{3})^3}{3} \\right)$$

$$= 2 \\left( 6\\sqrt{3} - \\frac{2 \\cdot 3\\sqrt{3}}{3} \\right)$$

$$= 2 \\left( 6\\sqrt{3} - 2\\sqrt{3} \\right)$$

$$= 2 \\cdot 4\\sqrt{3} = 8\\sqrt{3}$$

**Svar:** Arealet er $8\\sqrt{3}$ arealenheter.`,
    },
    {
      id: 'r2-2-7-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-2-7-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn arealet av omradet begrenset av $f(x) = 9 - x^2$ og $g(x) = x^2 + 1$.`,
        solution: `Skjaeringspunkter: $9 - x^2 = x^2 + 1 \\Rightarrow 8 = 2x^2 \\Rightarrow x = \\pm 2$.

$f(x)$ er overst.

$A = \\int_{-2}^{2} ((9-x^2) - (x^2+1)) \\, dx = \\int_{-2}^{2} (8 - 2x^2) \\, dx$

$= 2 \\int_0^2 (8 - 2x^2) \\, dx = 2 \\left[ 8x - \\frac{2x^3}{3} \\right]_0^2$

$= 2 \\left( 16 - \\frac{16}{3} \\right) = 2 \\cdot \\frac{32}{3} = \\frac{64}{3}$`,
        hints: [
          'Sett $9 - x^2 = x^2 + 1$ og los for $x$.',
          'Integranden er symmetrisk, sa du kan bruke egenskapen for partallsfunksjoner.',
        ],
      },
    },
    {
      id: 'r2-2-7-note-1',
      type: 'note',
      content: `**Symmetri kan forenkle beregninger!**

Hvis integranden $f(x) - g(x)$ er en **partallsfunksjon** (symmetrisk om $y$-aksen), og integrasjonsgrensene er $[-a, a]$, kan vi bruke:

$$\\int_{-a}^{a} h(x) \\, dx = 2 \\int_{0}^{a} h(x) \\, dx$$

Dette halverer arbeidet med beregningene.`,
    },
    {
      id: 'r2-2-7-example-5',
      type: 'example',
      title: 'Eksempel 5: Praktisk anvendelse',
      problem: `En bedrift har inntektsfunksjon $I(x) = 100x - x^2$ og kostnadsfunksjon $K(x) = 20x + 100$ (i tusen kroner), der $x$ er antall enheter produsert (i hundre).

Finn den totale fortjenesten nar produksjonen gar fra 10 til 60 enheter (hundre).`,
      solution: `**Steg 1: Finn skjaeringspunktene (nullpunkt for fortjeneste)**

Fortjenesten er positiv nar $I(x) > K(x)$:
$$100x - x^2 > 20x + 100$$
$$-x^2 + 80x - 100 > 0$$
$$x^2 - 80x + 100 < 0$$

Ved abc-formelen: $x = \\frac{80 \\pm \\sqrt{6400 - 400}}{2} = \\frac{80 \\pm \\sqrt{6000}}{2} \\approx \\frac{80 \\pm 77.5}{2}$

$x \\approx 1.3$ eller $x \\approx 78.7$

Sa for $x \\in [10, 60]$ er $I(x) > K(x)$ (inntekt storre enn kostnad).

**Steg 2: Beregn total fortjeneste som areal mellom kurvene**

$$\\text{Total fortjeneste} = \\int_{10}^{60} (I(x) - K(x)) \\, dx$$

$$= \\int_{10}^{60} ((100x - x^2) - (20x + 100)) \\, dx$$

$$= \\int_{10}^{60} (80x - x^2 - 100) \\, dx$$

$$= \\left[ 40x^2 - \\frac{x^3}{3} - 100x \\right]_{10}^{60}$$

For $x = 60$:
$$40 \\cdot 3600 - \\frac{216000}{3} - 6000 = 144000 - 72000 - 6000 = 66000$$

For $x = 10$:
$$40 \\cdot 100 - \\frac{1000}{3} - 1000 = 4000 - \\frac{1000}{3} - 1000 = 3000 - \\frac{1000}{3} = \\frac{8000}{3}$$

$$\\text{Total fortjeneste} = 66000 - \\frac{8000}{3} = \\frac{198000 - 8000}{3} = \\frac{190000}{3} \\approx 63333$$

**Svar:** Den totale fortjenesten er ca. 63 333 tusen kroner, eller ca. 63,3 millioner kroner.`,
    },
    {
      id: 'r2-2-7-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-2-7-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En partikkel beveger seg langs en rett linje. Hastighetene til to partikler er gitt ved $v_1(t) = 6t$ og $v_2(t) = t^2 + 2$ (i m/s).

Finn den totale forskjellen i tilbakelagt strekning mellom partiklene fra $t = 0$ til $t = 4$ sekunder.`,
        solution: `Skjaeringspunkt: $6t = t^2 + 2 \\Rightarrow t^2 - 6t + 2 = 0 \\Rightarrow t = 3 \\pm \\sqrt{7}$.

$t = 3 - \\sqrt{7} \\approx 0.35$ og $t = 3 + \\sqrt{7} \\approx 5.65$.

Pa $[0, 3-\\sqrt{7}]$ er $v_2 > v_1$. Pa $[3-\\sqrt{7}, 4]$ er $v_1 > v_2$.

$A = \\int_0^{3-\\sqrt{7}} (t^2+2-6t) \\, dt + \\int_{3-\\sqrt{7}}^4 (6t-t^2-2) \\, dt$

Etter beregning: $A \\approx 18.67$ meter.`,
        hints: [
          'Forskjell i tilbakelagt strekning er arealet mellom hastighetskurvene.',
          'Finn forst hvor kurvene krysser hverandre i intervallet $[0, 4]$.',
        ],
      },
    },
    {
      id: 'r2-2-7-summary',
      type: 'text',
      content: `## Oppsummering

**Areal mellom to kurver:**
$$A = \\int_a^b |f(x) - g(x)| \\, dx$$

**Fremgangsmate:**
1. **Finn skjaeringspunktene** ved å løse $f(x) = g(x)$
2. **Avgjor hvilken funksjon som er overst** i hvert delintervall
3. **Sett opp integralet** med ovre funksjon minus nedre funksjon
4. **Del opp integralet** hvis kurvene krysser hverandre
5. **Beregn integralet**

**Husk:**
- Alltid trekk nedre funksjon fra ovre for a fa positiv integrand
- Nar kurvene krysser, ma integralet deles opp
- Symmetri kan forenkle beregninger betydelig`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_3_1: TextbookChapter = {
  id: 'r2-3-1',
  courseId: 'r2',
  chapterNumber: '3.1',
  title: 'Variabelskifte (substitusjon)',
  description: 'Integrasjon ved hjelp av variabelskifte - den reverserte kjerneregelen.',
  estimatedMinutes: 75,
  competenceGoals: [
    'bruke substitusjon for aa finne integraler',
    'velge hensiktsmessig substitusjon',
    'haandtere grenseendring ved bestemte integraler',
    'anvende substitusjon paa ulike funksjonstyper',
  ],
  content: [
    // ============================================================================
    // INTRODUKSJON
    // ============================================================================
    {
      id: 'r2-3-1-text-1',
      type: 'text',
      content: `## Variabelskifte - den reverserte kjerneregelen

Naar vi deriverer sammensatte funksjoner, bruker vi kjerneregelen:
$$\\frac{d}{dx}[F(g(x))] = F'(g(x)) \\cdot g'(x)$$

Variabelskifte (ogsaa kalt **substitusjon**) er den omvendte prosessen. Vi bruker det naar integranden inneholder en funksjon og dens deriverte.

**Ideen:** Hvis vi ser $\\int f(g(x)) \\cdot g'(x) \\, dx$, kan vi sette $u = g(x)$ og forenkle integralet.

Dette er en av de viktigste integrasjonsteknikene, og du vil bruke den igjen og igjen i R2.`,
    },

    // ============================================================================
    // DEL 1: PRINSIPPET BAK SUBSTITUSJON
    // ============================================================================
    {
      id: 'r2-3-1-def-1',
      type: 'definition',
      title: 'Substitusjon (variabelskifte)',
      content: `La $u = g(x)$ være en deriverbar funksjon. Da er $du = g'(x) \\, dx$.

**Substitusjonsregelen:**
$$\\int f(g(x)) \\cdot g'(x) \\, dx = \\int f(u) \\, du$$

Etter integrering setter vi tilbake $u = g(x)$.

**Merk:** Notasjonen $du = g'(x) \\, dx$ betyr at vi kan "bytte ut" $g'(x) \\, dx$ med $du$.`,
    },
    {
      id: 'r2-3-1-ex-1',
      type: 'example',
      title: 'Eksempel 1: Grunnleggende substitusjon',
      problem: 'Finn $\\int 2x \\cdot e^{x^2} \\, dx$.',
      solution: `**Steg 1:** Vi ser at $2x$ er den deriverte av $x^2$.

**Steg 2:** Sett $u = x^2$, da er $\\frac{du}{dx} = 2x$, altsaa $du = 2x \\, dx$.

**Steg 3:** Substitusjonen gir:
$$\\int 2x \\cdot e^{x^2} \\, dx = \\int e^u \\, du = e^u + C$$

**Steg 4:** Sett tilbake $u = x^2$:
$$\\int 2x \\cdot e^{x^2} \\, dx = e^{x^2} + C$$

**Kontroll:** Vi deriverer svaret: $\\frac{d}{dx}[e^{x^2}] = e^{x^2} \\cdot 2x = 2x \\cdot e^{x^2}$ \\checkmark`,
    },
    {
      id: 'r2-3-1-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-1',
        number: '3.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\int 3x^2 \\cdot e^{x^3} \\, dx$ ved substitusjon.',
        solution: 'Sett $u = x^3$, $du = 3x^2 \\, dx$. Da faar vi $\\int e^u \\, du = e^u + C = e^{x^3} + C$.',
        hints: ['Hva er den deriverte av $x^3$?', 'Sett $u = x^3$.'],
      },
    },
    {
      id: 'r2-3-1-text-2',
      type: 'text',
      content: `### Hvordan velge substitusjon?

**Tommelfingerregel:** Let etter en funksjon $g(x)$ slik at den deriverte $g'(x)$ (eller en konstant multipel av den) ogsaa finnes i integranden.

Typiske kandidater for $u$:
- Uttrykket inni en parentes: $(3x + 2)^5$ $\\rightarrow$ $u = 3x + 2$
- Eksponenten: $e^{2x}$ $\\rightarrow$ $u = 2x$
- Uttrykket under rottegnet: $\\sqrt{x^2 + 1}$ $\\rightarrow$ $u = x^2 + 1$
- Argumentet til trigonometriske funksjoner: $\\sin(3x)$ $\\rightarrow$ $u = 3x$
- Nevneren i en brok (hvis telleren ligner paa den deriverte)`,
    },
    {
      id: 'r2-3-1-tip-1',
      type: 'tip',
      content: `**Sjekkliste for substitusjon:**
1. Identifiser den "indre funksjonen" $g(x)$
2. Sjekk om $g'(x)$ (eller en konstant multipel) finnes i integranden
3. Sett $u = g(x)$ og finn $du$
4. Erstatt alle $x$-uttrykk med $u$-uttrykk
5. Integrer, og sett tilbake`,
    },

    // ============================================================================
    // DEL 2: ENKEL SUBSTITUSJON MED LINEAERE UTTRYKK
    // ============================================================================
    {
      id: 'r2-3-1-theorem-1',
      type: 'theorem',
      title: 'Substitusjon med lineære uttrykk',
      content: `For lineære uttrykk $u = ax + b$ faar vi alltid $du = a \\, dx$, altsaa $dx = \\frac{1}{a} du$.

**Viktige formler:**
$$\\int f(ax + b) \\, dx = \\frac{1}{a} F(ax + b) + C$$

der $F$ er en antiderivert til $f$.

**Eksempler:**
- $\\int e^{3x} \\, dx = \\frac{1}{3} e^{3x} + C$
- $\\int \\cos(2x) \\, dx = \\frac{1}{2} \\sin(2x) + C$
- $\\int (5x + 1)^4 \\, dx = \\frac{1}{5} \\cdot \\frac{(5x + 1)^5}{5} + C = \\frac{(5x + 1)^5}{25} + C$`,
    },
    {
      id: 'r2-3-1-ex-2',
      type: 'example',
      title: 'Eksempel 2: Lineaer substitusjon',
      problem: 'Finn $\\int (2x - 5)^7 \\, dx$.',
      solution: `**Steg 1:** Sett $u = 2x - 5$, da er $du = 2 \\, dx$, altsaa $dx = \\frac{1}{2} du$.

**Steg 2:** Substitusjonen gir:
$$\\int (2x - 5)^7 \\, dx = \\int u^7 \\cdot \\frac{1}{2} \\, du = \\frac{1}{2} \\int u^7 \\, du$$

**Steg 3:** Integrer:
$$= \\frac{1}{2} \\cdot \\frac{u^8}{8} + C = \\frac{u^8}{16} + C$$

**Steg 4:** Sett tilbake:
$$= \\frac{(2x - 5)^8}{16} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-2',
        number: '3.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\int (3x + 4)^5 \\, dx$.',
        solution: 'Sett $u = 3x + 4$, $du = 3 \\, dx$. Da faar vi $\\frac{1}{3} \\int u^5 \\, du = \\frac{1}{3} \\cdot \\frac{u^6}{6} + C = \\frac{(3x + 4)^6}{18} + C$.',
        hints: ['Sett $u = 3x + 4$.', 'Husk aa dele paa 3 naar du bytter $dx$ med $du$.'],
      },
    },
    {
      id: 'r2-3-1-ex-3',
      type: 'example',
      title: 'Eksempel 3: Eksponentialfunksjon med lineært argument',
      problem: 'Finn $\\int e^{-4x} \\, dx$.',
      solution: `**Steg 1:** Sett $u = -4x$, da er $du = -4 \\, dx$, altsaa $dx = -\\frac{1}{4} du$.

**Steg 2:** Substitusjonen gir:
$$\\int e^{-4x} \\, dx = \\int e^u \\cdot \\left(-\\frac{1}{4}\\right) du = -\\frac{1}{4} e^u + C$$

**Steg 3:** Sett tilbake:
$$= -\\frac{1}{4} e^{-4x} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-3',
        number: '3.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\int e^{5x+2} \\, dx$.',
        solution: 'Sett $u = 5x + 2$, $du = 5 \\, dx$. Da faar vi $\\frac{1}{5} \\int e^u \\, du = \\frac{1}{5} e^u + C = \\frac{1}{5} e^{5x+2} + C$.',
        hints: ['Sett $u = 5x + 2$.'],
      },
    },
    {
      id: 'r2-3-1-ex-4',
      type: 'example',
      title: 'Eksempel 4: Trigonometrisk funksjon med lineært argument',
      problem: 'Finn $\\int \\sin(3x + 1) \\, dx$.',
      solution: `**Steg 1:** Sett $u = 3x + 1$, da er $du = 3 \\, dx$, altsaa $dx = \\frac{1}{3} du$.

**Steg 2:** Substitusjonen gir:
$$\\int \\sin(3x + 1) \\, dx = \\int \\sin(u) \\cdot \\frac{1}{3} \\, du = \\frac{1}{3} \\int \\sin(u) \\, du$$

**Steg 3:** Integrer:
$$= \\frac{1}{3} \\cdot (-\\cos u) + C = -\\frac{1}{3} \\cos(u) + C$$

**Steg 4:** Sett tilbake:
$$= -\\frac{1}{3} \\cos(3x + 1) + C$$`,
    },
    {
      id: 'r2-3-1-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-4',
        number: '3.4',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\int \\cos(2x - 3) \\, dx$.',
        solution: 'Sett $u = 2x - 3$, $du = 2 \\, dx$. Da faar vi $\\frac{1}{2} \\int \\cos(u) \\, du = \\frac{1}{2} \\sin(u) + C = \\frac{1}{2} \\sin(2x - 3) + C$.',
        hints: ['Sett $u = 2x - 3$.'],
      },
    },
    {
      id: 'r2-3-1-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-5',
        number: '3.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int \\frac{1}{4x - 7} \\, dx$.',
        solution: 'Sett $u = 4x - 7$, $du = 4 \\, dx$. Da faar vi $\\frac{1}{4} \\int \\frac{1}{u} \\, du = \\frac{1}{4} \\ln|u| + C = \\frac{1}{4} \\ln|4x - 7| + C$.',
        hints: ['Sett $u = 4x - 7$.', 'Husk at $\\int \\frac{1}{u} \\, du = \\ln|u| + C$.'],
      },
    },

    // ============================================================================
    // DEL 3: SUBSTITUSJON MED POTENSER OG ROETTER
    // ============================================================================
    {
      id: 'r2-3-1-text-3',
      type: 'text',
      content: `## Substitusjon med potenser og roetter

Naar integranden inneholder uttrykk som $(g(x))^n$ eller $\\sqrt{g(x)}$ sammen med $g'(x)$, er substitusjon $u = g(x)$ ofte veien aa gaa.

**Viktig:** Nar vi har en potens $(g(x))^n$, setter vi $u = g(x)$ (ikke hele potensen).`,
    },
    {
      id: 'r2-3-1-ex-5',
      type: 'example',
      title: 'Eksempel 5: Potens av sammensatt funksjon',
      problem: 'Finn $\\int x \\cdot (x^2 + 1)^4 \\, dx$.',
      solution: `**Steg 1:** Sett $u = x^2 + 1$, da er $\\frac{du}{dx} = 2x$, altsaa $du = 2x \\, dx$.

Vi har $x \\, dx$ i integranden, sa $x \\, dx = \\frac{1}{2} du$.

**Steg 2:** Substitusjonen gir:
$$\\int x \\cdot (x^2 + 1)^4 \\, dx = \\int u^4 \\cdot \\frac{1}{2} \\, du = \\frac{1}{2} \\int u^4 \\, du$$

**Steg 3:** Integrer:
$$= \\frac{1}{2} \\cdot \\frac{u^5}{5} + C = \\frac{u^5}{10} + C$$

**Steg 4:** Sett tilbake:
$$= \\frac{(x^2 + 1)^5}{10} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-6',
        number: '3.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int x^2 \\cdot (x^3 - 2)^6 \\, dx$.',
        solution: 'Sett $u = x^3 - 2$, $du = 3x^2 \\, dx$. Da faar vi $\\frac{1}{3} \\int u^6 \\, du = \\frac{1}{3} \\cdot \\frac{u^7}{7} + C = \\frac{(x^3 - 2)^7}{21} + C$.',
        hints: ['Hva er den deriverte av $x^3 - 2$?', 'Sett $u = x^3 - 2$.'],
      },
    },
    {
      id: 'r2-3-1-ex-6',
      type: 'example',
      title: 'Eksempel 6: Integral med kvadratrot',
      problem: 'Finn $\\int \\frac{x}{\\sqrt{x^2 + 4}} \\, dx$.',
      solution: `**Steg 1:** Sett $u = x^2 + 4$, da er $du = 2x \\, dx$, altsaa $x \\, dx = \\frac{1}{2} du$.

**Steg 2:** Substitusjonen gir:
$$\\int \\frac{x}{\\sqrt{x^2 + 4}} \\, dx = \\int \\frac{1}{\\sqrt{u}} \\cdot \\frac{1}{2} \\, du = \\frac{1}{2} \\int u^{-1/2} \\, du$$

**Steg 3:** Integrer:
$$= \\frac{1}{2} \\cdot \\frac{u^{1/2}}{1/2} + C = u^{1/2} + C = \\sqrt{u} + C$$

**Steg 4:** Sett tilbake:
$$= \\sqrt{x^2 + 4} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-7',
        number: '3.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int \\frac{x^2}{\\sqrt{x^3 + 1}} \\, dx$.',
        solution: 'Sett $u = x^3 + 1$, $du = 3x^2 \\, dx$. Da faar vi $\\frac{1}{3} \\int u^{-1/2} \\, du = \\frac{1}{3} \\cdot 2u^{1/2} + C = \\frac{2}{3} \\sqrt{x^3 + 1} + C$.',
        hints: ['Sett $u = x^3 + 1$.', 'Skriv om $\\frac{1}{\\sqrt{u}}$ som $u^{-1/2}$.'],
      },
    },
    {
      id: 'r2-3-1-ex-7',
      type: 'example',
      title: 'Eksempel 7: Kubikkrot',
      problem: 'Finn $\\int x^2 \\cdot \\sqrt[3]{x^3 + 5} \\, dx$.',
      solution: `**Steg 1:** Sett $u = x^3 + 5$, da er $du = 3x^2 \\, dx$, altsaa $x^2 \\, dx = \\frac{1}{3} du$.

**Steg 2:** Skriv om kubikkroten: $\\sqrt[3]{u} = u^{1/3}$.

**Steg 3:** Substitusjonen gir:
$$\\int x^2 \\cdot \\sqrt[3]{x^3 + 5} \\, dx = \\int u^{1/3} \\cdot \\frac{1}{3} \\, du = \\frac{1}{3} \\int u^{1/3} \\, du$$

**Steg 4:** Integrer:
$$= \\frac{1}{3} \\cdot \\frac{u^{4/3}}{4/3} + C = \\frac{1}{3} \\cdot \\frac{3}{4} u^{4/3} + C = \\frac{u^{4/3}}{4} + C$$

**Steg 5:** Sett tilbake:
$$= \\frac{(x^3 + 5)^{4/3}}{4} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-8',
        number: '3.8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int x \\cdot \\sqrt{x^2 - 3} \\, dx$.',
        solution: 'Sett $u = x^2 - 3$, $du = 2x \\, dx$. Da faar vi $\\frac{1}{2} \\int u^{1/2} \\, du = \\frac{1}{2} \\cdot \\frac{2}{3} u^{3/2} + C = \\frac{1}{3} (x^2 - 3)^{3/2} + C$.',
        hints: ['Sett $u = x^2 - 3$.', 'Husk at $\\int u^{1/2} \\, du = \\frac{2}{3} u^{3/2} + C$.'],
      },
    },

    // ============================================================================
    // DEL 4: SUBSTITUSJON MED TRIGONOMETRISKE FUNKSJONER
    // ============================================================================
    {
      id: 'r2-3-1-text-4',
      type: 'text',
      content: `## Substitusjon med trigonometriske funksjoner

Trigonometriske integraler krever ofte substitusjon. Husk at:
- Den deriverte av $\\sin x$ er $\\cos x$
- Den deriverte av $\\cos x$ er $-\\sin x$
- Den deriverte av $\\tan x$ er $\\frac{1}{\\cos^2 x}$

Naar vi ser produkter av sinus og cosinus, er det ofte lurt aa substituere med den ene av dem.`,
    },
    {
      id: 'r2-3-1-theorem-2',
      type: 'theorem',
      title: 'Nyttige trigonometriske integraler',
      content: `$$\\int \\sin(ax) \\, dx = -\\frac{1}{a} \\cos(ax) + C$$

$$\\int \\cos(ax) \\, dx = \\frac{1}{a} \\sin(ax) + C$$

$$\\int \\frac{1}{\\cos^2(ax)} \\, dx = \\frac{1}{a} \\tan(ax) + C$$

$$\\int \\tan(ax) \\, dx = -\\frac{1}{a} \\ln|\\cos(ax)| + C$$

$$\\int \\sin^n x \\cdot \\cos x \\, dx = \\frac{\\sin^{n+1} x}{n+1} + C$$

$$\\int \\cos^n x \\cdot \\sin x \\, dx = -\\frac{\\cos^{n+1} x}{n+1} + C$$`,
    },
    {
      id: 'r2-3-1-ex-8',
      type: 'example',
      title: 'Eksempel 8: Sinus og cosinus',
      problem: 'Finn $\\int \\sin^3 x \\cdot \\cos x \\, dx$.',
      solution: `**Steg 1:** Sett $u = \\sin x$, da er $du = \\cos x \\, dx$.

**Steg 2:** Substitusjonen gir:
$$\\int \\sin^3 x \\cdot \\cos x \\, dx = \\int u^3 \\, du$$

**Steg 3:** Integrer:
$$= \\frac{u^4}{4} + C$$

**Steg 4:** Sett tilbake:
$$= \\frac{\\sin^4 x}{4} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-9',
        number: '3.9',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int \\cos^4 x \\cdot \\sin x \\, dx$.',
        solution: 'Sett $u = \\cos x$, $du = -\\sin x \\, dx$. Da faar vi $-\\int u^4 \\, du = -\\frac{u^5}{5} + C = -\\frac{\\cos^5 x}{5} + C$.',
        hints: ['Sett $u = \\cos x$.', 'Husk at den deriverte av $\\cos x$ er $-\\sin x$.'],
      },
    },
    {
      id: 'r2-3-1-ex-9',
      type: 'example',
      title: 'Eksempel 9: Tangens',
      problem: 'Finn $\\int \\tan x \\, dx$.',
      solution: `**Steg 1:** Skriv om: $\\tan x = \\frac{\\sin x}{\\cos x}$.

**Steg 2:** Sett $u = \\cos x$, da er $du = -\\sin x \\, dx$, altsaa $\\sin x \\, dx = -du$.

**Steg 3:** Substitusjonen gir:
$$\\int \\tan x \\, dx = \\int \\frac{\\sin x}{\\cos x} \\, dx = \\int \\frac{-du}{u} = -\\ln|u| + C$$

**Steg 4:** Sett tilbake:
$$= -\\ln|\\cos x| + C = \\ln|\\sec x| + C$$

**Merk:** $\\sec x = \\frac{1}{\\cos x}$, sa $\\ln|\\sec x| = \\ln\\frac{1}{|\\cos x|} = -\\ln|\\cos x|$.`,
    },
    {
      id: 'r2-3-1-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-10',
        number: '3.10',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int \\frac{\\cos x}{\\sin^2 x} \\, dx$.',
        solution: 'Sett $u = \\sin x$, $du = \\cos x \\, dx$. Da faar vi $\\int \\frac{du}{u^2} = \\int u^{-2} \\, du = -u^{-1} + C = -\\frac{1}{\\sin x} + C = -\\csc x + C$.',
        hints: ['Sett $u = \\sin x$.', 'Da blir integralet $\\int \\frac{1}{u^2} \\, du$.'],
      },
    },
    {
      id: 'r2-3-1-ex-10',
      type: 'example',
      title: 'Eksempel 10: Cotangens',
      problem: 'Finn $\\int \\cot x \\, dx$.',
      solution: `**Steg 1:** Skriv om: $\\cot x = \\frac{\\cos x}{\\sin x}$.

**Steg 2:** Sett $u = \\sin x$, da er $du = \\cos x \\, dx$.

**Steg 3:** Substitusjonen gir:
$$\\int \\cot x \\, dx = \\int \\frac{\\cos x}{\\sin x} \\, dx = \\int \\frac{du}{u} = \\ln|u| + C$$

**Steg 4:** Sett tilbake:
$$= \\ln|\\sin x| + C$$`,
    },
    {
      id: 'r2-3-1-exercise-11',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-11',
        number: '3.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\tan^3 x \\cdot \\frac{1}{\\cos^2 x} \\, dx$.',
        solution: 'Sett $u = \\tan x$, $du = \\frac{1}{\\cos^2 x} \\, dx$. Da faar vi $\\int u^3 \\, du = \\frac{u^4}{4} + C = \\frac{\\tan^4 x}{4} + C$.',
        hints: ['Sett $u = \\tan x$.', 'Hva er den deriverte av $\\tan x$?'],
      },
    },

    // ============================================================================
    // DEL 5: SUBSTITUSJON MED EKSPONENTIALFUNKSJONER
    // ============================================================================
    {
      id: 'r2-3-1-text-5',
      type: 'text',
      content: `## Substitusjon med eksponentialfunksjoner

Eksponentialfunksjoner har den spesielle egenskapen at de er sin egen deriverte (med en konstant faktor). Dette gjor dem ofte enkle aa haandtere med substitusjon.

**Viktige sammenhenger:**
- $(e^x)' = e^x$
- $(e^{ax})' = a \\cdot e^{ax}$
- $(a^x)' = a^x \\cdot \\ln a$`,
    },
    {
      id: 'r2-3-1-ex-11',
      type: 'example',
      title: 'Eksempel 11: Eksponentialfunksjon i nevner',
      problem: 'Finn $\\int \\frac{e^x}{1 + e^x} \\, dx$.',
      solution: `**Steg 1:** Sett $u = 1 + e^x$, da er $du = e^x \\, dx$.

**Steg 2:** Substitusjonen gir:
$$\\int \\frac{e^x}{1 + e^x} \\, dx = \\int \\frac{du}{u} = \\ln|u| + C$$

**Steg 3:** Sett tilbake:
$$= \\ln|1 + e^x| + C = \\ln(1 + e^x) + C$$

(Vi kan droppe absoluttverdi siden $1 + e^x > 0$ alltid.)`,
    },
    {
      id: 'r2-3-1-exercise-12',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-12',
        number: '3.12',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int \\frac{e^{2x}}{1 + e^{2x}} \\, dx$.',
        solution: 'Sett $u = 1 + e^{2x}$, $du = 2e^{2x} \\, dx$. Da faar vi $\\frac{1}{2} \\int \\frac{du}{u} = \\frac{1}{2} \\ln|u| + C = \\frac{1}{2} \\ln(1 + e^{2x}) + C$.',
        hints: ['Sett $u = 1 + e^{2x}$.', 'Hva er den deriverte av $e^{2x}$?'],
      },
    },
    {
      id: 'r2-3-1-ex-12',
      type: 'example',
      title: 'Eksempel 12: Sammensatt eksponentialfunksjon',
      problem: 'Finn $\\int x \\cdot e^{x^2} \\, dx$.',
      solution: `**Steg 1:** Sett $u = x^2$, da er $du = 2x \\, dx$, altsaa $x \\, dx = \\frac{1}{2} du$.

**Steg 2:** Substitusjonen gir:
$$\\int x \\cdot e^{x^2} \\, dx = \\int e^u \\cdot \\frac{1}{2} \\, du = \\frac{1}{2} e^u + C$$

**Steg 3:** Sett tilbake:
$$= \\frac{1}{2} e^{x^2} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-13',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-13',
        number: '3.13',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int x^3 \\cdot e^{x^4} \\, dx$.',
        solution: 'Sett $u = x^4$, $du = 4x^3 \\, dx$. Da faar vi $\\frac{1}{4} \\int e^u \\, du = \\frac{1}{4} e^u + C = \\frac{1}{4} e^{x^4} + C$.',
        hints: ['Sett $u = x^4$.', 'Hva er den deriverte av $x^4$?'],
      },
    },
    {
      id: 'r2-3-1-ex-13',
      type: 'example',
      title: 'Eksempel 13: Eksponential med trigonometrisk argument',
      problem: 'Finn $\\int e^{\\sin x} \\cdot \\cos x \\, dx$.',
      solution: `**Steg 1:** Sett $u = \\sin x$, da er $du = \\cos x \\, dx$.

**Steg 2:** Substitusjonen gir:
$$\\int e^{\\sin x} \\cdot \\cos x \\, dx = \\int e^u \\, du = e^u + C$$

**Steg 3:** Sett tilbake:
$$= e^{\\sin x} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-14',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-14',
        number: '3.14',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int e^{\\cos x} \\cdot \\sin x \\, dx$.',
        solution: 'Sett $u = \\cos x$, $du = -\\sin x \\, dx$. Da faar vi $-\\int e^u \\, du = -e^u + C = -e^{\\cos x} + C$.',
        hints: ['Sett $u = \\cos x$.', 'Husk minustegnet fra den deriverte av cosinus.'],
      },
    },

    // ============================================================================
    // DEL 6: SUBSTITUSJON MED LOGARITMER
    // ============================================================================
    {
      id: 'r2-3-1-text-6',
      type: 'text',
      content: `## Substitusjon med logaritmer

Logaritmiske funksjoner har derivert $\\frac{1}{x}$, noe som gjor dem egnet for substitusjon naar vi ser $\\frac{1}{x}$ eller $\\frac{f'(x)}{f(x)}$ i integranden.

**Viktig sammenheng:**
$$\\int \\frac{f'(x)}{f(x)} \\, dx = \\ln|f(x)| + C$$`,
    },
    {
      id: 'r2-3-1-ex-14',
      type: 'example',
      title: 'Eksempel 14: Integral med ln x',
      problem: 'Finn $\\int \\frac{\\ln x}{x} \\, dx$.',
      solution: `**Steg 1:** Sett $u = \\ln x$, da er $du = \\frac{1}{x} \\, dx$.

**Steg 2:** Substitusjonen gir:
$$\\int \\frac{\\ln x}{x} \\, dx = \\int u \\, du = \\frac{u^2}{2} + C$$

**Steg 3:** Sett tilbake:
$$= \\frac{(\\ln x)^2}{2} + C$$`,
    },
    {
      id: 'r2-3-1-exercise-15',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-15',
        number: '3.15',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn $\\int \\frac{(\\ln x)^3}{x} \\, dx$.',
        solution: 'Sett $u = \\ln x$, $du = \\frac{1}{x} \\, dx$. Da faar vi $\\int u^3 \\, du = \\frac{u^4}{4} + C = \\frac{(\\ln x)^4}{4} + C$.',
        hints: ['Sett $u = \\ln x$.', 'Hva er den deriverte av $\\ln x$?'],
      },
    },
    {
      id: 'r2-3-1-ex-15',
      type: 'example',
      title: 'Eksempel 15: Dobbel logaritme',
      problem: 'Finn $\\int \\frac{1}{x \\ln x} \\, dx$.',
      solution: `**Steg 1:** Sett $u = \\ln x$, da er $du = \\frac{1}{x} \\, dx$.

**Steg 2:** Substitusjonen gir:
$$\\int \\frac{1}{x \\ln x} \\, dx = \\int \\frac{1}{x} \\cdot \\frac{1}{\\ln x} \\, dx = \\int \\frac{du}{u} = \\ln|u| + C$$

**Steg 3:** Sett tilbake:
$$= \\ln|\\ln x| + C$$`,
    },
    {
      id: 'r2-3-1-exercise-16',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-16',
        number: '3.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\frac{\\ln(\\ln x)}{x \\ln x} \\, dx$.',
        solution: 'Sett $u = \\ln(\\ln x)$, $du = \\frac{1}{\\ln x} \\cdot \\frac{1}{x} \\, dx = \\frac{1}{x \\ln x} \\, dx$. Da faar vi $\\int u \\, du = \\frac{u^2}{2} + C = \\frac{(\\ln(\\ln x))^2}{2} + C$.',
        hints: ['Sett $u = \\ln(\\ln x)$.', 'Bruk kjerneregelen for aa finne den deriverte.'],
      },
    },

    // ============================================================================
    // DEL 7: BESTEMT INTEGRAL MED SUBSTITUSJON
    // ============================================================================
    {
      id: 'r2-3-1-text-7',
      type: 'text',
      content: `## Bestemt integral med substitusjon

Ved bestemte integraler har vi to muligheter:
1. Finn den ubestemte integralen, sett tilbake, og bruk de opprinnelige grensene
2. **Bytt grensene** til $u$-verdier og regn direkte

Metode 2 er ofte mer effektiv og ryddigere!`,
    },
    {
      id: 'r2-3-1-theorem-3',
      type: 'theorem',
      title: 'Substitusjon i bestemte integraler',
      content: `Naar vi gjor substitusjon $u = g(x)$ i et bestemt integral, maa vi ogsaa bytte grensene:

$$\\int_a^b f(g(x)) \\cdot g'(x) \\, dx = \\int_{g(a)}^{g(b)} f(u) \\, du$$

**Viktig:** Naar vi bruker nye grenser, trenger vi **ikke** sette tilbake til $x$.

**Fremgangsmaate:**
1. Finn substitusjonen $u = g(x)$
2. Beregn nye grenser: nedre grense blir $g(a)$, ovre grense blir $g(b)$
3. Bytt ut integranden og grensene
4. Integrer og evaluer direkte`,
    },
    {
      id: 'r2-3-1-ex-16',
      type: 'example',
      title: 'Eksempel 16: Bestemt integral med grensebytte',
      problem: 'Beregn $\\int_0^1 2x \\cdot (x^2 + 1)^3 \\, dx$.',
      solution: `**Steg 1:** Sett $u = x^2 + 1$, da er $du = 2x \\, dx$.

**Steg 2:** Bytt grensene:
- Naar $x = 0$: $u = 0^2 + 1 = 1$
- Naar $x = 1$: $u = 1^2 + 1 = 2$

**Steg 3:** Substitusjonen gir:
$$\\int_0^1 2x \\cdot (x^2 + 1)^3 \\, dx = \\int_1^2 u^3 \\, du$$

**Steg 4:** Regn ut:
$$= \\left[\\frac{u^4}{4}\\right]_1^2 = \\frac{2^4}{4} - \\frac{1^4}{4} = \\frac{16}{4} - \\frac{1}{4} = \\frac{15}{4}$$`,
    },
    {
      id: 'r2-3-1-exercise-17',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-17',
        number: '3.17',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn $\\int_0^2 x \\cdot (x^2 + 1)^2 \\, dx$ ved aa bytte grenser.',
        solution: 'Sett $u = x^2 + 1$, $du = 2x \\, dx$. Nye grenser: $u(0) = 1$, $u(2) = 5$. Integralet blir $\\frac{1}{2} \\int_1^5 u^2 \\, du = \\frac{1}{2} \\left[\\frac{u^3}{3}\\right]_1^5 = \\frac{1}{6}(125 - 1) = \\frac{124}{6} = \\frac{62}{3}$.',
        hints: ['Sett $u = x^2 + 1$ og finn de nye grensene.', 'Naar $x = 0$ er $u = 1$, og naar $x = 2$ er $u = 5$.'],
      },
    },
    {
      id: 'r2-3-1-ex-17',
      type: 'example',
      title: 'Eksempel 17: Trigonometrisk bestemt integral',
      problem: 'Beregn $\\int_0^{\\pi/2} \\sin^2 x \\cdot \\cos x \\, dx$.',
      solution: `**Steg 1:** Sett $u = \\sin x$, da er $du = \\cos x \\, dx$.

**Steg 2:** Bytt grensene:
- Naar $x = 0$: $u = \\sin 0 = 0$
- Naar $x = \\pi/2$: $u = \\sin(\\pi/2) = 1$

**Steg 3:** Substitusjonen gir:
$$\\int_0^{\\pi/2} \\sin^2 x \\cdot \\cos x \\, dx = \\int_0^1 u^2 \\, du$$

**Steg 4:** Regn ut:
$$= \\left[\\frac{u^3}{3}\\right]_0^1 = \\frac{1}{3} - 0 = \\frac{1}{3}$$`,
    },
    {
      id: 'r2-3-1-exercise-18',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-18',
        number: '3.18',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn $\\int_0^{\\pi/4} \\tan x \\cdot \\frac{1}{\\cos^2 x} \\, dx$.',
        solution: 'Sett $u = \\tan x$, $du = \\frac{1}{\\cos^2 x} \\, dx$. Nye grenser: $u(0) = 0$, $u(\\pi/4) = 1$. Integralet blir $\\int_0^1 u \\, du = \\left[\\frac{u^2}{2}\\right]_0^1 = \\frac{1}{2}$.',
        hints: ['Sett $u = \\tan x$.', 'Hva er $\\tan(\\pi/4)$?'],
      },
    },
    {
      id: 'r2-3-1-ex-18',
      type: 'example',
      title: 'Eksempel 18: Eksponentiell bestemt integral',
      problem: 'Beregn $\\int_0^{\\ln 2} e^x \\cdot \\sqrt{e^x + 1} \\, dx$.',
      solution: `**Steg 1:** Sett $u = e^x + 1$, da er $du = e^x \\, dx$.

**Steg 2:** Bytt grensene:
- Naar $x = 0$: $u = e^0 + 1 = 2$
- Naar $x = \\ln 2$: $u = e^{\\ln 2} + 1 = 2 + 1 = 3$

**Steg 3:** Substitusjonen gir:
$$\\int_0^{\\ln 2} e^x \\cdot \\sqrt{e^x + 1} \\, dx = \\int_2^3 \\sqrt{u} \\, du = \\int_2^3 u^{1/2} \\, du$$

**Steg 4:** Regn ut:
$$= \\left[\\frac{2u^{3/2}}{3}\\right]_2^3 = \\frac{2}{3}\\left(3^{3/2} - 2^{3/2}\\right) = \\frac{2}{3}\\left(3\\sqrt{3} - 2\\sqrt{2}\\right)$$`,
    },
    {
      id: 'r2-3-1-exercise-19',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-19',
        number: '3.19',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int_0^1 \\frac{e^x}{(e^x + 1)^2} \\, dx$.',
        solution: 'Sett $u = e^x + 1$, $du = e^x \\, dx$. Nye grenser: $u(0) = 2$, $u(1) = e + 1$. Integralet blir $\\int_2^{e+1} u^{-2} \\, du = \\left[-u^{-1}\\right]_2^{e+1} = -\\frac{1}{e+1} + \\frac{1}{2} = \\frac{e - 1}{2(e + 1)}$.',
        hints: ['Sett $u = e^x + 1$.', 'Husk at $\\int u^{-2} \\, du = -u^{-1} + C$.'],
      },
    },
    {
      id: 'r2-3-1-ex-19',
      type: 'example',
      title: 'Eksempel 19: Logaritmisk bestemt integral',
      problem: 'Beregn $\\int_1^e \\frac{(\\ln x)^2}{x} \\, dx$.',
      solution: `**Steg 1:** Sett $u = \\ln x$, da er $du = \\frac{1}{x} \\, dx$.

**Steg 2:** Bytt grensene:
- Naar $x = 1$: $u = \\ln 1 = 0$
- Naar $x = e$: $u = \\ln e = 1$

**Steg 3:** Substitusjonen gir:
$$\\int_1^e \\frac{(\\ln x)^2}{x} \\, dx = \\int_0^1 u^2 \\, du$$

**Steg 4:** Regn ut:
$$= \\left[\\frac{u^3}{3}\\right]_0^1 = \\frac{1}{3} - 0 = \\frac{1}{3}$$`,
    },
    {
      id: 'r2-3-1-exercise-20',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-20',
        number: '3.20',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int_1^{e^2} \\frac{\\ln x}{x} \\, dx$.',
        solution: 'Sett $u = \\ln x$, $du = \\frac{1}{x} \\, dx$. Nye grenser: $u(1) = 0$, $u(e^2) = 2$. Integralet blir $\\int_0^2 u \\, du = \\left[\\frac{u^2}{2}\\right]_0^2 = \\frac{4}{2} = 2$.',
        hints: ['Sett $u = \\ln x$.', 'Hva er $\\ln(e^2)$?'],
      },
    },

    // ============================================================================
    // OPPSUMMERING OG VANSKELIGE OPPGAVER
    // ============================================================================
    {
      id: 'r2-3-1-text-8',
      type: 'text',
      content: `## Oppsummering

**Fremgangsmaate for substitusjon:**
1. Identifiser en egnet substitusjon $u = g(x)$
2. Beregn $du = g'(x) \\, dx$
3. Uttrykk $dx$ ved hjelp av $du$
4. Erstatt alle $x$-uttrykk med $u$-uttrykk
5. Integrer med hensyn paa $u$
6. Sett tilbake $u = g(x)$ (ubestemt) eller bytt grenser (bestemt)

**Tips for aa velge $u$:**
- Let etter "funksjon og dens deriverte"
- Uttrykk i parenteser, under rottegn, eller som eksponent
- Nevneren i en brok (hvis telleren er dens deriverte)
- Den "indre funksjonen" i sammensatte funksjoner`,
    },
    {
      id: 'r2-3-1-warning-1',
      type: 'warning',
      title: 'Vanlige feil',
      content: `1. **Glemmer aa bytte $dx$:** Naar du setter $u = g(x)$, maa du ogsaa erstatte $dx$ med $\\frac{du}{g'(x)}$.

2. **Glemmer aa sette tilbake:** Etter integrering maa du erstatte $u$ med $g(x)$ igjen.

3. **Feil grenser:** Ved bestemte integraler: Enten bytt grensene til $u$-verdier, ELLER sett tilbake og bruk de opprinnelige grensene. Ikke bland!

4. **Ufullstendig substitusjon:** Alle $x$-er maa forsvinne for at substitusjonen skal være gyldig.

5. **Feil fortegn:** Vaar spesielt oppmerksom naar $g'(x)$ er negativ (f.eks. $\\cos x$ gir $-\\sin x$).`,
    },
    {
      id: 'r2-3-1-note-1',
      type: 'note',
      content: `**Naar virker ikke substitusjon?**

Substitusjon fungerer best naar integranden inneholder "funksjon og dens deriverte". Hvis dette monsteret ikke er tilstede, maa du kanskje bruke andre teknikker:
- Delvis integrasjon (kapittel 3.2)
- Delbroksoppspaltning (kapittel 3.3)
- Trigonometriske identiteter

Oving gjor mester - etter hvert vil du "se" hvilken substitusjon som passer!`,
    },

    // ============================================================================
    // EKSTRA UTFORDRINGSOPPGAVER
    // ============================================================================
    {
      id: 'r2-3-1-text-9',
      type: 'text',
      content: `## Utfordringsoppgaver

Disse oppgavene krever litt mer kreativitet i valg av substitusjon.`,
    },
    {
      id: 'r2-3-1-exercise-21',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-21',
        number: '3.21',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\frac{x}{\\sqrt{1 - x^2}} \\, dx$.',
        solution: 'Sett $u = 1 - x^2$, $du = -2x \\, dx$. Da faar vi $-\\frac{1}{2} \\int u^{-1/2} \\, du = -\\frac{1}{2} \\cdot 2u^{1/2} + C = -\\sqrt{1 - x^2} + C$.',
        hints: ['Sett $u = 1 - x^2$.', 'Pass paa minustegnet!'],
      },
    },
    {
      id: 'r2-3-1-exercise-22',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-22',
        number: '3.22',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\frac{e^{\\sqrt{x}}}{\\sqrt{x}} \\, dx$.',
        solution: 'Sett $u = \\sqrt{x} = x^{1/2}$, $du = \\frac{1}{2\\sqrt{x}} \\, dx$. Da faar vi $2 \\int e^u \\, du = 2e^u + C = 2e^{\\sqrt{x}} + C$.',
        hints: ['Sett $u = \\sqrt{x}$.', 'Hva er den deriverte av $\\sqrt{x}$?'],
      },
    },
    {
      id: 'r2-3-1-exercise-23',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-23',
        number: '3.23',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\frac{\\sin(\\ln x)}{x} \\, dx$.',
        solution: 'Sett $u = \\ln x$, $du = \\frac{1}{x} \\, dx$. Da faar vi $\\int \\sin u \\, du = -\\cos u + C = -\\cos(\\ln x) + C$.',
        hints: ['Sett $u = \\ln x$.'],
      },
    },
    {
      id: 'r2-3-1-exercise-24',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-24',
        number: '3.24',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int_0^{\\pi/2} \\cos^3 x \\cdot \\sin x \\, dx$.',
        solution: 'Sett $u = \\cos x$, $du = -\\sin x \\, dx$. Nye grenser: $u(0) = 1$, $u(\\pi/2) = 0$. Integralet blir $-\\int_1^0 u^3 \\, du = \\int_0^1 u^3 \\, du = \\left[\\frac{u^4}{4}\\right]_0^1 = \\frac{1}{4}$.',
        hints: ['Sett $u = \\cos x$.', 'Vend grensene naar du faar negativt fortegn foran integralet.'],
      },
    },
    {
      id: 'r2-3-1-exercise-25',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-25',
        number: '3.25',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\frac{x^2}{(x^3 + 1)^4} \\, dx$.',
        solution: 'Sett $u = x^3 + 1$, $du = 3x^2 \\, dx$. Da faar vi $\\frac{1}{3} \\int u^{-4} \\, du = \\frac{1}{3} \\cdot \\frac{u^{-3}}{-3} + C = -\\frac{1}{9(x^3 + 1)^3} + C$.',
        hints: ['Sett $u = x^3 + 1$.', 'Husk regelen $\\int u^n \\, du = \\frac{u^{n+1}}{n+1} + C$ for $n \\neq -1$.'],
      },
    },
    {
      id: 'r2-3-1-ex-20',
      type: 'example',
      title: 'Eksempel 20: Kompleks substitusjon',
      problem: 'Finn $\\int \\frac{e^x - e^{-x}}{e^x + e^{-x}} \\, dx$.',
      solution: `**Observasjon:** Telleren er den deriverte av nevneren!

$(e^x + e^{-x})' = e^x - e^{-x}$

**Steg 1:** Sett $u = e^x + e^{-x}$, da er $du = (e^x - e^{-x}) \\, dx$.

**Steg 2:** Substitusjonen gir:
$$\\int \\frac{e^x - e^{-x}}{e^x + e^{-x}} \\, dx = \\int \\frac{du}{u} = \\ln|u| + C$$

**Steg 3:** Sett tilbake:
$$= \\ln(e^x + e^{-x}) + C$$

(Vi dropper absoluttverdi siden $e^x + e^{-x} > 0$ alltid.)

**Merk:** $\\frac{e^x - e^{-x}}{e^x + e^{-x}} = \\tanh x$ (hyperbolsk tangens), sa vi har vist at $\\int \\tanh x \\, dx = \\ln(\\cosh x) + C$.`,
    },
    {
      id: 'r2-3-1-exercise-26',
      type: 'exercise',
      exercise: {
        id: 'r2-3-1-task-26',
        number: '3.26',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn $\\int \\frac{e^x + e^{-x}}{e^x - e^{-x}} \\, dx$ for $x > 0$.',
        solution: 'Telleren er den deriverte av nevneren: $(e^x - e^{-x})\\prime = e^x + e^{-x}$. Sett $u = e^x - e^{-x}$, $du = (e^x + e^{-x}) \\, dx$. Da faar vi $\\int \\frac{du}{u} = \\ln|u| + C = \\ln|e^x - e^{-x}| + C$.',
        hints: ['Sjekk om telleren er den deriverte av nevneren.', 'Sett $u = e^x - e^{-x}$.'],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_3_2: TextbookChapter = {
  id: 'r2-3-2',
  courseId: 'r2',
  chapterNumber: '3.2',
  title: 'Delvis integrasjon',
  description: 'Lar a integrere produkter av funksjoner ved a bruke produktregelen baklens.',
  estimatedMinutes: 75,
  competenceGoals: [
    'beherske teknikken delvis integrasjon',
    'velge riktig u og v\' i delvis integrasjon',
    'bruke gjentatt delvis integrasjon',
    'lose sirkular delvis integrasjon',
    'anvende delvis integrasjon på bestemte integraler',
    'kombinere delvis integrasjon med andre teknikker',
  ],
  content: [
    // ========== INNLEDNING ==========
    {
      id: 'r2-3-2-text-1',
      type: 'text',
      content: `## Innledning

I forrige kapittel larte vi substitusjon, som er kjerneregelen baklens. Na skal vi lare en annen viktig integrasjonsteknikk: **delvis integrasjon**.

Delvis integrasjon brukes nar vi skal integrere et *produkt* av to funksjoner, for eksempel $x \\cdot e^x$ eller $x \\cdot \\sin(x)$.

Ideen er a bruke **produktregelen for derivasjon baklens**. La oss forst huske produktregelen:

$$(u \\cdot v)' = u' \\cdot v + u \\cdot v'$$

Hvis vi integrerer begge sider, far vi:

$$u \\cdot v = \\int u' \\cdot v \\, dx + \\int u \\cdot v' \\, dx$$

Ved a omorganisere denne likningen, kan vi utlede formelen for delvis integrasjon.`,
    },

    // ========== UTLEDNING AV FORMELEN ==========
    {
      id: 'r2-3-2-text-2',
      type: 'text',
      content: `## Utledning av formelen

Vi starter med produktregelen:

$$(u \\cdot v)' = u' \\cdot v + u \\cdot v'$$

Integrerer vi begge sider med hensyn på $x$:

$$\\int (u \\cdot v)' \\, dx = \\int u' \\cdot v \\, dx + \\int u \\cdot v' \\, dx$$

Venstre side er bare $u \\cdot v$ (integralet av den deriverte gir tilbake funksjonen):

$$u \\cdot v = \\int u' \\cdot v \\, dx + \\int u \\cdot v' \\, dx$$

Na loser vi for $\\int u \\cdot v' \\, dx$:

$$\\int u \\cdot v' \\, dx = u \\cdot v - \\int u' \\cdot v \\, dx$$

Dette er formelen for delvis integrasjon!`,
    },

    // ========== DEFINISJON: DELVIS INTEGRASJON ==========
    {
      id: 'r2-3-2-def-1',
      type: 'definition',
      title: 'Delvis integrasjon',
      content: `La $u = u(x)$ og $v = v(x)$ vare deriverbare funksjoner. Da gjelder:

$$\\int u \\cdot v' \\, dx = u \\cdot v - \\int u' \\cdot v \\, dx$$

Eller med differensialnotasjon ($dv = v' \\, dx$ og $du = u' \\, dx$):

$$\\int u \\, dv = u \\cdot v - \\int v \\, du$$

**Merk:** Malet er at integralet på hoyre side ($\\int u' \\cdot v \\, dx$) skal vare enklere å løse enn det opprinnelige integralet.`,
    },

    // ========== EKSEMPEL 1: x * e^x ==========
    {
      id: 'r2-3-2-ex-1',
      type: 'example',
      title: 'Eksempel 1: Integrere $x \\cdot e^x$',
      problem: `Finn $\\displaystyle\\int x \\cdot e^x \\, dx$.`,
      solution: `**Løsning:**

Vi bruker delvis integrasjon med:
- $u = x \\quad \\Rightarrow \\quad u' = 1$
- $v' = e^x \\quad \\Rightarrow \\quad v = e^x$

Setter inn i formelen $\\int u \\cdot v' \\, dx = u \\cdot v - \\int u' \\cdot v \\, dx$:

$$\\int x \\cdot e^x \\, dx = x \\cdot e^x - \\int 1 \\cdot e^x \\, dx$$

$$= x \\cdot e^x - e^x + C$$

$$= e^x(x - 1) + C$$

**Sjekk ved derivasjon:**
$(e^x(x-1))' = e^x(x-1) + e^x \\cdot 1 = e^x \\cdot x - e^x + e^x = x \\cdot e^x$ ✓`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-3-2-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-1',
        number: '3.2.1',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk delvis integrasjon til å finne integralene.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int x \\cdot e^{2x} \\, dx$',
            solution: 'La $u = x$ og $v\' = e^{2x}$, sa $u\' = 1$ og $v = \\frac{1}{2}e^{2x}$. Da far vi $\\int x \\cdot e^{2x} \\, dx = \\frac{x}{2}e^{2x} - \\int \\frac{1}{2}e^{2x} \\, dx = \\frac{x}{2}e^{2x} - \\frac{1}{4}e^{2x} + C = \\frac{e^{2x}}{4}(2x - 1) + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x \\cdot e^{-x} \\, dx$',
            solution: 'La $u = x$ og $v\' = e^{-x}$, sa $u\' = 1$ og $v = -e^{-x}$. Da far vi $\\int x \\cdot e^{-x} \\, dx = -x \\cdot e^{-x} - \\int (-e^{-x}) \\, dx = -x \\cdot e^{-x} - e^{-x} + C = -e^{-x}(x + 1) + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int 2x \\cdot e^x \\, dx$',
            solution: 'La $u = 2x$ og $v\' = e^x$, sa $u\' = 2$ og $v = e^x$. Da far vi $\\int 2x \\cdot e^x \\, dx = 2x \\cdot e^x - \\int 2e^x \\, dx = 2x \\cdot e^x - 2e^x + C = 2e^x(x - 1) + C$'
          },
        ],
        solution: 'a) $\\frac{e^{2x}}{4}(2x - 1) + C$, b) $-e^{-x}(x + 1) + C$, c) $2e^x(x - 1) + C$',
        hints: [
          'Velg $u$ som den funksjonen som blir enklere nar du deriverer',
          'Velg $v\'$ som den funksjonen du enkelt kan integrere',
          'Husk a sjekke svaret ved a derivere!',
        ],
      },
    },

    // ========== LIATE-REGELEN ==========
    {
      id: 'r2-3-2-text-3',
      type: 'text',
      content: `## Valg av $u$ og $v'$: LIATE-regelen

Det viktigste ved delvis integrasjon er a velge riktig $u$ og $v'$. Malet er at det nye integralet $\\int u' \\cdot v \\, dx$ skal vare *enklere* enn det opprinnelige.

En nyttig huskeregel er **LIATE** (eller LIPET på norsk), som gir prioritetsrekkefolge for valg av $u$:

| Prioritet | Type funksjon | Eksempler |
|-----------|---------------|-----------|
| 1 | **L**ogaritmer | $\\ln x$, $\\log x$ |
| 2 | **I**nverse trigonometriske | $\\arcsin x$, $\\arctan x$ |
| 3 | **A**lgebraiske (polynomer) | $x$, $x^2$, $x^3$ |
| 4 | **T**rigonometriske | $\\sin x$, $\\cos x$ |
| 5 | **E**ksponentialfunksjoner | $e^x$, $2^x$ |

Funksjoner hoyt på listen velges som $u$, mens funksjoner lavt på listen velges som $v'$.`,
    },

    // ========== TIP: LIATE ==========
    {
      id: 'r2-3-2-tip-1',
      type: 'tip',
      content: `**Hvorfor fungerer LIATE?**

- Logaritmer og inverse trigonometriske funksjoner er vanskelige a integrere, men enkle a derivere.
- Polynomer blir enklere nar de deriveres ($x^3 \\to 3x^2 \\to 6x \\to 6 \\to 0$).
- Eksponentialfunksjoner forandres ikke nar de integreres eller deriveres.

Derfor: Velg funksjoner som blir *enklere* ved derivasjon som $u$.`,
    },

    // ========== EKSEMPEL 2: x * sin(x) ==========
    {
      id: 'r2-3-2-ex-2',
      type: 'example',
      title: 'Eksempel 2: Integrere $x \\cdot \\sin(x)$',
      problem: `Finn $\\displaystyle\\int x \\cdot \\sin(x) \\, dx$.`,
      solution: `**Løsning:**

Ifølge LIATE-regelen: $x$ (algebraisk) har høyere prioritet enn $\\sin(x)$ (trigonometrisk).

Vi velger:
- $u = x \\quad \\Rightarrow \\quad u' = 1$
- $v' = \\sin(x) \\quad \\Rightarrow \\quad v = -\\cos(x)$

Delvis integrasjon gir:

$$\\int x \\cdot \\sin(x) \\, dx = x \\cdot (-\\cos(x)) - \\int 1 \\cdot (-\\cos(x)) \\, dx$$

$$= -x \\cos(x) + \\int \\cos(x) \\, dx$$

$$= -x \\cos(x) + \\sin(x) + C$$

**Sjekk:** $(-x\\cos(x) + \\sin(x))' = -\\cos(x) + x\\sin(x) + \\cos(x) = x\\sin(x)$ ✓`,
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-3-2-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-2',
        number: '3.2.2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk delvis integrasjon og LIATE-regelen til å finne integralene.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int x \\cdot \\cos(x) \\, dx$',
            solution: 'La $u = x$, $v\' = \\cos(x)$. Da $u\' = 1$, $v = \\sin(x)$. Integralet blir $x\\sin(x) - \\int \\sin(x) \\, dx = x\\sin(x) + \\cos(x) + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x \\cdot \\cos(2x) \\, dx$',
            solution: 'La $u = x$, $v\' = \\cos(2x)$. Da $u\' = 1$, $v = \\frac{1}{2}\\sin(2x)$. Integralet blir $\\frac{x}{2}\\sin(2x) - \\int \\frac{1}{2}\\sin(2x) \\, dx = \\frac{x}{2}\\sin(2x) + \\frac{1}{4}\\cos(2x) + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int x \\cdot \\sin(3x) \\, dx$',
            solution: 'La $u = x$, $v\' = \\sin(3x)$. Da $u\' = 1$, $v = -\\frac{1}{3}\\cos(3x)$. Integralet blir $-\\frac{x}{3}\\cos(3x) + \\int \\frac{1}{3}\\cos(3x) \\, dx = -\\frac{x}{3}\\cos(3x) + \\frac{1}{9}\\sin(3x) + C$'
          },
        ],
        solution: 'a) $x\\sin(x) + \\cos(x) + C$, b) $\\frac{x}{2}\\sin(2x) + \\frac{1}{4}\\cos(2x) + C$, c) $-\\frac{x}{3}\\cos(3x) + \\frac{1}{9}\\sin(3x) + C$',
        hints: [
          'Velg alltid polynomet ($x$) som $u$ nar du har et produkt av polynom og trigonometrisk funksjon',
          'Husk a bruke kjerneregelen nar du integrerer trigonometriske funksjoner med argument $ax$',
        ],
      },
    },

    // ========== EKSEMPEL 3: ln(x) ==========
    {
      id: 'r2-3-2-ex-3',
      type: 'example',
      title: 'Eksempel 3: Integrere $\\ln(x)$',
      problem: `Finn $\\displaystyle\\int \\ln(x) \\, dx$.`,
      solution: `**Løsning:**

Her har vi tilsynelatende bare en funksjon, men vi kan skrive $\\ln(x) = \\ln(x) \\cdot 1$.

Ifølge LIATE: Logaritmer har høyest prioritet, sa $u = \\ln(x)$.

Vi velger:
- $u = \\ln(x) \\quad \\Rightarrow \\quad u' = \\frac{1}{x}$
- $v' = 1 \\quad \\Rightarrow \\quad v = x$

Delvis integrasjon gir:

$$\\int \\ln(x) \\, dx = \\ln(x) \\cdot x - \\int \\frac{1}{x} \\cdot x \\, dx$$

$$= x \\ln(x) - \\int 1 \\, dx$$

$$= x \\ln(x) - x + C$$

$$= x(\\ln(x) - 1) + C$$

**Sjekk:** $(x\\ln(x) - x)' = \\ln(x) + x \\cdot \\frac{1}{x} - 1 = \\ln(x) + 1 - 1 = \\ln(x)$ ✓`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-3-2-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-3',
        number: '3.2.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn integralene ved a bruke delvis integrasjon.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int x \\cdot \\ln(x) \\, dx$',
            solution: 'La $u = \\ln(x)$, $v\' = x$. Da $u\' = \\frac{1}{x}$, $v = \\frac{x^2}{2}$. Integralet blir $\\frac{x^2}{2}\\ln(x) - \\int \\frac{x^2}{2} \\cdot \\frac{1}{x} \\, dx = \\frac{x^2}{2}\\ln(x) - \\frac{1}{2}\\int x \\, dx = \\frac{x^2}{2}\\ln(x) - \\frac{x^2}{4} + C = \\frac{x^2}{4}(2\\ln(x) - 1) + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x^2 \\cdot \\ln(x) \\, dx$',
            solution: 'La $u = \\ln(x)$, $v\' = x^2$. Da $u\' = \\frac{1}{x}$, $v = \\frac{x^3}{3}$. Integralet blir $\\frac{x^3}{3}\\ln(x) - \\int \\frac{x^3}{3} \\cdot \\frac{1}{x} \\, dx = \\frac{x^3}{3}\\ln(x) - \\frac{1}{3}\\int x^2 \\, dx = \\frac{x^3}{3}\\ln(x) - \\frac{x^3}{9} + C = \\frac{x^3}{9}(3\\ln(x) - 1) + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int \\ln(2x) \\, dx$',
            solution: 'La $u = \\ln(2x)$, $v\' = 1$. Da $u\' = \\frac{1}{x}$, $v = x$. Integralet blir $x\\ln(2x) - \\int x \\cdot \\frac{1}{x} \\, dx = x\\ln(2x) - x + C = x(\\ln(2x) - 1) + C$'
          },
        ],
        solution: 'a) $\\frac{x^2}{4}(2\\ln(x) - 1) + C$, b) $\\frac{x^3}{9}(3\\ln(x) - 1) + C$, c) $x(\\ln(2x) - 1) + C$',
        hints: [
          'Logaritmer har høyest prioritet i LIATE, sa velg alltid $u = \\ln(\\cdot)$',
          'Husk at $(\\ln(x))\' = \\frac{1}{x}$',
        ],
      },
    },

    // ========== GJENTATT DELVIS INTEGRASJON ==========
    {
      id: 'r2-3-2-text-4',
      type: 'text',
      content: `## Gjentatt delvis integrasjon

Noen ganger ma vi bruke delvis integrasjon flere ganger for å løse et integral. Dette skjer typisk nar vi har et polynom av grad 2 eller høyere ganget med en eksponential- eller trigonometrisk funksjon.

For eksempel krever $\\int x^2 \\cdot e^x \\, dx$ to runder med delvis integrasjon fordi $x^2$ ma deriveres to ganger for a bli en konstant.`,
    },

    // ========== EKSEMPEL 4: x^2 * e^x ==========
    {
      id: 'r2-3-2-ex-4',
      type: 'example',
      title: 'Eksempel 4: Gjentatt delvis integrasjon',
      problem: `Finn $\\displaystyle\\int x^2 \\cdot e^x \\, dx$.`,
      solution: `**Løsning:**

**Første runde:**
- $u = x^2 \\quad \\Rightarrow \\quad u' = 2x$
- $v' = e^x \\quad \\Rightarrow \\quad v = e^x$

$$\\int x^2 \\cdot e^x \\, dx = x^2 \\cdot e^x - \\int 2x \\cdot e^x \\, dx$$

**Andre runde** (pa $\\int 2x \\cdot e^x \\, dx$):
- $u = 2x \\quad \\Rightarrow \\quad u' = 2$
- $v' = e^x \\quad \\Rightarrow \\quad v = e^x$

$$\\int 2x \\cdot e^x \\, dx = 2x \\cdot e^x - \\int 2 \\cdot e^x \\, dx = 2x \\cdot e^x - 2e^x$$

**Setter sammen:**

$$\\int x^2 \\cdot e^x \\, dx = x^2 \\cdot e^x - (2x \\cdot e^x - 2e^x) + C$$

$$= x^2 e^x - 2x e^x + 2e^x + C$$

$$= e^x(x^2 - 2x + 2) + C$$

**Sjekk:** $(e^x(x^2 - 2x + 2))' = e^x(x^2 - 2x + 2) + e^x(2x - 2) = e^x(x^2 - 2x + 2 + 2x - 2) = x^2 e^x$ ✓`,
    },

    // ========== TABELLARISK METODE ==========
    {
      id: 'r2-3-2-text-8',
      type: 'text',
      content: `## Tabellarisk delvis integrasjon

Nar vi har et polynom ganget med $e^x$ eller en trigonometrisk funksjon, kan vi bruke en **tabellarisk metode** som gjor utregningen mer oversiktlig.

Vi setter opp en tabell med tre kolonner:
1. **Fortegn**: Vekslende $+$ og $-$
2. **Derivater av $u$**: Deriver til du nar 0
3. **Integraler av $v'$**: Integrer like mange ganger

Svaret far vi ved a multiplisere diagonalt og summere.`,
    },

    // ========== EKSEMPEL: TABELLARISK METODE ==========
    {
      id: 'r2-3-2-ex-8',
      type: 'example',
      title: 'Eksempel 8: Tabellarisk metode',
      problem: `Bruk tabellarisk metode til å finne $\\displaystyle\\int x^3 \\cdot e^{2x} \\, dx$.`,
      solution: `**Løsning:**

Vi setter opp tabellen med $u = x^3$ (deriverer) og $v' = e^{2x}$ (integrerer):

| Fortegn | Derivater av $u$ | Integraler av $v'$ |
|---------|------------------|-------------------|
| $+$ | $x^3$ | $e^{2x}$ |
| $-$ | $3x^2$ | $\\frac{1}{2}e^{2x}$ |
| $+$ | $6x$ | $\\frac{1}{4}e^{2x}$ |
| $-$ | $6$ | $\\frac{1}{8}e^{2x}$ |
| $+$ | $0$ | $\\frac{1}{16}e^{2x}$ |

Multipliserer diagonalt (rad 1 med rad 2, rad 2 med rad 3, osv.) og summerer:

$$\\int x^3 \\cdot e^{2x} \\, dx = (+)x^3 \\cdot \\frac{1}{2}e^{2x} + (-)3x^2 \\cdot \\frac{1}{4}e^{2x} + (+)6x \\cdot \\frac{1}{8}e^{2x} + (-)6 \\cdot \\frac{1}{16}e^{2x} + C$$

$$= \\frac{e^{2x}}{2}x^3 - \\frac{3e^{2x}}{4}x^2 + \\frac{6e^{2x}}{8}x - \\frac{6e^{2x}}{16} + C$$

$$= \\frac{e^{2x}}{16}(8x^3 - 12x^2 + 12x - 6) + C$$

$$= \\frac{e^{2x}}{8}(4x^3 - 6x^2 + 6x - 3) + C$$`,
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-3-2-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-4',
        number: '3.2.4',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Bruk gjentatt delvis integrasjon (eller tabellarisk metode) til å finne integralene.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int x^2 \\cdot \\cos(x) \\, dx$',
            solution: 'Første runde: $u = x^2$, $v\' = \\cos(x)$ gir $x^2\\sin(x) - \\int 2x\\sin(x) \\, dx$. Andre runde: $u = 2x$, $v\' = \\sin(x)$ gir $-2x\\cos(x) + \\int 2\\cos(x) \\, dx = -2x\\cos(x) + 2\\sin(x)$. Totalt: $x^2\\sin(x) + 2x\\cos(x) - 2\\sin(x) + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x^2 \\cdot e^{-x} \\, dx$',
            solution: 'Første runde: $u = x^2$, $v\' = e^{-x}$ gir $-x^2 e^{-x} + \\int 2x e^{-x} \\, dx$. Andre runde: $u = 2x$, $v\' = e^{-x}$ gir $-2x e^{-x} + \\int 2e^{-x} \\, dx = -2x e^{-x} - 2e^{-x}$. Totalt: $-x^2 e^{-x} - 2x e^{-x} - 2e^{-x} + C = -e^{-x}(x^2 + 2x + 2) + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int x^3 \\cdot e^x \\, dx$',
            solution: 'Tre runder med delvis integrasjon gir: $e^x(x^3 - 3x^2 + 6x - 6) + C$'
          },
          {
            label: 'd',
            task: '$\\displaystyle\\int x^2 \\cdot \\sin(2x) \\, dx$',
            solution: 'To runder: $-\\frac{x^2}{2}\\cos(2x) + \\frac{x}{2}\\sin(2x) + \\frac{1}{4}\\cos(2x) + C$'
          },
        ],
        solution: 'a) $x^2\\sin(x) + 2x\\cos(x) - 2\\sin(x) + C$, b) $-e^{-x}(x^2 + 2x + 2) + C$, c) $e^x(x^3 - 3x^2 + 6x - 6) + C$, d) $-\\frac{x^2}{2}\\cos(2x) + \\frac{x}{2}\\sin(2x) + \\frac{1}{4}\\cos(2x) + C$',
        hints: [
          'Polynomer av grad $n$ krever $n$ runder med delvis integrasjon',
          'Hold orden på fortegnene - det er lett a gjore feil!',
          'Prov tabellarisk metode for c) og d)',
        ],
      },
    },

    // ========== SIRKULAR DELVIS INTEGRASJON ==========
    {
      id: 'r2-3-2-text-5',
      type: 'text',
      content: `## Sirkular delvis integrasjon

Noen ganger leder delvis integrasjon oss i en sirkel - vi ender opp med det samme integralet vi startet med! Dette skjer typisk med produkter av eksponential- og trigonometriske funksjoner, for eksempel $\\int e^x \\sin(x) \\, dx$.

Løsningen er a sette opp en likning der integralet vi soker etter er den ukjente, og deretter lose for denne ukjente.`,
    },

    // ========== TEOREM: SIRKULAR TEKNIKK ==========
    {
      id: 'r2-3-2-thm-1',
      type: 'theorem',
      title: 'Sirkular delvis integrasjon',
      content: `Hvis vi etter to runder med delvis integrasjon ender opp med det opprinnelige integralet $I$, kan vi sette opp likningen:

$$I = (\\text{mellomresultat}) \\pm I$$

og lose for $I$:

$$2I = (\\text{mellomresultat}) \\quad \\Rightarrow \\quad I = \\frac{\\text{mellomresultat}}{2}$$

**Viktig:** Pass på fortegnet foran $I$ på hoyre side - det avhenger av valgene av $u$ og $v'$.`,
    },

    // ========== EKSEMPEL 5: e^x * sin(x) ==========
    {
      id: 'r2-3-2-ex-5',
      type: 'example',
      title: 'Eksempel 5: Sirkular delvis integrasjon',
      problem: `Finn $\\displaystyle\\int e^x \\cdot \\sin(x) \\, dx$.`,
      solution: `**Løsning:**

La $I = \\int e^x \\sin(x) \\, dx$.

**Første runde:**
- $u = e^x \\quad \\Rightarrow \\quad u' = e^x$
- $v' = \\sin(x) \\quad \\Rightarrow \\quad v = -\\cos(x)$

$$I = -e^x \\cos(x) - \\int (-\\cos(x)) \\cdot e^x \\, dx = -e^x \\cos(x) + \\int e^x \\cos(x) \\, dx$$

**Andre runde** (pa $\\int e^x \\cos(x) \\, dx$):
- $u = e^x \\quad \\Rightarrow \\quad u' = e^x$
- $v' = \\cos(x) \\quad \\Rightarrow \\quad v = \\sin(x)$

$$\\int e^x \\cos(x) \\, dx = e^x \\sin(x) - \\int e^x \\sin(x) \\, dx = e^x \\sin(x) - I$$

**Setter sammen:**

$$I = -e^x \\cos(x) + e^x \\sin(x) - I$$

$$2I = e^x(\\sin(x) - \\cos(x))$$

$$I = \\frac{e^x(\\sin(x) - \\cos(x))}{2} + C$$

**Sjekk:** $\\left(\\frac{e^x(\\sin x - \\cos x)}{2}\\right)' = \\frac{e^x(\\sin x - \\cos x) + e^x(\\cos x + \\sin x)}{2} = \\frac{2e^x \\sin x}{2} = e^x \\sin x$ ✓`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-3-2-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-5',
        number: '3.2.5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Bruk sirkular delvis integrasjon til å finne integralene.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int e^x \\cdot \\cos(x) \\, dx$',
            solution: 'La $I = \\int e^x \\cos(x) \\, dx$. Etter to runder: $I = e^x \\sin(x) + e^x \\cos(x) - I$, sa $2I = e^x(\\sin(x) + \\cos(x))$, og $I = \\frac{e^x(\\sin(x) + \\cos(x))}{2} + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int e^{2x} \\cdot \\sin(x) \\, dx$',
            solution: 'La $I = \\int e^{2x} \\sin(x) \\, dx$. Etter to runder: $I = -e^{2x}\\cos(x) + 2e^{2x}\\sin(x) - 4I$, sa $5I = e^{2x}(2\\sin(x) - \\cos(x))$, og $I = \\frac{e^{2x}(2\\sin(x) - \\cos(x))}{5} + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int e^{-x} \\cdot \\cos(2x) \\, dx$',
            solution: 'La $I = \\int e^{-x} \\cos(2x) \\, dx$. Etter to runder far vi $5I = e^{-x}(2\\sin(2x) - \\cos(2x))$, sa $I = \\frac{e^{-x}(2\\sin(2x) - \\cos(2x))}{5} + C$'
          },
        ],
        solution: 'a) $\\frac{e^x(\\sin(x) + \\cos(x))}{2} + C$, b) $\\frac{e^{2x}(2\\sin(x) - \\cos(x))}{5} + C$, c) $\\frac{e^{-x}(2\\sin(2x) - \\cos(2x))}{5} + C$',
        hints: [
          'Sett opp $I$ for det ukjente integralet for du starter',
          'Nar du ser $I$ dukke opp igjen, sett opp en likning og los for $I$',
          'For b) og c): Pass på koeffisientene nar du bruker kjerneregelen',
        ],
      },
    },

    // ========== GENERELL FORMEL FOR SIRKULAER ==========
    {
      id: 'r2-3-2-thm-2',
      type: 'theorem',
      title: 'Generell formel for $\\int e^{ax} \\sin(bx) \\, dx$ og $\\int e^{ax} \\cos(bx) \\, dx$',
      content: `For konstanter $a$ og $b$ gjelder:

$$\\int e^{ax} \\sin(bx) \\, dx = \\frac{e^{ax}(a\\sin(bx) - b\\cos(bx))}{a^2 + b^2} + C$$

$$\\int e^{ax} \\cos(bx) \\, dx = \\frac{e^{ax}(a\\cos(bx) + b\\sin(bx))}{a^2 + b^2} + C$$

**Merk:** Disse formlene kan utledes ved sirkular delvis integrasjon, men er nyttige a ha tilgjengelig for a spare tid.`,
    },

    // ========== BESTEMT INTEGRAL MED DELVIS INTEGRASJON ==========
    {
      id: 'r2-3-2-text-6',
      type: 'text',
      content: `## Bestemt integral med delvis integrasjon

Nar vi bruker delvis integrasjon på et bestemt integral, har vi to tilnarminger:

**Metode 1:** Finn forst det ubestemte integralet, og evaluer deretter ved grensene.

**Metode 2:** Bruk formelen for delvis integrasjon direkte med grenser:

$$\\int_a^b u \\cdot v' \\, dx = \\Big[u \\cdot v\\Big]_a^b - \\int_a^b u' \\cdot v \\, dx$$

Metode 2 kan vare mer effektiv fordi vi slipper a holde styr på integrasjonskonstanten.`,
    },

    // ========== EKSEMPEL 6: Bestemt integral ==========
    {
      id: 'r2-3-2-ex-6',
      type: 'example',
      title: 'Eksempel 6: Bestemt integral',
      problem: `Beregn $\\displaystyle\\int_0^1 x \\cdot e^x \\, dx$.`,
      solution: `**Løsning:**

Vi bruker formelen $\\int_a^b u \\cdot v' \\, dx = [u \\cdot v]_a^b - \\int_a^b u' \\cdot v \\, dx$.

Med $u = x$, $u' = 1$, $v' = e^x$, $v = e^x$:

$$\\int_0^1 x \\cdot e^x \\, dx = \\Big[x \\cdot e^x\\Big]_0^1 - \\int_0^1 1 \\cdot e^x \\, dx$$

$$= \\Big[x \\cdot e^x\\Big]_0^1 - \\Big[e^x\\Big]_0^1$$

$$= (1 \\cdot e^1 - 0 \\cdot e^0) - (e^1 - e^0)$$

$$= e - 0 - e + 1$$

$$= 1$$`,
    },

    // ========== OPPGAVE 6 ==========
    {
      id: 'r2-3-2-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-6',
        number: '3.2.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn de bestemte integralene ved hjelp av delvis integrasjon.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int_0^{\\pi} x \\cdot \\sin(x) \\, dx$',
            solution: '$[−x\\cos(x)]_0^{\\pi} + \\int_0^{\\pi} \\cos(x) \\, dx = (-\\pi \\cdot (-1) - 0) + [\\sin(x)]_0^{\\pi} = \\pi + 0 = \\pi$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int_1^e \\ln(x) \\, dx$',
            solution: '$[x\\ln(x)]_1^e - \\int_1^e 1 \\, dx = (e \\cdot 1 - 1 \\cdot 0) - [x]_1^e = e - (e - 1) = 1$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int_0^2 x \\cdot e^{-x} \\, dx$',
            solution: '$[-x e^{-x}]_0^2 + \\int_0^2 e^{-x} \\, dx = (-2e^{-2} - 0) + [-e^{-x}]_0^2 = -2e^{-2} + (-e^{-2} + 1) = 1 - 3e^{-2}$'
          },
          {
            label: 'd',
            task: '$\\displaystyle\\int_1^e x \\cdot \\ln(x) \\, dx$',
            solution: '$[\\frac{x^2}{2}\\ln(x)]_1^e - \\int_1^e \\frac{x}{2} \\, dx = (\\frac{e^2}{2} - 0) - [\\frac{x^2}{4}]_1^e = \\frac{e^2}{2} - \\frac{e^2 - 1}{4} = \\frac{e^2 + 1}{4}$'
          },
        ],
        solution: 'a) $\\pi$, b) $1$, c) $1 - 3e^{-2} \\approx 0{,}594$, d) $\\frac{e^2 + 1}{4} \\approx 2{,}097$',
        hints: [
          'Bruk formelen $[u \\cdot v]_a^b - \\int_a^b u\' \\cdot v \\, dx$',
          'Evaluer $[\\cdot]_a^b$ betyr: sett inn ovre grense minus nedre grense',
          'For b): Husk at $\\ln(1) = 0$ og $\\ln(e) = 1$',
        ],
      },
    },

    // ========== INVERSE TRIGONOMETRISKE FUNKSJONER ==========
    {
      id: 'r2-3-2-text-9',
      type: 'text',
      content: `## Inverse trigonometriske funksjoner

Inverse trigonometriske funksjoner som $\\arcsin(x)$, $\\arccos(x)$ og $\\arctan(x)$ er vanskelige a integrere direkte, men enkle a derivere. Derfor velger vi alltid disse som $u$ i delvis integrasjon.

Viktige deriverte:
- $(\\arcsin(x))' = \\frac{1}{\\sqrt{1-x^2}}$
- $(\\arccos(x))' = -\\frac{1}{\\sqrt{1-x^2}}$
- $(\\arctan(x))' = \\frac{1}{1+x^2}$`,
    },

    // ========== EKSEMPEL: ARCTAN ==========
    {
      id: 'r2-3-2-ex-9',
      type: 'example',
      title: 'Eksempel 9: Integrere $\\arctan(x)$',
      problem: `Finn $\\displaystyle\\int \\arctan(x) \\, dx$.`,
      solution: `**Løsning:**

Vi skriver $\\arctan(x) = \\arctan(x) \\cdot 1$ og bruker delvis integrasjon.

- $u = \\arctan(x) \\quad \\Rightarrow \\quad u' = \\frac{1}{1+x^2}$
- $v' = 1 \\quad \\Rightarrow \\quad v = x$

$$\\int \\arctan(x) \\, dx = x \\cdot \\arctan(x) - \\int x \\cdot \\frac{1}{1+x^2} \\, dx$$

For det gjenvarende integralet bruker vi substitusjon $t = 1 + x^2$, $dt = 2x \\, dx$:

$$\\int \\frac{x}{1+x^2} \\, dx = \\frac{1}{2} \\int \\frac{1}{t} \\, dt = \\frac{1}{2} \\ln|t| = \\frac{1}{2} \\ln(1+x^2)$$

Dermed:

$$\\int \\arctan(x) \\, dx = x \\cdot \\arctan(x) - \\frac{1}{2}\\ln(1+x^2) + C$$`,
    },

    // ========== OPPGAVE: INVERSE TRIG ==========
    {
      id: 'r2-3-2-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-8',
        number: '3.2.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn integralene som involverer inverse trigonometriske funksjoner.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int \\arcsin(x) \\, dx$',
            solution: 'La $u = \\arcsin(x)$, $v\' = 1$. Da $u\' = \\frac{1}{\\sqrt{1-x^2}}$, $v = x$. Integralet blir $x\\arcsin(x) - \\int \\frac{x}{\\sqrt{1-x^2}} \\, dx$. Med substitusjon $t = 1-x^2$: $\\int \\frac{x}{\\sqrt{1-x^2}} \\, dx = -\\sqrt{1-x^2}$. Svar: $x\\arcsin(x) + \\sqrt{1-x^2} + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x \\cdot \\arctan(x) \\, dx$',
            solution: 'La $u = \\arctan(x)$, $v\' = x$. Da $u\' = \\frac{1}{1+x^2}$, $v = \\frac{x^2}{2}$. Integralet blir $\\frac{x^2}{2}\\arctan(x) - \\frac{1}{2}\\int \\frac{x^2}{1+x^2} \\, dx$. Skriv om: $\\frac{x^2}{1+x^2} = 1 - \\frac{1}{1+x^2}$. Svar: $\\frac{x^2+1}{2}\\arctan(x) - \\frac{x}{2} + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int_0^1 \\arctan(x) \\, dx$',
            solution: '$[x\\arctan(x) - \\frac{1}{2}\\ln(1+x^2)]_0^1 = (1 \\cdot \\frac{\\pi}{4} - \\frac{1}{2}\\ln 2) - 0 = \\frac{\\pi}{4} - \\frac{\\ln 2}{2}$'
          },
        ],
        solution: 'a) $x\\arcsin(x) + \\sqrt{1-x^2} + C$, b) $\\frac{x^2+1}{2}\\arctan(x) - \\frac{x}{2} + C$, c) $\\frac{\\pi}{4} - \\frac{\\ln 2}{2} \\approx 0{,}439$',
        hints: [
          'Inverse trigonometriske funksjoner har høyest prioritet i LIATE',
          'Du ma ofte kombinere delvis integrasjon med substitusjon',
          'For a) bruk substitusjon $t = 1-x^2$ på det gjenvarende integralet',
        ],
      },
    },

    // ========== EKSEMPEL 7: Kombinert teknikk ==========
    {
      id: 'r2-3-2-ex-7',
      type: 'example',
      title: 'Eksempel 7: Kombinere teknikker',
      problem: `Finn $\\displaystyle\\int x^2 \\cdot \\sin(x) \\, dx$.`,
      solution: `**Løsning:**

Dette krever to runder med delvis integrasjon.

**Første runde:**
- $u = x^2 \\quad \\Rightarrow \\quad u' = 2x$
- $v' = \\sin(x) \\quad \\Rightarrow \\quad v = -\\cos(x)$

$$\\int x^2 \\sin(x) \\, dx = -x^2 \\cos(x) - \\int (-\\cos(x)) \\cdot 2x \\, dx$$
$$= -x^2 \\cos(x) + 2\\int x \\cos(x) \\, dx$$

**Andre runde** (pa $\\int x \\cos(x) \\, dx$):
- $u = x \\quad \\Rightarrow \\quad u' = 1$
- $v' = \\cos(x) \\quad \\Rightarrow \\quad v = \\sin(x)$

$$\\int x \\cos(x) \\, dx = x \\sin(x) - \\int \\sin(x) \\, dx = x \\sin(x) + \\cos(x)$$

**Setter sammen:**

$$\\int x^2 \\sin(x) \\, dx = -x^2 \\cos(x) + 2(x \\sin(x) + \\cos(x)) + C$$
$$= -x^2 \\cos(x) + 2x \\sin(x) + 2\\cos(x) + C$$
$$= (2 - x^2)\\cos(x) + 2x\\sin(x) + C$$`,
    },

    // ========== VANLIGE FEIL ==========
    {
      id: 'r2-3-2-warning-1',
      type: 'warning',
      title: 'Vanlige feil ved delvis integrasjon',
      content: `**1. Feil valg av $u$ og $v'$:**
Hvis du velger feil, far du et vanskeligere integral. Bruk LIATE-regelen!

**2. Glemmer fortegn:**
Vær nøye med minustegnet i formelen: $\\int u \\cdot v' \\, dx = uv \\mathbf{-} \\int u' \\cdot v \\, dx$

**3. Glemmer integrasjonskonstanten:**
Husk alltid $+ C$ på slutten av ubestemte integraler.

**4. Feil ved sirkular integrasjon:**
Pass på at integralet $I$ dukker opp med riktig fortegn nar du setter opp likningen.

**5. Stopper for tidlig:**
Ved gjentatt delvis integrasjon, fortsett til polynomet er derivert til 0.`,
    },

    // ========== OPPGAVE 7: SAMMENSATTE OPPGAVER ==========
    {
      id: 'r2-3-2-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-7',
        number: '3.2.7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los disse utfordrende integralene.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int (\\ln(x))^2 \\, dx$',
            solution: 'La $u = (\\ln x)^2$, $v\' = 1$. Da $u\' = \\frac{2\\ln x}{x}$, $v = x$. Forste runde gir $x(\\ln x)^2 - 2\\int \\ln x \\, dx$. Vi vet at $\\int \\ln x \\, dx = x\\ln x - x$. Totalt: $x(\\ln x)^2 - 2(x\\ln x - x) + C = x(\\ln x)^2 - 2x\\ln x + 2x + C = x((\\ln x)^2 - 2\\ln x + 2) + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x \\cdot \\arctan(x) \\, dx$',
            solution: 'La $u = \\arctan(x)$, $v\' = x$. Da $u\' = \\frac{1}{1+x^2}$, $v = \\frac{x^2}{2}$. Integralet blir $\\frac{x^2}{2}\\arctan(x) - \\frac{1}{2}\\int \\frac{x^2}{1+x^2} \\, dx$. Skriv om: $\\frac{x^2}{1+x^2} = 1 - \\frac{1}{1+x^2}$. Da far vi $\\frac{x^2}{2}\\arctan(x) - \\frac{1}{2}(x - \\arctan(x)) + C = \\frac{x^2 + 1}{2}\\arctan(x) - \\frac{x}{2} + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int_0^{\\pi/2} x^2 \\cdot \\cos(x) \\, dx$',
            solution: 'To runder gir $[x^2 \\sin x + 2x\\cos x - 2\\sin x]_0^{\\pi/2} = (\\frac{\\pi^2}{4} \\cdot 1 + 0 - 2) - 0 = \\frac{\\pi^2}{4} - 2$'
          },
        ],
        solution: 'a) $x((\\ln x)^2 - 2\\ln x + 2) + C$, b) $\\frac{x^2 + 1}{2}\\arctan(x) - \\frac{x}{2} + C$, c) $\\frac{\\pi^2}{4} - 2$',
        hints: [
          'For a): Du ma bruke delvis integrasjon to ganger',
          'For b): Inverse trigonometriske funksjoner har hoy prioritet i LIATE',
          'For c): Bruk resultatet fra gjentatt delvis integrasjon',
        ],
      },
    },

    // ========== ANVENDELSER ==========
    {
      id: 'r2-3-2-text-10',
      type: 'text',
      content: `## Anvendelser av delvis integrasjon

Delvis integrasjon har mange praktiske anvendelser:

**1. Fysikk - Arbeid og energi:**
Arbeidet utfort av en variabel kraft $F(x)$ over en strekning er $W = \\int F(x) \\, dx$. Nar kraften er et produkt av funksjoner, bruker vi delvis integrasjon.

**2. Sannsynlighetsregning:**
Forventningsverdi og varians av kontinuerlige sannsynlighetsfordelinger krever ofte delvis integrasjon.

**3. Fourier-analyse:**
Beregning av Fourier-koeffisienter involverer integraler av typen $\\int f(x) \\sin(nx) \\, dx$ og $\\int f(x) \\cos(nx) \\, dx$.

**4. Differensiallikninger:**
Løsning av visse differensiallikninger krever delvis integrasjon.`,
    },

    // ========== EKSEMPEL: ANVENDELSE ==========
    {
      id: 'r2-3-2-ex-10',
      type: 'example',
      title: 'Eksempel 10: Gjennomsnittverdi',
      problem: `Finn gjennomsnittsverdien til funksjonen $f(x) = x \\cdot e^{-x}$ på intervallet $[0, 2]$.`,
      solution: `**Løsning:**

Gjennomsnittsverdien på $[a, b]$ er gitt ved:

$$\\bar{f} = \\frac{1}{b-a} \\int_a^b f(x) \\, dx$$

Vi ma forst beregne $\\int_0^2 x \\cdot e^{-x} \\, dx$.

Med delvis integrasjon ($u = x$, $v' = e^{-x}$):

$$\\int_0^2 x \\cdot e^{-x} \\, dx = \\Big[-x e^{-x}\\Big]_0^2 + \\int_0^2 e^{-x} \\, dx$$

$$= (-2e^{-2} - 0) + \\Big[-e^{-x}\\Big]_0^2$$

$$= -2e^{-2} + (-e^{-2} + 1)$$

$$= 1 - 3e^{-2}$$

Gjennomsnittsverdien blir:

$$\\bar{f} = \\frac{1}{2-0}(1 - 3e^{-2}) = \\frac{1 - 3e^{-2}}{2} \\approx 0{,}297$$`,
    },

    // ========== EKSAMENSOPPGAVER ==========
    {
      id: 'r2-3-2-text-11',
      type: 'text',
      content: `## Eksamensrelevante oppgaver

Pa eksamen i R2 kommer delvis integrasjon ofte i kombinasjon med andre emner. Typiske oppgaver:

- Finn areal avgrenset av grafer der integralet krever delvis integrasjon
- Beregn volum av omdreiningslegemer
- Finn gjennomsnittsverdier
- Los differensiallikninger
- Beregn forventningsverdi i sannsynlighetsregning`,
    },

    // ========== OPPGAVE: EKSAMENSTYPE ==========
    {
      id: 'r2-3-2-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-9',
        number: '3.2.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los disse eksamensrelevante oppgavene.',
        subTasks: [
          {
            label: 'a',
            task: 'Finn arealet av omradet avgrenset av $y = x \\cdot e^{-x}$, $x$-aksen, $x = 0$ og $x = 2$.',
            solution: 'Arealet er $\\int_0^2 x \\cdot e^{-x} \\, dx = 1 - 3e^{-2} \\approx 0{,}594$ (se eksempel 10)'
          },
          {
            label: 'b',
            task: 'Finn volumet nar omradet under $y = \\ln(x)$ fra $x = 1$ til $x = e$ roteres om $x$-aksen.',
            solution: 'Volumet er $V = \\pi \\int_1^e (\\ln x)^2 \\, dx$. Med delvis integrasjon to ganger: $\\int (\\ln x)^2 \\, dx = x((\\ln x)^2 - 2\\ln x + 2)$. Evaluert: $V = \\pi[x((\\ln x)^2 - 2\\ln x + 2)]_1^e = \\pi(e(1-2+2) - 1(0-0+2)) = \\pi(e - 2)$'
          },
          {
            label: 'c',
            task: 'Vis at $\\displaystyle\\int_0^{\\pi/2} \\sin^2(x) \\, dx = \\frac{\\pi}{4}$ ved delvis integrasjon.',
            solution: 'Skriv $\\sin^2(x) = \\sin(x) \\cdot \\sin(x)$. La $u = \\sin(x)$, $v\' = \\sin(x)$, sa $u\' = \\cos(x)$, $v = -\\cos(x)$. Da: $\\int \\sin^2 x \\, dx = -\\sin x \\cos x + \\int \\cos^2 x \\, dx = -\\sin x \\cos x + \\int (1-\\sin^2 x) \\, dx$. Dette gir $2\\int \\sin^2 x \\, dx = x - \\sin x \\cos x$, sa $\\int \\sin^2 x \\, dx = \\frac{x - \\sin x \\cos x}{2}$. Evaluert: $[\\frac{x - \\sin x \\cos x}{2}]_0^{\\pi/2} = \\frac{\\pi/2 - 0}{2} = \\frac{\\pi}{4}$'
          },
        ],
        solution: 'a) $1 - 3e^{-2} \\approx 0{,}594$, b) $\\pi(e - 2) \\approx 2{,}26$, c) Se fullstendig losning',
        hints: [
          'For a): Dette er et standard areal-integral',
          'For b): Volum ved rotasjon om $x$-aksen: $V = \\pi \\int_a^b (f(x))^2 \\, dx$',
          'For c): Du far et sirkular integral - los for $\\int \\sin^2 x \\, dx$',
        ],
      },
    },

    // ========== OPPGAVE: BLANDEDE OPPGAVER ==========
    {
      id: 'r2-3-2-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-3-2-task-10',
        number: '3.2.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Blandede oppgaver - velg riktig integrasjonsteknikk.',
        subTasks: [
          {
            label: 'a',
            task: '$\\displaystyle\\int x^2 \\cdot e^{x^3} \\, dx$',
            solution: 'Dette er IKKE delvis integrasjon! Bruk substitusjon $u = x^3$: $\\int x^2 \\cdot e^{x^3} \\, dx = \\frac{1}{3} e^{x^3} + C$'
          },
          {
            label: 'b',
            task: '$\\displaystyle\\int x \\cdot \\sqrt{1+x^2} \\, dx$',
            solution: 'Substitusjon $u = 1 + x^2$: $\\int x \\cdot \\sqrt{1+x^2} \\, dx = \\frac{1}{3}(1+x^2)^{3/2} + C$'
          },
          {
            label: 'c',
            task: '$\\displaystyle\\int x \\cdot \\ln(x^2) \\, dx$',
            solution: 'Skriv om: $\\ln(x^2) = 2\\ln(x)$. Bruk delvis integrasjon: $\\int 2x\\ln(x) \\, dx = x^2\\ln(x) - \\frac{x^2}{2} + C$'
          },
          {
            label: 'd',
            task: '$\\displaystyle\\int e^x \\cdot \\sin(e^x) \\, dx$',
            solution: 'Substitusjon $u = e^x$: $\\int e^x \\cdot \\sin(e^x) \\, dx = -\\cos(e^x) + C$'
          },
        ],
        solution: 'a) $\\frac{1}{3}e^{x^3} + C$, b) $\\frac{1}{3}(1+x^2)^{3/2} + C$, c) $x^2\\ln(x) - \\frac{x^2}{2} + C$, d) $-\\cos(e^x) + C$',
        hints: [
          'Ikke alt som ser ut som delvis integrasjon er det!',
          'Se etter om den deriverte av en indre funksjon star utenfor',
          'Forenkle forst hvis mulig (som i oppgave c)',
        ],
      },
    },

    // ========== NÅR SKAL MAN BRUKE HVA ==========
    {
      id: 'r2-3-2-note-1',
      type: 'note',
      content: `**Nar skal du bruke delvis integrasjon?**

Bruk delvis integrasjon nar:
1. Du har et produkt av to *ulike* funksjonstyper
2. Substitusjon ikke fungerer
3. En av funksjonene blir enklere ved derivasjon

Bruk substitusjon nar:
1. Du ser den deriverte av en indre funksjon
2. Integranden har formen $f(g(x)) \\cdot g'(x)$

**Tips:** Prov substitusjon forst - det er ofte raskere!`,
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-3-2-text-7',
      type: 'text',
      content: `## Oppsummering

**Formelen for delvis integrasjon:**
$$\\int u \\cdot v' \\, dx = u \\cdot v - \\int u' \\cdot v \\, dx$$

**LIATE-regelen for valg av $u$:**
1. Logaritmer
2. Inverse trigonometriske
3. Algebraiske (polynomer)
4. Trigonometriske
5. Eksponentialfunksjoner

**Spesielle tilfeller:**
- Polynomer av grad $n$ krever $n$ runder med delvis integrasjon
- Produkter av $e^x$ og trigonometriske funksjoner gir sirkular delvis integrasjon
- $\\int \\ln(x) \\, dx = x(\\ln(x) - 1) + C$ er et viktig resultat

**Husk:**
- Sjekk alltid svaret ved derivasjon
- Ikke glem integrasjonskonstanten $C$
- Vurder om substitusjon er enklere for du starter med delvis integrasjon`,
    },

    // ========== FORMELSAMLING ==========
    {
      id: 'r2-3-2-formula-1',
      type: 'formula',
      title: 'Viktige integraler fra delvis integrasjon',
      latex: `\\begin{aligned}
\\int x \\cdot e^{ax} \\, dx &= \\frac{e^{ax}}{a^2}(ax - 1) + C \\\\[0.5em]
\\int x \\cdot \\sin(ax) \\, dx &= \\frac{\\sin(ax) - ax\\cos(ax)}{a^2} + C \\\\[0.5em]
\\int x \\cdot \\cos(ax) \\, dx &= \\frac{\\cos(ax) + ax\\sin(ax)}{a^2} + C \\\\[0.5em]
\\int \\ln(x) \\, dx &= x(\\ln(x) - 1) + C \\\\[0.5em]
\\int x \\cdot \\ln(x) \\, dx &= \\frac{x^2}{4}(2\\ln(x) - 1) + C \\\\[0.5em]
\\int e^{ax} \\sin(bx) \\, dx &= \\frac{e^{ax}(a\\sin(bx) - b\\cos(bx))}{a^2 + b^2} + C \\\\[0.5em]
\\int e^{ax} \\cos(bx) \\, dx &= \\frac{e^{ax}(a\\cos(bx) + b\\sin(bx))}{a^2 + b^2} + C \\\\[0.5em]
\\int \\arctan(x) \\, dx &= x\\arctan(x) - \\frac{1}{2}\\ln(1+x^2) + C \\\\[0.5em]
\\int \\arcsin(x) \\, dx &= x\\arcsin(x) + \\sqrt{1-x^2} + C
\\end{aligned}`,
      description: 'Disse resultatene er nyttige a huske og kan brukes direkte i beregninger.',
    },

    // ========== FORMELSAMLING 2 ==========
    {
      id: 'r2-3-2-formula-2',
      type: 'formula',
      title: 'Generelle formler for polynomer',
      latex: `\\begin{aligned}
\\int x^n \\cdot e^x \\, dx &= e^x \\sum_{k=0}^{n} (-1)^{n-k} \\frac{n!}{k!} x^k + C \\\\[1em]
\\text{For } n = 1: \\quad &e^x(x - 1) + C \\\\
\\text{For } n = 2: \\quad &e^x(x^2 - 2x + 2) + C \\\\
\\text{For } n = 3: \\quad &e^x(x^3 - 3x^2 + 6x - 6) + C
\\end{aligned}`,
      description: 'Legg merke til monsteret: koeffisientene er fakulteter med vekslende fortegn.',
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_3_3: TextbookChapter = {
  id: 'r2-3-3',
  courseId: 'r2',
  chapterNumber: '3.3',
  title: 'Delbrøkoppspalting',
  description: 'Teknikk for å skrive rasjonale funksjoner som summer av enklere brøker.',
  estimatedMinutes: 90,
  competenceGoals: [
    'forstå prinsippet bak delbrøkoppspalting',
    'spalte rasjonale uttrykk med ulike lineære faktorer',
    'spalte rasjonale uttrykk med gjentatte lineære faktorer',
    'spalte rasjonale uttrykk med irredusible kvadratiske faktorer',
    'bruke innsettingsmetoden og koeffisientsammenlikning',
    'integrere funksjoner ved hjelp av delbrøkoppspalting',
    'anvende delbrøkoppspalting på bestemte integraler',
  ],
  content: [
    // ============================================================================
    // Introduksjon
    // ============================================================================
    {
      id: 'r2-3-3-text-1',
      type: 'text',
      content: `## Hva er delbrøkoppspalting?

Når vi skal integrere rasjonale funksjoner, er det ofte vanskelig å finne en antiderivert direkte. For eksempel er integralet

$$\\int \\frac{3x + 5}{x^2 - x - 2} \\, dx$$

ikke umiddelbart enkelt å løse. Men hvis vi kan skrive brøken som en sum av enklere brøker:

$$\\frac{3x + 5}{x^2 - x - 2} = \\frac{A}{x - 2} + \\frac{B}{x + 1}$$

blir integrasjonen mye enklere, fordi vi vet at $\\int \\frac{1}{x - a} \\, dx = \\ln|x - a| + C$.

**Delbrøkoppspalting** er teknikken for å skrive en rasjonal funksjon som en sum av enklere brøker. Dette er et viktig verktøy i integrasjon, men også nyttig i andre sammenhenger som differensiallikninger og Laplace-transformasjoner.`,
    },

    // ============================================================================
    // Definisjon: Rasjonal funksjon
    // ============================================================================
    {
      id: 'r2-3-3-def-1',
      type: 'definition',
      title: 'Rasjonal funksjon',
      content: `En **rasjonal funksjon** er en funksjon på formen

$$f(x) = \\frac{P(x)}{Q(x)}$$

der $P(x)$ og $Q(x)$ er polynomer og $Q(x) \\neq 0$.

**Eksempler:**
- $\\frac{x + 1}{x^2 - 4}$
- $\\frac{2x^2 + 3x - 1}{x^3 + x}$
- $\\frac{5}{(x-1)(x+2)}$

En rasjonal funksjon er **ekte** dersom graden til telleren er mindre enn graden til nevneren.`,
    },
    {
      id: 'r2-3-3-ex-1',
      type: 'example',
      title: 'Eksempel 1: Ekte og uekte brøker',
      problem: 'Avgjør om følgende rasjonale funksjoner er ekte:\n\na) $\\frac{x + 3}{x^2 + 1}$\n\nb) $\\frac{x^3 + 2x}{x^2 - 1}$',
      solution: `a) Telleren har grad 1, nevneren har grad 2. Siden $1 < 2$, er brøken **ekte**.

b) Telleren har grad 3, nevneren har grad 2. Siden $3 \\geq 2$, er brøken **uekte**.

Før vi kan bruke delbrøkoppspalting på uekte brøker, må vi først utføre polynomdivisjon.`,
    },
    {
      id: 'r2-3-3-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-1',
        number: '3.3.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Avgjør om følgende rasjonale funksjoner er ekte eller uekte:\n\na) $\\frac{2x - 1}{x^3 + x^2}$\n\nb) $\\frac{x^4}{x^2 + 1}$\n\nc) $\\frac{x^2 + 1}{x^2 - 4}$',
        solution: 'a) Ekte (grad 1 < grad 3)\n\nb) Uekte (grad 4 > grad 2)\n\nc) Uekte (grad 2 = grad 2, siden graden må være *mindre* for å være ekte)',
        hints: [
          'Sammenlign graden til telleren med graden til nevneren.',
          'En brøk er ekte kun hvis tellerens grad er strengt mindre enn nevnerens grad.',
        ],
      },
    },

    // ============================================================================
    // Teorem: Delbrøkoppspalting med ulike lineære faktorer
    // ============================================================================
    {
      id: 'r2-3-3-text-2',
      type: 'text',
      content: `## Enkle lineære faktorer

Det enkleste tilfellet av delbrøkoppspalting er når nevneren kan faktoriseres i ulike lineære faktorer. Da kan vi skrive brøken som en sum av brøker med disse faktorene i nevneren.`,
    },
    {
      id: 'r2-3-3-thm-1',
      type: 'theorem',
      title: 'Delbrøkoppspalting med ulike lineære faktorer',
      content: `Dersom $Q(x) = (x - r_1)(x - r_2) \\cdots (x - r_n)$ der alle $r_i$ er forskjellige, kan vi skrive

$$\\frac{P(x)}{Q(x)} = \\frac{A_1}{x - r_1} + \\frac{A_2}{x - r_2} + \\cdots + \\frac{A_n}{x - r_n}$$

der $A_1, A_2, \\ldots, A_n$ er konstanter som må bestemmes.

**Forutsetning:** Brøken må være ekte, dvs. grad$(P) <$ grad$(Q)$.`,
    },
    {
      id: 'r2-3-3-ex-2',
      type: 'example',
      title: 'Eksempel 2: To ulike lineære faktorer',
      problem: 'Utfør delbrøkoppspalting på $\\frac{5x - 3}{(x - 1)(x + 2)}$.',
      solution: `Vi setter opp ansatsen:
$$\\frac{5x - 3}{(x - 1)(x + 2)} = \\frac{A}{x - 1} + \\frac{B}{x + 2}$$

Multipliserer begge sider med $(x - 1)(x + 2)$:
$$5x - 3 = A(x + 2) + B(x - 1)$$

**Innsettingsmetoden:**

Sett $x = 1$:
$$5(1) - 3 = A(1 + 2) + B(0)$$
$$2 = 3A \\Rightarrow A = \\frac{2}{3}$$

Sett $x = -2$:
$$5(-2) - 3 = A(0) + B(-2 - 1)$$
$$-13 = -3B \\Rightarrow B = \\frac{13}{3}$$

**Svar:**
$$\\frac{5x - 3}{(x - 1)(x + 2)} = \\frac{2/3}{x - 1} + \\frac{13/3}{x + 2} = \\frac{2}{3(x - 1)} + \\frac{13}{3(x + 2)}$$`,
    },
    {
      id: 'r2-3-3-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-2',
        number: '3.3.2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Utfør delbrøkoppspalting på $\\frac{7x + 1}{(x - 3)(x + 1)}$.',
        solution: '$\\frac{7x + 1}{(x - 3)(x + 1)} = \\frac{A}{x - 3} + \\frac{B}{x + 1}$\n\nMultipliserer med $(x-3)(x+1)$: $7x + 1 = A(x + 1) + B(x - 3)$\n\n$x = 3$: $22 = 4A \\Rightarrow A = \\frac{11}{2}$\n\n$x = -1$: $-6 = -4B \\Rightarrow B = \\frac{3}{2}$\n\nSvar: $\\frac{11}{2(x - 3)} + \\frac{3}{2(x + 1)}$',
        hints: [
          'Sett opp ansatsen med en brøk for hver faktor i nevneren.',
          'Multipliser begge sider med fellesnevneren for å fjerne brøkene.',
          'Sett inn verdier av x som nuller ut én faktor om gangen.',
        ],
      },
    },

    // ============================================================================
    // Eksempel med tre faktorer
    // ============================================================================
    {
      id: 'r2-3-3-ex-3',
      type: 'example',
      title: 'Eksempel 3: Tre ulike lineære faktorer',
      problem: 'Utfør delbrøkoppspalting på $\\frac{x^2 + 2x - 1}{x(x - 1)(x + 1)}$.',
      solution: `Vi setter opp ansatsen:
$$\\frac{x^2 + 2x - 1}{x(x - 1)(x + 1)} = \\frac{A}{x} + \\frac{B}{x - 1} + \\frac{C}{x + 1}$$

Multipliserer med $x(x - 1)(x + 1)$:
$$x^2 + 2x - 1 = A(x - 1)(x + 1) + Bx(x + 1) + Cx(x - 1)$$

**Innsettingsmetoden:**

$x = 0$: $-1 = A(-1)(1) = -A \\Rightarrow A = 1$

$x = 1$: $1 + 2 - 1 = B(1)(2) = 2B \\Rightarrow B = 1$

$x = -1$: $1 - 2 - 1 = C(-1)(-2) = 2C \\Rightarrow C = -1$

**Svar:**
$$\\frac{x^2 + 2x - 1}{x(x - 1)(x + 1)} = \\frac{1}{x} + \\frac{1}{x - 1} - \\frac{1}{x + 1}$$`,
    },
    {
      id: 'r2-3-3-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-3',
        number: '3.3.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Utfør delbrøkoppspalting på $\\frac{2x^2 - x + 4}{x(x - 2)(x + 2)}$.',
        solution: 'Ansats: $\\frac{A}{x} + \\frac{B}{x - 2} + \\frac{C}{x + 2}$\n\n$2x^2 - x + 4 = A(x-2)(x+2) + Bx(x+2) + Cx(x-2)$\n\n$x = 0$: $4 = A(-4) \\Rightarrow A = -1$\n\n$x = 2$: $8 - 2 + 4 = B(2)(4) \\Rightarrow 10 = 8B \\Rightarrow B = \\frac{5}{4}$\n\n$x = -2$: $8 + 2 + 4 = C(-2)(-4) \\Rightarrow 14 = 8C \\Rightarrow C = \\frac{7}{4}$\n\nSvar: $-\\frac{1}{x} + \\frac{5}{4(x - 2)} + \\frac{7}{4(x + 2)}$',
        hints: [
          'Bruk samme fremgangsmåte som i eksempelet med tre faktorer.',
          'Sett inn x = 0, x = 2 og x = -2 for å finne A, B og C.',
        ],
      },
    },

    // ============================================================================
    // Gjentatte lineære faktorer
    // ============================================================================
    {
      id: 'r2-3-3-text-3',
      type: 'text',
      content: `## Gjentatte lineære faktorer

Når nevneren har en faktor som gjentas flere ganger, må vi inkludere en delbrøk for hver potens av denne faktoren.`,
    },
    {
      id: 'r2-3-3-thm-2',
      type: 'theorem',
      title: 'Delbrøkoppspalting med gjentatte lineære faktorer',
      content: `Dersom nevneren inneholder faktoren $(x - r)^k$, må vi inkludere følgende ledd i delbrøkoppspaltingen:

$$\\frac{A_1}{x - r} + \\frac{A_2}{(x - r)^2} + \\frac{A_3}{(x - r)^3} + \\cdots + \\frac{A_k}{(x - r)^k}$$

**Eksempel:** For $\\frac{P(x)}{(x - 1)^2(x + 3)}$ bruker vi ansatsen:

$$\\frac{A}{x - 1} + \\frac{B}{(x - 1)^2} + \\frac{C}{x + 3}$$`,
    },
    {
      id: 'r2-3-3-ex-4',
      type: 'example',
      title: 'Eksempel 4: Gjentatt lineær faktor',
      problem: 'Utfør delbrøkoppspalting på $\\frac{3x + 7}{(x + 1)^2}$.',
      solution: `Vi setter opp ansatsen:
$$\\frac{3x + 7}{(x + 1)^2} = \\frac{A}{x + 1} + \\frac{B}{(x + 1)^2}$$

Multipliserer med $(x + 1)^2$:
$$3x + 7 = A(x + 1) + B$$

**Metode 1: Innsetting**

$x = -1$: $3(-1) + 7 = B \\Rightarrow B = 4$

**Metode 2: Koeffisientsammenlikning**

$3x + 7 = Ax + A + B$

Sammenligner koeffisienter:
- $x$-ledd: $3 = A$
- Konstantledd: $7 = A + B = 3 + B \\Rightarrow B = 4$

**Svar:**
$$\\frac{3x + 7}{(x + 1)^2} = \\frac{3}{x + 1} + \\frac{4}{(x + 1)^2}$$`,
    },
    {
      id: 'r2-3-3-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-4',
        number: '3.3.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Utfør delbrøkoppspalting på $\\frac{2x - 5}{(x - 2)^2}$.',
        solution: 'Ansats: $\\frac{A}{x - 2} + \\frac{B}{(x - 2)^2}$\n\n$2x - 5 = A(x - 2) + B$\n\n$x = 2$: $4 - 5 = B \\Rightarrow B = -1$\n\nKoeffisientsammenlikning ($2x - 5 = Ax - 2A + B$):\n- $x$-ledd: $A = 2$\n- Konstantledd: $-5 = -2A + B = -4 + B \\Rightarrow B = -1$ (bekrefter)\n\nSvar: $\\frac{2}{x - 2} - \\frac{1}{(x - 2)^2}$',
        hints: [
          'Siden faktoren $(x-2)$ er opphøyd i andre, trenger du to ledd.',
          'Bruk innsetting for å finne B, deretter koeffisientsammenlikning for A.',
        ],
      },
    },

    // ============================================================================
    // Mer komplisert gjentatt faktor
    // ============================================================================
    {
      id: 'r2-3-3-ex-5',
      type: 'example',
      title: 'Eksempel 5: Kombinasjon av enkel og gjentatt faktor',
      problem: 'Utfør delbrøkoppspalting på $\\frac{x^2 + 3x + 2}{(x - 1)(x + 2)^2}$.',
      solution: `Vi setter opp ansatsen:
$$\\frac{x^2 + 3x + 2}{(x - 1)(x + 2)^2} = \\frac{A}{x - 1} + \\frac{B}{x + 2} + \\frac{C}{(x + 2)^2}$$

Multipliserer med $(x - 1)(x + 2)^2$:
$$x^2 + 3x + 2 = A(x + 2)^2 + B(x - 1)(x + 2) + C(x - 1)$$

**Innsettingsmetoden:**

$x = 1$: $1 + 3 + 2 = A(3)^2 \\Rightarrow 6 = 9A \\Rightarrow A = \\frac{2}{3}$

$x = -2$: $4 - 6 + 2 = C(-3) \\Rightarrow 0 = -3C \\Rightarrow C = 0$

**Koeffisientsammenlikning** for å finne $B$:

Utvider høyre side og sammenligner $x^2$-koeffisienter:
$$x^2: \\quad 1 = A + B$$
$$1 = \\frac{2}{3} + B \\Rightarrow B = \\frac{1}{3}$$

**Svar:**
$$\\frac{x^2 + 3x + 2}{(x - 1)(x + 2)^2} = \\frac{2}{3(x - 1)} + \\frac{1}{3(x + 2)}$$

(Legg merke til at leddet $\\frac{C}{(x+2)^2}$ forsvinner siden $C = 0$.)`,
    },
    {
      id: 'r2-3-3-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-5',
        number: '3.3.5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfør delbrøkoppspalting på $\\frac{5x^2 - 3x + 2}{x(x - 1)^2}$.',
        solution: 'Ansats: $\\frac{A}{x} + \\frac{B}{x - 1} + \\frac{C}{(x - 1)^2}$\n\n$5x^2 - 3x + 2 = A(x - 1)^2 + Bx(x - 1) + Cx$\n\n$x = 0$: $2 = A \\cdot 1 \\Rightarrow A = 2$\n\n$x = 1$: $5 - 3 + 2 = C \\Rightarrow C = 4$\n\nKoeffisientsammenlikning ($x^2$-ledd): $5 = A + B \\Rightarrow B = 3$\n\nSvar: $\\frac{2}{x} + \\frac{3}{x - 1} + \\frac{4}{(x - 1)^2}$',
        hints: [
          'Bruk ansatsen med tre ledd for den gjentatte faktoren $(x-1)^2$.',
          'Sett inn x = 0 og x = 1 for å finne A og C.',
          'Bruk koeffisientsammenlikning av $x^2$-leddene for å finne B.',
        ],
      },
    },

    // ============================================================================
    // Tredje potens - gjentatt faktor
    // ============================================================================
    {
      id: 'r2-3-3-ex-5b',
      type: 'example',
      title: 'Eksempel 5b: Faktor opphøyd i tredje',
      problem: 'Utfør delbrøkoppspalting på $\\frac{x^2 + 1}{(x - 1)^3}$.',
      solution: `Vi setter opp ansatsen med tre ledd:
$$\\frac{x^2 + 1}{(x - 1)^3} = \\frac{A}{x - 1} + \\frac{B}{(x - 1)^2} + \\frac{C}{(x - 1)^3}$$

Multipliserer med $(x - 1)^3$:
$$x^2 + 1 = A(x - 1)^2 + B(x - 1) + C$$

**Innsettingsmetoden:**

$x = 1$: $1 + 1 = C \\Rightarrow C = 2$

**Koeffisientsammenlikning:**

Utvider: $x^2 + 1 = A(x^2 - 2x + 1) + B(x - 1) + C$
$= Ax^2 - 2Ax + A + Bx - B + C$
$= Ax^2 + (-2A + B)x + (A - B + C)$

Sammenligner:
- $x^2$: $A = 1$
- $x$: $-2A + B = 0 \\Rightarrow B = 2$
- Konstantledd: $A - B + C = 1 - 2 + 2 = 1$ \\checkmark

**Svar:**
$$\\frac{x^2 + 1}{(x - 1)^3} = \\frac{1}{x - 1} + \\frac{2}{(x - 1)^2} + \\frac{2}{(x - 1)^3}$$`,
    },
    {
      id: 'r2-3-3-exercise-5b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-5b',
        number: '3.3.5b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfør delbrøkoppspalting på $\\frac{3x^2 - 2x + 5}{(x + 1)^3}$.',
        solution: 'Ansats: $\\frac{A}{x + 1} + \\frac{B}{(x + 1)^2} + \\frac{C}{(x + 1)^3}$\n\n$3x^2 - 2x + 5 = A(x + 1)^2 + B(x + 1) + C$\n\n$x = -1$: $3 + 2 + 5 = C \\Rightarrow C = 10$\n\nUtvider: $A(x^2 + 2x + 1) + B(x + 1) + C$\n$= Ax^2 + (2A + B)x + (A + B + C)$\n\nKoeffisientsammenlikning:\n- $x^2$: $A = 3$\n- $x$: $2A + B = -2 \\Rightarrow 6 + B = -2 \\Rightarrow B = -8$\n\nSvar: $\\frac{3}{x + 1} - \\frac{8}{(x + 1)^2} + \\frac{10}{(x + 1)^3}$',
        hints: [
          'Med en faktor opphøyd i tredje trenger du tre delbrøker.',
          'Innsetting gir deg C direkte.',
          'Bruk koeffisientsammenlikning for A og B.',
        ],
      },
    },

    // ============================================================================
    // Koeffisientsammenlikning
    // ============================================================================
    {
      id: 'r2-3-3-text-4',
      type: 'text',
      content: `## Koeffisientsammenlikning

Koeffisientsammenlikning er en alternativ metode til innsetting. Den er spesielt nyttig når innsettingsmetoden ikke gir alle koeffisientene direkte.`,
    },
    {
      id: 'r2-3-3-def-2',
      type: 'definition',
      title: 'Koeffisientsammenlikning',
      content: `**Koeffisientsammenlikning** går ut på å sette koeffisientene foran like potenser av $x$ på venstre og høyre side lik hverandre.

Hvis $a_2x^2 + a_1x + a_0 = b_2x^2 + b_1x + b_0$ for alle $x$, da må:
- $a_2 = b_2$ (koeffisientene foran $x^2$)
- $a_1 = b_1$ (koeffisientene foran $x$)
- $a_0 = b_0$ (konstantleddene)`,
    },
    {
      id: 'r2-3-3-ex-6',
      type: 'example',
      title: 'Eksempel 6: Ren koeffisientsammenlikning',
      problem: 'Utfør delbrøkoppspalting på $\\frac{4x - 1}{(x - 1)(x - 2)}$ ved koeffisientsammenlikning.',
      solution: `Vi setter opp ansatsen:
$$\\frac{4x - 1}{(x - 1)(x - 2)} = \\frac{A}{x - 1} + \\frac{B}{x - 2}$$

Multipliserer med $(x - 1)(x - 2)$:
$$4x - 1 = A(x - 2) + B(x - 1)$$
$$4x - 1 = Ax - 2A + Bx - B$$
$$4x - 1 = (A + B)x + (-2A - B)$$

**Koeffisientsammenlikning:**

$x$-ledd: $A + B = 4$

Konstantledd: $-2A - B = -1$

**Løser likningssystemet:**

Fra første likning: $B = 4 - A$

Setter inn i andre: $-2A - (4 - A) = -1$
$$-2A - 4 + A = -1$$
$$-A = 3 \\Rightarrow A = -3$$
$$B = 4 - (-3) = 7$$

**Svar:**
$$\\frac{4x - 1}{(x - 1)(x - 2)} = \\frac{-3}{x - 1} + \\frac{7}{x - 2}$$`,
    },
    {
      id: 'r2-3-3-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-6',
        number: '3.3.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Utfør delbrøkoppspalting på $\\frac{6x + 5}{(x + 1)(x + 3)}$ ved koeffisientsammenlikning.',
        solution: 'Ansats: $\\frac{A}{x + 1} + \\frac{B}{x + 3}$\n\n$6x + 5 = A(x + 3) + B(x + 1)$\n$6x + 5 = (A + B)x + (3A + B)$\n\nLikningssystem:\n$A + B = 6$\n$3A + B = 5$\n\nTrekker fra: $2A = -1 \\Rightarrow A = -\\frac{1}{2}$\n$B = 6 - A = \\frac{13}{2}$\n\nSvar: $-\\frac{1}{2(x + 1)} + \\frac{13}{2(x + 3)}$',
        hints: [
          'Utvid høyre side og samle ledd med like potenser av x.',
          'Sett opp et likningssystem med koeffisientene.',
        ],
      },
    },

    // ============================================================================
    // Irredusible kvadratiske faktorer
    // ============================================================================
    {
      id: 'r2-3-3-text-4b',
      type: 'text',
      content: `## Irredusible kvadratiske faktorer

Noen ganger inneholder nevneren andregradsuttrykk som ikke kan faktoriseres over de reelle tallene. Slike faktorer kalles **irredusible kvadratiske faktorer**.

Et andregradsuttrykk $ax^2 + bx + c$ er irredusibelt hvis diskriminanten $b^2 - 4ac < 0$.`,
    },
    {
      id: 'r2-3-3-thm-2b',
      type: 'theorem',
      title: 'Delbrøkoppspalting med irredusible kvadratiske faktorer',
      content: `Dersom nevneren inneholder en irredusibel kvadratisk faktor $(ax^2 + bx + c)$, må vi inkludere et ledd på formen:

$$\\frac{Ax + B}{ax^2 + bx + c}$$

**Merk:** Telleren har nå grad 1 (ikke bare en konstant).

**Eksempel:** For $\\frac{P(x)}{(x - 1)(x^2 + 1)}$ bruker vi ansatsen:

$$\\frac{A}{x - 1} + \\frac{Bx + C}{x^2 + 1}$$`,
    },
    {
      id: 'r2-3-3-ex-6b',
      type: 'example',
      title: 'Eksempel 6b: Irredusibel kvadratisk faktor',
      problem: 'Utfør delbrøkoppspalting på $\\frac{2x^2 + x + 3}{(x - 1)(x^2 + 1)}$.',
      solution: `Vi sjekker at $x^2 + 1$ er irredusibel: diskriminanten er $0 - 4 = -4 < 0$ \\checkmark

Ansatsen blir:
$$\\frac{2x^2 + x + 3}{(x - 1)(x^2 + 1)} = \\frac{A}{x - 1} + \\frac{Bx + C}{x^2 + 1}$$

Multipliserer med $(x - 1)(x^2 + 1)$:
$$2x^2 + x + 3 = A(x^2 + 1) + (Bx + C)(x - 1)$$

**Innsetting:** $x = 1$:
$$2 + 1 + 3 = A(2) \\Rightarrow 6 = 2A \\Rightarrow A = 3$$

**Koeffisientsammenlikning:**
Utvider høyre side:
$$A(x^2 + 1) + (Bx + C)(x - 1) = Ax^2 + A + Bx^2 - Bx + Cx - C$$
$$= (A + B)x^2 + (-B + C)x + (A - C)$$

Sammenligner med $2x^2 + x + 3$:
- $x^2$: $A + B = 2 \\Rightarrow 3 + B = 2 \\Rightarrow B = -1$
- $x$: $-B + C = 1 \\Rightarrow 1 + C = 1 \\Rightarrow C = 0$
- Konstantledd: $A - C = 3 - 0 = 3$ \\checkmark

**Svar:**
$$\\frac{2x^2 + x + 3}{(x - 1)(x^2 + 1)} = \\frac{3}{x - 1} + \\frac{-x}{x^2 + 1} = \\frac{3}{x - 1} - \\frac{x}{x^2 + 1}$$`,
    },
    {
      id: 'r2-3-3-exercise-6b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-6b',
        number: '3.3.6b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfør delbrøkoppspalting på $\\frac{x^2 + 2x + 5}{(x + 1)(x^2 + 4)}$.',
        solution: 'Ansats: $\\frac{A}{x + 1} + \\frac{Bx + C}{x^2 + 4}$\n\n$x^2 + 2x + 5 = A(x^2 + 4) + (Bx + C)(x + 1)$\n\n$x = -1$: $1 - 2 + 5 = A(5) \\Rightarrow A = \\frac{4}{5}$\n\nUtvider: $Ax^2 + 4A + Bx^2 + Bx + Cx + C = (A + B)x^2 + (B + C)x + (4A + C)$\n\nKoeffisientsammenlikning:\n- $x^2$: $A + B = 1 \\Rightarrow B = \\frac{1}{5}$\n- $x$: $B + C = 2 \\Rightarrow C = \\frac{9}{5}$\n\nSvar: $\\frac{4}{5(x + 1)} + \\frac{x + 9}{5(x^2 + 4)}$',
        hints: [
          'Sjekk at $x^2 + 4$ er irredusibel (diskriminant $< 0$).',
          'Telleren over den kvadratiske faktoren må være $Bx + C$.',
          'Bruk innsetting for A og koeffisientsammenlikning for B og C.',
        ],
      },
    },

    // ============================================================================
    // Integrasjon av delbrøker
    // ============================================================================
    {
      id: 'r2-3-3-text-5',
      type: 'text',
      content: `## Integrasjon av delbrøker

Hovedårsaken til at delbrøkoppspalting er så nyttig, er at det forenkler integrasjon. De enklere brøkene har kjente integraler.`,
    },
    {
      id: 'r2-3-3-thm-3',
      type: 'theorem',
      title: 'Integrasjon av delbrøker',
      content: `**Enkle lineære faktorer:**
$$\\int \\frac{A}{x - r} \\, dx = A \\ln|x - r| + C$$

**Gjentatte lineære faktorer ($n > 1$):**
$$\\int \\frac{A}{(x - r)^n} \\, dx = \\frac{A}{-(n-1)(x - r)^{n-1}} + C = \\frac{-A}{(n-1)(x - r)^{n-1}} + C$$

**Spesialtilfelle ($n = 2$):**
$$\\int \\frac{A}{(x - r)^2} \\, dx = \\frac{-A}{x - r} + C$$

**Irredusible kvadratiske faktorer:**
$$\\int \\frac{1}{x^2 + a^2} \\, dx = \\frac{1}{a} \\arctan\\left(\\frac{x}{a}\\right) + C$$

$$\\int \\frac{x}{x^2 + a^2} \\, dx = \\frac{1}{2} \\ln(x^2 + a^2) + C$$`,
    },
    {
      id: 'r2-3-3-ex-7',
      type: 'example',
      title: 'Eksempel 7: Integrasjon etter delbrøkoppspalting',
      problem: 'Beregn $\\int \\frac{5x - 3}{(x - 1)(x + 2)} \\, dx$.',
      solution: `Fra eksempel 2 fant vi:
$$\\frac{5x - 3}{(x - 1)(x + 2)} = \\frac{2/3}{x - 1} + \\frac{13/3}{x + 2}$$

Nå kan vi integrere:
$$\\int \\frac{5x - 3}{(x - 1)(x + 2)} \\, dx = \\int \\frac{2/3}{x - 1} \\, dx + \\int \\frac{13/3}{x + 2} \\, dx$$

$$= \\frac{2}{3} \\ln|x - 1| + \\frac{13}{3} \\ln|x + 2| + C$$`,
    },
    {
      id: 'r2-3-3-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-7',
        number: '3.3.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn $\\int \\frac{7x + 1}{(x - 3)(x + 1)} \\, dx$.',
        solution: 'Fra oppgave 3.3.2: $\\frac{7x + 1}{(x - 3)(x + 1)} = \\frac{11/2}{x - 3} + \\frac{3/2}{x + 1}$\n\n$\\int \\frac{7x + 1}{(x - 3)(x + 1)} \\, dx = \\frac{11}{2} \\ln|x - 3| + \\frac{3}{2} \\ln|x + 1| + C$',
        hints: [
          'Bruk resultatet fra oppgave 3.3.2 eller utfør delbrøkoppspaltingen på nytt.',
          'Integrer hver delbrøk for seg.',
        ],
      },
    },
    {
      id: 'r2-3-3-ex-8',
      type: 'example',
      title: 'Eksempel 8: Integrasjon med gjentatt faktor',
      problem: 'Beregn $\\int \\frac{3x + 7}{(x + 1)^2} \\, dx$.',
      solution: `Fra eksempel 4:
$$\\frac{3x + 7}{(x + 1)^2} = \\frac{3}{x + 1} + \\frac{4}{(x + 1)^2}$$

Integrerer:
$$\\int \\frac{3}{x + 1} \\, dx = 3 \\ln|x + 1| + C_1$$

$$\\int \\frac{4}{(x + 1)^2} \\, dx = \\frac{-4}{x + 1} + C_2$$

**Svar:**
$$\\int \\frac{3x + 7}{(x + 1)^2} \\, dx = 3 \\ln|x + 1| - \\frac{4}{x + 1} + C$$`,
    },
    {
      id: 'r2-3-3-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-8',
        number: '3.3.8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beregn $\\int \\frac{2x - 5}{(x - 2)^2} \\, dx$.',
        solution: 'Fra oppgave 3.3.4: $\\frac{2x - 5}{(x - 2)^2} = \\frac{2}{x - 2} - \\frac{1}{(x - 2)^2}$\n\n$\\int \\frac{2}{x - 2} \\, dx = 2 \\ln|x - 2|$\n\n$\\int \\frac{-1}{(x - 2)^2} \\, dx = \\frac{1}{x - 2}$\n\nSvar: $2 \\ln|x - 2| + \\frac{1}{x - 2} + C$',
        hints: [
          'Bruk resultatet fra oppgave 3.3.4.',
          'Husk at $\\int \\frac{1}{(x-a)^2} dx = -\\frac{1}{x-a} + C$.',
        ],
      },
    },

    // ============================================================================
    // Integrasjon med irredusible faktorer
    // ============================================================================
    {
      id: 'r2-3-3-ex-8b',
      type: 'example',
      title: 'Eksempel 8b: Integrasjon med irredusibel faktor',
      problem: 'Beregn $\\int \\frac{2x^2 + x + 3}{(x - 1)(x^2 + 1)} \\, dx$.',
      solution: `Fra eksempel 6b fant vi:
$$\\frac{2x^2 + x + 3}{(x - 1)(x^2 + 1)} = \\frac{3}{x - 1} - \\frac{x}{x^2 + 1}$$

Nå integrerer vi hver del:

$$\\int \\frac{3}{x - 1} \\, dx = 3 \\ln|x - 1|$$

$$\\int \\frac{x}{x^2 + 1} \\, dx = \\frac{1}{2} \\ln(x^2 + 1)$$

(Bruker substitusjon $u = x^2 + 1$, $du = 2x \\, dx$)

**Svar:**
$$\\int \\frac{2x^2 + x + 3}{(x - 1)(x^2 + 1)} \\, dx = 3 \\ln|x - 1| - \\frac{1}{2} \\ln(x^2 + 1) + C$$`,
    },
    {
      id: 'r2-3-3-ex-8c',
      type: 'example',
      title: 'Eksempel 8c: Integrasjon med arctan',
      problem: 'Beregn $\\int \\frac{1}{(x + 1)(x^2 + 4)} \\, dx$.',
      solution: `**Delbrøkoppspalting:**
$$\\frac{1}{(x + 1)(x^2 + 4)} = \\frac{A}{x + 1} + \\frac{Bx + C}{x^2 + 4}$$

Multipliserer med $(x + 1)(x^2 + 4)$:
$$1 = A(x^2 + 4) + (Bx + C)(x + 1)$$

$x = -1$: $1 = A(5) \\Rightarrow A = \\frac{1}{5}$

Koeffisientsammenlikning:
- $x^2$: $A + B = 0 \\Rightarrow B = -\\frac{1}{5}$
- Konstantledd: $4A + C = 1 \\Rightarrow C = 1 - \\frac{4}{5} = \\frac{1}{5}$

Så:
$$\\frac{1}{(x + 1)(x^2 + 4)} = \\frac{1}{5(x + 1)} + \\frac{-x/5 + 1/5}{x^2 + 4}$$

**Integrasjon:**
$$\\int \\frac{1}{5(x + 1)} \\, dx = \\frac{1}{5} \\ln|x + 1|$$

$$\\int \\frac{-x/5}{x^2 + 4} \\, dx = -\\frac{1}{10} \\ln(x^2 + 4)$$

$$\\int \\frac{1/5}{x^2 + 4} \\, dx = \\frac{1}{5} \\cdot \\frac{1}{2} \\arctan\\left(\\frac{x}{2}\\right) = \\frac{1}{10} \\arctan\\left(\\frac{x}{2}\\right)$$

**Svar:**
$$\\int \\frac{1}{(x + 1)(x^2 + 4)} \\, dx = \\frac{1}{5} \\ln|x + 1| - \\frac{1}{10} \\ln(x^2 + 4) + \\frac{1}{10} \\arctan\\left(\\frac{x}{2}\\right) + C$$`,
    },
    {
      id: 'r2-3-3-exercise-8b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-8b',
        number: '3.3.8b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int \\frac{x + 5}{(x - 2)(x^2 + 1)} \\, dx$.',
        solution: 'Delbrøkoppspalting: $\\frac{x + 5}{(x - 2)(x^2 + 1)} = \\frac{A}{x - 2} + \\frac{Bx + C}{x^2 + 1}$\n\n$x = 2$: $7 = 5A \\Rightarrow A = \\frac{7}{5}$\n\nKoeffisientsammenlikning:\n- $x^2$: $A + B = 0 \\Rightarrow B = -\\frac{7}{5}$\n- Konstantledd: $A + C(-2) = 5 \\Rightarrow \\frac{7}{5} - 2C = 5 \\Rightarrow C = -\\frac{9}{5}$\n\nIntegrasjon:\n$\\frac{7}{5} \\ln|x - 2| - \\frac{7}{10} \\ln(x^2 + 1) - \\frac{9}{5} \\arctan(x) + C$',
        hints: [
          'Skill mellom $\\frac{x}{x^2+1}$ (gir ln) og $\\frac{1}{x^2+1}$ (gir arctan).',
          'Husk at $\\int \\frac{1}{x^2+1} dx = \\arctan(x) + C$.',
        ],
      },
    },

    // ============================================================================
    // Kombinasjon med polynomdivisjon
    // ============================================================================
    {
      id: 'r2-3-3-text-6',
      type: 'text',
      content: `## Kombinasjon med polynomdivisjon

Når den rasjonale funksjonen er uekte (tellerens grad $\\geq$ nevnerens grad), må vi først utføre polynomdivisjon for å skrive funksjonen som et polynom pluss en ekte brøk.`,
    },
    {
      id: 'r2-3-3-thm-4',
      type: 'theorem',
      title: 'Polynomdivisjon før delbrøkoppspalting',
      content: `For en uekte brøk $\\frac{P(x)}{Q(x)}$ der grad$(P) \\geq$ grad$(Q)$, utfører vi polynomdivisjon:

$$\\frac{P(x)}{Q(x)} = D(x) + \\frac{R(x)}{Q(x)}$$

der $D(x)$ er kvotienten og $R(x)$ er resten med grad$(R) <$ grad$(Q)$.

Deretter utfører vi delbrøkoppspalting på den ekte brøken $\\frac{R(x)}{Q(x)}$.`,
    },
    {
      id: 'r2-3-3-ex-9',
      type: 'example',
      title: 'Eksempel 9: Polynomdivisjon og delbrøkoppspalting',
      problem: 'Beregn $\\int \\frac{x^2 + 2}{(x - 1)(x + 1)} \\, dx$.',
      solution: `**Steg 1: Sjekk om brøken er ekte**

Telleren har grad 2, nevneren $(x-1)(x+1) = x^2 - 1$ har også grad 2.
Brøken er uekte, så vi må utføre polynomdivisjon.

**Steg 2: Polynomdivisjon**

$$\\frac{x^2 + 2}{x^2 - 1} = 1 + \\frac{3}{x^2 - 1}$$

(Sjekk: $1 \\cdot (x^2 - 1) + 3 = x^2 - 1 + 3 = x^2 + 2$ \\checkmark)

**Steg 3: Delbrøkoppspalting**

$$\\frac{3}{x^2 - 1} = \\frac{3}{(x-1)(x+1)} = \\frac{A}{x - 1} + \\frac{B}{x + 1}$$

$3 = A(x + 1) + B(x - 1)$

$x = 1$: $3 = 2A \\Rightarrow A = \\frac{3}{2}$

$x = -1$: $3 = -2B \\Rightarrow B = -\\frac{3}{2}$

**Steg 4: Integrasjon**

$$\\int \\frac{x^2 + 2}{x^2 - 1} \\, dx = \\int 1 \\, dx + \\int \\frac{3/2}{x - 1} \\, dx + \\int \\frac{-3/2}{x + 1} \\, dx$$

$$= x + \\frac{3}{2} \\ln|x - 1| - \\frac{3}{2} \\ln|x + 1| + C$$

$$= x + \\frac{3}{2} \\ln\\left|\\frac{x - 1}{x + 1}\\right| + C$$`,
    },
    {
      id: 'r2-3-3-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-9',
        number: '3.3.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int \\frac{x^2 - x + 3}{(x - 2)(x + 1)} \\, dx$.',
        solution: 'Nevneren: $(x-2)(x+1) = x^2 - x - 2$, grad 2.\nTelleren har også grad 2, så polynomdivisjon:\n\n$\\frac{x^2 - x + 3}{x^2 - x - 2} = 1 + \\frac{5}{x^2 - x - 2}$\n\nDelbrøkoppspalting av $\\frac{5}{(x-2)(x+1)}$:\n$5 = A(x+1) + B(x-2)$\n$x = 2$: $5 = 3A \\Rightarrow A = \\frac{5}{3}$\n$x = -1$: $5 = -3B \\Rightarrow B = -\\frac{5}{3}$\n\nIntegral:\n$\\int 1 \\, dx + \\frac{5}{3} \\int \\frac{1}{x-2} \\, dx - \\frac{5}{3} \\int \\frac{1}{x+1} \\, dx$\n\nSvar: $x + \\frac{5}{3} \\ln|x - 2| - \\frac{5}{3} \\ln|x + 1| + C$\n\neller: $x + \\frac{5}{3} \\ln\\left|\\frac{x-2}{x+1}\\right| + C$',
        hints: [
          'Sjekk først om brøken er ekte ved å sammenligne gradene.',
          'Utfør polynomdivisjon når telleren har samme eller høyere grad enn nevneren.',
          'Bruk delbrøkoppspalting på den gjenværende brøken.',
        ],
      },
    },

    // ============================================================================
    // Bestemte integraler
    // ============================================================================
    {
      id: 'r2-3-3-text-6b',
      type: 'text',
      content: `## Bestemte integraler

Delbrøkoppspalting er like nyttig for bestemte integraler. Etter å ha funnet den antideriverte, setter vi bare inn grensene.`,
    },
    {
      id: 'r2-3-3-ex-9b',
      type: 'example',
      title: 'Eksempel 9b: Bestemt integral',
      problem: 'Beregn $\\int_2^4 \\frac{1}{x^2 - 1} \\, dx$.',
      solution: `**Delbrøkoppspalting:**
$$\\frac{1}{x^2 - 1} = \\frac{1}{(x-1)(x+1)} = \\frac{A}{x-1} + \\frac{B}{x+1}$$

$1 = A(x+1) + B(x-1)$

$x = 1$: $1 = 2A \\Rightarrow A = \\frac{1}{2}$

$x = -1$: $1 = -2B \\Rightarrow B = -\\frac{1}{2}$

**Antiderivert:**
$$\\int \\frac{1}{x^2 - 1} \\, dx = \\frac{1}{2} \\ln|x-1| - \\frac{1}{2} \\ln|x+1| = \\frac{1}{2} \\ln\\left|\\frac{x-1}{x+1}\\right|$$

**Bestemt integral:**
$$\\int_2^4 \\frac{1}{x^2 - 1} \\, dx = \\left[\\frac{1}{2} \\ln\\left|\\frac{x-1}{x+1}\\right|\\right]_2^4$$

$$= \\frac{1}{2} \\ln\\left|\\frac{3}{5}\\right| - \\frac{1}{2} \\ln\\left|\\frac{1}{3}\\right|$$

$$= \\frac{1}{2} \\left(\\ln\\frac{3}{5} - \\ln\\frac{1}{3}\\right) = \\frac{1}{2} \\ln\\left(\\frac{3}{5} \\cdot 3\\right) = \\frac{1}{2} \\ln\\frac{9}{5}$$`,
    },
    {
      id: 'r2-3-3-exercise-9b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-9b',
        number: '3.3.9b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int_3^5 \\frac{x + 1}{(x - 1)(x - 2)} \\, dx$.',
        solution: 'Delbrøkoppspalting: $\\frac{x + 1}{(x-1)(x-2)} = \\frac{A}{x-1} + \\frac{B}{x-2}$\n\n$x = 1$: $2 = -A \\Rightarrow A = -2$\n$x = 2$: $3 = B$\n\nAntiderivert: $-2\\ln|x-1| + 3\\ln|x-2|$\n\n$\\left[-2\\ln|x-1| + 3\\ln|x-2|\\right]_3^5$\n$= (-2\\ln 4 + 3\\ln 3) - (-2\\ln 2 + 3\\ln 1)$\n$= -2\\ln 4 + 3\\ln 3 + 2\\ln 2$\n$= -4\\ln 2 + 3\\ln 3 + 2\\ln 2$\n$= -2\\ln 2 + 3\\ln 3$\n$= \\ln\\frac{27}{4}$',
        hints: [
          'Utfør delbrøkoppspalting først.',
          'Sett inn grensene i den antideriverte.',
          'Bruk logaritmeregler for å forenkle svaret.',
        ],
      },
    },

    // ============================================================================
    // Heaviside cover-up metoden
    // ============================================================================
    {
      id: 'r2-3-3-text-7b',
      type: 'text',
      content: `## Heaviside cover-up metoden

For enkle lineære faktorer finnes en rask snarvei kalt **Heaviside cover-up metoden**. Den lar oss finne koeffisientene uten å skrive opp hele likningen.`,
    },
    {
      id: 'r2-3-3-thm-5',
      type: 'theorem',
      title: 'Heaviside cover-up metoden',
      content: `For $\\frac{P(x)}{(x - r_1)(x - r_2) \\cdots (x - r_n)}$ med ulike lineære faktorer:

Koeffisienten $A_i$ foran $\\frac{1}{x - r_i}$ finnes ved å:

1. **Dekke til** (cover up) faktoren $(x - r_i)$ i nevneren
2. **Sette inn** $x = r_i$ i det som er igjen

$$A_i = \\frac{P(r_i)}{\\prod_{j \\neq i}(r_i - r_j)}$$

**Fordel:** Raskere enn å sette opp hele likningen.`,
    },
    {
      id: 'r2-3-3-ex-10b',
      type: 'example',
      title: 'Eksempel 10: Heaviside cover-up',
      problem: 'Bruk cover-up metoden til å spalte $\\frac{2x + 5}{(x - 1)(x + 3)}$.',
      solution: `Vi skal finne $A$ og $B$ slik at:
$$\\frac{2x + 5}{(x - 1)(x + 3)} = \\frac{A}{x - 1} + \\frac{B}{x + 3}$$

**Finn A:** Dekk til $(x - 1)$ og sett $x = 1$:
$$A = \\frac{2(1) + 5}{(1) + 3} = \\frac{7}{4}$$

**Finn B:** Dekk til $(x + 3)$ og sett $x = -3$:
$$B = \\frac{2(-3) + 5}{(-3) - 1} = \\frac{-1}{-4} = \\frac{1}{4}$$

**Svar:**
$$\\frac{2x + 5}{(x - 1)(x + 3)} = \\frac{7}{4(x - 1)} + \\frac{1}{4(x + 3)}$$`,
    },
    {
      id: 'r2-3-3-exercise-10b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-10b',
        number: '3.3.10b',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk Heaviside cover-up metoden til å spalte $\\frac{3x - 2}{(x + 1)(x - 4)}$.',
        solution: 'Finn A (dekk til $(x+1)$, sett $x = -1$):\n$A = \\frac{3(-1) - 2}{(-1) - 4} = \\frac{-5}{-5} = 1$\n\nFinn B (dekk til $(x-4)$, sett $x = 4$):\n$B = \\frac{3(4) - 2}{(4) + 1} = \\frac{10}{5} = 2$\n\nSvar: $\\frac{1}{x + 1} + \\frac{2}{x - 4}$',
        hints: [
          'For å finne A, dekk til $(x+1)$ i nevneren og sett inn $x = -1$.',
          'For å finne B, dekk til $(x-4)$ i nevneren og sett inn $x = 4$.',
        ],
      },
    },

    // ============================================================================
    // Oppsummering
    // ============================================================================
    {
      id: 'r2-3-3-text-7',
      type: 'text',
      content: `## Oppsummering: Fremgangsmåte for delbrøkoppspalting

**Steg 1:** Sjekk om brøken er ekte. Hvis ikke, utfør polynomdivisjon først.

**Steg 2:** Faktoriser nevneren fullstendig.

**Steg 3:** Sett opp ansatsen:
- For hver ulik lineær faktor $(x - r)$: inkluder $\\frac{A}{x - r}$
- For hver gjentatt faktor $(x - r)^k$: inkluder $\\frac{A_1}{x - r} + \\frac{A_2}{(x - r)^2} + \\cdots + \\frac{A_k}{(x - r)^k}$
- For hver irredusibel kvadratisk faktor $(ax^2 + bx + c)$: inkluder $\\frac{Ax + B}{ax^2 + bx + c}$

**Steg 4:** Finn koeffisientene ved:
- Innsettingsmetoden (sett inn verdier som nuller ut faktorer)
- Koeffisientsammenlikning (sammenlign koeffisienter foran like potenser)
- Heaviside cover-up (rask metode for enkle lineære faktorer)

**Steg 5:** Ved integrasjon:
- $\\int \\frac{A}{x-r} \\, dx = A \\ln|x-r| + C$
- $\\int \\frac{A}{(x-r)^n} \\, dx = \\frac{-A}{(n-1)(x-r)^{n-1}} + C$ for $n > 1$
- $\\int \\frac{x}{x^2+a^2} \\, dx = \\frac{1}{2}\\ln(x^2+a^2) + C$
- $\\int \\frac{1}{x^2+a^2} \\, dx = \\frac{1}{a}\\arctan\\left(\\frac{x}{a}\\right) + C$`,
    },

    // ============================================================================
    // Vanlige feil
    // ============================================================================
    {
      id: 'r2-3-3-warning-1',
      type: 'warning',
      title: 'Vanlige feil',
      content: `**1. Glemmer polynomdivisjon:** Når telleren har grad $\\geq$ nevnerens grad, MÅ du utføre polynomdivisjon først.

**2. Feil ansats for gjentatte faktorer:** For $(x-1)^2$ må du ha BÅDE $\\frac{A}{x-1}$ OG $\\frac{B}{(x-1)^2}$.

**3. Feil ansats for irredusible faktorer:** For $x^2 + 1$ må telleren være $Ax + B$, ikke bare $A$.

**4. Regnefeil ved innsetting:** Dobbeltsjekk at du setter inn riktig verdi og regner korrekt.

**5. Glemmer absoluttverdier:** $\\int \\frac{1}{x} dx = \\ln|x| + C$, ikke $\\ln(x)$.`,
    },

    // ============================================================================
    // Avsluttende oppgaver
    // ============================================================================
    {
      id: 'r2-3-3-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-10',
        number: '3.3.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfør delbrøkoppspalting og beregn $\\int \\frac{x^2 + 5x + 6}{x(x + 1)(x + 2)} \\, dx$.',
        solution: 'Vi faktoriserer telleren: $x^2 + 5x + 6 = (x + 2)(x + 3)$\n\nAnsats: $\\frac{A}{x} + \\frac{B}{x + 1} + \\frac{C}{x + 2}$\n\n$(x + 2)(x + 3) = A(x + 1)(x + 2) + Bx(x + 2) + Cx(x + 1)$\n\n$x = 0$: $6 = 2A \\Rightarrow A = 3$\n$x = -1$: $2 = B(-1)(1) \\Rightarrow B = -2$\n$x = -2$: $0 = C(-2)(-1) \\Rightarrow C = 0$\n\nIntegral:\n$\\int \\left(\\frac{3}{x} - \\frac{2}{x+1}\\right) \\, dx = 3\\ln|x| - 2\\ln|x+1| + C$\n\neller: $\\ln\\left|\\frac{x^3}{(x+1)^2}\\right| + C$',
        hints: [
          'Start med å faktorisere telleren for å se om noe forenkles.',
          'Sett opp ansatsen med tre delbrøker.',
          'Bruk innsettingsmetoden med x = 0, x = -1 og x = -2.',
        ],
      },
    },
    {
      id: 'r2-3-3-exercise-11',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-11',
        number: '3.3.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int \\frac{1}{x^3 - x} \\, dx$.',
        solution: 'Faktorisering: $x^3 - x = x(x^2 - 1) = x(x - 1)(x + 1)$\n\nAnsats: $\\frac{A}{x} + \\frac{B}{x - 1} + \\frac{C}{x + 1}$\n\n$1 = A(x - 1)(x + 1) + Bx(x + 1) + Cx(x - 1)$\n\n$x = 0$: $1 = A(-1)(1) \\Rightarrow A = -1$\n$x = 1$: $1 = B(1)(2) \\Rightarrow B = \\frac{1}{2}$\n$x = -1$: $1 = C(-1)(-2) \\Rightarrow C = \\frac{1}{2}$\n\nSvar: $-\\ln|x| + \\frac{1}{2}\\ln|x-1| + \\frac{1}{2}\\ln|x+1| + C$\n\neller: $\\frac{1}{2}\\ln\\left|\\frac{(x-1)(x+1)}{x^2}\\right| + C = \\frac{1}{2}\\ln\\left|\\frac{x^2-1}{x^2}\\right| + C$',
        hints: [
          'Faktoriser nevneren fullstendig.',
          'Merk at $x^2 - 1 = (x-1)(x+1)$.',
          'Bruk logaritmeregler for å forenkle svaret.',
        ],
      },
    },
    {
      id: 'r2-3-3-exercise-12',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-12',
        number: '3.3.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int \\frac{x^3}{(x - 1)(x + 2)} \\, dx$.',
        solution: 'Telleren har grad 3, nevneren grad 2. Uekte brøk - polynomdivisjon først.\n\nNevner: $(x-1)(x+2) = x^2 + x - 2$\n\nPolynomdivisjon av $x^3$ med $x^2 + x - 2$:\n$x^3 = (x - 1)(x^2 + x - 2) + (3x - 2)$\n\nSå: $\\frac{x^3}{x^2 + x - 2} = x - 1 + \\frac{3x - 2}{(x-1)(x+2)}$\n\nDelbrøkoppspalting av $\\frac{3x - 2}{(x-1)(x+2)}$:\n$x = 1$: $\\frac{1}{3} = A$\n$x = -2$: $\\frac{-8}{-3} = \\frac{8}{3} = B$\n\nIntegral:\n$\\int (x - 1) dx + \\frac{1}{3}\\int\\frac{1}{x-1}dx + \\frac{8}{3}\\int\\frac{1}{x+2}dx$\n\nSvar: $\\frac{x^2}{2} - x + \\frac{1}{3}\\ln|x-1| + \\frac{8}{3}\\ln|x+2| + C$',
        hints: [
          'Start med polynomdivisjon siden telleren har høyere grad.',
          'Resten etter divisjon gir den ekte brøken som skal spaltes.',
          'Husk å integrere polynomleddet fra divisjonen.',
        ],
      },
    },
    {
      id: 'r2-3-3-exercise-13',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-13',
        number: '3.3.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int_0^1 \\frac{x}{(x + 1)^2(x + 2)} \\, dx$.',
        solution: 'Ansats: $\\frac{A}{x+1} + \\frac{B}{(x+1)^2} + \\frac{C}{x+2}$\n\n$x = A(x+1)(x+2) + B(x+2) + C(x+1)^2$\n\n$x = -1$: $-1 = B(1) \\Rightarrow B = -1$\n$x = -2$: $-2 = C(1) \\Rightarrow C = -2$\nKoeffisientsammenlikning ($x^2$): $0 = A + C \\Rightarrow A = 2$\n\nAntiderivert: $2\\ln|x+1| + \\frac{1}{x+1} - 2\\ln|x+2|$\n\n$\\left[2\\ln|x+1| + \\frac{1}{x+1} - 2\\ln|x+2|\\right]_0^1$\n$= (2\\ln 2 + \\frac{1}{2} - 2\\ln 3) - (2\\ln 1 + 1 - 2\\ln 2)$\n$= 2\\ln 2 + \\frac{1}{2} - 2\\ln 3 - 1 + 2\\ln 2$\n$= 4\\ln 2 - 2\\ln 3 - \\frac{1}{2}$\n$= 2\\ln\\frac{4}{3} - \\frac{1}{2}$',
        hints: [
          'Sett opp ansats med både enkle og gjentatte faktorer.',
          'Husk at integralet av $\\frac{1}{(x+1)^2}$ er $-\\frac{1}{x+1}$.',
          'Vær nøye med fortegnene ved innsetting av grensene.',
        ],
      },
    },
    {
      id: 'r2-3-3-exercise-14',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-14',
        number: '3.3.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Beregn $\\int \\frac{x^2 + 1}{x(x^2 + 4)} \\, dx$.',
        solution: 'Ansats: $\\frac{A}{x} + \\frac{Bx + C}{x^2 + 4}$\n\n$x^2 + 1 = A(x^2 + 4) + (Bx + C)x$\n$= Ax^2 + 4A + Bx^2 + Cx$\n$= (A + B)x^2 + Cx + 4A$\n\nKoeffisientsammenlikning:\n- $x^2$: $A + B = 1$\n- $x$: $C = 0$\n- Konstantledd: $4A = 1 \\Rightarrow A = \\frac{1}{4}$\n\nDermed: $B = 1 - \\frac{1}{4} = \\frac{3}{4}$\n\nIntegral:\n$\\frac{1}{4}\\int\\frac{1}{x}dx + \\frac{3}{4}\\int\\frac{x}{x^2+4}dx$\n\n$= \\frac{1}{4}\\ln|x| + \\frac{3}{4} \\cdot \\frac{1}{2}\\ln(x^2+4) + C$\n\nSvar: $\\frac{1}{4}\\ln|x| + \\frac{3}{8}\\ln(x^2+4) + C$',
        hints: [
          'Nevneren har en lineær faktor $x$ og en irredusibel kvadratisk faktor $x^2+4$.',
          'Telleren over den kvadratiske faktoren må være $Bx + C$.',
          'Husk at $\\int\\frac{x}{x^2+4}dx = \\frac{1}{2}\\ln(x^2+4) + C$.',
        ],
      },
    },
    {
      id: 'r2-3-3-exercise-15',
      type: 'exercise',
      exercise: {
        id: 'r2-3-3-task-15',
        number: '3.3.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at $\\int_2^3 \\frac{1}{x^2 - 1} \\, dx = \\frac{1}{2}\\ln\\frac{4}{3}$.',
        solution: 'Delbrøkoppspalting:\n$\\frac{1}{x^2-1} = \\frac{1}{(x-1)(x+1)} = \\frac{A}{x-1} + \\frac{B}{x+1}$\n\n$x = 1$: $1 = 2A \\Rightarrow A = \\frac{1}{2}$\n$x = -1$: $1 = -2B \\Rightarrow B = -\\frac{1}{2}$\n\nAntiderivert: $\\frac{1}{2}\\ln|x-1| - \\frac{1}{2}\\ln|x+1| = \\frac{1}{2}\\ln\\left|\\frac{x-1}{x+1}\\right|$\n\nBestemt integral:\n$\\left[\\frac{1}{2}\\ln\\left|\\frac{x-1}{x+1}\\right|\\right]_2^3$\n\n$= \\frac{1}{2}\\ln\\frac{2}{4} - \\frac{1}{2}\\ln\\frac{1}{3}$\n$= \\frac{1}{2}\\ln\\frac{1}{2} - \\frac{1}{2}\\ln\\frac{1}{3}$\n$= \\frac{1}{2}\\left(\\ln\\frac{1}{2} - \\ln\\frac{1}{3}\\right)$\n$= \\frac{1}{2}\\ln\\frac{3}{2} \\cdot \\frac{1}{1} = \\frac{1}{2}\\ln\\frac{3}{2}$\n\nVent - la oss regne på nytt:\n$= \\frac{1}{2}\\ln\\left(\\frac{1/2}{1/3}\\right) = \\frac{1}{2}\\ln\\frac{3}{2}$\n\nHmm, dette gir ikke $\\ln\\frac{4}{3}$. La oss sjekke:\n\nVed $x=3$: $\\frac{3-1}{3+1} = \\frac{2}{4} = \\frac{1}{2}$\nVed $x=2$: $\\frac{2-1}{2+1} = \\frac{1}{3}$\n\n$\\frac{1}{2}\\ln\\frac{1}{2} - \\frac{1}{2}\\ln\\frac{1}{3} = \\frac{1}{2}(\\ln\\frac{1}{2} - \\ln\\frac{1}{3}) = \\frac{1}{2}\\ln\\frac{1/2}{1/3} = \\frac{1}{2}\\ln\\frac{3}{2}$\n\nAlternativt: $\\frac{1}{2}\\ln\\frac{3}{2} = \\frac{1}{2}\\ln\\frac{3}{2} \\neq \\frac{1}{2}\\ln\\frac{4}{3}$\n\nOppgaven bør være: Vis at svaret er $\\frac{1}{2}\\ln\\frac{3}{2}$.',
        hints: [
          'Bruk delbrøkoppspalting på $\\frac{1}{x^2-1}$.',
          'Kombiner logaritmene til én brøk.',
          'Regn nøye med grensene.',
        ],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_3_4: TextbookChapter = {
  id: 'r2-3-4',
  courseId: 'r2',
  chapterNumber: '3.4',
  title: 'Numerisk integrasjon',
  description: 'Metoder for å beregne integraler numerisk når analytisk løsning ikke finnes.',
  estimatedMinutes: 75,
  competenceGoals: [
    'forstå når numerisk integrasjon er nødvendig',
    'bruke rektangelmetoden, trapesmetoden og Simpsons metode',
    'vurdere nøyaktigheten av numeriske tilnærminger',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-3-4-text-1',
      type: 'text',
      content: `## Hvorfor numerisk integrasjon?

Når vi skal beregne et bestemt integral $\\int_a^b f(x) \\, dx$, prøver vi vanligvis å finne en antiderivert $F(x)$ og bruke analysens fundamentalteorem:

$$\\int_a^b f(x) \\, dx = F(b) - F(a)$$

Men hva gjør vi når vi **ikke kan finne** en antiderivert? Det finnes mange funksjoner som ikke har en antiderivert uttrykt med elementære funksjoner. Kjente eksempler er:

- $\\int e^{-x^2} \\, dx$ (viktig i statistikk)
- $\\int \\frac{\\sin x}{x} \\, dx$ (signalbehandling)
- $\\int \\sqrt{1 + x^3} \\, dx$ (buepunktsberegninger)

I tillegg kan vi ha funksjoner som bare er kjent gjennom måledata (tabellverdier), uten en eksplisitt formel.

I slike tilfeller bruker vi **numerisk integrasjon** - metoder som tilnærmer integralet ved å summere bidrag fra mange små områder.`,
    },

    // ========== REKTANGELMETODEN ==========
    {
      id: 'r2-3-4-text-2',
      type: 'text',
      content: `## Rektangelmetoden

Den enkleste tilnærmingen til et integral er å dele intervallet $[a, b]$ inn i $n$ like store delintervaller og tilnærme arealet under kurven med rektangler.`,
    },
    {
      id: 'r2-3-4-def-1',
      type: 'definition',
      title: 'Rektangelmetoden',
      content: `La $f$ være en kontinuerlig funksjon på $[a, b]$. Vi deler intervallet i $n$ like store delintervaller med bredde $h = \\frac{b-a}{n}$.

**Venstre rektangelmetode:**
$$\\int_a^b f(x) \\, dx \\approx h \\sum_{i=0}^{n-1} f(x_i) = h[f(x_0) + f(x_1) + \\cdots + f(x_{n-1})]$$

**Høyre rektangelmetode:**
$$\\int_a^b f(x) \\, dx \\approx h \\sum_{i=1}^{n} f(x_i) = h[f(x_1) + f(x_2) + \\cdots + f(x_n)]$$

**Midtpunktmetoden:**
$$\\int_a^b f(x) \\, dx \\approx h \\sum_{i=0}^{n-1} f\\left(x_i + \\frac{h}{2}\\right)$$

der $x_i = a + i \\cdot h$ for $i = 0, 1, 2, \\ldots, n$.`,
    },
    {
      id: 'r2-3-4-ex-1',
      type: 'example',
      title: 'Eksempel 1: Venstre rektangelmetode',
      problem: `Bruk venstre rektangelmetode med $n = 4$ delintervaller til å tilnærme $\\int_0^2 x^2 \\, dx$.

Sammenlign med den eksakte verdien.`,
      solution: `**Steg 1:** Beregn steglengden $h$:
$$h = \\frac{b - a}{n} = \\frac{2 - 0}{4} = 0{,}5$$

**Steg 2:** Finn delepunktene:
$$x_0 = 0, \\quad x_1 = 0{,}5, \\quad x_2 = 1, \\quad x_3 = 1{,}5, \\quad x_4 = 2$$

**Steg 3:** Beregn funksjonsverdiene (vi bruker $x_0$ til $x_3$ for venstre metode):
$$f(x_0) = 0^2 = 0$$
$$f(x_1) = 0{,}5^2 = 0{,}25$$
$$f(x_2) = 1^2 = 1$$
$$f(x_3) = 1{,}5^2 = 2{,}25$$

**Steg 4:** Beregn tilnærmingen:
$$\\int_0^2 x^2 \\, dx \\approx h[f(x_0) + f(x_1) + f(x_2) + f(x_3)]$$
$$= 0{,}5 \\cdot [0 + 0{,}25 + 1 + 2{,}25] = 0{,}5 \\cdot 3{,}5 = 1{,}75$$

**Sammenligning med eksakt verdi:**
$$\\int_0^2 x^2 \\, dx = \\left[\\frac{x^3}{3}\\right]_0^2 = \\frac{8}{3} - 0 = \\frac{8}{3} \\approx 2{,}667$$

Feilen er $\\frac{8}{3} - 1{,}75 \\approx 0{,}917$, altså ca. 34% for lite.`,
    },
    {
      id: 'r2-3-4-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-1',
        number: '3.4.1',
        type: 'classic',
        difficulty: 'medium',
        task: `Bruk **høyre rektangelmetode** med $n = 4$ delintervaller til å tilnærme $\\int_0^2 x^2 \\, dx$.

a) Beregn tilnærmingen.
b) Sammenlign med den eksakte verdien $\\frac{8}{3}$.
c) Blir feilen større eller mindre enn for venstre metode? Forklar hvorfor.`,
        solution: `**a)** Med $h = 0{,}5$ og høyre endepunkter $x_1, x_2, x_3, x_4$:
$$\\text{Tilnærming} = 0{,}5 \\cdot [0{,}25 + 1 + 2{,}25 + 4] = 0{,}5 \\cdot 7{,}5 = 3{,}75$$

**b)** Eksakt verdi: $\\frac{8}{3} \\approx 2{,}667$
Feil: $3{,}75 - 2{,}667 = 1{,}083$ (ca. 41% for mye)

**c)** Feilen er større for høyre metode her fordi $f(x) = x^2$ er voksende på $[0, 2]$. Høyre metode overestimerer når funksjonen vokser, venstre metode underestimerer.`,
        hints: [
          'Høyre metode bruker funksjonsverdiene i $x_1, x_2, x_3, x_4$ (ikke $x_0$).',
          'Tenk på om rektanglene går over eller under kurven når funksjonen vokser.',
        ],
      },
    },
    {
      id: 'r2-3-4-ex-2',
      type: 'example',
      title: 'Eksempel 2: Midtpunktmetoden',
      problem: `Bruk midtpunktmetoden med $n = 4$ delintervaller til å tilnærme $\\int_0^2 x^2 \\, dx$.`,
      solution: `**Steg 1:** Steglengde: $h = 0{,}5$

**Steg 2:** Midtpunktene i hvert delintervall:
$$m_1 = 0 + \\frac{0{,}5}{2} = 0{,}25$$
$$m_2 = 0{,}5 + \\frac{0{,}5}{2} = 0{,}75$$
$$m_3 = 1 + \\frac{0{,}5}{2} = 1{,}25$$
$$m_4 = 1{,}5 + \\frac{0{,}5}{2} = 1{,}75$$

**Steg 3:** Funksjonsverdier i midtpunktene:
$$f(0{,}25) = 0{,}0625$$
$$f(0{,}75) = 0{,}5625$$
$$f(1{,}25) = 1{,}5625$$
$$f(1{,}75) = 3{,}0625$$

**Steg 4:** Tilnærming:
$$\\int_0^2 x^2 \\, dx \\approx 0{,}5 \\cdot [0{,}0625 + 0{,}5625 + 1{,}5625 + 3{,}0625]$$
$$= 0{,}5 \\cdot 5{,}25 = 2{,}625$$

**Sammenligning:** Eksakt verdi er $\\frac{8}{3} \\approx 2{,}667$. Feilen er bare $0{,}042$, altså ca. 1{,}6%.

Midtpunktmetoden gir betydelig bedre resultat enn venstre og høyre metode!`,
    },
    {
      id: 'r2-3-4-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-2',
        number: '3.4.2',
        type: 'classic',
        difficulty: 'medium',
        task: `Bruk midtpunktmetoden med $n = 5$ delintervaller til å tilnærme $\\int_1^6 \\frac{1}{x} \\, dx$.

Sammenlign med den eksakte verdien $\\ln 6 - \\ln 1 = \\ln 6 \\approx 1{,}792$.`,
        solution: `Med $h = \\frac{6-1}{5} = 1$ får vi midtpunktene: $1{,}5$, $2{,}5$, $3{,}5$, $4{,}5$, $5{,}5$.

Tilnærming:
$$1 \\cdot \\left[\\frac{1}{1{,}5} + \\frac{1}{2{,}5} + \\frac{1}{3{,}5} + \\frac{1}{4{,}5} + \\frac{1}{5{,}5}\\right]$$
$$= 0{,}667 + 0{,}400 + 0{,}286 + 0{,}222 + 0{,}182 = 1{,}757$$

Feil: $|1{,}792 - 1{,}757| = 0{,}035$ (ca. 2%)`,
        hints: [
          'Steglengden er $h = \\frac{6-1}{5} = 1$.',
          'Midtpunktene ligger midt i hvert intervall: $[1,2], [2,3], [3,4], [4,5], [5,6]$.',
        ],
      },
    },

    // ========== TRAPESMETODEN ==========
    {
      id: 'r2-3-4-text-3',
      type: 'text',
      content: `## Trapesmetoden

Rektangelmetoden tilnærmer kurven med horisontale linjer. En naturlig forbedring er å bruke **skrå linjer** som kobler sammen nabopunkter på kurven. Dette gir trapeser i stedet for rektangler.`,
    },
    {
      id: 'r2-3-4-def-2',
      type: 'definition',
      title: 'Trapesmetoden',
      content: `La $f$ være kontinuerlig på $[a, b]$. Med $n$ delintervaller og steglengde $h = \\frac{b-a}{n}$ er trapesformelen:

$$\\int_a^b f(x) \\, dx \\approx \\frac{h}{2}\\left[f(x_0) + 2f(x_1) + 2f(x_2) + \\cdots + 2f(x_{n-1}) + f(x_n)\\right]$$

Dette kan skrives mer kompakt som:

$$T_n = \\frac{h}{2}\\left[f(a) + f(b) + 2\\sum_{i=1}^{n-1} f(x_i)\\right]$$

**Geometrisk tolkning:** Arealet av et trapes med parallelle sider $f(x_i)$ og $f(x_{i+1})$ og høyde $h$ er $\\frac{h}{2}[f(x_i) + f(x_{i+1})]$.`,
    },
    {
      id: 'r2-3-4-ex-3',
      type: 'example',
      title: 'Eksempel 3: Trapesmetoden',
      problem: `Bruk trapesmetoden med $n = 4$ delintervaller til å tilnærme $\\int_0^2 x^2 \\, dx$.`,
      solution: `**Steg 1:** Steglengde: $h = \\frac{2-0}{4} = 0{,}5$

**Steg 2:** Delepunkter og funksjonsverdier:
| $i$ | $x_i$ | $f(x_i) = x_i^2$ |
|-----|-------|------------------|
| 0   | 0     | 0                |
| 1   | 0,5   | 0,25             |
| 2   | 1     | 1                |
| 3   | 1,5   | 2,25             |
| 4   | 2     | 4                |

**Steg 3:** Bruk trapesformelen:
$$T_4 = \\frac{0{,}5}{2}\\left[f(0) + 2f(0{,}5) + 2f(1) + 2f(1{,}5) + f(2)\\right]$$
$$= 0{,}25 \\cdot [0 + 2(0{,}25) + 2(1) + 2(2{,}25) + 4]$$
$$= 0{,}25 \\cdot [0 + 0{,}5 + 2 + 4{,}5 + 4]$$
$$= 0{,}25 \\cdot 11 = 2{,}75$$

**Sammenligning:**
- Eksakt verdi: $\\frac{8}{3} \\approx 2{,}667$
- Feil: $|2{,}75 - 2{,}667| = 0{,}083$ (ca. 3{,}1%)

Trapesmetoden gir bedre resultat enn venstre/høyre rektangelmetode, men litt dårligere enn midtpunktmetoden for denne funksjonen.`,
    },
    {
      id: 'r2-3-4-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-3',
        number: '3.4.3',
        type: 'classic',
        difficulty: 'medium',
        task: `Bruk trapesmetoden med $n = 4$ til å tilnærme $\\int_0^{\\pi} \\sin x \\, dx$.

Sammenlign med den eksakte verdien (som du finner ved å integrere analytisk).`,
        solution: `Med $h = \\frac{\\pi}{4}$ får vi:
$x_0 = 0$, $x_1 = \\frac{\\pi}{4}$, $x_2 = \\frac{\\pi}{2}$, $x_3 = \\frac{3\\pi}{4}$, $x_4 = \\pi$

Funksjonsverdier:
$\\sin 0 = 0$, $\\sin\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$, $\\sin\\frac{\\pi}{2} = 1$, $\\sin\\frac{3\\pi}{4} = \\frac{\\sqrt{2}}{2}$, $\\sin\\pi = 0$

$$T_4 = \\frac{\\pi/4}{2}\\left[0 + 2 \\cdot \\frac{\\sqrt{2}}{2} + 2 \\cdot 1 + 2 \\cdot \\frac{\\sqrt{2}}{2} + 0\\right]$$
$$= \\frac{\\pi}{8}[2\\sqrt{2} + 2] = \\frac{\\pi}{8}(2\\sqrt{2} + 2) \\approx 1{,}896$$

Eksakt: $\\int_0^{\\pi} \\sin x \\, dx = [-\\cos x]_0^{\\pi} = 1 - (-1) = 2$

Feil: $|2 - 1{,}896| = 0{,}104$ (ca. 5{,}2%)`,
        hints: [
          'Delepunktene er $0, \\frac{\\pi}{4}, \\frac{\\pi}{2}, \\frac{3\\pi}{4}, \\pi$.',
          'Husk at $\\sin\\frac{\\pi}{4} = \\sin\\frac{3\\pi}{4} = \\frac{\\sqrt{2}}{2}$.',
        ],
      },
    },
    {
      id: 'r2-3-4-note-1',
      type: 'note',
      content: `**Merk:** Trapesmetoden gir eksakt resultat for lineære funksjoner (polynomer av grad 1), siden trapeser da dekker arealet perfekt.`,
    },

    // ========== SIMPSONS METODE ==========
    {
      id: 'r2-3-4-text-4',
      type: 'text',
      content: `## Simpsons metode (Parabelmetoden)

Trapesmetoden bruker rette linjer (grad 1) mellom punktene. **Simpsons metode** tar dette ett skritt videre ved å tilnærme kurven med **parabler** (grad 2) gjennom tre nabopunkter om gangen.

Fordi parabler kan følge krumningen til kurven bedre, gir Simpsons metode ofte mye mer nøyaktige resultater.`,
    },
    {
      id: 'r2-3-4-def-3',
      type: 'definition',
      title: 'Simpsons metode',
      content: `La $f$ være kontinuerlig på $[a, b]$. Med et **partall** $n$ delintervaller og steglengde $h = \\frac{b-a}{n}$ er Simpsons formel:

$$S_n = \\frac{h}{3}\\left[f(x_0) + 4f(x_1) + 2f(x_2) + 4f(x_3) + 2f(x_4) + \\cdots + 4f(x_{n-1}) + f(x_n)\\right]$$

Koeffisientene følger mønsteret: $1, 4, 2, 4, 2, \\ldots, 4, 2, 4, 1$.

**Alternativ formulering:**
$$S_n = \\frac{h}{3}\\left[f(a) + f(b) + 4\\sum_{\\text{odde } i} f(x_i) + 2\\sum_{\\text{partall } i \\neq 0,n} f(x_i)\\right]$$

**Viktig:** $n$ må være et partall for at Simpsons metode skal fungere!`,
    },
    {
      id: 'r2-3-4-ex-4',
      type: 'example',
      title: 'Eksempel 4: Simpsons metode',
      problem: `Bruk Simpsons metode med $n = 4$ delintervaller til å tilnærme $\\int_0^2 x^2 \\, dx$.`,
      solution: `**Steg 1:** Steglengde: $h = \\frac{2-0}{4} = 0{,}5$

**Steg 2:** Delepunkter og funksjonsverdier:
| $i$ | $x_i$ | $f(x_i)$ | Koeffisient |
|-----|-------|----------|-------------|
| 0   | 0     | 0        | 1           |
| 1   | 0,5   | 0,25     | 4           |
| 2   | 1     | 1        | 2           |
| 3   | 1,5   | 2,25     | 4           |
| 4   | 2     | 4        | 1           |

**Steg 3:** Bruk Simpsons formel:
$$S_4 = \\frac{0{,}5}{3}\\left[1 \\cdot 0 + 4 \\cdot 0{,}25 + 2 \\cdot 1 + 4 \\cdot 2{,}25 + 1 \\cdot 4\\right]$$
$$= \\frac{0{,}5}{3}\\left[0 + 1 + 2 + 9 + 4\\right]$$
$$= \\frac{0{,}5}{3} \\cdot 16 = \\frac{8}{3} \\approx 2{,}667$$

**Resultat:** Simpsons metode gir **eksakt** $\\frac{8}{3}$ !

Dette er ikke tilfeldig - Simpsons metode gir eksakte verdier for polynomer opp til og med grad 3.`,
    },
    {
      id: 'r2-3-4-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-4',
        number: '3.4.4',
        type: 'classic',
        difficulty: 'medium',
        task: `Bruk Simpsons metode med $n = 4$ til å tilnærme $\\int_0^{\\pi} \\sin x \\, dx$.

a) Beregn tilnærmingen.
b) Sammenlign med eksakt verdi (som er 2).
c) Hvor mange prosent er feilen?`,
        solution: `**a)** Med $h = \\frac{\\pi}{4}$:

$$S_4 = \\frac{\\pi/4}{3}\\left[\\sin 0 + 4\\sin\\frac{\\pi}{4} + 2\\sin\\frac{\\pi}{2} + 4\\sin\\frac{3\\pi}{4} + \\sin\\pi\\right]$$
$$= \\frac{\\pi}{12}\\left[0 + 4 \\cdot \\frac{\\sqrt{2}}{2} + 2 \\cdot 1 + 4 \\cdot \\frac{\\sqrt{2}}{2} + 0\\right]$$
$$= \\frac{\\pi}{12}[4\\sqrt{2} + 2] \\approx \\frac{\\pi}{12} \\cdot 7{,}657 \\approx 2{,}005$$

**b)** Eksakt verdi er 2.

**c)** Feil: $|2{,}005 - 2| = 0{,}005$, altså ca. $0{,}25\\%$.

Simpsons metode gir mye bedre nøyaktighet enn trapesmetoden (som ga ca. 5{,}2% feil).`,
        hints: [
          'Koeffisientene er $1, 4, 2, 4, 1$ for $i = 0, 1, 2, 3, 4$.',
          'Husk å dele på 3 i Simpsons formel.',
        ],
      },
    },
    {
      id: 'r2-3-4-thm-1',
      type: 'theorem',
      title: 'Nøyaktighet for Simpsons metode',
      content: `Simpsons metode gir **eksakt** resultat for polynomer av grad $\\leq 3$.

Dette betyr at selv om metoden er basert på parabler (grad 2), får vi også eksakte verdier for kubiske funksjoner - en bemerkelsesverdig egenskap!`,
    },

    // ========== FEILESTIMATER ==========
    {
      id: 'r2-3-4-text-5',
      type: 'text',
      content: `## Feilestimater

Når vi bruker numeriske metoder, er det viktig å vite hvor stor feilen kan bli. Her er formler som gir øvre grenser for feilen.`,
    },
    {
      id: 'r2-3-4-thm-2',
      type: 'theorem',
      title: 'Feilestimater for numerisk integrasjon',
      content: `La $f$ være tilstrekkelig deriverbar på $[a, b]$, og la $h = \\frac{b-a}{n}$.

**Midtpunktmetoden:**
$$|E_M| \\leq \\frac{(b-a)^3}{24n^2} \\cdot M_2$$
der $M_2 = \\max_{x \\in [a,b]} |f''(x)|$

**Trapesmetoden:**
$$|E_T| \\leq \\frac{(b-a)^3}{12n^2} \\cdot M_2$$
der $M_2 = \\max_{x \\in [a,b]} |f''(x)|$

**Simpsons metode:**
$$|E_S| \\leq \\frac{(b-a)^5}{180n^4} \\cdot M_4$$
der $M_4 = \\max_{x \\in [a,b]} |f^{(4)}(x)|$

**Viktig observasjon:**
- For midtpunkt og trapes: Feilen avtar som $\\frac{1}{n^2}$
- For Simpson: Feilen avtar som $\\frac{1}{n^4}$

Simpsons metode konvergerer altså **mye raskere** mot riktig svar!`,
    },
    {
      id: 'r2-3-4-ex-5',
      type: 'example',
      title: 'Eksempel 5: Feilestimering',
      problem: `For $\\int_0^2 x^2 \\, dx$ med $n = 4$:

a) Finn en øvre grense for feilen med trapesmetoden.
b) Sammenlign med den faktiske feilen vi fant tidligere.`,
      solution: `**a)** Vi har $f(x) = x^2$, så $f'(x) = 2x$ og $f''(x) = 2$.

Dermed er $M_2 = \\max_{x \\in [0,2]} |f''(x)| = 2$ (konstant).

Med $a = 0$, $b = 2$ og $n = 4$:
$$|E_T| \\leq \\frac{(2-0)^3}{12 \\cdot 4^2} \\cdot 2 = \\frac{8}{12 \\cdot 16} \\cdot 2 = \\frac{8}{192} \\cdot 2 = \\frac{16}{192} = \\frac{1}{12} \\approx 0{,}083$$

**b)** Den faktiske feilen var $|2{,}75 - \\frac{8}{3}| = |2{,}75 - 2{,}667| = 0{,}083$.

Feilen er **nøyaktig** lik den øvre grensen! Dette skjer fordi $f''(x) = 2$ er konstant, så feilestimatet er skarpt.`,
    },
    {
      id: 'r2-3-4-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-5',
        number: '3.4.5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Hvor mange delintervaller $n$ trenger du med trapesmetoden for å garantere at feilen i $\\int_0^1 e^x \\, dx$ er mindre enn $0{,}001$?

Hint: $f(x) = e^x$ har $f''(x) = e^x$, og $\\max_{x \\in [0,1]} e^x = e \\approx 2{,}718$.`,
        solution: `Vi skal ha $|E_T| < 0{,}001$.

Feilestimatet gir:
$$|E_T| \\leq \\frac{(1-0)^3}{12n^2} \\cdot e = \\frac{e}{12n^2}$$

Vi løser:
$$\\frac{e}{12n^2} < 0{,}001$$
$$n^2 > \\frac{e}{12 \\cdot 0{,}001} = \\frac{2{,}718}{0{,}012} \\approx 226{,}5$$
$$n > \\sqrt{226{,}5} \\approx 15{,}05$$

Vi trenger altså $n \\geq 16$ delintervaller.`,
        hints: [
          'Sett inn $M_2 = e$ i feilformelen for trapesmetoden.',
          'Løs ulikheten $\\frac{e}{12n^2} < 0{,}001$ for $n$.',
        ],
      },
    },

    // ========== FORBEDRING AV NØYAKTIGHET ==========
    {
      id: 'r2-3-4-text-6',
      type: 'text',
      content: `## Forbedring av nøyaktighet

Hovedmåten å forbedre nøyaktigheten på er å bruke **flere delintervaller** (større $n$). La oss se hvordan feilene avtar.`,
    },
    {
      id: 'r2-3-4-ex-6',
      type: 'example',
      title: 'Eksempel 6: Konvergens ved økt n',
      problem: `Beregn $\\int_0^1 e^x \\, dx$ med trapesmetoden for $n = 2, 4, 8, 16$ og observer hvordan feilen avtar.

Eksakt verdi: $e - 1 \\approx 1{,}71828$.`,
      solution: `| $n$ | $h$ | $T_n$ | Feil | Feilreduksjon |
|-----|-----|-------|------|---------------|
| 2   | 0,5 | 1,7539 | 0,0356 | - |
| 4   | 0,25 | 1,7272 | 0,0089 | $\\frac{0{,}0356}{0{,}0089} \\approx 4$ |
| 8   | 0,125 | 1,7205 | 0,0022 | $\\frac{0{,}0089}{0{,}0022} \\approx 4$ |
| 16  | 0,0625 | 1,7188 | 0,00056 | $\\frac{0{,}0022}{0{,}00056} \\approx 4$ |

**Observasjon:** Når vi dobler $n$, reduseres feilen med faktor 4.

Dette stemmer med feilestimatet: Feilen går som $\\frac{1}{n^2}$, så når $n \\to 2n$:
$$\\frac{1}{(2n)^2} = \\frac{1}{4n^2} = \\frac{1}{4} \\cdot \\frac{1}{n^2}$$`,
    },
    {
      id: 'r2-3-4-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-6',
        number: '3.4.6',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `For Simpsons metode avtar feilen som $\\frac{1}{n^4}$.

a) Hvor mye reduseres feilen når vi dobler $n$?
b) Hvis $S_4$ gir feil $0{,}01$, omtrent hvor stor feil forventer du fra $S_8$?
c) Og fra $S_{16}$?`,
        solution: `**a)** Når $n \\to 2n$:
$$\\frac{1}{(2n)^4} = \\frac{1}{16n^4} = \\frac{1}{16} \\cdot \\frac{1}{n^4}$$
Feilen reduseres med faktor **16** ved hver dobling!

**b)** $S_8$ feil $\\approx \\frac{0{,}01}{16} = 0{,}000625$

**c)** $S_{16}$ feil $\\approx \\frac{0{,}000625}{16} \\approx 0{,}000039$

Simpsons metode konvergerer ekstremt raskt!`,
        hints: [
          'Beregn $(2n)^4 = 16n^4$.',
          'Del forrige feil på 16 for hver dobling av $n$.',
        ],
      },
    },

    // ========== SAMMENLIGNING AV METODENE ==========
    {
      id: 'r2-3-4-text-7',
      type: 'text',
      content: `## Sammenligning av metodene

La oss oppsummere de tre hovedmetodene og når vi bør bruke hvilken.`,
    },
    {
      id: 'r2-3-4-def-4',
      type: 'definition',
      title: 'Sammenligning av numeriske integrasjonsmetoder',
      content: `| Metode | Feilorden | Eksakt for | Kompleksitet | Når bruke |
|--------|-----------|------------|--------------|-----------|
| **Midtpunkt** | $O(h^2)$ | Grad $\\leq 1$ | Enkel | Rask tilnærming |
| **Trapes** | $O(h^2)$ | Grad $\\leq 1$ | Enkel | Tabelldata |
| **Simpson** | $O(h^4)$ | Grad $\\leq 3$ | Middels | Høy nøyaktighet |

**Tommelfingerregler:**
- For **tabelldata** med gitte punkter: Bruk trapesmetoden
- For **glatte funksjoner** der du kan velge punkter: Bruk Simpsons metode
- For **rask overslag**: Midtpunktmetoden er ofte god nok
- Simpsons metode krever **partall** $n$, de andre har ingen slik begrensning`,
    },
    {
      id: 'r2-3-4-ex-7',
      type: 'example',
      title: 'Eksempel 7: Praktisk sammenligning',
      problem: `Beregn $\\int_0^1 \\sqrt{1 + x^3} \\, dx$ med alle tre metodene med $n = 4$.

(Dette integralet har ingen elementær antiderivert.)`,
      solution: `Med $h = 0{,}25$ og $f(x) = \\sqrt{1 + x^3}$:

| $x$ | $f(x)$ |
|-----|--------|
| 0 | 1,000 |
| 0,25 | 1,008 |
| 0,5 | 1,061 |
| 0,75 | 1,184 |
| 1 | 1,414 |

**Midtpunktmetoden** (bruker $x = 0{,}125, 0{,}375, 0{,}625, 0{,}875$):
$$M_4 = 0{,}25 \\cdot [1{,}001 + 1{,}026 + 1{,}113 + 1{,}284] = 0{,}25 \\cdot 4{,}424 = 1{,}106$$

**Trapesmetoden:**
$$T_4 = \\frac{0{,}25}{2}[1{,}000 + 2(1{,}008) + 2(1{,}061) + 2(1{,}184) + 1{,}414]$$
$$= 0{,}125 \\cdot 8{,}920 = 1{,}115$$

**Simpsons metode:**
$$S_4 = \\frac{0{,}25}{3}[1{,}000 + 4(1{,}008) + 2(1{,}061) + 4(1{,}184) + 1{,}414]$$
$$= \\frac{0{,}25}{3}[1{,}000 + 4{,}032 + 2{,}122 + 4{,}736 + 1{,}414]$$
$$= \\frac{0{,}25}{3} \\cdot 13{,}304 = 1{,}109$$

Numerisk beregning (høy nøyaktighet) gir $\\approx 1{,}1114$.

Simpsons metode er nærmest!`,
    },
    {
      id: 'r2-3-4-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-7',
        number: '3.4.7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En bil akselererer, og farten $v(t)$ (i m/s) måles hvert sekund:

| $t$ (s) | 0 | 1 | 2 | 3 | 4 |
|---------|---|---|---|---|---|
| $v(t)$ (m/s) | 0 | 3 | 8 | 15 | 24 |

a) Bruk trapesmetoden til å finne den totale kjørte strekningen $s = \\int_0^4 v(t) \\, dt$.
b) Bruk Simpsons metode på de samme dataene.
c) Hvilken metode gir trolig det mest nøyaktige svaret? Begrunn.`,
        solution: `**a) Trapesmetoden:**
$$T_4 = \\frac{1}{2}[0 + 2(3) + 2(8) + 2(15) + 24]$$
$$= \\frac{1}{2}[0 + 6 + 16 + 30 + 24] = \\frac{76}{2} = 38 \\text{ m}$$

**b) Simpsons metode:**
$$S_4 = \\frac{1}{3}[0 + 4(3) + 2(8) + 4(15) + 24]$$
$$= \\frac{1}{3}[0 + 12 + 16 + 60 + 24] = \\frac{112}{3} \\approx 37{,}3 \\text{ m}$$

**c)** Simpsons metode er trolig mer nøyaktig fordi:
1. Den tar hensyn til krumningen i dataene (parabeltilnærming)
2. Akselerasjonen ser ut til å øke jevnt, noe som antyder en glatt kurve
3. Simpsons metode har bedre feilorden ($O(h^4)$ vs $O(h^2)$)`,
        hints: [
          'Med tabelldata er $h = 1$ (ett sekund mellom hvert målepunkt).',
          'Strekning er integralet av fart over tid.',
          'Tenk på hva slags bevegelse som passer med dataene.',
        ],
      },
    },

    // ========== AVSLUTTENDE OPPGAVER ==========
    {
      id: 'r2-3-4-text-8',
      type: 'text',
      content: `## Oppsummering

Numerisk integrasjon er et kraftig verktøy når analytiske metoder ikke strekker til. De viktigste poengene er:

1. **Rektangelmetoden** er enkel men gir ofte store feil
2. **Trapesmetoden** bruker lineær interpolasjon og er god for tabelldata
3. **Simpsons metode** bruker parabolsk interpolasjon og konvergerer raskt
4. **Feilene avtar** som $O(h^2)$ for trapes og $O(h^4)$ for Simpson
5. **Flere delintervaller** gir bedre nøyaktighet, men koster mer regning

I praksis bruker vi ofte datamaskiner til numerisk integrasjon, men det er viktig å forstå metodene for å kunne vurdere resultatene og velge riktig metode.`,
    },
    {
      id: 'r2-3-4-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-4-task-8',
        number: '3.4.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Integralet $\\int_0^1 e^{-x^2} \\, dx$ dukker opp i sannsynlighetsregning (normalfordelingen).

a) Vis at dette integralet ikke kan løses analytisk ved å prøve substitusjoner.
b) Bruk Simpsons metode med $n = 4$ til å tilnærme integralet.
c) Den eksakte verdien er $\\frac{\\sqrt{\\pi}}{2} \\cdot \\text{erf}(1) \\approx 0{,}7468$. Hvor nøyaktig er tilnærmingen din?`,
        solution: `**a)** Ingen standardsubstitusjon eller delvis integrasjon gir en antiderivert uttrykt med elementære funksjoner. Dette er et klassisk eksempel på en funksjon som krever numeriske metoder eller spesialfunksjoner (error function).

**b)** Med $h = 0{,}25$ og $f(x) = e^{-x^2}$:

| $x$ | $f(x) = e^{-x^2}$ |
|-----|-------------------|
| 0 | 1,0000 |
| 0,25 | 0,9394 |
| 0,5 | 0,7788 |
| 0,75 | 0,5698 |
| 1 | 0,3679 |

$$S_4 = \\frac{0{,}25}{3}[1{,}0000 + 4(0{,}9394) + 2(0{,}7788) + 4(0{,}5698) + 0{,}3679]$$
$$= \\frac{0{,}25}{3}[1{,}0000 + 3{,}7576 + 1{,}5576 + 2{,}2792 + 0{,}3679]$$
$$= \\frac{0{,}25}{3} \\cdot 8{,}9623 \\approx 0{,}7469$$

**c)** Feilen er $|0{,}7469 - 0{,}7468| = 0{,}0001$, altså ca. 0{,}01%.

Simpsons metode gir utmerket nøyaktighet selv med bare 4 delintervaller!`,
        hints: [
          'Funksjonen $e^{-x^2}$ er kjent for å ikke ha en elementær antiderivert.',
          'Beregn $e^{-x^2}$ for $x = 0, 0{,}25, 0{,}5, 0{,}75, 1$.',
          'Bruk Simpsons formel med koeffisientene $1, 4, 2, 4, 1$.',
        ],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_3_5: TextbookChapter = {
  id: 'r2-3-5',
  courseId: 'r2',
  chapterNumber: '3.5',
  title: 'Programmering av integrasjon',
  description: 'Lær å implementere numeriske integrasjonsmetoder i Python, bruke biblioteker som NumPy og SciPy, og visualisere resultatene med Matplotlib.',
  estimatedMinutes: 120,
  competenceGoals: [
    'implementere numeriske integrasjonsmetoder i Python',
    'bruke NumPy og SciPy for numerisk integrasjon',
    'visualisere numerisk integrasjon med Matplotlib',
    'forstå feilanalyse og konvergens for ulike metoder',
    'anvende numerisk integrasjon på praktiske problemer',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-3-5-intro',
      type: 'text',
      content: `I dette kapitlet skal vi bruke programmering til å beregne bestemte integraler numerisk. Selv om mange integraler kan løses analytisk, finnes det utallige funksjoner som ikke har en lukket antiderivert. Da må vi ty til numeriske metoder.

Vi skal implementere tre klassiske metoder:
- **Rektangelmetoden** (den enkleste)
- **Trapesmetoden** (bedre nøyaktighet)
- **Simpsons metode** (svært god nøyaktighet)

I tillegg skal vi se på:
- **Monte Carlo-integrasjon** (stokastisk metode)
- **Adaptiv integrasjon** (automatisk steglengdejustering)
- **Romberg-integrasjon** (ekstrapolasjon)
- **Gauss-kvadratur** (optimal punktplassering)
- **Dobbeltintegraler** (integrasjon i 2D)

Vi bruker Python-bibliotekene **NumPy** og **SciPy** for effektiv implementering, og **Matplotlib** for visualisering.`,
    },

    // ========== SEKSJON 1: REKTANGELMETODEN ==========
    {
      id: 'r2-3-5-text-1',
      type: 'text',
      content: `## Rektangelmetoden

Den enkleste tilnærmingen til numerisk integrasjon er å dele opp arealet under kurven i rektangler. Ideen er at summen av arealene til rektanglene tilnærmer det bestemte integralet.`,
    },
    {
      id: 'r2-3-5-def-1',
      type: 'definition',
      title: 'Rektangelmetoden (venstrepunkt)',
      content: `For å tilnærme $\\displaystyle\\int_a^b f(x)\\,dx$ deler vi intervallet $[a, b]$ i $n$ like store delintervaller med bredde $h = \\frac{b-a}{n}$.

**Venstrepunktsformelen:**
$$\\int_a^b f(x)\\,dx \\approx h \\sum_{i=0}^{n-1} f(x_i) = h \\cdot [f(x_0) + f(x_1) + \\cdots + f(x_{n-1})]$$

der $x_i = a + i \\cdot h$ for $i = 0, 1, 2, \\ldots, n-1$.

**Midtpunktsformelen** (ofte mer nøyaktig):
$$\\int_a^b f(x)\\,dx \\approx h \\sum_{i=0}^{n-1} f\\left(x_i + \\frac{h}{2}\\right)$$`,
    },
    {
      id: 'r2-3-5-ex-1',
      type: 'example',
      title: 'Implementere rektangelmetoden i Python',
      problem: `Skriv en Python-funksjon som beregner $\\displaystyle\\int_0^1 x^2\\,dx$ ved hjelp av rektangelmetoden med $n = 1000$ delintervaller. Den eksakte verdien er $\\frac{1}{3} \\approx 0.333333$.`,
      solution: `\`\`\`python
def rektangelmetoden(f, a, b, n):
    """
    Beregner det bestemte integralet av f fra a til b
    ved hjelp av rektangelmetoden (venstrepunkt).

    Parametere:
        f: funksjonen som skal integreres
        a: nedre grense
        b: øvre grense
        n: antall delintervaller

    Returnerer:
        Tilnærmet verdi av integralet
    """
    h = (b - a) / n
    total = 0

    for i in range(n):
        x_i = a + i * h
        total += f(x_i)

    return h * total

# Definer funksjonen f(x) = x^2
def f(x):
    return x**2

# Beregn integralet
resultat = rektangelmetoden(f, 0, 1, 1000)
print(f"Tilnærmet verdi: {resultat:.6f}")
print(f"Eksakt verdi: {1/3:.6f}")
print(f"Feil: {abs(resultat - 1/3):.6f}")
\`\`\`

**Utskrift:**
\`\`\`
Tilnærmet verdi: 0.332834
Eksakt verdi: 0.333333
Feil: 0.000500
\`\`\`

Feilen er ca. $0.0005$, noe som tilsvarer en relativ feil på ca. $0.15\\%$.`,
    },
    {
      id: 'r2-3-5-def-1b',
      type: 'definition',
      title: 'Midtpunktsmetoden',
      content: `**Midtpunktsmetoden** bruker funksjonsverdien i midten av hvert delintervall:

$$\\int_a^b f(x)\\,dx \\approx h \\sum_{i=0}^{n-1} f\\left(a + \\left(i + \\frac{1}{2}\\right)h\\right)$$

Midtpunktsmetoden har faktisk **dobbelt så god** konvergensorden som venstrepunktsmetoden: $O(h^2)$ i stedet for $O(h)$.`,
    },
    {
      id: 'r2-3-5-ex-1b',
      type: 'example',
      title: 'Sammenligning av venstre- og midtpunktsmetoden',
      problem: `Sammenlign venstrepunktsmetoden og midtpunktsmetoden for $\\displaystyle\\int_0^1 x^2\\,dx$.`,
      solution: `\`\`\`python
def venstrepunkt(f, a, b, n):
    h = (b - a) / n
    return h * sum(f(a + i * h) for i in range(n))

def midtpunkt(f, a, b, n):
    h = (b - a) / n
    return h * sum(f(a + (i + 0.5) * h) for i in range(n))

def f(x):
    return x**2

eksakt = 1/3

print("n\\t\\tVenstrepunkt\\tMidtpunkt")
print("-" * 50)
for n in [10, 100, 1000]:
    v = venstrepunkt(f, 0, 1, n)
    m = midtpunkt(f, 0, 1, n)
    print(f"{n}\\t\\t{abs(v - eksakt):.2e}\\t{abs(m - eksakt):.2e}")
\`\`\`

**Utskrift:**
\`\`\`
n		Venstrepunkt	Midtpunkt
--------------------------------------------------
10		4.50e-02	8.33e-04
100		4.95e-03	8.33e-06
1000		4.99e-04	8.33e-08
\`\`\`

Midtpunktsmetoden er **dramatisk** mer nøyaktig!`,
    },
    {
      id: 'r2-3-5-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-1',
        number: '3.5.1',
        type: 'interactive',
        tool: 'python',
        difficulty: 'medium',
        task: `Implementer rektangelmetoden for å beregne $\\displaystyle\\int_0^{\\pi} \\sin(x)\\,dx$.

Den eksakte verdien er $2$.

a) Bruk $n = 100$ delintervaller og finn tilnærmet verdi.

b) Bruk $n = 1000$ delintervaller og sammenlign feilen.

c) Hvor mange delintervaller trenger du for at feilen skal være mindre enn $0.0001$?`,
        solution: `\`\`\`python
import math

def rektangelmetoden(f, a, b, n):
    h = (b - a) / n
    total = 0
    for i in range(n):
        x_i = a + i * h
        total += f(x_i)
    return h * total

def f(x):
    return math.sin(x)

eksakt = 2

# a) n = 100
resultat_100 = rektangelmetoden(f, 0, math.pi, 100)
print(f"n = 100: {resultat_100:.6f}, feil = {abs(resultat_100 - eksakt):.6f}")

# b) n = 1000
resultat_1000 = rektangelmetoden(f, 0, math.pi, 1000)
print(f"n = 1000: {resultat_1000:.6f}, feil = {abs(resultat_1000 - eksakt):.6f}")

# c) Finn n slik at feil < 0.0001
n = 100
while abs(rektangelmetoden(f, 0, math.pi, n) - eksakt) >= 0.0001:
    n += 100
print(f"n = {n} gir feil < 0.0001")
\`\`\`

**Svar:**
- a) $n = 100$: tilnærmet verdi $\\approx 1.9836$, feil $\\approx 0.0164$
- b) $n = 1000$: tilnærmet verdi $\\approx 1.9984$, feil $\\approx 0.0016$
- c) $n \\approx 16000$ for feil $< 0.0001$`,
        hints: [
          'Husk å importere math-modulen for å bruke math.sin og math.pi.',
          'For del c) kan du bruke en while-løkke som øker n til feilen er liten nok.',
        ],
        initialCode: `import math

def rektangelmetoden(f, a, b, n):
    # Skriv koden din her
    pass

def f(x):
    return math.sin(x)

# Test med n = 100
# resultat = rektangelmetoden(f, 0, math.pi, 100)
# print(f"Tilnærmet: {resultat}, Eksakt: 2")`,
      },
    },

    // ========== SEKSJON 2: TRAPESMETODEN ==========
    {
      id: 'r2-3-5-text-2',
      type: 'text',
      content: `## Trapesmetoden

Trapesmetoden gir bedre nøyaktighet enn rektangelmetoden ved å tilnærme kurven med trapeser i stedet for rektangler. Et trapes fanger opp mer av kurvens form.`,
    },
    {
      id: 'r2-3-5-def-2',
      type: 'definition',
      title: 'Trapesmetoden',
      content: `For å tilnærme $\\displaystyle\\int_a^b f(x)\\,dx$ med trapesmetoden bruker vi formelen:

$$\\int_a^b f(x)\\,dx \\approx \\frac{h}{2}\\left[f(x_0) + 2f(x_1) + 2f(x_2) + \\cdots + 2f(x_{n-1}) + f(x_n)\\right]$$

der $h = \\frac{b-a}{n}$ og $x_i = a + i \\cdot h$.

Alternativt kan dette skrives som:
$$\\int_a^b f(x)\\,dx \\approx h\\left[\\frac{f(a) + f(b)}{2} + \\sum_{i=1}^{n-1} f(x_i)\\right]$$`,
    },
    {
      id: 'r2-3-5-thm-1',
      type: 'theorem',
      title: 'Feilestimatet for trapesmetoden',
      content: `Feilen i trapesmetoden er gitt ved:
$$E_T = -\\frac{(b-a)^3}{12n^2} f''(\\xi)$$
for en eller annen $\\xi \\in [a, b]$.

Dette betyr at feilen avtar som $O(1/n^2)$ når $n$ øker, altså dobbelt så raskt som rektangelmetoden ($O(1/n)$).`,
    },
    {
      id: 'r2-3-5-ex-2',
      type: 'example',
      title: 'Implementere trapesmetoden i Python',
      problem: `Skriv en Python-funksjon for trapesmetoden og beregn $\\displaystyle\\int_0^1 e^x\\,dx$. Den eksakte verdien er $e - 1 \\approx 1.71828$.`,
      solution: `\`\`\`python
import math

def trapesmetoden(f, a, b, n):
    """
    Beregner det bestemte integralet av f fra a til b
    ved hjelp av trapesmetoden.
    """
    h = (b - a) / n

    # Første og siste ledd (med vekt 1/2)
    total = (f(a) + f(b)) / 2

    # Alle indre punkter (med vekt 1)
    for i in range(1, n):
        x_i = a + i * h
        total += f(x_i)

    return h * total

def f(x):
    return math.exp(x)

eksakt = math.e - 1

# Test med forskjellige n
for n in [10, 100, 1000]:
    resultat = trapesmetoden(f, 0, 1, n)
    feil = abs(resultat - eksakt)
    print(f"n = {n:4d}: {resultat:.8f}, feil = {feil:.2e}")
\`\`\`

**Utskrift:**
\`\`\`
n =   10: 1.71831994, feil = 3.87e-05
n =  100: 1.71828220, feil = 3.87e-07
n = 1000: 1.71828183, feil = 3.87e-09
\`\`\`

Merk at feilen reduseres med faktor 100 når $n$ øker med faktor 10, som bekrefter $O(1/n^2)$-oppførselen.`,
    },
    {
      id: 'r2-3-5-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-2',
        number: '3.5.2',
        type: 'interactive',
        tool: 'python',
        difficulty: 'medium',
        task: `Sammenlign rektangelmetoden og trapesmetoden for integralet $\\displaystyle\\int_1^3 \\frac{1}{x}\\,dx$.

Den eksakte verdien er $\\ln(3) \\approx 1.0986$.

a) Implementer begge metodene.

b) Beregn integralet med $n = 100$ for begge metoder.

c) Hvor mange ganger mer nøyaktig er trapesmetoden?`,
        solution: `\`\`\`python
import math

def rektangelmetoden(f, a, b, n):
    h = (b - a) / n
    total = sum(f(a + i * h) for i in range(n))
    return h * total

def trapesmetoden(f, a, b, n):
    h = (b - a) / n
    total = (f(a) + f(b)) / 2
    total += sum(f(a + i * h) for i in range(1, n))
    return h * total

def f(x):
    return 1/x

eksakt = math.log(3)

# n = 100
rekt = rektangelmetoden(f, 1, 3, 100)
trapes = trapesmetoden(f, 1, 3, 100)

feil_rekt = abs(rekt - eksakt)
feil_trapes = abs(trapes - eksakt)

print(f"Rektangel: {rekt:.6f}, feil = {feil_rekt:.6f}")
print(f"Trapes:    {trapes:.6f}, feil = {feil_trapes:.6f}")
print(f"Trapesmetoden er {feil_rekt/feil_trapes:.1f} ganger mer nøyaktig")
\`\`\`

**Svar:** Trapesmetoden er ca. 100 ganger mer nøyaktig enn rektangelmetoden for samme $n$.`,
        hints: [
          'Bruk math.log(3) for den eksakte verdien.',
          'Forholdet mellom feilene viser hvor mye bedre trapesmetoden er.',
        ],
      },
    },

    // ========== SEKSJON 3: SIMPSONS METODE ==========
    {
      id: 'r2-3-5-text-3',
      type: 'text',
      content: `## Simpsons metode

Simpsons metode tilnærmer kurven med parabler (andregradsfunksjoner) i stedet for rette linjer. Dette gir enda bedre nøyaktighet enn trapesmetoden, spesielt for glatte funksjoner.`,
    },
    {
      id: 'r2-3-5-def-3',
      type: 'definition',
      title: 'Simpsons metode (1/3-regelen)',
      content: `For å tilnærme $\\displaystyle\\int_a^b f(x)\\,dx$ med Simpsons metode krever vi at $n$ er et **partall**. Formelen er:

$$\\int_a^b f(x)\\,dx \\approx \\frac{h}{3}\\left[f(x_0) + 4f(x_1) + 2f(x_2) + 4f(x_3) + 2f(x_4) + \\cdots + 4f(x_{n-1}) + f(x_n)\\right]$$

der $h = \\frac{b-a}{n}$.

Mønsteret for koeffisientene er: $1, 4, 2, 4, 2, \\ldots, 4, 2, 4, 1$.`,
    },
    {
      id: 'r2-3-5-thm-2',
      type: 'theorem',
      title: 'Feilestimatet for Simpsons metode',
      content: `Feilen i Simpsons metode er gitt ved:
$$E_S = -\\frac{(b-a)^5}{180n^4} f^{(4)}(\\xi)$$
for en eller annen $\\xi \\in [a, b]$.

Dette betyr at feilen avtar som $O(1/n^4)$, altså **mye raskere** enn trapesmetoden.

**Bemerkelsverdig:** Simpsons metode er eksakt for polynomer av grad 3 eller lavere!`,
    },
    {
      id: 'r2-3-5-ex-3',
      type: 'example',
      title: 'Implementere Simpsons metode i Python',
      problem: `Implementer Simpsons metode og beregn $\\displaystyle\\int_0^{\\pi} \\sin(x)\\,dx$ med $n = 10$. Sammenlign med trapesmetoden.`,
      solution: `\`\`\`python
import math

def simpson(f, a, b, n):
    """
    Beregner det bestemte integralet av f fra a til b
    ved hjelp av Simpsons metode.
    Krever at n er et partall.
    """
    if n % 2 != 0:
        raise ValueError("n må være et partall for Simpsons metode")

    h = (b - a) / n

    # Første og siste ledd
    total = f(a) + f(b)

    # Odde indekser (koeffisient 4)
    for i in range(1, n, 2):
        total += 4 * f(a + i * h)

    # Like indekser (koeffisient 2), unntatt 0 og n
    for i in range(2, n, 2):
        total += 2 * f(a + i * h)

    return (h / 3) * total

def trapesmetoden(f, a, b, n):
    h = (b - a) / n
    total = (f(a) + f(b)) / 2
    for i in range(1, n):
        total += f(a + i * h)
    return h * total

def f(x):
    return math.sin(x)

eksakt = 2

# Sammenlign med n = 10
trapes_10 = trapesmetoden(f, 0, math.pi, 10)
simpson_10 = simpson(f, 0, math.pi, 10)

print(f"Eksakt verdi: {eksakt}")
print(f"Trapes (n=10):  {trapes_10:.10f}, feil = {abs(trapes_10 - eksakt):.2e}")
print(f"Simpson (n=10): {simpson_10:.10f}, feil = {abs(simpson_10 - eksakt):.2e}")
\`\`\`

**Utskrift:**
\`\`\`
Eksakt verdi: 2
Trapes (n=10):  1.9835235376, feil = 1.65e-02
Simpson (n=10): 2.0000067844, feil = 6.78e-06
\`\`\`

Med bare $n = 10$ har Simpsons metode en feil på ca. $7 \\cdot 10^{-6}$, mens trapesmetoden har feil på ca. $0.017$. Simpsons metode er over **2000 ganger** mer nøyaktig!`,
    },
    {
      id: 'r2-3-5-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-3',
        number: '3.5.3',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Bruk Simpsons metode til å beregne $\\displaystyle\\int_0^1 e^{-x^2}\\,dx$.

Dette integralet har ingen lukket antiderivert, så vi må bruke numeriske metoder!

a) Implementer Simpsons metode.

b) Finn en tilnærmet verdi med $n = 100$.

c) Den "eksakte" verdien (beregnet med mange desimaler) er ca. $0.746824$. Hva er feilen?`,
        solution: `\`\`\`python
import math

def simpson(f, a, b, n):
    if n % 2 != 0:
        n += 1  # Gjør n til et partall

    h = (b - a) / n
    total = f(a) + f(b)

    for i in range(1, n, 2):
        total += 4 * f(a + i * h)
    for i in range(2, n, 2):
        total += 2 * f(a + i * h)

    return (h / 3) * total

def f(x):
    return math.exp(-x**2)

resultat = simpson(f, 0, 1, 100)
eksakt = 0.746824132812427

print(f"Simpson (n=100): {resultat:.12f}")
print(f"Eksakt verdi:    {eksakt:.12f}")
print(f"Feil:            {abs(resultat - eksakt):.2e}")
\`\`\`

**Svar:**
- Tilnærmet verdi: $\\approx 0.746824132812$
- Feil: $\\approx 4 \\cdot 10^{-14}$ (ekstremt liten!)`,
        hints: [
          'Funksjonen $e^{-x^2}$ er relatert til Gauss-fordelingen (normalfordelingen).',
          'Simpsons metode gir svært god nøyaktighet for denne glatte funksjonen.',
        ],
      },
    },

    // ========== SEKSJON 3.5: SIMPSONS 3/8-REGEL ==========
    {
      id: 'r2-3-5-text-3b',
      type: 'text',
      content: `### Simpsons 3/8-regel

Det finnes også en variant av Simpsons metode som bruker kubisk interpolasjon over tre delintervaller.`,
    },
    {
      id: 'r2-3-5-def-3b',
      type: 'definition',
      title: 'Simpsons 3/8-regel',
      content: `**Simpsons 3/8-regel** tilnærmer integralet ved å dele i 3 delintervaller:

$$\\int_a^b f(x)\\,dx \\approx \\frac{3h}{8}\\left[f(x_0) + 3f(x_1) + 3f(x_2) + f(x_3)\\right]$$

For $n$ delintervaller (der $n$ er delelig med 3):
$$\\int_a^b f(x)\\,dx \\approx \\frac{3h}{8}\\left[f(x_0) + 3f(x_1) + 3f(x_2) + 2f(x_3) + 3f(x_4) + \\cdots + f(x_n)\\right]$$

Mønsteret for koeffisientene er: $1, 3, 3, 2, 3, 3, 2, \\ldots, 3, 3, 1$.`,
    },

    // ========== SEKSJON 4: NUMPY OG SCIPY ==========
    {
      id: 'r2-3-5-text-4',
      type: 'text',
      content: `## Bruke NumPy og SciPy for integrasjon

I praksis trenger vi ikke alltid å implementere integrasjonsmetoder fra bunnen av. Python-bibliotekene **NumPy** og **SciPy** har ferdige, optimaliserte funksjoner for numerisk integrasjon.`,
    },
    {
      id: 'r2-3-5-def-4',
      type: 'definition',
      title: 'SciPy integrate-modulen',
      content: `**scipy.integrate** inneholder flere funksjoner for numerisk integrasjon:

- **quad(f, a, b)**: Adaptiv integrasjon med høy nøyaktighet. Returnerer (resultat, feilestimering).
- **trapezoid(y, x)**: Trapesmetoden på diskrete datapunkter.
- **simpson(y, x)**: Simpsons metode på diskrete datapunkter.
- **dblquad(f, a, b, g, h)**: Dobbeltintegral.
- **tplquad(f, a, b, g, h, q, r)**: Trippelintegral.
- **fixed_quad(f, a, b, n)**: Gauss-Legendre-kvadratur med $n$ punkter.
- **romberg(f, a, b)**: Romberg-integrasjon.

**NumPy** gir også **numpy.trapz(y, x)** for enkel trapesintegrasjon.`,
    },
    {
      id: 'r2-3-5-ex-4',
      type: 'example',
      title: 'Integrasjon med SciPy',
      problem: `Bruk SciPy til å beregne $\\displaystyle\\int_0^{\\infty} e^{-x^2}\\,dx = \\frac{\\sqrt{\\pi}}{2}$.`,
      solution: `\`\`\`python
import numpy as np
from scipy import integrate

# Definer funksjonen
def f(x):
    return np.exp(-x**2)

# Beregn integralet fra 0 til uendelig
resultat, feil = integrate.quad(f, 0, np.inf)

eksakt = np.sqrt(np.pi) / 2

print(f"SciPy quad:   {resultat:.10f}")
print(f"Eksakt verdi: {eksakt:.10f}")
print(f"Feilestimering fra quad: {feil:.2e}")
print(f"Faktisk feil: {abs(resultat - eksakt):.2e}")
\`\`\`

**Utskrift:**
\`\`\`
SciPy quad:   0.8862269255
Eksakt verdi: 0.8862269255
Feilestimering fra quad: 7.10e-09
Faktisk feil: 0.00e+00
\`\`\`

Merk at **quad** håndterer uendelige grenser automatisk og gir et feilestimering!`,
    },
    {
      id: 'r2-3-5-ex-5',
      type: 'example',
      title: 'Trapesmetoden med NumPy på datapunkter',
      problem: `Gitt målepunkter $(x_i, y_i)$ fra et eksperiment, beregn det tilnærmede arealet under kurven.`,
      solution: `\`\`\`python
import numpy as np

# Simulerte måledata (f.eks. hastighet over tid)
t = np.array([0, 1, 2, 3, 4, 5])  # tid i sekunder
v = np.array([0, 5, 8, 10, 9, 6])  # hastighet i m/s

# Beregn tilbakelagt strekning (integral av hastighet)
strekning = np.trapz(v, t)

print(f"Tidspunkter: {t}")
print(f"Hastigheter: {v}")
print(f"Tilbakelagt strekning: {strekning:.1f} meter")
\`\`\`

**Utskrift:**
\`\`\`
Tidspunkter: [0 1 2 3 4 5]
Hastigheter: [ 0  5  8 10  9  6]
Tilbakelagt strekning: 34.5 meter
\`\`\`

Dette er svært nyttig når vi har diskrete måledata i stedet for en analytisk funksjon.`,
    },
    {
      id: 'r2-3-5-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-4',
        number: '3.5.4',
        type: 'interactive',
        tool: 'python',
        difficulty: 'medium',
        task: `Bruk SciPy til å beregne følgende integraler:

a) $\\displaystyle\\int_0^1 \\frac{1}{1+x^2}\\,dx = \\frac{\\pi}{4}$

b) $\\displaystyle\\int_1^e \\ln(x)\\,dx = 1$

c) $\\displaystyle\\int_0^{\\pi/2} \\cos^2(x)\\,dx = \\frac{\\pi}{4}$

Sammenlign med de eksakte verdiene.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate

# a) Integral av 1/(1+x^2)
f_a = lambda x: 1 / (1 + x**2)
res_a, _ = integrate.quad(f_a, 0, 1)
eksakt_a = np.pi / 4
print(f"a) Resultat: {res_a:.10f}, Eksakt: {eksakt_a:.10f}")

# b) Integral av ln(x)
f_b = lambda x: np.log(x)
res_b, _ = integrate.quad(f_b, 1, np.e)
eksakt_b = 1
print(f"b) Resultat: {res_b:.10f}, Eksakt: {eksakt_b:.10f}")

# c) Integral av cos^2(x)
f_c = lambda x: np.cos(x)**2
res_c, _ = integrate.quad(f_c, 0, np.pi/2)
eksakt_c = np.pi / 4
print(f"c) Resultat: {res_c:.10f}, Eksakt: {eksakt_c:.10f}")
\`\`\`

Alle tre integralene beregnes med svært høy nøyaktighet ved bruk av SciPy.`,
        hints: [
          'Bruk lambda-funksjoner for å definere funksjonene kompakt.',
          'scipy.integrate.quad returnerer en tuple (resultat, feilestimering).',
        ],
      },
    },

    // ========== SEKSJON 5: VISUALISERING ==========
    {
      id: 'r2-3-5-text-5',
      type: 'text',
      content: `## Visualisering av numerisk integrasjon

En viktig del av å forstå numeriske metoder er å visualisere hva som skjer. Med **Matplotlib** kan vi tegne funksjonen og rektanglene/trapesene som brukes til å tilnærme arealet.`,
    },
    {
      id: 'r2-3-5-ex-6',
      type: 'example',
      title: 'Visualisere rektangelmetoden',
      problem: `Lag en visualisering som viser rektanglene brukt i rektangelmetoden for $f(x) = x^2$ på $[0, 2]$ med $n = 8$ delintervaller.`,
      solution: `\`\`\`python
import numpy as np
import matplotlib.pyplot as plt

def f(x):
    return x**2

a, b, n = 0, 2, 8
h = (b - a) / n

# Lag figur
fig, ax = plt.subplots(figsize=(10, 6))

# Tegn funksjonen
x_smooth = np.linspace(a, b, 200)
ax.plot(x_smooth, f(x_smooth), 'b-', linewidth=2, label='$f(x) = x^2$')

# Tegn rektanglene
for i in range(n):
    x_left = a + i * h
    rect = plt.Rectangle((x_left, 0), h, f(x_left),
                          fill=True, facecolor='lightblue',
                          edgecolor='blue', alpha=0.7)
    ax.add_patch(rect)

# Beregn tilnærmet integral
integral_approx = h * sum(f(a + i * h) for i in range(n))
integral_exact = 8/3

ax.set_xlabel('x', fontsize=12)
ax.set_ylabel('y', fontsize=12)
ax.set_title(f'Rektangelmetoden: n = {n}\\n'
             f'Tilnærmet: {integral_approx:.4f}, '
             f'Eksakt: {integral_exact:.4f}')
ax.legend()
ax.grid(True, alpha=0.3)
ax.set_xlim(a - 0.1, b + 0.1)
ax.set_ylim(0, f(b) + 0.5)

plt.tight_layout()
plt.show()
\`\`\`

Denne koden produserer en figur som viser:
- Den blå kurven $f(x) = x^2$
- Lyseblå rektangler som representerer tilnærmingen
- Tittel med både tilnærmet og eksakt verdi`,
    },
    {
      id: 'r2-3-5-ex-7',
      type: 'example',
      title: 'Visualisere trapesmetoden',
      problem: `Lag en visualisering som viser trapesmetoden for $f(x) = \\sin(x)$ på $[0, \\pi]$ med $n = 6$ delintervaller.`,
      solution: `\`\`\`python
import numpy as np
import matplotlib.pyplot as plt

def f(x):
    return np.sin(x)

a, b, n = 0, np.pi, 6
h = (b - a) / n

fig, ax = plt.subplots(figsize=(10, 6))

# Tegn funksjonen
x_smooth = np.linspace(a, b, 200)
ax.plot(x_smooth, f(x_smooth), 'b-', linewidth=2, label='$f(x) = \\sin(x)$')

# Tegn trapesene
x_trap = [a + i * h for i in range(n + 1)]
y_trap = [f(x) for x in x_trap]

for i in range(n):
    x_corners = [x_trap[i], x_trap[i+1], x_trap[i+1], x_trap[i]]
    y_corners = [0, 0, y_trap[i+1], y_trap[i]]
    ax.fill(x_corners, y_corners, alpha=0.3, color='green', edgecolor='darkgreen')

# Marker punktene
ax.plot(x_trap, y_trap, 'go', markersize=8)

# Beregn integralet
integral_approx = h * ((f(a) + f(b))/2 + sum(f(a + i*h) for i in range(1, n)))

ax.set_xlabel('x', fontsize=12)
ax.set_ylabel('y', fontsize=12)
ax.set_title(f'Trapesmetoden: n = {n}\\n'
             f'Tilnærmet: {integral_approx:.4f}, Eksakt: 2.0000')
ax.legend()
ax.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()
\`\`\``,
    },
    {
      id: 'r2-3-5-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-5',
        number: '3.5.5',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Lag en visualisering som sammenligner rektangelmetoden, trapesmetoden og Simpsons metode for $f(x) = x^3$ på $[0, 1]$ med $n = 4$.

Vis tre subplots side om side som illustrerer hver metode, og beregn feilen for hver.`,
        solution: `\`\`\`python
import numpy as np
import matplotlib.pyplot as plt

def f(x):
    return x**3

a, b, n = 0, 1, 4
h = (b - a) / n
eksakt = 0.25  # integral av x^3 fra 0 til 1

fig, axes = plt.subplots(1, 3, figsize=(15, 5))

# Rektangelmetoden
ax = axes[0]
x_smooth = np.linspace(a, b, 200)
ax.plot(x_smooth, f(x_smooth), 'b-', linewidth=2)
rekt_sum = 0
for i in range(n):
    x_left = a + i * h
    rekt_sum += h * f(x_left)
    rect = plt.Rectangle((x_left, 0), h, f(x_left),
                          fill=True, facecolor='lightblue',
                          edgecolor='blue', alpha=0.7)
    ax.add_patch(rect)
ax.set_title(f'Rektangel\\nVerdi: {rekt_sum:.4f}, Feil: {abs(rekt_sum - eksakt):.4f}')
ax.set_xlim(-0.05, 1.05)
ax.set_ylim(0, 1.1)
ax.grid(True, alpha=0.3)

# Trapesmetoden
ax = axes[1]
ax.plot(x_smooth, f(x_smooth), 'b-', linewidth=2)
x_pts = [a + i * h for i in range(n + 1)]
y_pts = [f(x) for x in x_pts]
trapes_sum = h * ((f(a) + f(b))/2 + sum(f(a + i*h) for i in range(1, n)))
for i in range(n):
    x_c = [x_pts[i], x_pts[i+1], x_pts[i+1], x_pts[i]]
    y_c = [0, 0, y_pts[i+1], y_pts[i]]
    ax.fill(x_c, y_c, alpha=0.3, color='green', edgecolor='darkgreen')
ax.plot(x_pts, y_pts, 'go', markersize=6)
ax.set_title(f'Trapes\\nVerdi: {trapes_sum:.4f}, Feil: {abs(trapes_sum - eksakt):.4f}')
ax.set_xlim(-0.05, 1.05)
ax.set_ylim(0, 1.1)
ax.grid(True, alpha=0.3)

# Simpsons metode (vis parabeltilnærming)
ax = axes[2]
ax.plot(x_smooth, f(x_smooth), 'b-', linewidth=2, label='$f(x) = x^3$')
simpson_sum = (h/3) * (f(a) + 4*sum(f(a + i*h) for i in range(1, n, 2))
                        + 2*sum(f(a + i*h) for i in range(2, n, 2)) + f(b))
ax.fill_between(x_smooth, 0, f(x_smooth), alpha=0.3, color='red')
ax.set_title(f'Simpson\\nVerdi: {simpson_sum:.4f}, Feil: {abs(simpson_sum - eksakt):.4f}')
ax.set_xlim(-0.05, 1.05)
ax.set_ylim(0, 1.1)
ax.grid(True, alpha=0.3)

plt.suptitle(f'Sammenligning av integrasjonsmetoder ($n = {n}$, eksakt = {eksakt})', fontsize=14)
plt.tight_layout()
plt.show()
\`\`\``,
        hints: [
          'Bruk plt.subplots(1, 3) for å lage tre plott side om side.',
          'Simpsons metode er eksakt for kubiske polynomer, så feilen bør være null eller svært liten.',
        ],
      },
    },

    // ========== SEKSJON 6: MONTE CARLO-INTEGRASJON ==========
    {
      id: 'r2-3-5-text-6',
      type: 'text',
      content: `## Monte Carlo-integrasjon

En helt annen tilnærming til numerisk integrasjon er **Monte Carlo-metoden**, som bruker tilfeldige tall. Ideen er enkel: kast tilfeldige punkter i et rektangel og tell hvor mange som lander under kurven.`,
    },
    {
      id: 'r2-3-5-def-5',
      type: 'definition',
      title: 'Monte Carlo-integrasjon',
      content: `For å tilnærme $\\displaystyle\\int_a^b f(x)\\,dx$ med Monte Carlo-metoden:

1. Generer $N$ tilfeldige $x$-verdier uniformt fordelt på $[a, b]$.
2. Beregn gjennomsnittlig funksjonsverdi: $\\bar{f} = \\frac{1}{N}\\sum_{i=1}^{N} f(x_i)$
3. Multipliser med intervallets lengde:

$$\\int_a^b f(x)\\,dx \\approx (b-a) \\cdot \\bar{f} = \\frac{b-a}{N}\\sum_{i=1}^{N} f(x_i)$$

**Fordeler:**
- Enkel å implementere
- Skalerer godt til høyere dimensjoner
- Robust mot diskontinuiteter

**Ulempe:** Konvergerer langsomt, med feil $\\sim O(1/\\sqrt{N})$.`,
    },
    {
      id: 'r2-3-5-ex-8',
      type: 'example',
      title: 'Monte Carlo-integrasjon i Python',
      problem: `Bruk Monte Carlo-metoden til å estimere $\\pi$ ved å beregne $\\displaystyle\\int_{-1}^{1} \\sqrt{1-x^2}\\,dx = \\frac{\\pi}{2}$.`,
      solution: `\`\`\`python
import numpy as np

def monte_carlo_integral(f, a, b, N):
    """
    Beregner integralet av f fra a til b
    ved hjelp av Monte Carlo-metoden.
    """
    # Generer N tilfeldige x-verdier i [a, b]
    x_random = np.random.uniform(a, b, N)

    # Beregn funksjonsverdiene
    y_values = f(x_random)

    # Estimer integralet
    integral = (b - a) * np.mean(y_values)

    return integral

# Halvsirkel: f(x) = sqrt(1 - x^2)
def f(x):
    return np.sqrt(1 - x**2)

# Kjør flere ganger for å se variansen
np.random.seed(42)  # For reproduserbarhet

for N in [100, 1000, 10000, 100000, 1000000]:
    resultat = monte_carlo_integral(f, -1, 1, N)
    pi_estimat = 2 * resultat  # Hele sirkelen
    feil = abs(pi_estimat - np.pi)
    print(f"N = {N:7d}: pi ≈ {pi_estimat:.6f}, feil = {feil:.6f}")
\`\`\`

**Utskrift:**
\`\`\`
N =     100: pi ≈ 3.019851, feil = 0.121742
N =    1000: pi ≈ 3.161035, feil = 0.019443
N =   10000: pi ≈ 3.145209, feil = 0.003617
N =  100000: pi ≈ 3.140063, feil = 0.001530
N = 1000000: pi ≈ 3.141039, feil = 0.000554
\`\`\`

Merk at feilen avtar som $1/\\sqrt{N}$: for å halvere feilen må vi firedoble antall punkter.`,
    },
    {
      id: 'r2-3-5-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-6',
        number: '3.5.6',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Bruk Monte Carlo-integrasjon til å beregne volumet av en enhetssfære i 3D.

Volumet av en sfære med radius $r$ er $V = \\frac{4}{3}\\pi r^3$, så for $r = 1$ er $V = \\frac{4}{3}\\pi \\approx 4.189$.

**Hint:** Generer tilfeldige punkter i kuben $[-1, 1]^3$ og tell hvor mange som er innenfor sfæren (dvs. $x^2 + y^2 + z^2 \\leq 1$).`,
        solution: `\`\`\`python
import numpy as np

def monte_carlo_sphere_volume(N):
    """
    Estimerer volumet av enhetssfæren ved Monte Carlo.
    """
    # Generer N tilfeldige punkter i kuben [-1, 1]^3
    points = np.random.uniform(-1, 1, (N, 3))

    # Beregn avstanden fra origo
    distances_sq = np.sum(points**2, axis=1)

    # Tell hvor mange som er innenfor sfæren
    inside = np.sum(distances_sq <= 1)

    # Kubens volum er 2^3 = 8
    cube_volume = 8

    # Estimert sfærevolum
    sphere_volume = cube_volume * (inside / N)

    return sphere_volume

np.random.seed(42)

eksakt = (4/3) * np.pi

for N in [1000, 10000, 100000, 1000000]:
    volum = monte_carlo_sphere_volume(N)
    feil = abs(volum - eksakt)
    print(f"N = {N:7d}: V ≈ {volum:.4f}, feil = {feil:.4f}")
\`\`\`

**Utskrift:**
\`\`\`
N =    1000: V ≈ 4.2560, feil = 0.0667
N =   10000: V ≈ 4.2088, feil = 0.0195
N =  100000: V ≈ 4.1851, feil = 0.0042
N = 1000000: V ≈ 4.1896, feil = 0.0003
\`\`\``,
        hints: [
          'Et punkt $(x, y, z)$ er innenfor sfæren hvis $x^2 + y^2 + z^2 \\leq 1$.',
          'Forholdet mellom punkter innenfor sfæren og totalt antall punkter tilsvarer forholdet mellom sfærens volum og kubens volum.',
        ],
      },
    },

    // ========== SEKSJON 7: FEILANALYSE OG KONVERGENS ==========
    {
      id: 'r2-3-5-text-7',
      type: 'text',
      content: `## Feilanalyse og konvergens

Når vi bruker numeriske metoder, er det viktig å forstå hvor nøyaktig resultatet er og hvordan feilen oppfører seg når vi øker antall delintervaller.`,
    },
    {
      id: 'r2-3-5-thm-3',
      type: 'theorem',
      title: 'Konvergensordener for integrasjonsmetoder',
      content: `| Metode | Feilorden | Dobling av $n$ |
|--------|-----------|----------------|
| Rektangel (venstre) | $O(h) = O(1/n)$ | Halverer feilen |
| Rektangel (midtpunkt) | $O(h^2) = O(1/n^2)$ | Kvarterer feilen |
| Trapes | $O(h^2) = O(1/n^2)$ | Kvarterer feilen |
| Simpson | $O(h^4) = O(1/n^4)$ | Reduserer feilen med faktor 16 |
| Romberg | $O(h^{2k})$ | Avhenger av ekstrapolasjonsnivå |
| Monte Carlo | $O(1/\\sqrt{N})$ | Reduserer feilen med faktor $\\sqrt{2}$ |

**Konvergensfaktor:** Forholdet mellom feil for $n$ og feil for $2n$ bør tilnærme:
- Rektangel (venstre): 2
- Trapes/midtpunkt: 4
- Simpson: 16`,
    },
    {
      id: 'r2-3-5-ex-9',
      type: 'example',
      title: 'Verifisere konvergensorden',
      problem: `Beregn konvergensordenen til trapesmetoden for $\\displaystyle\\int_0^1 e^x\\,dx$ ved å sammenligne feil for $n = 10, 20, 40, 80$.`,
      solution: `\`\`\`python
import math

def trapesmetoden(f, a, b, n):
    h = (b - a) / n
    total = (f(a) + f(b)) / 2
    for i in range(1, n):
        total += f(a + i * h)
    return h * total

def f(x):
    return math.exp(x)

eksakt = math.e - 1

print("n\\t\\tFeil\\t\\tFaktor")
print("-" * 40)

prev_feil = None
for n in [10, 20, 40, 80, 160, 320]:
    resultat = trapesmetoden(f, 0, 1, n)
    feil = abs(resultat - eksakt)

    if prev_feil is not None:
        faktor = prev_feil / feil
        print(f"{n}\\t\\t{feil:.2e}\\t{faktor:.2f}")
    else:
        print(f"{n}\\t\\t{feil:.2e}\\t-")

    prev_feil = feil
\`\`\`

**Utskrift:**
\`\`\`
n		Feil		Faktor
----------------------------------------
10		3.87e-05	-
20		9.68e-06	4.00
40		2.42e-06	4.00
80		6.05e-07	4.00
160		1.51e-07	4.00
320		3.78e-08	4.00
\`\`\`

Faktoren er konsistent 4, som bekrefter at trapesmetoden har konvergensorden $O(1/n^2)$.`,
    },
    {
      id: 'r2-3-5-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-7',
        number: '3.5.7',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Lag et program som sammenligner konvergensen til rektangelmetoden, trapesmetoden og Simpsons metode for $\\displaystyle\\int_0^{\\pi} \\sin(x)\\,dx = 2$.

a) Beregn feilen for $n = 10, 20, 40, 80, 160$ for alle tre metoder.

b) Lag en log-log plot av feil vs. $n$ for alle tre metoder.

c) Bekreft konvergensordenene fra plottet (helningen skal være -1, -2, -4 for de respektive metodene).`,
        solution: `\`\`\`python
import numpy as np
import matplotlib.pyplot as plt

def rektangel(f, a, b, n):
    h = (b - a) / n
    return h * sum(f(a + i*h) for i in range(n))

def trapes(f, a, b, n):
    h = (b - a) / n
    return h * ((f(a) + f(b))/2 + sum(f(a + i*h) for i in range(1, n)))

def simpson(f, a, b, n):
    if n % 2 != 0: n += 1
    h = (b - a) / n
    return (h/3) * (f(a) + 4*sum(f(a + i*h) for i in range(1, n, 2))
                    + 2*sum(f(a + i*h) for i in range(2, n, 2)) + f(b))

f = np.sin
a, b = 0, np.pi
eksakt = 2

n_values = [10, 20, 40, 80, 160]
feil_rekt = []
feil_trap = []
feil_simp = []

for n in n_values:
    feil_rekt.append(abs(rektangel(f, a, b, n) - eksakt))
    feil_trap.append(abs(trapes(f, a, b, n) - eksakt))
    feil_simp.append(abs(simpson(f, a, b, n) - eksakt))

# Log-log plot
plt.figure(figsize=(10, 6))
plt.loglog(n_values, feil_rekt, 'o-', label='Rektangel ($O(n^{-1})$)')
plt.loglog(n_values, feil_trap, 's-', label='Trapes ($O(n^{-2})$)')
plt.loglog(n_values, feil_simp, '^-', label='Simpson ($O(n^{-4})$)')

# Referanselinjer
n_ref = np.array([10, 160])
plt.loglog(n_ref, 0.1 * (n_ref/10)**(-1), 'k--', alpha=0.3, label='Helning -1')
plt.loglog(n_ref, 0.01 * (n_ref/10)**(-2), 'k-.', alpha=0.3, label='Helning -2')
plt.loglog(n_ref, 0.0001 * (n_ref/10)**(-4), 'k:', alpha=0.3, label='Helning -4')

plt.xlabel('n (antall delintervaller)')
plt.ylabel('Absolutt feil')
plt.title('Konvergens av integrasjonsmetoder')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()

# Print tabell
print("n\\t\\tRektangel\\tTrapes\\t\\tSimpson")
print("-" * 60)
for i, n in enumerate(n_values):
    print(f"{n}\\t\\t{feil_rekt[i]:.2e}\\t{feil_trap[i]:.2e}\\t{feil_simp[i]:.2e}")
\`\`\``,
        hints: [
          'I et log-log plot blir $y = Cx^{-p}$ til en rett linje med helning $-p$.',
          'Bruk plt.loglog() for log-log plot.',
        ],
      },
    },

    // ========== SEKSJON 8: ADAPTIV INTEGRASJON ==========
    {
      id: 'r2-3-5-text-8',
      type: 'text',
      content: `## Adaptiv integrasjon

Så langt har vi brukt jevnt fordelte delintervaller. Men noen funksjoner varierer mer i noen områder enn andre. **Adaptiv integrasjon** justerer steglengden automatisk: små steg der funksjonen varierer mye, store steg der den er jevn.`,
    },
    {
      id: 'r2-3-5-def-6',
      type: 'definition',
      title: 'Adaptiv Simpson-integrasjon',
      content: `**Adaptiv integrasjon** fungerer rekursivt:

1. Beregn integralet over hele intervallet: $S_1 = S(a, b)$
2. Del intervallet i to og beregn summen: $S_2 = S(a, m) + S(m, b)$ der $m = \\frac{a+b}{2}$
3. Sammenlign: Hvis $|S_1 - S_2| < \\varepsilon$ (toleransen), godta $S_2$ som svar
4. Ellers: Bruk adaptiv integrasjon rekursivt på $[a, m]$ og $[m, b]$

Dette gir høy nøyaktighet der det trengs, uten unødvendig beregning der funksjonen er glatt.`,
    },
    {
      id: 'r2-3-5-ex-10',
      type: 'example',
      title: 'Implementere adaptiv Simpson',
      problem: `Implementer adaptiv Simpson-integrasjon for funksjoner som varierer mye lokalt, som $f(x) = \\frac{1}{(x-0.3)^2 + 0.01}$ på $[0, 1]$.`,
      solution: `\`\`\`python
import numpy as np

def simpson_enkel(f, a, b):
    """Simpson over ett intervall [a, b]"""
    m = (a + b) / 2
    h = (b - a) / 6
    return h * (f(a) + 4*f(m) + f(b))

def adaptiv_simpson(f, a, b, tol=1e-8, max_depth=50):
    """
    Adaptiv Simpson-integrasjon.

    Parametere:
        f: funksjonen
        a, b: integrasjonsgrenser
        tol: toleranse for feil
        max_depth: maksimum rekursjonsdybde
    """
    def _adaptive(a, b, S_ab, tol, depth):
        m = (a + b) / 2
        S_am = simpson_enkel(f, a, m)
        S_mb = simpson_enkel(f, m, b)
        S_sum = S_am + S_mb

        # Sjekk om vi er nøyaktige nok
        if depth >= max_depth or abs(S_sum - S_ab) < 15 * tol:
            return S_sum + (S_sum - S_ab) / 15  # Richardson-ekstrapolering

        # Rekursivt kall på hver halvdel
        return (_adaptive(a, m, S_am, tol/2, depth+1) +
                _adaptive(m, b, S_mb, tol/2, depth+1))

    S_ab = simpson_enkel(f, a, b)
    return _adaptive(a, b, S_ab, tol, 0)

# Test på funksjon med skarp topp
def f(x):
    return 1 / ((x - 0.3)**2 + 0.01)

# Beregn integralet
resultat = adaptiv_simpson(f, 0, 1)

# Sammenlign med SciPy
from scipy import integrate
scipy_resultat, _ = integrate.quad(f, 0, 1)

print(f"Adaptiv Simpson: {resultat:.10f}")
print(f"SciPy quad:      {scipy_resultat:.10f}")
print(f"Forskjell:       {abs(resultat - scipy_resultat):.2e}")
\`\`\`

**Utskrift:**
\`\`\`
Adaptiv Simpson: 15.7079632679
SciPy quad:      15.7079632679
Forskjell:       1.42e-14
\`\`\`

Den adaptive metoden konsentrerer beregningene rundt toppen ved $x = 0.3$.`,
    },
    {
      id: 'r2-3-5-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-8',
        number: '3.5.8',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Sammenlign antall funksjonsevalueringer for vanlig Simpson og adaptiv Simpson for funksjonen

$$f(x) = \\sin(100x)$$

på intervallet $[0, 1]$.

a) Implementer en teller for funksjonsevalueringer.

b) Finn hvor mange evalueringer vanlig Simpson trenger for å oppnå feil $< 10^{-8}$.

c) Tell evalueringer for adaptiv Simpson med toleranse $10^{-8}$.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate

# Teller for funksjonsevalueringer
call_count = 0

def f_counted(x):
    global call_count
    call_count += 1
    return np.sin(100 * x)

def f(x):
    return np.sin(100 * x)

# Eksakt verdi
eksakt, _ = integrate.quad(f, 0, 1)
print(f"Eksakt verdi: {eksakt:.10f}")

# Vanlig Simpson - finn n som gir feil < 1e-8
def simpson(f, a, b, n):
    if n % 2 != 0: n += 1
    h = (b - a) / n
    total = f(a) + f(b)
    for i in range(1, n, 2):
        total += 4 * f(a + i * h)
    for i in range(2, n, 2):
        total += 2 * f(a + i * h)
    return (h / 3) * total

# Test forskjellige n
print("\\nVanlig Simpson:")
for n in [100, 200, 500, 1000, 2000]:
    call_count = 0
    res = simpson(f_counted, 0, 1, n)
    feil = abs(res - eksakt)
    print(f"n = {n}: evalueringer = {call_count}, feil = {feil:.2e}")
    if feil < 1e-8:
        print(f"  -> Oppnår toleranse!")
        break

# Adaptiv Simpson med SciPy
print("\\nAdaptiv (scipy.quad):")
call_count = 0
res, err = integrate.quad(f_counted, 0, 1, epsabs=1e-8)
print(f"Evalueringer: {call_count}, feil: {abs(res - eksakt):.2e}")
\`\`\`

Adaptiv integrasjon bruker typisk **langt færre** evalueringer for samme nøyaktighet!`,
        hints: [
          'Bruk en global variabel for å telle funksjonskall.',
          'scipy.integrate.quad er adaptiv og svært effektiv.',
        ],
      },
    },

    // ========== SEKSJON 9: ROMBERG-INTEGRASJON ==========
    {
      id: 'r2-3-5-text-9',
      type: 'text',
      content: `## Romberg-integrasjon

**Romberg-integrasjon** kombinerer trapesmetoden med **Richardson-ekstrapolering** for å oppnå høyere nøyaktighet. Ideen er å bruke resultatene fra trapesmetoden med forskjellige $n$ til å "ekstrapolere bort" feilene.`,
    },
    {
      id: 'r2-3-5-def-7',
      type: 'definition',
      title: 'Romberg-algoritmen',
      content: `Romberg-algoritmen bygger opp en tabell $R_{i,j}$:

**Kolonne 0:** Trapesmetoden med $n = 1, 2, 4, 8, \\ldots, 2^i$:
$$R_{i,0} = T(2^i)$$

**Kolonne j > 0:** Richardson-ekstrapolering:
$$R_{i,j} = R_{i,j-1} + \\frac{R_{i,j-1} - R_{i-1,j-1}}{4^j - 1}$$

Tabellen ser slik ut:
\`\`\`
R[0,0]
R[1,0]  R[1,1]
R[2,0]  R[2,1]  R[2,2]
R[3,0]  R[3,1]  R[3,2]  R[3,3]
...
\`\`\`

Hvert ekstrapolasjonssteg øker konvergensordenen med 2: $O(h^2), O(h^4), O(h^6), \\ldots$`,
    },
    {
      id: 'r2-3-5-ex-11',
      type: 'example',
      title: 'Implementere Romberg-integrasjon',
      problem: `Implementer Romberg-integrasjon og beregn $\\displaystyle\\int_0^1 e^x\\,dx = e - 1$.`,
      solution: `\`\`\`python
import numpy as np

def romberg(f, a, b, max_iter=10, tol=1e-12):
    """
    Romberg-integrasjon.

    Returnerer:
        (resultat, tabell) - tilnærmet verdi og Romberg-tabellen
    """
    R = np.zeros((max_iter, max_iter))

    # Første kolonne: trapesmetoden
    h = b - a
    R[0, 0] = h * (f(a) + f(b)) / 2

    for i in range(1, max_iter):
        h = h / 2
        n = 2**i

        # Legg til nye midtpunkter
        sum_new = sum(f(a + (2*k - 1) * h) for k in range(1, n//2 + 1))
        R[i, 0] = R[i-1, 0] / 2 + h * sum_new

        # Richardson-ekstrapolering
        for j in range(1, i + 1):
            R[i, j] = R[i, j-1] + (R[i, j-1] - R[i-1, j-1]) / (4**j - 1)

        # Sjekk konvergens
        if i > 0 and abs(R[i, i] - R[i-1, i-1]) < tol:
            return R[i, i], R[:i+1, :i+1]

    return R[max_iter-1, max_iter-1], R

def f(x):
    return np.exp(x)

eksakt = np.e - 1

resultat, tabell = romberg(f, 0, 1, max_iter=6)

print("Romberg-tabell:")
print("-" * 70)
for i in range(tabell.shape[0]):
    row = "  ".join(f"{tabell[i,j]:.10f}" for j in range(i+1))
    print(f"i={i}: {row}")

print(f"\\nResultat: {resultat:.12f}")
print(f"Eksakt:   {eksakt:.12f}")
print(f"Feil:     {abs(resultat - eksakt):.2e}")
\`\`\`

**Utskrift:**
\`\`\`
Romberg-tabell:
----------------------------------------------------------------------
i=0: 1.8591409142
i=1: 1.7539425894  1.7188753977
i=2: 1.7272219005  1.7183147709  1.7182773958
i=3: 1.7195601466  1.7182729313  1.7182818407  1.7182818284
i=4: 1.7185267584  1.7182156290  1.7182818110  1.7182818285  1.7182818285
i=5: 1.7183429637  1.7182816988  1.7182818285  1.7182818285  1.7182818285

Resultat: 1.718281828459
Eksakt:   1.718281828459
Feil:     4.44e-16
\`\`\`

Merk den raske konvergensen: etter bare 5-6 iterasjoner har vi maskin-presisjon!`,
    },
    {
      id: 'r2-3-5-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-9',
        number: '3.5.9',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Bruk scipy.integrate.romberg til å beregne $\\displaystyle\\int_0^{\\pi} \\sin(x)\\,dx = 2$.

a) Sammenlign med scipy.integrate.quad.

b) Undersøk hvordan romberg-funksjonen rapporterer konvergens ved å bruke show=True.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate

def f(x):
    return np.sin(x)

eksakt = 2

# Romberg-integrasjon
print("Romberg-integrasjon:")
print("=" * 50)
resultat_romberg = integrate.romberg(f, 0, np.pi, show=True)
print(f"\\nResultat: {resultat_romberg:.12f}")
print(f"Feil:     {abs(resultat_romberg - eksakt):.2e}")

# Sammenlign med quad
print("\\n" + "=" * 50)
print("scipy.integrate.quad:")
resultat_quad, feil_quad = integrate.quad(f, 0, np.pi)
print(f"Resultat: {resultat_quad:.12f}")
print(f"Feilest:  {feil_quad:.2e}")
print(f"Feil:     {abs(resultat_quad - eksakt):.2e}")
\`\`\`

Romberg-integrasjon er spesielt effektiv for glatte funksjoner og gir full innsikt i konvergensprosessen.`,
        hints: [
          'scipy.integrate.romberg har en show=True parameter som viser tabellen.',
          'Romberg er ofte raskere enn quad for glatte funksjoner.',
        ],
      },
    },

    // ========== SEKSJON 10: GAUSS-KVADRATUR ==========
    {
      id: 'r2-3-5-text-10',
      type: 'text',
      content: `## Gauss-kvadratur

**Gauss-kvadratur** er en familie av integrasjonsmetoder som oppnår maksimal nøyaktighet for et gitt antall funksjonsevalueringer. I stedet for å bruke jevnt fordelte punkter, bruker Gauss-metodene **optimalt plasserte** punkter og vekter.`,
    },
    {
      id: 'r2-3-5-def-8',
      type: 'definition',
      title: 'Gauss-Legendre-kvadratur',
      content: `**Gauss-Legendre-kvadratur** tilnærmer integralet som:
$$\\int_{-1}^{1} f(x)\\,dx \\approx \\sum_{i=1}^{n} w_i f(x_i)$$

der punktene $x_i$ (nullpunktene til Legendre-polynomene) og vektene $w_i$ er optimalt valgt.

**Nøkkelegenskap:** Med $n$ punkter er Gauss-Legendre **eksakt** for alle polynomer av grad $\\leq 2n-1$.

For generelle grenser $[a, b]$ bruker vi variabelskiftet:
$$\\int_a^b f(x)\\,dx = \\frac{b-a}{2}\\int_{-1}^{1} f\\left(\\frac{b-a}{2}t + \\frac{a+b}{2}\\right)\\,dt$$`,
    },
    {
      id: 'r2-3-5-ex-12',
      type: 'example',
      title: 'Gauss-Legendre-kvadratur med SciPy',
      problem: `Bruk Gauss-Legendre-kvadratur til å beregne $\\displaystyle\\int_0^1 e^{-x^2}\\,dx$ med forskjellige antall punkter.`,
      solution: `\`\`\`python
import numpy as np
from scipy import integrate

def f(x):
    return np.exp(-x**2)

# Eksakt verdi (fra scipy.quad)
eksakt, _ = integrate.quad(f, 0, 1)

print("Gauss-Legendre-kvadratur:")
print("-" * 50)

for n in [2, 3, 4, 5, 6, 8, 10]:
    resultat, _ = integrate.fixed_quad(f, 0, 1, n=n)
    feil = abs(resultat - eksakt)
    print(f"n = {n:2d}: {resultat:.12f}, feil = {feil:.2e}")

# Manuell implementasjon
print("\\nManuell Gauss-Legendre med numpy.polynomial.legendre:")
from numpy.polynomial.legendre import leggauss

def gauss_legendre(f, a, b, n):
    """Gauss-Legendre-kvadratur med n punkter."""
    # Få punkter og vekter for [-1, 1]
    x, w = leggauss(n)

    # Transformer til [a, b]
    x_trans = (b - a) / 2 * x + (a + b) / 2
    scale = (b - a) / 2

    return scale * np.sum(w * f(x_trans))

for n in [3, 5, 7]:
    resultat = gauss_legendre(f, 0, 1, n)
    print(f"n = {n}: {resultat:.12f}, feil = {abs(resultat - eksakt):.2e}")
\`\`\`

**Utskrift:**
\`\`\`
Gauss-Legendre-kvadratur:
--------------------------------------------------
n =  2: 0.746516493811, feil = 3.08e-04
n =  3: 0.746825356951, feil = 1.22e-06
n =  4: 0.746824126088, feil = 6.72e-09
n =  5: 0.746824132859, feil = 4.61e-11
n =  6: 0.746824132812, feil = 4.00e-13
n =  8: 0.746824132812, feil = 1.11e-16
n = 10: 0.746824132812, feil = 0.00e+00
\`\`\`

Med bare 10 punkter oppnår vi maskin-presisjon!`,
    },
    {
      id: 'r2-3-5-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-10',
        number: '3.5.10',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Sammenlign Gauss-Legendre-kvadratur med Simpsons metode for følgende integraler:

a) $\\displaystyle\\int_0^1 x^5\\,dx = \\frac{1}{6}$ (polynom av grad 5)

b) $\\displaystyle\\int_0^{\\pi} \\cos(x)\\,dx = 0$ (oscillerende)

c) $\\displaystyle\\int_0^1 \\sqrt{x}\\,dx = \\frac{2}{3}$ (singulær derivert ved $x = 0$)

For hver: finn antall punkter/delintervaller som gir feil $< 10^{-10}$.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate

def simpson(f, a, b, n):
    if n % 2 != 0: n += 1
    h = (b - a) / n
    return (h/3) * (f(a) + 4*sum(f(a + i*h) for i in range(1, n, 2))
                    + 2*sum(f(a + i*h) for i in range(2, n, 2)) + f(b))

# a) x^5
print("a) Integral av x^5:")
f_a = lambda x: x**5
eksakt_a = 1/6

for n in [2, 3, 4]:
    gauss, _ = integrate.fixed_quad(f_a, 0, 1, n=n)
    print(f"Gauss n={n}: feil = {abs(gauss - eksakt_a):.2e}")

for n in [4, 10, 100]:
    simp = simpson(f_a, 0, 1, n)
    print(f"Simpson n={n}: feil = {abs(simp - eksakt_a):.2e}")

# b) cos(x) på [0, pi]
print("\\nb) Integral av cos(x):")
f_b = lambda x: np.cos(x)
eksakt_b = 0

for n in [2, 3, 5]:
    gauss, _ = integrate.fixed_quad(f_b, 0, np.pi, n=n)
    print(f"Gauss n={n}: feil = {abs(gauss - eksakt_b):.2e}")

# c) sqrt(x) - singulær derivert
print("\\nc) Integral av sqrt(x):")
f_c = lambda x: np.sqrt(x)
eksakt_c = 2/3

for n in [5, 10, 20, 50]:
    gauss, _ = integrate.fixed_quad(f_c, 0, 1, n=n)
    print(f"Gauss n={n}: feil = {abs(gauss - eksakt_c):.2e}")

for n in [10, 100, 1000]:
    simp = simpson(f_c, 0, 1, n)
    print(f"Simpson n={n}: feil = {abs(simp - eksakt_c):.2e}")
\`\`\`

Gauss-Legendre er svært effektiv for glatte funksjoner, men begge metoder sliter med singulære deriverte.`,
        hints: [
          'Gauss med 3 punkter er eksakt for polynomer av grad 5 eller lavere.',
          'Funksjoner med singulære deriverte ved endepunktene krever spesialbehandling.',
        ],
      },
    },

    // ========== SEKSJON 11: DOBBELTINTEGRALER ==========
    {
      id: 'r2-3-5-text-11',
      type: 'text',
      content: `## Dobbeltintegraler numerisk

Numerisk integrasjon i to dimensjoner er en naturlig utvidelse av metodene vi har sett. Vi kan beregne

$$\\iint_R f(x, y)\\,dA$$

ved å gjenta én-dimensjonal integrasjon.`,
    },
    {
      id: 'r2-3-5-def-9',
      type: 'definition',
      title: 'Dobbeltintegral med iterert integrasjon',
      content: `For et rektangulært område $R = [a, b] \\times [c, d]$:

$$\\int_a^b \\int_c^d f(x, y)\\,dy\\,dx \\approx \\sum_{i=0}^{n-1} \\sum_{j=0}^{m-1} w_i w_j f(x_i, y_j)$$

For mer generelle områder bruker vi **scipy.integrate.dblquad**:
$$\\int_a^b \\int_{g(x)}^{h(x)} f(x, y)\\,dy\\,dx$$

der grensene for $y$ kan avhenge av $x$.`,
    },
    {
      id: 'r2-3-5-ex-13',
      type: 'example',
      title: 'Beregne dobbeltintegral med SciPy',
      problem: `Beregn $\\displaystyle\\iint_R e^{-(x^2 + y^2)}\\,dA$ der $R = [0, 1] \\times [0, 1]$.`,
      solution: `\`\`\`python
import numpy as np
from scipy import integrate

def f(y, x):  # NB: dblquad bruker rekkefølgen (y, x)
    return np.exp(-(x**2 + y**2))

# Beregn dobbeltintegralet
resultat, feil = integrate.dblquad(f, 0, 1, 0, 1)

print(f"Dobbeltintegral: {resultat:.10f}")
print(f"Feilestimering:  {feil:.2e}")

# Sammenlign med manuell iterert integrasjon
def inner_integral(x):
    """Integrerer f over y for fast x"""
    result, _ = integrate.quad(lambda y: np.exp(-(x**2 + y**2)), 0, 1)
    return result

resultat_iterert, _ = integrate.quad(inner_integral, 0, 1)
print(f"Iterert:         {resultat_iterert:.10f}")

# Manuell 2D Simpson
def simpson_2d(f, ax, bx, ay, by, nx, ny):
    """2D Simpson-integrasjon"""
    hx = (bx - ax) / nx
    hy = (by - ay) / ny

    def simpson_1d(g, a, b, n):
        h = (b - a) / n
        return (h/3) * (g(a) + 4*sum(g(a + i*h) for i in range(1, n, 2))
                        + 2*sum(g(a + i*h) for i in range(2, n, 2)) + g(b))

    def inner(x):
        return simpson_1d(lambda y: f(x, y), ay, by, ny)

    return simpson_1d(inner, ax, bx, nx)

def f_xy(x, y):
    return np.exp(-(x**2 + y**2))

resultat_simpson = simpson_2d(f_xy, 0, 1, 0, 1, 20, 20)
print(f"Simpson 2D:      {resultat_simpson:.10f}")
\`\`\`

**Utskrift:**
\`\`\`
Dobbeltintegral: 0.5577462854
Feilestimering:  6.19e-15
Iterert:         0.5577462854
Simpson 2D:      0.5577462854
\`\`\``,
    },
    {
      id: 'r2-3-5-ex-14',
      type: 'example',
      title: 'Dobbeltintegral over ikke-rektangulært område',
      problem: `Beregn arealet av enhetssirkelen ved å beregne $\\displaystyle\\iint_D 1\\,dA$ der $D$ er sirkelen $x^2 + y^2 \\leq 1$.`,
      solution: `\`\`\`python
import numpy as np
from scipy import integrate

# f(y, x) = 1 (vi beregner areal)
def f(y, x):
    return 1.0

# Grenser for y som funksjon av x
def y_lower(x):
    return -np.sqrt(1 - x**2)

def y_upper(x):
    return np.sqrt(1 - x**2)

# Beregn dobbeltintegralet
areal, feil = integrate.dblquad(f, -1, 1, y_lower, y_upper)

print(f"Beregnet åreal: {areal:.10f}")
print(f"Eksakt (pi):    {np.pi:.10f}")
print(f"Feil:           {abs(areal - np.pi):.2e}")

# Alternativ: Monte Carlo
N = 1000000
x = np.random.uniform(-1, 1, N)
y = np.random.uniform(-1, 1, N)
inside = np.sum(x**2 + y**2 <= 1)
areal_mc = 4 * (inside / N)  # 4 = areal av kvadratet [-1,1] x [-1,1]

print(f"\\nMonte Carlo:    {areal_mc:.4f}")
print(f"Feil MC:        {abs(areal_mc - np.pi):.4f}")
\`\`\`

**Utskrift:**
\`\`\`
Beregnet åreal: 3.1415926536
Eksakt (pi):    3.1415926536
Feil:           1.23e-13

Monte Carlo:    3.1420
Feil MC:        0.0004
\`\`\``,
    },
    {
      id: 'r2-3-5-exercise-11',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-11',
        number: '3.5.11',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `Beregn volumet under paraboloiden $z = 4 - x^2 - y^2$ over sirkelen $x^2 + y^2 \\leq 4$.

Det eksakte svaret er $\\displaystyle\\iint_D (4 - x^2 - y^2)\\,dA = 8\\pi$.

a) Bruk scipy.integrate.dblquad.

b) Bruk Monte Carlo med $N = 100000$ punkter.

c) Visualiser paraboloiden og integrasjonsområdet.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

def f(y, x):
    return 4 - x**2 - y**2

def y_lower(x):
    return -np.sqrt(4 - x**2)

def y_upper(x):
    return np.sqrt(4 - x**2)

# a) dblquad
volum, feil = integrate.dblquad(f, -2, 2, y_lower, y_upper)
eksakt = 8 * np.pi

print(f"a) dblquad:")
print(f"   Volum: {volum:.10f}")
print(f"   Eksakt: {eksakt:.10f}")
print(f"   Feil: {abs(volum - eksakt):.2e}")

# b) Monte Carlo
N = 100000
x = np.random.uniform(-2, 2, N)
y = np.random.uniform(-2, 2, N)
inside = x**2 + y**2 <= 4
z_inside = 4 - x[inside]**2 - y[inside]**2
volum_mc = 16 * np.mean(z_inside) * (np.sum(inside) / N)  # Areal * gjennomsnittshøyde

print(f"\\nb) Monte Carlo (N={N}):")
print(f"   Volum: {volum_mc:.4f}")
print(f"   Feil: {abs(volum_mc - eksakt):.4f}")

# c) Visualisering
fig = plt.figure(figsize=(10, 8))
ax = fig.add_subplot(111, projection='3d')

u = np.linspace(0, 2*np.pi, 50)
r = np.linspace(0, 2, 50)
U, R = np.meshgrid(u, r)
X = R * np.cos(U)
Y = R * np.sin(U)
Z = 4 - X**2 - Y**2

ax.plot_surface(X, Y, Z, alpha=0.7, cmap='viridis')
ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')
ax.set_title(f'Paraboloide $z = 4 - x^2 - y^2$\\nVolum = $8\\pi \\approx {eksakt:.2f}$')

plt.tight_layout()
plt.show()
\`\`\``,
        hints: [
          'Husk at dblquad bruker rekkefølgen f(y, x), ikke f(x, y).',
          'For Monte Carlo: generer punkter i kvadratet og filtrer de som er innenfor sirkelen.',
        ],
      },
    },

    // ========== SEKSJON 12: PRAKTISKE ANVENDELSER ==========
    {
      id: 'r2-3-5-text-12',
      type: 'text',
      content: `## Praktiske anvendelser

Numerisk integrasjon har utallige anvendelser i vitenskap og ingeniørfag. Her ser vi på noen eksempler.`,
    },
    {
      id: 'r2-3-5-ex-15',
      type: 'example',
      title: 'Beregne arbeid utført av en variabel kraft',
      problem: `En fjær følger Hookes lov med $F(x) = kx$ for små deformasjoner, men for store deformasjoner blir den ikke-lineær: $F(x) = kx + \\alpha x^3$. Beregn arbeidet som kreves for å strekke fjæren fra $x = 0$ til $x = L$.`,
      solution: `\`\`\`python
import numpy as np
from scipy import integrate
import matplotlib.pyplot as plt

# Parametre
k = 100  # N/m (fjærstivhet)
alpha = 500  # N/m^3 (ikke-lineær koeffisient)
L = 0.1  # m (strekning)

def F(x):
    """Kraft som funksjon av posisjon"""
    return k * x + alpha * x**3

# Beregn arbeidet W = integral av F(x) dx fra 0 til L
arbeid, feil = integrate.quad(F, 0, L)

# Sammenlign med lineær fjær (kun kx)
arbeid_linear = 0.5 * k * L**2

print(f"Ikke-lineær fjær:")
print(f"  Arbeid = {arbeid:.4f} J")
print(f"\\nLineær fjær:")
print(f"  Arbeid = {arbeid_linear:.4f} J")
print(f"\\nForskjell: {(arbeid - arbeid_linear) / arbeid_linear * 100:.1f}%")

# Visualiser
x = np.linspace(0, L, 100)
plt.figure(figsize=(10, 5))

plt.subplot(1, 2, 1)
plt.plot(x, F(x), 'b-', label='Ikke-lineær: $F = kx + \\alpha x^3$')
plt.plot(x, k * x, 'r--', label='Lineær: $F = kx$')
plt.fill_between(x, 0, F(x), alpha=0.3)
plt.xlabel('x (m)')
plt.ylabel('F (N)')
plt.title('Kraft vs. posisjon')
plt.legend()
plt.grid(True, alpha=0.3)

plt.subplot(1, 2, 2)
# Kumulativt arbeid
arbeid_kumulativ = [integrate.quad(F, 0, xi)[0] for xi in x]
plt.plot(x, arbeid_kumulativ, 'b-', label='Arbeid')
plt.xlabel('x (m)')
plt.ylabel('W (J)')
plt.title('Kumulativt arbeid')
plt.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()
\`\`\``,
    },
    {
      id: 'r2-3-5-ex-16',
      type: 'example',
      title: 'Beregne buelengde',
      problem: `Beregn buelengden til kurven $y = \\sin(x)$ fra $x = 0$ til $x = 2\\pi$.`,
      solution: `\`\`\`python
import numpy as np
from scipy import integrate
import matplotlib.pyplot as plt

# Buelengde: L = integral av sqrt(1 + (dy/dx)^2) dx
# For y = sin(x): dy/dx = cos(x)

def integrand(x):
    return np.sqrt(1 + np.cos(x)**2)

# Beregn buelengden
buelengde, feil = integrate.quad(integrand, 0, 2*np.pi)

print(f"Buelengde av sin(x) fra 0 til 2*pi:")
print(f"L = {buelengde:.6f}")
print(f"(Dette er ca. {buelengde/np.pi:.4f} * pi)")

# For referanse: lengden av en rett linje fra (0,0) til (2*pi,0) er 2*pi
print(f"\\nRett linje: {2*np.pi:.6f}")
print(f"Forlengelse: {(buelengde - 2*np.pi) / (2*np.pi) * 100:.1f}%")

# Visualiser
x = np.linspace(0, 2*np.pi, 200)
y = np.sin(x)

plt.figure(figsize=(10, 4))
plt.plot(x, y, 'b-', linewidth=2)
plt.axhline(0, color='gray', linestyle='--', alpha=0.5)
plt.fill_between(x, 0, y, where=(y > 0), alpha=0.2, color='blue')
plt.fill_between(x, 0, y, where=(y < 0), alpha=0.2, color='red')
plt.xlabel('x')
plt.ylabel('y')
plt.title(f'$y = \\sin(x)$, buelengde $L = {buelengde:.4f}$')
plt.grid(True, alpha=0.3)
plt.axis('equal')
plt.show()
\`\`\``,
    },
    {
      id: 'r2-3-5-exercise-12',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-12',
        number: '3.5.12',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `**Fysikkoppgave:** En partikkel beveger seg med hastighet $v(t) = 10\\sin(t)e^{-0.1t}$ m/s.

a) Finn total tilbakelagt strekning i tidsintervallet $t \\in [0, 20]$ s.
   (Hint: strekning = $\\int |v(t)|\\,dt$, ikke $\\int v(t)\\,dt$)

b) Finn netto forflytning (endelig posisjon minus startposisjon).

c) Visualiser $v(t)$, posisjonen $x(t)$, og kumulativ strekning.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate
import matplotlib.pyplot as plt

def v(t):
    return 10 * np.sin(t) * np.exp(-0.1 * t)

# a) Total strekning = integral av |v(t)|
strekning, _ = integrate.quad(lambda t: abs(v(t)), 0, 20)
print(f"a) Total strekning: {strekning:.4f} m")

# b) Netto forflytning = integral av v(t)
forflytning, _ = integrate.quad(v, 0, 20)
print(f"b) Netto forflytning: {forflytning:.4f} m")

# c) Visualisering
t = np.linspace(0, 20, 500)
v_t = v(t)

# Posisjon som kumulativt integral av v
x_t = np.array([integrate.quad(v, 0, ti)[0] for ti in t])

# Kumulativ strekning
s_t = np.array([integrate.quad(lambda tau: abs(v(tau)), 0, ti)[0] for ti in t])

fig, axes = plt.subplots(3, 1, figsize=(10, 10), sharex=True)

# Hastighet
axes[0].plot(t, v_t, 'b-', linewidth=2)
axes[0].axhline(0, color='gray', linestyle='--', alpha=0.5)
axes[0].fill_between(t, 0, v_t, where=(v_t > 0), alpha=0.3, color='green')
axes[0].fill_between(t, 0, v_t, where=(v_t < 0), alpha=0.3, color='red')
axes[0].set_ylabel('v(t) [m/s]')
axes[0].set_title('Hastighet')
axes[0].grid(True, alpha=0.3)

# Posisjon
axes[1].plot(t, x_t, 'b-', linewidth=2)
axes[1].axhline(0, color='gray', linestyle='--', alpha=0.5)
axes[1].set_ylabel('x(t) [m]')
axes[1].set_title(f'Posisjon (netto forflytning = {forflytning:.2f} m)')
axes[1].grid(True, alpha=0.3)

# Strekning
axes[2].plot(t, s_t, 'b-', linewidth=2)
axes[2].set_xlabel('t [s]')
axes[2].set_ylabel('s(t) [m]')
axes[2].set_title(f'Kumulativ strekning (total = {strekning:.2f} m)')
axes[2].grid(True, alpha=0.3)

plt.tight_layout()
plt.show()
\`\`\``,
        hints: [
          'Strekning er alltid positiv, så vi integrerer absoluttverdien av hastigheten.',
          'Forflytning kan være negativ hvis partikkelen beveger seg tilbake.',
        ],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-3-5-summary',
      type: 'note',
      content: `## Oppsummering

Vi har lært om følgende numeriske integrasjonsmetoder:

| Metode | Nøyaktighet | Implementering | Bruksområde |
|--------|-------------|----------------|-------------|
| Rektangel (venstre) | $O(1/n)$ | Enklest | Undervisning |
| Rektangel (midtpunkt) | $O(1/n^2)$ | Enkel | Rask tilnærming |
| Trapes | $O(1/n^2)$ | Enkel | God allround |
| Simpson | $O(1/n^4)$ | Moderat | Glatte funksjoner |
| Romberg | $O(1/n^{2k})$ | Moderat | Høy nøyaktighet |
| Gauss-Legendre | Optimal | Krever vekter | Polynomer, glatte |
| Adaptiv | Variabel | Kompleks | Variable funksjoner |
| Monte Carlo | $O(1/\\sqrt{N})$ | Enkel | Høydimensjonale |

**Praktiske tips:**
1. Bruk **scipy.integrate.quad** for de fleste 1D-oppgaver
2. Bruk **scipy.integrate.dblquad** for 2D-integraler
3. Bruk **Monte Carlo** for dimensjon $\\geq 3$
4. Bruk **Romberg** eller **Gauss** for høy presisjon
5. Verifiser alltid med kjente integraler eller ved å øke $n$
6. Visualiser for å bygge intuisjon!`,
    },

    // ========== AVSLUTTENDE PROSJEKTOPPGAVE ==========
    {
      id: 'r2-3-5-exercise-13',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-13',
        number: '3.5.13',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `**Prosjektoppgave:** Normalfordelingen

Sannsynlighetstettheten for normalfordelingen (Gauss-fordelingen) med gjennomsnitt $\\mu = 0$ og standardavvik $\\sigma = 1$ er:

$$f(x) = \\frac{1}{\\sqrt{2\\pi}} e^{-x^2/2}$$

a) Verifiser at $\\displaystyle\\int_{-\\infty}^{\\infty} f(x)\\,dx = 1$ ved bruk av scipy.integrate.quad.

b) Beregn sannsynligheten $P(-1 \\leq X \\leq 1)$, altså arealet under kurven fra $-1$ til $1$. Dette skal være ca. $0.6827$ (68.27%).

c) Beregn $P(-2 \\leq X \\leq 2)$ og $P(-3 \\leq X \\leq 3)$. Sammenlign med "68-95-99.7-regelen".

d) Visualiser normalfordelingen og skyggelegg området fra $-1$ til $1$.`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate
import matplotlib.pyplot as plt

def normal_pdf(x):
    """Standard normalfordeling (mu=0, sigma=1)"""
    return (1 / np.sqrt(2 * np.pi)) * np.exp(-x**2 / 2)

# a) Verifiser at totalt areal = 1
total, error = integrate.quad(normal_pdf, -np.inf, np.inf)
print(f"a) Total sannsynlighet: {total:.6f} (skal være 1.0)")

# b) P(-1 <= X <= 1)
p1, _ = integrate.quad(normal_pdf, -1, 1)
print(f"\\nb) P(-1 <= X <= 1) = {p1:.4f} ({p1*100:.2f}%)")

# c) P(-2 <= X <= 2) og P(-3 <= X <= 3)
p2, _ = integrate.quad(normal_pdf, -2, 2)
p3, _ = integrate.quad(normal_pdf, -3, 3)
print(f"c) P(-2 <= X <= 2) = {p2:.4f} ({p2*100:.2f}%)")
print(f"   P(-3 <= X <= 3) = {p3:.4f} ({p3*100:.2f}%)")
print(f"   68-95-99.7 regelen: 68.27%, 95.45%, 99.73%")

# d) Visualisering
fig, ax = plt.subplots(figsize=(10, 6))

x = np.linspace(-4, 4, 1000)
y = normal_pdf(x)

ax.plot(x, y, 'b-', linewidth=2, label='Standard normalfordeling')

# Skyggelegg -1 til 1
x_fill = np.linspace(-1, 1, 100)
ax.fill_between(x_fill, normal_pdf(x_fill), alpha=0.3, color='blue',
                label=f'P(-1 <= X <= 1) = {p1:.2%}')

ax.axvline(-1, color='red', linestyle='--', alpha=0.5)
ax.axvline(1, color='red', linestyle='--', alpha=0.5)

ax.set_xlabel('x', fontsize=12)
ax.set_ylabel('f(x)', fontsize=12)
ax.set_title('Standard normalfordeling $N(0, 1)$', fontsize=14)
ax.legend()
ax.grid(True, alpha=0.3)
ax.set_xlim(-4, 4)
ax.set_ylim(0, 0.45)

plt.tight_layout()
plt.show()
\`\`\`

**Utskrift:**
\`\`\`
a) Total sannsynlighet: 1.000000 (skal være 1.0)

b) P(-1 <= X <= 1) = 0.6827 (68.27%)
c) P(-2 <= X <= 2) = 0.9545 (95.45%)
   P(-3 <= X <= 3) = 0.9973 (99.73%)
   68-95-99.7 regelen: 68.27%, 95.45%, 99.73%
\`\`\`

Resultatene stemmer perfekt med den kjente 68-95-99.7-regelen for normalfordelingen!`,
        hints: [
          'scipy.integrate.quad håndterer uendelige grenser med np.inf og -np.inf.',
          'For visualisering: bruk fill_between() for å skyggelegge et område.',
          'Normalfordelingen er symmetrisk rundt $x = 0$.',
        ],
      },
    },

    // ========== BONUSOPPGAVE ==========
    {
      id: 'r2-3-5-exercise-14',
      type: 'exercise',
      exercise: {
        id: 'r2-3-5-task-14',
        number: '3.5.14',
        type: 'interactive',
        tool: 'python',
        difficulty: 'vanskelig',
        task: `**Bonusoppgave:** Lag en interaktiv sammenligning

Lag et program som:

a) Tar inn en funksjon $f(x)$, grenser $[a, b]$, og antall punkter $n$.

b) Beregner integralet med alle metodene: rektangel, midtpunkt, trapes, Simpson, Romberg og Gauss-Legendre.

c) Viser en tabell med resultatene og feilene (bruk scipy.quad som referanse).

d) Rangerer metodene etter nøyaktighet for den gitte funksjonen.

Test med:
- $f(x) = x^4$ på $[0, 1]$ (polynom)
- $f(x) = \\sin(10x)$ på $[0, \\pi]$ (oscillerende)
- $f(x) = e^{-x^2}$ på $[-2, 2]$ (Gaussisk)`,
        solution: `\`\`\`python
import numpy as np
from scipy import integrate
from numpy.polynomial.legendre import leggauss

def sammenlign_metoder(f, a, b, n, navn="f(x)"):
    """Sammenligner alle integrasjonsmetoder"""

    # Referanseverdi
    eksakt, _ = integrate.quad(f, a, b)

    # Implementer metodene
    h = (b - a) / n

    # Rektangel (venstre)
    rekt = h * sum(f(a + i*h) for i in range(n))

    # Midtpunkt
    midt = h * sum(f(a + (i + 0.5)*h) for i in range(n))

    # Trapes
    trap = h * ((f(a) + f(b))/2 + sum(f(a + i*h) for i in range(1, n)))

    # Simpson (krever partall n)
    n_simp = n if n % 2 == 0 else n + 1
    h_simp = (b - a) / n_simp
    simp = (h_simp/3) * (f(a) + 4*sum(f(a + i*h_simp) for i in range(1, n_simp, 2))
                         + 2*sum(f(a + i*h_simp) for i in range(2, n_simp, 2)) + f(b))

    # Romberg
    romb = integrate.romberg(f, a, b, show=False)

    # Gauss-Legendre
    x_gl, w_gl = leggauss(n)
    x_trans = (b - a) / 2 * x_gl + (a + b) / 2
    gauss = (b - a) / 2 * np.sum(w_gl * f(x_trans))

    # Samle resultater
    metoder = {
        'Rektangel': rekt,
        'Midtpunkt': midt,
        'Trapes': trap,
        'Simpson': simp,
        'Romberg': romb,
        'Gauss-Legendre': gauss
    }

    print(f"\\n{'='*60}")
    print(f"Sammenligning av integrasjonsmetoder for {navn}")
    print(f"Intervall: [{a}, {b}], n = {n}")
    print(f"Referanseverdi (scipy.quad): {eksakt:.12f}")
    print(f"{'='*60}")
    print(f"{'Metode':<18} {'Resultat':<16} {'Feil':<12} {'Rang'}")
    print(f"{'-'*60}")

    # Sorter etter feil
    feil_liste = [(m, abs(v - eksakt)) for m, v in metoder.items()]
    feil_liste.sort(key=lambda x: x[1])

    for rang, (metode, feil) in enumerate(feil_liste, 1):
        resultat = metoder[metode]
        print(f"{metode:<18} {resultat:<16.10f} {feil:<12.2e} {rang}")

# Test med forskjellige funksjoner
print("\\n" + "="*60)
print("TEST 1: Polynom f(x) = x^4")
sammenlign_metoder(lambda x: x**4, 0, 1, 10, "x^4")

print("\\n" + "="*60)
print("TEST 2: Oscillerende f(x) = sin(10x)")
sammenlign_metoder(lambda x: np.sin(10*x), 0, np.pi, 10, "sin(10x)")

print("\\n" + "="*60)
print("TEST 3: Gaussisk f(x) = exp(-x^2)")
sammenlign_metoder(lambda x: np.exp(-x**2), -2, 2, 10, "exp(-x^2)")
\`\`\``,
        hints: [
          'Bruk scipy.integrate.quad som referanse for den "eksakte" verdien.',
          'Sorter metodene etter feilstørrelse for å rangere dem.',
          'Noen metoder vil være bedre for visse typer funksjoner.',
        ],
      },
    },

    // ========== TIPS OG ADVARSLER ==========
    {
      id: 'r2-3-5-warning',
      type: 'warning',
      title: 'Vanlige feil og fallgruver',
      content: `**1. Singulariteter:**
Hvis integranden har singulariteter (uendeligheter), vil standard metoder feile. Bruk spesialiserte metoder eller del opp intervallet.

**2. Oscillerende funksjoner:**
Funksjoner som $\\sin(1000x)$ krever svært mange delintervaller. Bruk adaptiv integrasjon.

**3. Feil rekkefølge i dblquad:**
\`scipy.integrate.dblquad\` bruker \`f(y, x)\`, ikke \`f(x, y)\`!

**4. Glemme partallskrav:**
Simpsons metode krever at $n$ er et partall.

**5. Avrundingsfeil:**
For svært små $h$ kan avrundingsfeil dominere. Bruk høyere-ordens metoder i stedet for å øke $n$.`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_3_6: TextbookChapter = {
  id: 'r2-3-6',
  courseId: 'r2',
  chapterNumber: '3.6',
  title: 'Volum av omdreiningslegemer',
  description: 'Lær å beregne volum av omdreiningslegemer (rotasjonslegemer) ved hjelp av integrasjon.',
  estimatedMinutes: 120,
  competenceGoals: [
    'bruke integrasjon til å beregne volum av omdreiningslegemer',
    'anvende skivemetoden for rotasjon om x- og y-aksen',
    'utlede volumformler for sylinder, kjegle og kule ved integrasjon',
    'løse praktiske problemer med omdreiningslegemer',
  ],
  exercises: [],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-3-6-text-1',
      type: 'text',
      content: `## Introduksjon til omdreiningslegemer

Når vi roterer et planområde rundt en akse, dannes et tredimensjonalt legeme kalt et **omdreiningslegeme** eller **rotasjonslegeme**. Dette er en av de mest elegante anvendelsene av integrasjon - vi kan beregne volumet av komplekse tredimensjonale figurer ved å "bygge dem opp" av uendelig tynne skiver.

Tenk deg at du har en kurve $y = f(x)$ definert på intervallet $[a, b]$. Hvis vi roterer området mellom kurven og $x$-aksen rundt $x$-aksen, får vi et omdreiningslegeme. Hvert tverrsnitt vinkelrett på $x$-aksen er en sirkel, og ved å "summere" (integrere) alle disse sirkelskivene får vi volumet.

I dette kapitlet skal vi:
- Forstå hva et omdreiningslegeme er
- Lære skivemetoden for rotasjon om $x$- og $y$-aksen
- Utlede klassiske volumformler ved integrasjon
- Løse praktiske problemer med omdreiningslegemer
- Introdusere skallmetoden som et alternativ`,
    },

    {
      id: 'r2-3-6-rotvolum-bilde',
      type: 'image',
      src: '/images/r2/rotvolum.svg',
      alt: 'Illustrasjon av et omdreiningslegeme dannet ved rotasjon rundt x-aksen',
      caption: 'Omdreiningslegeme - volum beregnet ved integrasjon av sirkelskiver',
    },

    // ========== DEFINISJON: OMDREININGSLEGEME ==========
    {
      id: 'r2-3-6-def-1',
      type: 'definition',
      title: 'Omdreiningslegeme (Rotasjonslegeme)',
      content: `Et **omdreiningslegeme** er et tredimensjonalt legeme som dannes når et planområde roteres rundt en rett linje (rotasjonsaksen).

Når området mellom grafen til $y = f(x)$ og $x$-aksen på intervallet $[a, b]$ roteres rundt $x$-aksen, dannes et omdreiningslegeme.

Hvert tverrsnitt vinkelrett på rotasjonsaksen er en sirkelskive med radius $r = |f(x)|$.`,
    },

    // ========== EKSEMPEL 1: VISUALISERING ==========
    {
      id: 'r2-3-6-ex-1',
      type: 'example',
      title: 'Eksempel 1: Visualisering av omdreiningslegemer',
      problem: `Beskriv hvilke omdreiningslegemer som dannes når følgende områder roteres rundt $x$-aksen:

a) En rett linje $y = c$ (konstant) på intervallet $[0, h]$

b) En rett linje $y = \\frac{r}{h}x$ på intervallet $[0, h]$

c) En halvsirkel $y = \\sqrt{r^2 - x^2}$ på intervallet $[-r, r]$`,
      solution: `**Løsning:**

a) **Sylinder**: Når linjen $y = c$ roteres rundt $x$-aksen, dannes en sylinder med radius $c$ og høyde $h$.

b) **Kjegle**: Når linjen $y = \\frac{r}{h}x$ roteres rundt $x$-aksen, dannes en kjegle med grunnflateradius $r$ og høyde $h$. Linjens stigningstall bestemmer kjeglens form.

c) **Kule**: Når halvsirkelen $y = \\sqrt{r^2 - x^2}$ roteres rundt $x$-aksen, dannes en kule med radius $r$.

Dette viser at mange kjente geometriske figurer kan beskrives som omdreiningslegemer.`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-3-6-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-1',
        number: '3.6.1',
        type: 'classic',
        difficulty: 'lett',
        task: `Beskriv hvilke omdreiningslegemer som dannes når følgende områder roteres rundt $x$-aksen:

a) $y = 2$ på intervallet $[0, 5]$

b) $y = x$ på intervallet $[0, 3]$

c) $y = \\sqrt{4 - x^2}$ på intervallet $[-2, 2]$`,
        solution: `a) En sylinder med radius 2 og høyde 5.

b) En kjegle med grunnflateradius 3 og høyde 3 (en "likesidet" kjegle).

c) En kule med radius 2.`,
        hints: [
          'Tenk på hva som skjer når en figur roteres rundt en akse.',
          'Hva er formen på tverrsnittet til hver av disse figurene?',
        ],
      },
    },

    // ========== SKIVEMETODEN - X-AKSEN ==========
    {
      id: 'r2-3-6-text-2',
      type: 'text',
      content: `## Skivemetoden - Rotasjon om x-aksen

For å finne volumet av et omdreiningslegeme, deler vi det opp i uendelig tynne sirkelskiver. Hver skive har:
- Radius lik $|f(x)|$
- Tykkelse lik $dx$
- Areal lik $\\pi [f(x)]^2$
- Volum lik $\\pi [f(x)]^2 \\, dx$

Ved å integrere (summere) alle disse skivene fra $a$ til $b$, får vi det totale volumet.`,
    },

    // ========== TEOREM: VOLUMFORMEL X-AKSEN ==========
    {
      id: 'r2-3-6-thm-1',
      type: 'theorem',
      title: 'Volumformel: Rotasjon om x-aksen',
      content: `Når området mellom grafen til $y = f(x)$ og $x$-aksen på intervallet $[a, b]$ roteres rundt $x$-aksen, er volumet av omdreiningslegemet gitt ved:

$$V = \\pi \\int_a^b [f(x)]^2 \\, dx$$

**Merk:** Formelen gjelder når $f(x) \\geq 0$ på hele intervallet. Hvis $f(x) < 0$ på deler av intervallet, bruker vi $[f(x)]^2$ som alltid er positiv.`,
    },

    // ========== EKSEMPEL 2: ROTASJON OM X-AKSEN ==========
    {
      id: 'r2-3-6-ex-2',
      type: 'example',
      title: 'Eksempel 2: Rotasjon om x-aksen',
      problem: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = x^2$ og $x$-aksen på intervallet $[0, 2]$ roteres rundt $x$-aksen.`,
      solution: `**Løsning:**

Vi bruker volumformelen for rotasjon om $x$-aksen:

$$V = \\pi \\int_a^b [f(x)]^2 \\, dx$$

Her er $f(x) = x^2$, $a = 0$ og $b = 2$:

$$V = \\pi \\int_0^2 (x^2)^2 \\, dx = \\pi \\int_0^2 x^4 \\, dx$$

Vi integrerer:

$$V = \\pi \\left[ \\frac{x^5}{5} \\right]_0^2 = \\pi \\left( \\frac{2^5}{5} - \\frac{0^5}{5} \\right) = \\pi \\cdot \\frac{32}{5} = \\frac{32\\pi}{5}$$

**Svar:** Volumet er $\\frac{32\\pi}{5}$ eller ca. $20{,}1$ (volumenheter).`,
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-3-6-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-2',
        number: '3.6.2',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = \\sqrt{x}$ og $x$-aksen på intervallet $[0, 4]$ roteres rundt $x$-aksen.`,
        solution: `Vi bruker volumformelen:

$$V = \\pi \\int_0^4 (\\sqrt{x})^2 \\, dx = \\pi \\int_0^4 x \\, dx$$

$$V = \\pi \\left[ \\frac{x^2}{2} \\right]_0^4 = \\pi \\left( \\frac{16}{2} - 0 \\right) = 8\\pi$$

**Svar:** Volumet er $8\\pi$ eller ca. $25{,}1$ (volumenheter).`,
        hints: [
          'Husk at $(\\sqrt{x})^2 = x$',
          'Bruk formelen $V = \\pi \\int_a^b [f(x)]^2 \\, dx$',
        ],
      },
    },

    // ========== EKSEMPEL 3: SYLINDER VED INTEGRASJON ==========
    {
      id: 'r2-3-6-ex-3',
      type: 'example',
      title: 'Eksempel 3: Utledning av sylinderens volumformel',
      problem: `Utled volumformelen for en sylinder med radius $r$ og høyde $h$ ved hjelp av integrasjon.`,
      solution: `**Løsning:**

En sylinder kan dannes ved å rotere linjen $y = r$ (konstant) på intervallet $[0, h]$ rundt $x$-aksen.

Vi bruker volumformelen:

$$V = \\pi \\int_0^h r^2 \\, dx$$

Siden $r$ er konstant:

$$V = \\pi r^2 \\int_0^h 1 \\, dx = \\pi r^2 [x]_0^h = \\pi r^2 (h - 0) = \\pi r^2 h$$

**Svar:** Sylinderens volum er $V = \\pi r^2 h$, som er den velkjente formelen "grunnflate ganger høyde".`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-3-6-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-3',
        number: '3.6.3',
        type: 'classic',
        difficulty: 'medium',
        task: `Utled volumformelen for en kjegle med grunnflateradius $r$ og høyde $h$ ved hjelp av integrasjon.

Hint: Kjeglens overflate kan beskrives som linjen $y = \\frac{r}{h}x$ rotert rundt $x$-aksen på intervallet $[0, h]$.`,
        solution: `Kjeglens overflate dannes når linjen $y = \\frac{r}{h}x$ roteres rundt $x$-aksen.

$$V = \\pi \\int_0^h \\left( \\frac{r}{h}x \\right)^2 \\, dx = \\pi \\int_0^h \\frac{r^2}{h^2}x^2 \\, dx$$

$$V = \\frac{\\pi r^2}{h^2} \\int_0^h x^2 \\, dx = \\frac{\\pi r^2}{h^2} \\left[ \\frac{x^3}{3} \\right]_0^h$$

$$V = \\frac{\\pi r^2}{h^2} \\cdot \\frac{h^3}{3} = \\frac{\\pi r^2 h}{3}$$

**Svar:** Kjeglens volum er $V = \\frac{1}{3}\\pi r^2 h$, som er tredjedelen av sylinderens volum med samme grunnflate og høyde.`,
        hints: [
          'Bruk at $\\left( \\frac{r}{h}x \\right)^2 = \\frac{r^2}{h^2}x^2$',
          'Husk at konstanter kan flyttes utenfor integralet',
        ],
      },
    },

    // ========== EKSEMPEL 4: KULENS VOLUMFORMEL ==========
    {
      id: 'r2-3-6-ex-4',
      type: 'example',
      title: 'Eksempel 4: Utledning av kulens volumformel',
      problem: `Utled volumformelen for en kule med radius $r$ ved hjelp av integrasjon.`,
      solution: `**Løsning:**

En kule dannes ved å rotere halvsirkelen $y = \\sqrt{r^2 - x^2}$ rundt $x$-aksen på intervallet $[-r, r]$.

Vi bruker volumformelen:

$$V = \\pi \\int_{-r}^{r} \\left( \\sqrt{r^2 - x^2} \\right)^2 \\, dx = \\pi \\int_{-r}^{r} (r^2 - x^2) \\, dx$$

Vi integrerer:

$$V = \\pi \\left[ r^2 x - \\frac{x^3}{3} \\right]_{-r}^{r}$$

Vi setter inn grensene:

$$V = \\pi \\left[ \\left( r^3 - \\frac{r^3}{3} \\right) - \\left( -r^3 + \\frac{r^3}{3} \\right) \\right]$$

$$V = \\pi \\left[ r^3 - \\frac{r^3}{3} + r^3 - \\frac{r^3}{3} \\right] = \\pi \\left[ 2r^3 - \\frac{2r^3}{3} \\right]$$

$$V = \\pi \\cdot \\frac{6r^3 - 2r^3}{3} = \\pi \\cdot \\frac{4r^3}{3} = \\frac{4\\pi r^3}{3}$$

**Svar:** Kulens volum er $V = \\frac{4}{3}\\pi r^3$.`,
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-3-6-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-4',
        number: '3.6.4',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En halvkule dannes ved å rotere $y = \\sqrt{r^2 - x^2}$ rundt $x$-aksen på intervallet $[0, r]$.

a) Finn volumet av halvkulen ved integrasjon.

b) Verifiser at svaret er halvparten av kulens volum.`,
        solution: `a) Vi beregner:

$$V = \\pi \\int_0^r (r^2 - x^2) \\, dx = \\pi \\left[ r^2 x - \\frac{x^3}{3} \\right]_0^r$$

$$V = \\pi \\left( r^3 - \\frac{r^3}{3} - 0 \\right) = \\pi \\cdot \\frac{2r^3}{3} = \\frac{2\\pi r^3}{3}$$

b) Kulens volum er $\\frac{4\\pi r^3}{3}$. Halvparten av dette er:

$$\\frac{1}{2} \\cdot \\frac{4\\pi r^3}{3} = \\frac{2\\pi r^3}{3}$$

Dette stemmer med svaret i a), så halvkulens volum er halvparten av kulens volum.`,
        hints: [
          'Bruk at $(\\sqrt{r^2-x^2})^2 = r^2 - x^2$',
          'Husk at integrasjonsgrensene nå er fra 0 til r, ikke fra -r til r',
        ],
      },
    },

    // ========== SKIVEMETODEN - Y-AKSEN ==========
    {
      id: 'r2-3-6-text-3',
      type: 'text',
      content: `## Skivemetoden - Rotasjon om y-aksen

Noen ganger er det mer naturlig å rotere et område rundt $y$-aksen istedenfor $x$-aksen. I dette tilfellet må vi uttrykke $x$ som en funksjon av $y$.

Hvis vi har $x = g(y)$ og roterer området mellom kurven og $y$-aksen fra $y = c$ til $y = d$ rundt $y$-aksen, får vi skiver der:
- Radius er $|g(y)|$
- Tykkelse er $dy$
- Areal er $\\pi [g(y)]^2$`,
    },

    // ========== TEOREM: VOLUMFORMEL Y-AKSEN ==========
    {
      id: 'r2-3-6-thm-2',
      type: 'theorem',
      title: 'Volumformel: Rotasjon om y-aksen',
      content: `Når området mellom grafen til $x = g(y)$ og $y$-aksen på intervallet $[c, d]$ roteres rundt $y$-aksen, er volumet av omdreiningslegemet gitt ved:

$$V = \\pi \\int_c^d [g(y)]^2 \\, dy$$

**Merk:** For å bruke denne formelen må vi ofte løse $y = f(x)$ for $x$ for å få $x = g(y)$.`,
    },

    // ========== EKSEMPEL 5: ROTASJON OM Y-AKSEN ==========
    {
      id: 'r2-3-6-ex-5',
      type: 'example',
      title: 'Eksempel 5: Rotasjon om y-aksen',
      problem: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = x^2$ og $y$-aksen fra $y = 0$ til $y = 4$ roteres rundt $y$-aksen.`,
      solution: `**Løsning:**

Først løser vi $y = x^2$ for $x$:
$$x = \\sqrt{y} \\quad (\\text{vi velger positiv rot siden } x \\geq 0)$$

Så bruker vi volumformelen for rotasjon om $y$-aksen:

$$V = \\pi \\int_0^4 (\\sqrt{y})^2 \\, dy = \\pi \\int_0^4 y \\, dy$$

Vi integrerer:

$$V = \\pi \\left[ \\frac{y^2}{2} \\right]_0^4 = \\pi \\left( \\frac{16}{2} - 0 \\right) = 8\\pi$$

**Svar:** Volumet er $8\\pi$ eller ca. $25{,}1$ (volumenheter).`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-3-6-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-5',
        number: '3.6.5',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = \\sqrt{x}$ (dvs. $x = y^2$) og $y$-aksen fra $y = 0$ til $y = 3$ roteres rundt $y$-aksen.`,
        solution: `Vi har $x = y^2$, så vi bruker formelen for rotasjon om $y$-aksen:

$$V = \\pi \\int_0^3 (y^2)^2 \\, dy = \\pi \\int_0^3 y^4 \\, dy$$

$$V = \\pi \\left[ \\frac{y^5}{5} \\right]_0^3 = \\pi \\cdot \\frac{243}{5} = \\frac{243\\pi}{5}$$

**Svar:** Volumet er $\\frac{243\\pi}{5}$ eller ca. $152{,}7$ (volumenheter).`,
        hints: [
          'Legg merke til at $x = y^2$ allerede er uttrykt som funksjon av $y$',
          'Husk å kvadrere funksjonen: $(y^2)^2 = y^4$',
        ],
      },
    },

    // ========== EKSEMPEL 6: PARABOLOID ==========
    {
      id: 'r2-3-6-ex-6',
      type: 'example',
      title: 'Eksempel 6: Volum av en paraboloid',
      problem: `En paraboloid dannes når parabelen $y = x^2$ roteres rundt $y$-aksen. Finn volumet av paraboloiden for $0 \\leq y \\leq h$.`,
      solution: `**Løsning:**

Vi har $y = x^2$, så $x = \\sqrt{y}$.

Volumet ved rotasjon om $y$-aksen:

$$V = \\pi \\int_0^h (\\sqrt{y})^2 \\, dy = \\pi \\int_0^h y \\, dy$$

$$V = \\pi \\left[ \\frac{y^2}{2} \\right]_0^h = \\frac{\\pi h^2}{2}$$

Ved $y = h$ har vi $x = \\sqrt{h}$, så grunnflateradius er $r = \\sqrt{h}$, dvs. $h = r^2$.

Vi kan skrive volumet som:

$$V = \\frac{\\pi (r^2)^2}{2} = \\frac{\\pi r^4}{2} \\quad \\text{eller} \\quad V = \\frac{\\pi r^2 h}{2}$$

**Svar:** Paraboloidens volum er $V = \\frac{\\pi r^2 h}{2}$, som er halvparten av den omskrevne sylinderens volum.`,
    },

    // ========== OPPGAVE 6 ==========
    {
      id: 'r2-3-6-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-6',
        number: '3.6.6',
        type: 'classic',
        difficulty: 'medium',
        task: `En skål har form som en paraboloid dannet ved å rotere $y = \\frac{x^2}{8}$ rundt $y$-aksen fra $y = 0$ til $y = 2$ (målt i desimeter).

a) Finn radius av skålens åpning.

b) Finn volumet av skålen.

c) Hvor mange liter kan skålen romme?`,
        solution: `a) Ved $y = 2$: $2 = \\frac{x^2}{8} \\implies x^2 = 16 \\implies x = 4$ dm

Radius av åpningen er 4 dm = 40 cm.

b) Vi har $y = \\frac{x^2}{8}$, så $x^2 = 8y$ og $x = \\sqrt{8y}$.

$$V = \\pi \\int_0^2 (\\sqrt{8y})^2 \\, dy = \\pi \\int_0^2 8y \\, dy$$

$$V = 8\\pi \\left[ \\frac{y^2}{2} \\right]_0^2 = 8\\pi \\cdot 2 = 16\\pi \\text{ dm}^3$$

c) Siden $1 \\text{ dm}^3 = 1$ liter:

$$V = 16\\pi \\approx 50{,}3 \\text{ liter}$$

**Svar:** Radius er 4 dm, volumet er $16\\pi \\text{ dm}^3 \\approx 50{,}3$ liter.`,
        hints: [
          'Sett inn $y = 2$ i likningen for å finne radius',
          'Løs for $x$ som funksjon av $y$',
        ],
      },
    },

    // ========== VOLUM MELLOM TO KURVER ==========
    {
      id: 'r2-3-6-text-4',
      type: 'text',
      content: `## Volum mellom to kurver

Noen ganger ønsker vi å finne volumet av et omdreiningslegeme der området er begrenset av to kurver. Hvis vi roterer området mellom $y = f(x)$ (ytre kurve) og $y = g(x)$ (indre kurve) rundt $x$-aksen, der $f(x) \\geq g(x) \\geq 0$, dannes et "hulrom" i midten.

Volumet blir da differansen mellom det ytre og det indre volumet.`,
    },

    // ========== TEOREM: VOLUM MELLOM TO KURVER ==========
    {
      id: 'r2-3-6-thm-3',
      type: 'theorem',
      title: 'Volumformel: Rotasjon av område mellom to kurver',
      content: `Når området mellom $y = f(x)$ (ytre kurve) og $y = g(x)$ (indre kurve) på intervallet $[a, b]$ roteres rundt $x$-aksen, der $f(x) \\geq g(x) \\geq 0$, er volumet:

$$V = \\pi \\int_a^b \\left( [f(x)]^2 - [g(x)]^2 \\right) \\, dx$$

Dette gir oss **ringskiver** (eller "washer method" på engelsk).`,
    },

    // ========== EKSEMPEL 7: VOLUM MELLOM TO KURVER ==========
    {
      id: 'r2-3-6-ex-7',
      type: 'example',
      title: 'Eksempel 7: Volum mellom to kurver',
      problem: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = x^2$ og $y = x$ på intervallet $[0, 1]$ roteres rundt $x$-aksen.`,
      solution: `**Løsning:**

Først sjekker vi hvilken kurve som ligger øverst. For $x \\in [0, 1]$:
- Ved $x = 0{,}5$: $y = x = 0{,}5$ og $y = x^2 = 0{,}25$
- Altså er $y = x$ den ytre kurven og $y = x^2$ den indre kurven.

Vi bruker formelen for volum mellom to kurver:

$$V = \\pi \\int_0^1 \\left( x^2 - (x^2)^2 \\right) \\, dx = \\pi \\int_0^1 (x^2 - x^4) \\, dx$$

Vi integrerer:

$$V = \\pi \\left[ \\frac{x^3}{3} - \\frac{x^5}{5} \\right]_0^1 = \\pi \\left( \\frac{1}{3} - \\frac{1}{5} \\right) = \\pi \\cdot \\frac{5 - 3}{15} = \\frac{2\\pi}{15}$$

**Svar:** Volumet er $\\frac{2\\pi}{15}$ eller ca. $0{,}42$ (volumenheter).`,
    },

    // ========== OPPGAVE 7 ==========
    {
      id: 'r2-3-6-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-7',
        number: '3.6.7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = \\sqrt{x}$ og $y = x$ på intervallet $[0, 1]$ roteres rundt $x$-aksen.`,
        solution: `For $x \\in [0, 1]$ er $\\sqrt{x} \\geq x$ (sjekk f.eks. ved $x = 0{,}25$: $\\sqrt{0{,}25} = 0{,}5 > 0{,}25$).

Altså er $y = \\sqrt{x}$ den ytre kurven.

$$V = \\pi \\int_0^1 \\left( (\\sqrt{x})^2 - x^2 \\right) \\, dx = \\pi \\int_0^1 (x - x^2) \\, dx$$

$$V = \\pi \\left[ \\frac{x^2}{2} - \\frac{x^3}{3} \\right]_0^1 = \\pi \\left( \\frac{1}{2} - \\frac{1}{3} \\right) = \\pi \\cdot \\frac{1}{6} = \\frac{\\pi}{6}$$

**Svar:** Volumet er $\\frac{\\pi}{6}$ eller ca. $0{,}52$ (volumenheter).`,
        hints: [
          'Sjekk først hvilken kurve som ligger øverst på intervallet',
          'Husk at $(\\sqrt{x})^2 = x$',
        ],
      },
    },

    // ========== EKSEMPEL 8: HULT OMDREININGSLEGEME ==========
    {
      id: 'r2-3-6-ex-8',
      type: 'example',
      title: 'Eksempel 8: Hult omdreiningslegeme (rør)',
      problem: `Et rør har ytre radius gitt ved $R(x) = 3$ og indre radius $r(x) = 2$ for $0 \\leq x \\leq 5$. Finn volumet av røret ved å bruke formelen for volum mellom to kurver.`,
      solution: `**Løsning:**

Røret er et omdreiningslegeme med konstante radier. Vi bruker formelen for volum mellom to kurver:

$$V = \\pi \\int_0^5 (R^2 - r^2) \\, dx = \\pi \\int_0^5 (9 - 4) \\, dx$$

$$V = 5\\pi \\int_0^5 1 \\, dx = 5\\pi [x]_0^5 = 5\\pi \\cdot 5 = 25\\pi$$

**Alternativ metode:**
Vi kan også regne ut volumet som differansen mellom en ytre og en indre sylinder:

$$V = \\pi R^2 h - \\pi r^2 h = \\pi (R^2 - r^2) h = \\pi (9 - 4) \\cdot 5 = 25\\pi$$

**Svar:** Rørets volum er $25\\pi$ eller ca. $78{,}5$ (volumenheter).`,
    },

    // ========== OPPGAVE 8 ==========
    {
      id: 'r2-3-6-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-8',
        number: '3.6.8',
        type: 'classic',
        difficulty: 'medium',
        task: `Et vannrør har ytre diameter 10 cm og veggtykkelse 1 cm. Røret er 200 cm langt.

a) Hva er ytre og indre radius?

b) Finn volumet av selve rørmaterialet (ikke hulrommet).

c) Hvis rørmaterialet har tetthet $\\rho = 2{,}5$ g/cm$^3$, hva er massen av røret?`,
        solution: `a) Ytre radius: $R = 5$ cm
Indre radius: $r = 5 - 1 = 4$ cm

b) Volumet av rørmaterialet:

$$V = \\pi (R^2 - r^2) \\cdot h = \\pi (25 - 16) \\cdot 200 = 1800\\pi \\text{ cm}^3$$

$$V \\approx 5655 \\text{ cm}^3$$

c) Massen:

$$m = \\rho \\cdot V = 2{,}5 \\cdot 1800\\pi = 4500\\pi \\approx 14{\\,}137 \\text{ g} \\approx 14{,}1 \\text{ kg}$$

**Svar:** Ytre radius 5 cm, indre radius 4 cm. Volum ca. 5655 cm$^3$. Masse ca. 14,1 kg.`,
        hints: [
          'Veggtykkelse er differansen mellom ytre og indre radius',
          'Volumet av rørmaterialet er volumet av den ytre sylinderen minus den indre',
        ],
      },
    },

    // ========== ROTASJON OM ANDRE AKSER ==========
    {
      id: 'r2-3-6-text-5',
      type: 'text',
      content: `## Rotasjon om andre akser enn koordinataksene

Noen ganger må vi rotere et område rundt en linje som ikke er $x$- eller $y$-aksen. For eksempel kan vi rotere rundt linjen $y = k$ eller $x = c$.

Nøkkelen er å justere radiusen til skivene. Hvis vi roterer rundt linjen $y = k$ istedenfor $x$-aksen, blir radiusen til hver skive $|f(x) - k|$ istedenfor $|f(x)|$.`,
    },

    // ========== TEOREM: ROTASJON OM y = k ==========
    {
      id: 'r2-3-6-thm-4',
      type: 'theorem',
      title: 'Volumformel: Rotasjon om linjen y = k',
      content: `Når området mellom $y = f(x)$ og linjen $y = k$ på intervallet $[a, b]$ roteres rundt linjen $y = k$, er volumet:

$$V = \\pi \\int_a^b [f(x) - k]^2 \\, dx$$

**Merk:** Pass på fortegnet - hvis $f(x) < k$ på intervallet, vil $[f(x) - k]^2$ fortsatt gi et positivt bidrag.`,
    },

    // ========== EKSEMPEL 9: ROTASJON OM y = k ==========
    {
      id: 'r2-3-6-ex-9',
      type: 'example',
      title: 'Eksempel 9: Rotasjon om linjen y = -1',
      problem: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = x^2$ og $x$-aksen på intervallet $[0, 1]$ roteres rundt linjen $y = -1$.`,
      solution: `**Løsning:**

Når vi roterer rundt $y = -1$, er avstanden fra kurven $y = x^2$ til rotasjonsaksen lik $x^2 - (-1) = x^2 + 1$.

Avstanden fra $x$-aksen ($y = 0$) til rotasjonsaksen er $0 - (-1) = 1$.

Vi får et hulrom i midten, så vi bruker formelen for volum mellom to kurver:

$$V = \\pi \\int_0^1 \\left[ (x^2 + 1)^2 - 1^2 \\right] dx$$

Vi utvider $(x^2 + 1)^2 = x^4 + 2x^2 + 1$:

$$V = \\pi \\int_0^1 (x^4 + 2x^2 + 1 - 1) \\, dx = \\pi \\int_0^1 (x^4 + 2x^2) \\, dx$$

$$V = \\pi \\left[ \\frac{x^5}{5} + \\frac{2x^3}{3} \\right]_0^1 = \\pi \\left( \\frac{1}{5} + \\frac{2}{3} \\right) = \\pi \\cdot \\frac{3 + 10}{15} = \\frac{13\\pi}{15}$$

**Svar:** Volumet er $\\frac{13\\pi}{15}$ eller ca. $2{,}72$ (volumenheter).`,
    },

    // ========== OPPGAVE 9 ==========
    {
      id: 'r2-3-6-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-9',
        number: '3.6.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = \\sqrt{x}$ og $x$-aksen på intervallet $[0, 4]$ roteres rundt linjen $y = 3$.`,
        solution: `Avstanden fra $y = \\sqrt{x}$ til $y = 3$ er $3 - \\sqrt{x}$.
Avstanden fra $x$-aksen til $y = 3$ er $3$.

Vi får et hulrom i midten (siden kurven ligger under rotasjonsaksen):

$$V = \\pi \\int_0^4 \\left[ 3^2 - (3 - \\sqrt{x})^2 \\right] dx$$

Vi utvider $(3 - \\sqrt{x})^2 = 9 - 6\\sqrt{x} + x$:

$$V = \\pi \\int_0^4 (9 - 9 + 6\\sqrt{x} - x) \\, dx = \\pi \\int_0^4 (6\\sqrt{x} - x) \\, dx$$

$$V = \\pi \\left[ 6 \\cdot \\frac{2x^{3/2}}{3} - \\frac{x^2}{2} \\right]_0^4 = \\pi \\left[ 4x^{3/2} - \\frac{x^2}{2} \\right]_0^4$$

$$V = \\pi \\left( 4 \\cdot 8 - \\frac{16}{2} \\right) = \\pi (32 - 8) = 24\\pi$$

**Svar:** Volumet er $24\\pi$ eller ca. $75{,}4$ (volumenheter).`,
        hints: [
          'Finn avstandene fra begge kurver til rotasjonsaksen $y = 3$',
          'Husk at vi roterer området mellom kurvene, så vi får et hulrom',
        ],
      },
    },

    // ========== PRAKTISKE ANVENDELSER ==========
    {
      id: 'r2-3-6-text-6',
      type: 'text',
      content: `## Praktiske anvendelser

Volumformler for omdreiningslegemer har mange praktiske anvendelser:

- **Ingeniørfag**: Beregning av volum for tanker, siloer, rakettdeler
- **Arkitektur**: Kupler, søyler og rotasjonssymmetriske bygningselementer
- **Medisin**: Volum av organer og kroppsdeler fra CT/MR-bilder
- **Industri**: Design av beholdere, flasker og maskindeler

La oss se på noen praktiske eksempler.`,
    },

    // ========== EKSEMPEL 10: VANNTANK ==========
    {
      id: 'r2-3-6-ex-10',
      type: 'example',
      title: 'Eksempel 10: Vanntank',
      problem: `En vanntank har form som et omdreiningslegeme dannet ved å rotere kurven $y = \\frac{x^2}{4}$ rundt $y$-aksen fra $y = 0$ til $y = 4$ meter. Finn tankens volum i liter.`,
      solution: `**Løsning:**

Vi må først løse $y = \\frac{x^2}{4}$ for $x$:
$$x^2 = 4y \\implies x = 2\\sqrt{y}$$

Volumet ved rotasjon om $y$-aksen:

$$V = \\pi \\int_0^4 (2\\sqrt{y})^2 \\, dy = \\pi \\int_0^4 4y \\, dy$$

$$V = 4\\pi \\left[ \\frac{y^2}{2} \\right]_0^4 = 4\\pi \\cdot \\frac{16}{2} = 32\\pi \\text{ m}^3$$

Vi konverterer til liter ($1 \\text{ m}^3 = 1000$ liter):

$$V = 32\\pi \\cdot 1000 \\approx 100{\\,}531 \\text{ liter}$$

**Svar:** Tankens volum er $32\\pi \\text{ m}^3 \\approx 100{\\,}500$ liter.`,
    },

    // ========== OPPGAVE 10 ==========
    {
      id: 'r2-3-6-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-10',
        number: '3.6.10',
        type: 'classic',
        difficulty: 'medium',
        task: `En vase har form som et omdreiningslegeme dannet ved å rotere kurven $y = x^2 + 1$ rundt $y$-aksen fra $y = 1$ til $y = 5$ (målt i desimeter).

a) Løs likningen $y = x^2 + 1$ for $x$.

b) Finn vasens volum.

c) Hvor mange liter vann kan vasen romme? ($1 \\text{ dm}^3 = 1$ liter)`,
        solution: `a) $y = x^2 + 1 \\implies x^2 = y - 1 \\implies x = \\sqrt{y - 1}$

b) Volumet ved rotasjon om $y$-aksen:

$$V = \\pi \\int_1^5 (\\sqrt{y-1})^2 \\, dy = \\pi \\int_1^5 (y-1) \\, dy$$

$$V = \\pi \\left[ \\frac{(y-1)^2}{2} \\right]_1^5 = \\pi \\left( \\frac{16}{2} - 0 \\right) = 8\\pi \\text{ dm}^3$$

c) Siden $1 \\text{ dm}^3 = 1$ liter, kan vasen romme $8\\pi \\approx 25{,}1$ liter.`,
        hints: [
          'Husk å skifte integrasjonsgrensene når du gjør substitusjonen',
          'Pass på at du bruker de riktige grensene for $y$',
        ],
      },
    },

    // ========== EKSEMPEL 11: TORUS ==========
    {
      id: 'r2-3-6-ex-11',
      type: 'example',
      title: 'Eksempel 11: Volum av en torus (smultring)',
      problem: `En torus (smultring) kan dannes ved å rotere en sirkel med radius $r$ og sentrum i $(R, 0)$ rundt $y$-aksen, der $R > r$. Finn volumet av torusen.`,
      solution: `**Løsning:**

Sirkelen har likningen $(x - R)^2 + y^2 = r^2$.

Vi løser for $x$:
$$x = R \\pm \\sqrt{r^2 - y^2}$$

Den ytre delen av sirkelen er $x_{\\text{ytre}} = R + \\sqrt{r^2 - y^2}$
Den indre delen er $x_{\\text{indre}} = R - \\sqrt{r^2 - y^2}$

Volumet av torusen er differansen mellom volumet fra den ytre og den indre kurven:

$$V = \\pi \\int_{-r}^{r} \\left[ (R + \\sqrt{r^2 - y^2})^2 - (R - \\sqrt{r^2 - y^2})^2 \\right] dy$$

Vi utvider:
$$= \\pi \\int_{-r}^{r} \\left[ R^2 + 2R\\sqrt{r^2-y^2} + (r^2-y^2) - R^2 + 2R\\sqrt{r^2-y^2} - (r^2-y^2) \\right] dy$$

$$= \\pi \\int_{-r}^{r} 4R\\sqrt{r^2-y^2} \\, dy = 4\\pi R \\int_{-r}^{r} \\sqrt{r^2-y^2} \\, dy$$

Integralet $\\int_{-r}^{r} \\sqrt{r^2-y^2} \\, dy$ er arealet av en halvsirkel med radius $r$, altså $\\frac{\\pi r^2}{2}$.

$$V = 4\\pi R \\cdot \\frac{\\pi r^2}{2} = 2\\pi^2 R r^2$$

**Svar:** Volumet av torusen er $V = 2\\pi^2 R r^2$.`,
    },

    // ========== OPPGAVE 11 ==========
    {
      id: 'r2-3-6-exercise-11',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-11',
        number: '3.6.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En smultringformet livbøye har indre radius $R = 30$ cm og tverrsnittsradius $r = 10$ cm (sirkelen som roteres har radius 10 cm).

a) Bruk formelen $V = 2\\pi^2 R r^2$ til å finne volumet av livbøyen.

b) Hvis livbøyen er laget av materiale med tetthet $\\rho = 0{,}05$ g/cm$^3$, hva er massen?`,
        solution: `a) Vi setter inn $R = 30$ cm og $r = 10$ cm:

$$V = 2\\pi^2 \\cdot 30 \\cdot 10^2 = 2\\pi^2 \\cdot 30 \\cdot 100 = 6000\\pi^2 \\text{ cm}^3$$

$$V \\approx 59{\\,}218 \\text{ cm}^3 \\approx 59{,}2 \\text{ liter}$$

b) Massen er:

$$m = \\rho \\cdot V = 0{,}05 \\cdot 6000\\pi^2 = 300\\pi^2 \\approx 2961 \\text{ g} \\approx 3{,}0 \\text{ kg}$$

**Svar:** Volumet er ca. $59{,}2$ liter og massen er ca. $3{,}0$ kg.`,
        hints: [
          'Sett inn verdiene direkte i formelen',
          'Husk at masse = tetthet $\\times$ volum',
        ],
      },
    },

    // ========== SKALLMETODEN (INTRO) ==========
    {
      id: 'r2-3-6-text-7',
      type: 'text',
      content: `## Skallmetoden (Sylindrisk skallmetode)

Skivemetoden er ikke alltid den mest praktiske metoden. Noen ganger er det enklere å bruke **skallmetoden**, der vi tenker oss at vi bygger opp volumet av konsentriske sylindriske skall.

Skallmetoden er spesielt nyttig når:
- Vi roterer rundt $y$-aksen, men funksjonen er enklest å uttrykke som $y = f(x)$
- Skivemetoden ville kreve at vi løser kompliserte likninger for $x$`,
    },

    // ========== TEOREM: SKALLMETODEN ==========
    {
      id: 'r2-3-6-thm-5',
      type: 'theorem',
      title: 'Skallmetoden: Rotasjon om y-aksen',
      content: `Når området mellom $y = f(x)$ og $x$-aksen på intervallet $[a, b]$ (der $a \\geq 0$) roteres rundt $y$-aksen, er volumet:

$$V = 2\\pi \\int_a^b x \\cdot f(x) \\, dx$$

**Forklaring:** Hvert sylindrisk skall har:
- Radius $x$ (avstanden fra $y$-aksen)
- Høyde $f(x)$
- Tykkelse $dx$
- Areal av sylinderflaten: $2\\pi x \\cdot f(x)$
- Volum: $2\\pi x \\cdot f(x) \\, dx$`,
    },

    // ========== EKSEMPEL 12: SKALLMETODEN ==========
    {
      id: 'r2-3-6-ex-12',
      type: 'example',
      title: 'Eksempel 12: Skallmetoden',
      problem: `Bruk skallmetoden til å finne volumet av omdreiningslegemet som dannes når området mellom $y = x^2$ og $x$-aksen på intervallet $[0, 2]$ roteres rundt $y$-aksen.`,
      solution: `**Løsning:**

Vi bruker skallmetodens formel:

$$V = 2\\pi \\int_a^b x \\cdot f(x) \\, dx$$

Her er $f(x) = x^2$, $a = 0$ og $b = 2$:

$$V = 2\\pi \\int_0^2 x \\cdot x^2 \\, dx = 2\\pi \\int_0^2 x^3 \\, dx$$

$$V = 2\\pi \\left[ \\frac{x^4}{4} \\right]_0^2 = 2\\pi \\cdot \\frac{16}{4} = 2\\pi \\cdot 4 = 8\\pi$$

**Kontroll med skivemetoden:**
Ved $y = 0$: $x = 0$ og ved $y = 4$: $x = 2$. Så $x = \\sqrt{y}$.

$$V = \\pi \\int_0^4 (\\sqrt{y})^2 \\, dy = \\pi \\int_0^4 y \\, dy = \\pi \\cdot \\frac{16}{2} = 8\\pi \\checkmark$$

**Svar:** Volumet er $8\\pi$ (begge metoder gir samme svar).`,
    },

    // ========== OPPGAVE 12 ==========
    {
      id: 'r2-3-6-exercise-12',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-12',
        number: '3.6.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Bruk skallmetoden til å finne volumet av omdreiningslegemet som dannes når området mellom $y = x - x^2$ og $x$-aksen (for $0 \\leq x \\leq 1$) roteres rundt $y$-aksen.`,
        solution: `Vi bruker skallmetoden:

$$V = 2\\pi \\int_0^1 x(x - x^2) \\, dx = 2\\pi \\int_0^1 (x^2 - x^3) \\, dx$$

$$V = 2\\pi \\left[ \\frac{x^3}{3} - \\frac{x^4}{4} \\right]_0^1 = 2\\pi \\left( \\frac{1}{3} - \\frac{1}{4} \\right)$$

$$V = 2\\pi \\cdot \\frac{4 - 3}{12} = 2\\pi \\cdot \\frac{1}{12} = \\frac{\\pi}{6}$$

**Svar:** Volumet er $\\frac{\\pi}{6}$ eller ca. $0{,}52$ (volumenheter).`,
        hints: [
          'Husk formelen: $V = 2\\pi \\int_a^b x \\cdot f(x) \\, dx$',
          'Multipliser ut før du integrerer',
        ],
      },
    },

    // ========== EKSEMPEL 13: SAMMENLIGNING AV METODER ==========
    {
      id: 'r2-3-6-ex-13',
      type: 'example',
      title: 'Eksempel 13: Sammenligning av skive- og skallmetoden',
      problem: `Området mellom $y = \\sin x$ og $x$-aksen på intervallet $[0, \\pi]$ roteres rundt $y$-aksen. Beregn volumet med skallmetoden.`,
      solution: `**Løsning:**

Med skallmetoden:

$$V = 2\\pi \\int_0^{\\pi} x \\sin x \\, dx$$

Vi bruker delvis integrasjon med $u = x$ og $v' = \\sin x$:
- $u' = 1$
- $v = -\\cos x$

$$V = 2\\pi \\left[ -x\\cos x \\Big|_0^{\\pi} + \\int_0^{\\pi} \\cos x \\, dx \\right]$$

$$= 2\\pi \\left[ -\\pi \\cdot (-1) + 0 + [\\sin x]_0^{\\pi} \\right]$$

$$= 2\\pi \\left[ \\pi + 0 - 0 \\right] = 2\\pi^2$$

**Svar:** Volumet er $2\\pi^2$ eller ca. $19{,}7$ (volumenheter).

**Merk:** Skivemetoden ville vært mye mer komplisert her, fordi vi måtte løst $y = \\sin x$ for $x$ og håndtert at $\\sin x$ har flere løsninger.`,
    },

    // ========== OPPGAVE 13 ==========
    {
      id: 'r2-3-6-exercise-13',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-13',
        number: '3.6.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Området mellom $y = e^{-x}$ og $x$-aksen på intervallet $[0, 1]$ roteres rundt $y$-aksen. Beregn volumet med skallmetoden.

Hint: Du trenger delvis integrasjon.`,
        solution: `Med skallmetoden:

$$V = 2\\pi \\int_0^1 x e^{-x} \\, dx$$

Delvis integrasjon med $u = x$ og $v' = e^{-x}$:
- $u' = 1$
- $v = -e^{-x}$

$$V = 2\\pi \\left[ -xe^{-x} \\Big|_0^1 + \\int_0^1 e^{-x} \\, dx \\right]$$

$$= 2\\pi \\left[ -e^{-1} - 0 + [-e^{-x}]_0^1 \\right]$$

$$= 2\\pi \\left[ -\\frac{1}{e} - \\frac{1}{e} + 1 \\right]$$

$$= 2\\pi \\left( 1 - \\frac{2}{e} \\right) = 2\\pi \\cdot \\frac{e - 2}{e}$$

**Svar:** $V = \\frac{2\\pi(e-2)}{e} \\approx 0{,}93$ (volumenheter).`,
        hints: [
          'Ved delvis integrasjon: velg $u = x$ og $v\\prime = e^{-x}$',
          'Husk at integralet av $e^{-x}$ er $-e^{-x}$',
        ],
      },
    },

    // ========== EKSEMPEL 14: PRAKTISK - FONTENE ==========
    {
      id: 'r2-3-6-ex-14',
      type: 'example',
      title: 'Eksempel 14: Fontene',
      problem: `En fontene har et basseng formet som et omdreiningslegeme. Bunnen av bassenget beskrives av kurven $y = 0{,}1x^2$ for $-3 \\leq x \\leq 3$ meter, rotert rundt $y$-aksen.

a) Finn volumet av bassenget fra bunnen til $y = 0{,}9$ meter.

b) Hvor mange liter vann trengs for å fylle bassenget til dette nivået?`,
      solution: `**Løsning:**

a) Vi har $y = 0{,}1x^2$, så $x^2 = 10y$ og $x = \\sqrt{10y}$.

Volumet ved rotasjon om $y$-aksen fra $y = 0$ til $y = 0{,}9$:

$$V = \\pi \\int_0^{0{,}9} (\\sqrt{10y})^2 \\, dy = \\pi \\int_0^{0{,}9} 10y \\, dy$$

$$V = 10\\pi \\left[ \\frac{y^2}{2} \\right]_0^{0{,}9} = 10\\pi \\cdot \\frac{0{,}81}{2} = 4{,}05\\pi \\text{ m}^3$$

b) Vi konverterer til liter ($1 \\text{ m}^3 = 1000$ liter):

$$V = 4{,}05\\pi \\cdot 1000 \\approx 12{\\,}723 \\text{ liter}$$

**Svar:**
a) Volumet er $4{,}05\\pi \\approx 12{,}72$ m$^3$
b) Ca. 12 700 liter vann trengs.`,
    },

    // ========== OPPGAVE 14 ==========
    {
      id: 'r2-3-6-exercise-14',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-14',
        number: '3.6.14',
        type: 'classic',
        difficulty: 'medium',
        task: `En oljetank har form som et liggende omdreiningslegeme (sylinder med halvkuleformede ender). Tanken er 6 meter lang totalt, der den sylindriske delen er 4 meter og radius er 1 meter.

a) Finn volumet av den sylindriske delen.

b) Finn volumet av de to halvkuleformede endene (som tilsammen utgjør en hel kule).

c) Finn det totale volumet i liter.`,
        solution: `a) Volum av sylinder:
$$V_{\\text{syl}} = \\pi r^2 h = \\pi \\cdot 1^2 \\cdot 4 = 4\\pi \\text{ m}^3$$

b) Volum av kule (to halvkuler):
$$V_{\\text{kule}} = \\frac{4}{3}\\pi r^3 = \\frac{4}{3}\\pi \\cdot 1^3 = \\frac{4\\pi}{3} \\text{ m}^3$$

c) Totalt volum:
$$V = 4\\pi + \\frac{4\\pi}{3} = \\frac{12\\pi + 4\\pi}{3} = \\frac{16\\pi}{3} \\text{ m}^3$$

$$V = \\frac{16\\pi}{3} \\cdot 1000 \\approx 16{\\,}755 \\text{ liter}$$

**Svar:** a) $4\\pi$ m$^3$, b) $\\frac{4\\pi}{3}$ m$^3$, c) ca. 16 755 liter.`,
        hints: [
          'Sylinderens volum: $V = \\pi r^2 h$',
          'Kulens volum: $V = \\frac{4}{3}\\pi r^3$',
        ],
      },
    },

    // ========== EKSEMPEL 15: VINGLASS ==========
    {
      id: 'r2-3-6-ex-15',
      type: 'example',
      title: 'Eksempel 15: Vinglass',
      problem: `Et vinglass har form som et omdreiningslegeme dannet ved å rotere kurven $y = x^3$ rundt $y$-aksen fra $y = 0$ til $y = 8$ (målt i cm).

a) Uttrykk $x$ som funksjon av $y$.

b) Finn volumet av vinglasset.

c) Hvis glasset fylles til $y = 4$, hvor stor del av det totale volumet er fylt?`,
      solution: `**Løsning:**

a) $y = x^3 \\implies x = y^{1/3} = \\sqrt[3]{y}$

b) Volumet ved rotasjon om $y$-aksen:

$$V = \\pi \\int_0^8 (y^{1/3})^2 \\, dy = \\pi \\int_0^8 y^{2/3} \\, dy$$

$$V = \\pi \\left[ \\frac{y^{5/3}}{5/3} \\right]_0^8 = \\pi \\cdot \\frac{3}{5} \\left[ y^{5/3} \\right]_0^8$$

$$V = \\frac{3\\pi}{5} \\cdot 8^{5/3} = \\frac{3\\pi}{5} \\cdot 32 = \\frac{96\\pi}{5} \\text{ cm}^3 \\approx 60{,}3 \\text{ cm}^3$$

c) Volumet til $y = 4$:

$$V_4 = \\frac{3\\pi}{5} \\cdot 4^{5/3} = \\frac{3\\pi}{5} \\cdot 4 \\cdot 4^{2/3} = \\frac{3\\pi}{5} \\cdot 4 \\cdot \\sqrt[3]{16}$$

$$V_4 = \\frac{12\\pi}{5} \\cdot 2^{4/3} = \\frac{12\\pi \\cdot 2\\sqrt[3]{2}}{5} \\approx 19{,}0 \\text{ cm}^3$$

Andelen fylt er:
$$\\frac{V_4}{V} = \\frac{4^{5/3}}{8^{5/3}} = \\left( \\frac{4}{8} \\right)^{5/3} = \\left( \\frac{1}{2} \\right)^{5/3} = \\frac{1}{2^{5/3}} \\approx 0{,}315 = 31{,}5\\%$$

**Svar:** a) $x = \\sqrt[3]{y}$, b) $\\frac{96\\pi}{5} \\approx 60{,}3$ cm$^3$, c) ca. $31{,}5\\%$`,
    },

    // ========== OPPGAVE 15 ==========
    {
      id: 'r2-3-6-exercise-15',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-15',
        number: '3.6.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En designvase har en spesiell form der profilen følger kurven $y = \\ln(x+1)$ for $0 \\leq x \\leq e-1$, rotert rundt $y$-aksen.

a) Finn høyden på vasen (verdien av $y$ ved $x = e-1$).

b) Uttrykk $x$ som funksjon av $y$.

c) Finn volumet av vasen.`,
        solution: `a) Ved $x = e - 1$:
$$y = \\ln(e - 1 + 1) = \\ln(e) = 1$$

Vasen er 1 enhet høy.

b) $y = \\ln(x + 1) \\implies e^y = x + 1 \\implies x = e^y - 1$

c) Volumet ved rotasjon om $y$-aksen fra $y = 0$ til $y = 1$:

$$V = \\pi \\int_0^1 (e^y - 1)^2 \\, dy = \\pi \\int_0^1 (e^{2y} - 2e^y + 1) \\, dy$$

$$V = \\pi \\left[ \\frac{e^{2y}}{2} - 2e^y + y \\right]_0^1$$

$$V = \\pi \\left[ \\left( \\frac{e^2}{2} - 2e + 1 \\right) - \\left( \\frac{1}{2} - 2 + 0 \\right) \\right]$$

$$V = \\pi \\left( \\frac{e^2}{2} - 2e + 1 - \\frac{1}{2} + 2 \\right)$$

$$V = \\pi \\left( \\frac{e^2 - 1}{2} - 2e + 3 \\right)$$

$$V = \\pi \\left( \\frac{e^2 - 1}{2} + 3 - 2e \\right) \\approx \\pi \\cdot 0{,}474 \\approx 1{,}49$$

**Svar:** a) Høyde = 1, b) $x = e^y - 1$, c) $V \\approx 1{,}49$ (volumenheter).`,
        hints: [
          'For å løse $y = \\ln(x+1)$ for $x$, bruk at $e^{\\ln(a)} = a$',
          'Husk å utvide $(e^y - 1)^2$ før integrasjon',
        ],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-3-6-text-8',
      type: 'text',
      content: `## Oppsummering

I dette kapitlet har vi lært:

1. **Omdreiningslegemer** dannes når et planområde roteres rundt en akse.

2. **Skivemetoden for rotasjon om x-aksen:**
$$V = \\pi \\int_a^b [f(x)]^2 \\, dx$$

3. **Skivemetoden for rotasjon om y-aksen:**
$$V = \\pi \\int_c^d [g(y)]^2 \\, dy$$

4. **Volum mellom to kurver** (rotasjon om x-aksen):
$$V = \\pi \\int_a^b \\left( [f(x)]^2 - [g(x)]^2 \\right) \\, dx$$

5. **Rotasjon om linjen $y = k$:**
$$V = \\pi \\int_a^b [f(x) - k]^2 \\, dx$$

6. **Skallmetoden** (rotasjon om y-aksen):
$$V = 2\\pi \\int_a^b x \\cdot f(x) \\, dx$$

7. **Klassiske volumformler utledet ved integrasjon:**
   - Sylinder: $V = \\pi r^2 h$
   - Kjegle: $V = \\frac{1}{3}\\pi r^2 h$
   - Kule: $V = \\frac{4}{3}\\pi r^3$
   - Paraboloid: $V = \\frac{1}{2}\\pi r^2 h$
   - Torus: $V = 2\\pi^2 R r^2$`,
    },

    // ========== OPPGAVE 16: BLANDEDE OPPGAVER ==========
    {
      id: 'r2-3-6-exercise-16',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-16',
        number: '3.6.16',
        type: 'classic',
        difficulty: 'medium',
        task: `Regn ut volumet av omdreiningslegemet som dannes når området mellom grafen til $f(x) = e^x$ og $x$-aksen på intervallet $[0, 1]$ roteres rundt $x$-aksen.`,
        solution: `Vi bruker volumformelen:

$$V = \\pi \\int_0^1 (e^x)^2 \\, dx = \\pi \\int_0^1 e^{2x} \\, dx$$

$$V = \\pi \\left[ \\frac{e^{2x}}{2} \\right]_0^1 = \\pi \\left( \\frac{e^2}{2} - \\frac{1}{2} \\right) = \\frac{\\pi(e^2 - 1)}{2}$$

**Svar:** $V = \\frac{\\pi(e^2 - 1)}{2} \\approx 10{,}04$ (volumenheter).`,
        hints: [
          'Husk at $(e^x)^2 = e^{2x}$',
          'Integralet av $e^{2x}$ er $\\frac{e^{2x}}{2}$',
        ],
      },
    },

    // ========== OPPGAVE 17: TRIGONOMETRISK ==========
    {
      id: 'r2-3-6-exercise-17',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-17',
        number: '3.6.17',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn volumet av omdreiningslegemet som dannes når området mellom $y = \\sin x$ og $x$-aksen på intervallet $[0, \\pi]$ roteres rundt $x$-aksen.

Hint: Bruk identiteten $\\sin^2 x = \\frac{1 - \\cos(2x)}{2}$.`,
        solution: `Vi bruker volumformelen:

$$V = \\pi \\int_0^{\\pi} \\sin^2 x \\, dx = \\pi \\int_0^{\\pi} \\frac{1 - \\cos(2x)}{2} \\, dx$$

$$V = \\frac{\\pi}{2} \\int_0^{\\pi} (1 - \\cos(2x)) \\, dx$$

$$V = \\frac{\\pi}{2} \\left[ x - \\frac{\\sin(2x)}{2} \\right]_0^{\\pi}$$

$$V = \\frac{\\pi}{2} \\left[ \\left( \\pi - \\frac{\\sin(2\\pi)}{2} \\right) - \\left( 0 - 0 \\right) \\right]$$

$$V = \\frac{\\pi}{2} \\cdot \\pi = \\frac{\\pi^2}{2}$$

**Svar:** $V = \\frac{\\pi^2}{2} \\approx 4{,}93$ (volumenheter).`,
        hints: [
          'Trigonometrisk identitet: $\\sin^2 x = \\frac{1 - \\cos(2x)}{2}$',
          'Husk at $\\sin(2\\pi) = 0$ og $\\sin(0) = 0$',
        ],
      },
    },

    // ========== OPPGAVE 18: EKSAMEN-STIL ==========
    {
      id: 'r2-3-6-exercise-18',
      type: 'exercise',
      exercise: {
        id: 'r2-3-6-task-18',
        number: '3.6.18',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `(Eksamensstil) Området $A$ er avgrenset av $y = 4 - x^2$, $y = 0$ og $y$-aksen (i første kvadrant).

a) Skisser området $A$.

b) Finn arealet av $A$.

c) Området $A$ roteres rundt $x$-aksen. Finn volumet av omdreiningslegemet.

d) Området $A$ roteres rundt $y$-aksen. Finn volumet av omdreiningslegemet.`,
        solution: `a) Området er avgrenset av parabelen $y = 4 - x^2$ fra $x = 0$ til $x = 2$ (der parabelen krysser $x$-aksen).

b) Arealet:
$$A = \\int_0^2 (4 - x^2) \\, dx = \\left[ 4x - \\frac{x^3}{3} \\right]_0^2 = 8 - \\frac{8}{3} = \\frac{16}{3}$$

c) Rotasjon om $x$-aksen:
$$V_x = \\pi \\int_0^2 (4 - x^2)^2 \\, dx = \\pi \\int_0^2 (16 - 8x^2 + x^4) \\, dx$$

$$V_x = \\pi \\left[ 16x - \\frac{8x^3}{3} + \\frac{x^5}{5} \\right]_0^2 = \\pi \\left( 32 - \\frac{64}{3} + \\frac{32}{5} \\right)$$

$$V_x = \\pi \\cdot \\frac{480 - 320 + 96}{15} = \\frac{256\\pi}{15}$$

d) Rotasjon om $y$-aksen (vi løser for $x$: $x = \\sqrt{4-y}$):
$$V_y = \\pi \\int_0^4 (\\sqrt{4-y})^2 \\, dy = \\pi \\int_0^4 (4-y) \\, dy$$

$$V_y = \\pi \\left[ 4y - \\frac{y^2}{2} \\right]_0^4 = \\pi (16 - 8) = 8\\pi$$

**Svar:** b) $\\frac{16}{3}$, c) $\\frac{256\\pi}{15}$, d) $8\\pi$`,
        hints: [
          'Finn først hvor parabelen krysser $x$-aksen',
          'For rotasjon om $y$-aksen, løs for $x$ som funksjon av $y$',
        ],
      },
    },

    // ========== TIP ==========
    {
      id: 'r2-3-6-tip-1',
      type: 'tip',
      content: `**Tips for eksamen:** Når du skal finne volum av omdreiningslegemer:

1. **Identifiser rotasjonsaksen** - dette bestemmer hvilken formel du skal bruke.

2. **Tegn en skisse** - det hjelper å visualisere hva som roteres.

3. **Velg riktig metode:**
   - Skivemetoden: Når tverrsnittet vinkelrett på aksen er en sirkel (eller ring)
   - Skallmetoden: Når det er enklere å uttrykke funksjonen i den andre variabelen

4. **Sjekk grensene** - Ved rotasjon om $y$-aksen må grensene være $y$-verdier.

5. **Kontroller dimensjonen** - Volum skal ha tredjepotens i enhetene.`,
    },

    // ========== ADVARSEL ==========
    {
      id: 'r2-3-6-warning-1',
      type: 'warning',
      title: 'Vanlige feil',
      content: `1. **Glemmer å kvadrere funksjonen:** Volumformelen har $[f(x)]^2$, ikke bare $f(x)$.

2. **Feil akse:** Sjekk alltid hvilken akse det roteres rundt. Formelen er forskjellig for $x$- og $y$-aksen.

3. **Feil grenser:** Ved rotasjon om $y$-aksen må grensene være $y$-verdier, ikke $x$-verdier.

4. **Glemmer $\\pi$:** Volumformelen inneholder alltid $\\pi$ foran integralet (for skivemetoden) eller $2\\pi$ (for skallmetoden).

5. **Blander skive- og skallmetoden:** Skivemetoden har $\\pi \\int [f]^2$, skallmetoden har $2\\pi \\int x \\cdot f$.

6. **Feil ved rotasjon om andre akser:** Husk å justere radiusen når du roterer om $y = k$ eller $x = c$.`,
    },

    // ========== NOTE ==========
    {
      id: 'r2-3-6-note-1',
      type: 'note',
      content: `**Historisk note:** Metodene for å beregne volum av omdreiningslegemer ble utviklet av matematikere som Archimedes (ca. 287-212 f.Kr.), som fant volumet av kulen, og Cavalieri (1598-1647), som utviklet en tidlig versjon av integrasjonsmetoder. Den moderne formuleringen med integraler ble utviklet av Newton og Leibniz på 1600-tallet.`,
    },
  ],
};

export const CHAPTER_R2_3_7: TextbookChapter = {
  id: 'r2-3-7',
  courseId: 'r2',
  chapterNumber: '3.7',
  title: 'Funksjonsdrøfting med integrasjon',
  description: 'Fullstendig drøfting med både derivasjon og integrasjon.',
  estimatedMinutes: 75,
  competenceGoals: [
    'analysere og tolke ulike funksjonar ved å bruke derivasjon og integrasjon',
    'bruke integrasjon i praktiske anvendelser',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-3-7-text-1',
      type: 'text',
      content: `## Funksjonsdrøfting med integrasjon

I tidligere kapitler har vi lært å drøfte funksjoner ved hjelp av derivasjon. Vi har funnet nullpunkter, ekstremalpunkter, vendepunkter og skissert grafer. Nå skal vi utvide verktøykassen vår med **integrasjon**.

Integrasjon gir oss mulighet til å:
- Finne en funksjon $f(x)$ når vi kjenner den deriverte $f'(x)$ og ett punkt
- Beregne arealet under en graf som en funksjon av $x$
- Analysere hvordan akkumulerte størrelser vokser over tid
- Løse praktiske problemer i fysikk, økonomi og andre fagfelt

Vi skal se at derivasjon og integrasjon utfyller hverandre i funksjonsdrøfting, og at vi ofte trenger begge verktøyene for en fullstendig analyse.`,
    },

    // ========== SEKSJON 1: SAMMENHENGEN MELLOM f, f' og ∫f ==========
    {
      id: 'r2-3-7-text-2',
      type: 'text',
      content: `## Sammenhengen mellom $f$, $f'$ og $\\int f$

La oss starte med å forstå hvordan en funksjon, dens deriverte og dens integral henger sammen.

Hvis $f(x)$ er en funksjon:
- $f'(x)$ forteller oss **vekstfarten** til $f$ i hvert punkt
- $\\int f(x)\\,dx = F(x) + C$ gir oss en funksjon $F$ der $F'(x) = f(x)$

Dette betyr at:
- Derivasjon går fra $F$ til $f$: $F \\xrightarrow{\\text{derivasjon}} f$
- Integrasjon går fra $f$ til $F$: $f \\xrightarrow{\\text{integrasjon}} F$

Derivasjon og integrasjon er **inverse operasjoner** (med forbehold om konstanten $C$).`,
    },

    {
      id: 'r2-3-7-def-1',
      type: 'definition',
      title: 'Sammenhengen mellom derivasjon og integrasjon',
      content: `For en kontinuerlig funksjon $f$ gjelder:

1. **Derivasjon opphever integrasjon:**
$$\\frac{d}{dx}\\left[\\int f(x)\\,dx\\right] = f(x)$$

2. **Integrasjon opphever derivasjon (nesten):**
$$\\int f'(x)\\,dx = f(x) + C$$

Den konstante $C$ oppstår fordi mange funksjoner har samme deriverte (de skiller seg bare med en konstant).`,
    },

    {
      id: 'r2-3-7-ex-1',
      type: 'example',
      title: 'Eksempel 1: Verifisere sammenhengen',
      problem: `La $f(x) = x^3 - 2x$.

a) Finn $f'(x)$ og deretter $\\int f'(x)\\,dx$.
b) Finn $\\int f(x)\\,dx$ og deretter $\\frac{d}{dx}\\left[\\int f(x)\\,dx\\right]$.
c) Kommenter resultatene.`,
      solution: `**Løsning:**

**a)** Vi deriverer først:
$$f'(x) = 3x^2 - 2$$

Så integrerer vi $f'(x)$:
$$\\int (3x^2 - 2)\\,dx = x^3 - 2x + C = f(x) + C$$

Vi får tilbake $f(x)$, pluss en konstant.

**b)** Vi integrerer først:
$$\\int (x^3 - 2x)\\,dx = \\frac{x^4}{4} - x^2 + C$$

Så deriverer vi resultatet:
$$\\frac{d}{dx}\\left[\\frac{x^4}{4} - x^2 + C\\right] = x^3 - 2x = f(x)$$

Vi får tilbake nøyaktig $f(x)$.

**c)** Resultatene viser at:
- Integrasjon etterfulgt av derivasjon gir tilbake originalfunksjonen
- Derivasjon etterfulgt av integrasjon gir originalfunksjonen pluss en konstant

Konstanten forsvinner ved derivasjon, men må legges til ved integrasjon.`,
    },

    {
      id: 'r2-3-7-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-1',
        number: '3.7.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Verifiser sammenhengen mellom derivasjon og integrasjon for følgende funksjoner.',
        subTasks: [
          { label: 'a', task: 'Finn $f\'(x)$ og deretter $\\int f\'(x)\\,dx$ for $f(x) = x^4$', solution: '$f\'(x) = 4x^3$, så $\\int 4x^3\\,dx = x^4 + C = f(x) + C$' },
          { label: 'b', task: 'Finn $\\int f(x)\\,dx$ og deretter $\\frac{d}{dx}[\\int f(x)\\,dx]$ for $f(x) = 2x + 1$', solution: '$\\int (2x+1)\\,dx = x^2 + x + C$. Deriverer: $(x^2 + x + C)\' = 2x + 1 = f(x)$' },
          { label: 'c', task: 'Gjør det samme for $f(x) = e^x$', solution: '$f\'(x) = e^x$, $\\int e^x\\,dx = e^x + C$. Og: $\\int e^x\\,dx = e^x + C$, $(e^x + C)\' = e^x$' },
          { label: 'd', task: 'Gjør det samme for $f(x) = \\sin x$', solution: '$f\'(x) = \\cos x$, $\\int \\cos x\\,dx = \\sin x + C$. Og: $\\int \\sin x\\,dx = -\\cos x + C$, $(-\\cos x + C)\' = \\sin x$' },
        ],
        solution: 'Se deloppgavene for løsninger.',
        hints: [
          'Bruk kjente derivasjons- og integrasjonsregler',
          'Husk at $(e^x)\' = e^x$ og $\\int e^x\\,dx = e^x + C$',
        ],
      },
    },

    // ========== SEKSJON 2: BESTEMME f(x) NÅR f'(x) OG ET PUNKT ER GITT ==========
    {
      id: 'r2-3-7-text-3',
      type: 'text',
      content: `## Bestemme $f(x)$ når $f'(x)$ og et punkt er gitt

En viktig anvendelse av integrasjon er å **rekonstruere** en funksjon fra dens deriverte.

Hvis vi kjenner $f'(x)$, kan vi integrere for å finne $f(x)$:
$$f(x) = \\int f'(x)\\,dx = F(x) + C$$

Men dette gir oss uendelig mange løsninger (én for hver verdi av $C$). For å finne den *spesifikke* funksjonen trenger vi tilleggsinformasjon, typisk verdien av $f$ i ett punkt.`,
    },

    {
      id: 'r2-3-7-thm-1',
      type: 'theorem',
      title: 'Bestemme en funksjon fra dens deriverte',
      content: `Gitt $f'(x)$ og betingelsen $f(a) = b$, kan vi finne $f(x)$ slik:

**Steg 1:** Integrer $f'(x)$:
$$f(x) = \\int f'(x)\\,dx = F(x) + C$$

**Steg 2:** Bruk betingelsen $f(a) = b$ til å bestemme $C$:
$$f(a) = F(a) + C = b \\quad \\Rightarrow \\quad C = b - F(a)$$

**Steg 3:** Sett inn verdien av $C$ for å få den endelige funksjonen.`,
    },

    {
      id: 'r2-3-7-ex-2',
      type: 'example',
      title: 'Eksempel 2: Finne f(x) fra f\'(x) og et punkt',
      problem: `En funksjon $f$ har den deriverte $f'(x) = 3x^2 - 4x + 1$.
Grafen til $f$ går gjennom punktet $(2, 5)$.
Bestem $f(x)$.`,
      solution: `**Løsning:**

**Steg 1:** Vi integrerer $f'(x)$:
$$f(x) = \\int (3x^2 - 4x + 1)\\,dx = x^3 - 2x^2 + x + C$$

**Steg 2:** Vi bruker at $f(2) = 5$:
$$f(2) = 2^3 - 2 \\cdot 2^2 + 2 + C = 8 - 8 + 2 + C = 2 + C = 5$$
$$C = 3$$

**Steg 3:** Den endelige funksjonen er:
$$f(x) = x^3 - 2x^2 + x + 3$$

**Sjekk:** $f(2) = 8 - 8 + 2 + 3 = 5$ ✓`,
    },

    {
      id: 'r2-3-7-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-2',
        number: '3.7.2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bestem funksjonen $f(x)$ i hvert tilfelle.',
        subTasks: [
          { label: 'a', task: '$f\'(x) = 2x - 3$ og $f(1) = 4$', solution: '$f(x) = \\int(2x-3)\\,dx = x^2 - 3x + C$. Fra $f(1) = 1 - 3 + C = 4$ får vi $C = 6$. Svar: $f(x) = x^2 - 3x + 6$' },
          { label: 'b', task: '$f\'(x) = 6x^2 + 2x$ og $f(0) = 1$', solution: '$f(x) = 2x^3 + x^2 + C$. Fra $f(0) = 0 + 0 + C = 1$ får vi $C = 1$. Svar: $f(x) = 2x^3 + x^2 + 1$' },
          { label: 'c', task: '$f\'(x) = 4x^3 - 6x^2 + 2$ og $f(-1) = 0$', solution: '$f(x) = x^4 - 2x^3 + 2x + C$. Fra $f(-1) = 1 + 2 - 2 + C = 0$ får vi $C = -1$. Svar: $f(x) = x^4 - 2x^3 + 2x - 1$' },
          { label: 'd', task: '$f\'(x) = e^x$ og $f(0) = 2$', solution: '$f(x) = e^x + C$. Fra $f(0) = e^0 + C = 1 + C = 2$ får vi $C = 1$. Svar: $f(x) = e^x + 1$' },
        ],
        solution: 'a) $x^2 - 3x + 6$, b) $2x^3 + x^2 + 1$, c) $x^4 - 2x^3 + 2x - 1$, d) $e^x + 1$',
        hints: [
          'Integrer først for å finne den generelle løsningen med $C$',
          'Sett deretter inn det kjente punktet for å finne $C$',
        ],
      },
    },

    // ========== NYTT: Flere initialbetingelser ==========
    {
      id: 'r2-3-7-text-3b',
      type: 'text',
      content: `### Flere initialbetingelser

Noen ganger får vi oppgitt flere betingelser, for eksempel både $f(a)$ og $f'(a)$. Dette skjer ofte når vi starter fra den andrederiverte $f''(x)$.

Hvert integrasjonstrinn introduserer én ny konstant, så:
- Fra $f''(x)$ til $f'(x)$: én konstant $C_1$
- Fra $f'(x)$ til $f(x)$: én konstant $C_2$

Vi trenger like mange betingelser som vi har konstanter.`,
    },

    {
      id: 'r2-3-7-ex-2b',
      type: 'example',
      title: 'Eksempel 2b: Finne f(x) fra f\'\'(x) og to betingelser',
      problem: `Finn $f(x)$ når $f''(x) = 12x - 6$, $f'(1) = 3$ og $f(1) = 5$.`,
      solution: `**Løsning:**

**Steg 1:** Integrer $f''(x)$ for å finne $f'(x)$:
$$f'(x) = \\int (12x - 6)\\,dx = 6x^2 - 6x + C_1$$

Bruk $f'(1) = 3$:
$$f'(1) = 6(1)^2 - 6(1) + C_1 = 6 - 6 + C_1 = C_1 = 3$$

Så $f'(x) = 6x^2 - 6x + 3$.

**Steg 2:** Integrer $f'(x)$ for å finne $f(x)$:
$$f(x) = \\int (6x^2 - 6x + 3)\\,dx = 2x^3 - 3x^2 + 3x + C_2$$

Bruk $f(1) = 5$:
$$f(1) = 2(1)^3 - 3(1)^2 + 3(1) + C_2 = 2 - 3 + 3 + C_2 = 2 + C_2 = 5$$
$$C_2 = 3$$

**Svar:** $f(x) = 2x^3 - 3x^2 + 3x + 3$

**Sjekk:**
- $f'(x) = 6x^2 - 6x + 3$, så $f'(1) = 6 - 6 + 3 = 3$ ✓
- $f''(x) = 12x - 6$ ✓
- $f(1) = 2 - 3 + 3 + 3 = 5$ ✓`,
    },

    {
      id: 'r2-3-7-exercise-2b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-2b',
        number: '3.7.2b',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bestem funksjonen $f(x)$ fra den gitte andrederiverte og betingelsene.',
        subTasks: [
          { label: 'a', task: '$f\'\'(x) = 6x$, $f\'(0) = 2$, $f(0) = 1$', solution: '$f\'(x) = 3x^2 + C_1$. Fra $f\'(0) = 2$: $C_1 = 2$. $f(x) = x^3 + 2x + C_2$. Fra $f(0) = 1$: $C_2 = 1$. Svar: $f(x) = x^3 + 2x + 1$' },
          { label: 'b', task: '$f\'\'(x) = 2$, $f\'(1) = 0$, $f(1) = 3$', solution: '$f\'(x) = 2x + C_1$. Fra $f\'(1) = 0$: $2 + C_1 = 0$, $C_1 = -2$. $f(x) = x^2 - 2x + C_2$. Fra $f(1) = 3$: $1 - 2 + C_2 = 3$, $C_2 = 4$. Svar: $f(x) = x^2 - 2x + 4$' },
          { label: 'c', task: '$f\'\'(x) = e^x$, $f\'(0) = 1$, $f(0) = 0$', solution: '$f\'(x) = e^x + C_1$. Fra $f\'(0) = 1$: $1 + C_1 = 1$, $C_1 = 0$. $f(x) = e^x + C_2$. Fra $f(0) = 0$: $1 + C_2 = 0$, $C_2 = -1$. Svar: $f(x) = e^x - 1$' },
        ],
        solution: 'a) $x^3 + 2x + 1$, b) $x^2 - 2x + 4$, c) $e^x - 1$',
        hints: [
          'Integrer to ganger og bruk én betingelse for hver konstant',
          'Hold styr på hvilken konstant som hører til hvilket steg',
        ],
      },
    },

    // ========== SEKSJON 3: AREALET UNDER GRAFEN SOM FUNKSJON ==========
    {
      id: 'r2-3-7-text-4',
      type: 'text',
      content: `## Arealet under grafen som funksjon av $x$

Vi har tidligere brukt det bestemte integralet til å beregne arealet under en graf mellom to faste grenser. Nå skal vi se på arealet som en **funksjon** der den øvre grensen varierer.

Hvis vi lar $x$ være den øvre grensen, får vi en arealfunksjon som forteller oss arealet fra et fast startpunkt $a$ til en variabel øvre grense $x$.`,
    },

    {
      id: 'r2-3-7-def-2',
      type: 'definition',
      title: 'Arealfunksjonen',
      content: `For en kontinuerlig funksjon $f(t) \\geq 0$ på intervallet $[a, b]$ definerer vi **arealfunksjonen**:

$$A(x) = \\int_a^x f(t)\\,dt$$

Denne funksjonen gir arealet under grafen til $f$ fra $t = a$ til $t = x$.

**Merk:** Vi bruker $t$ som integrasjonsvariabel for å unngå forvirring med grensen $x$.`,
    },

    {
      id: 'r2-3-7-thm-2',
      type: 'theorem',
      title: 'Analysens fundamentalteorem (del 1)',
      content: `Hvis $f$ er kontinuerlig på $[a, b]$ og $A(x) = \\int_a^x f(t)\\,dt$, så er:

$$A'(x) = f(x)$$

Med andre ord: **Den deriverte av arealfunksjonen er lik integranden.**

Dette betyr at vekstfarten til arealet i punktet $x$ er lik funksjonsverdien $f(x)$ i det punktet.`,
    },

    {
      id: 'r2-3-7-ex-3',
      type: 'example',
      title: 'Eksempel 3: Analysere en arealfunksjon',
      problem: `La $f(t) = t^2$ og definer arealfunksjonen $A(x) = \\int_0^x t^2\\,dt$.

a) Regn ut $A(x)$ eksplisitt.
b) Finn $A'(x)$ ved å derivere svaret fra a).
c) Verifiser at $A'(x) = f(x)$.
d) Beregn $A(1)$, $A(2)$ og $A(3)$, og forklar hva tallene betyr geometrisk.`,
      solution: `**Løsning:**

**a)** Vi regner ut det bestemte integralet:
$$A(x) = \\int_0^x t^2\\,dt = \\left[\\frac{t^3}{3}\\right]_0^x = \\frac{x^3}{3} - \\frac{0^3}{3} = \\frac{x^3}{3}$$

**b)** Vi deriverer:
$$A'(x) = \\left(\\frac{x^3}{3}\\right)' = \\frac{3x^2}{3} = x^2$$

**c)** Vi ser at $A'(x) = x^2 = f(x)$ ✓

Dette stemmer med analysens fundamentalteorem.

**d)** Vi beregner:
- $A(1) = \\frac{1^3}{3} = \\frac{1}{3}$: Arealet under $f(t) = t^2$ fra $t = 0$ til $t = 1$
- $A(2) = \\frac{2^3}{3} = \\frac{8}{3}$: Arealet fra $t = 0$ til $t = 2$
- $A(3) = \\frac{3^3}{3} = 9$: Arealet fra $t = 0$ til $t = 3$

Vi ser at arealet vokser raskt etter hvert som $x$ øker.`,
    },

    {
      id: 'r2-3-7-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-3',
        number: '3.7.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'La $A(x) = \\int_1^x (2t + 1)\\,dt$ for $x \\geq 1$.',
        subTasks: [
          { label: 'a', task: 'Regn ut $A(x)$ eksplisitt', solution: '$A(x) = \\int_1^x (2t+1)\\,dt = [t^2 + t]_1^x = (x^2 + x) - (1 + 1) = x^2 + x - 2$' },
          { label: 'b', task: 'Finn $A\'(x)$ og verifiser at $A\'(x) = 2x + 1$', solution: '$A\'(x) = (x^2 + x - 2)\' = 2x + 1$ ✓' },
          { label: 'c', task: 'For hvilken verdi av $x$ er $A(x) = 0$?', solution: '$x^2 + x - 2 = 0 \\Rightarrow (x+2)(x-1) = 0 \\Rightarrow x = 1$ (siden $x \\geq 1$)' },
          { label: 'd', task: 'Beregn $A(3)$ og forklar hva tallet betyr', solution: '$A(3) = 9 + 3 - 2 = 10$. Dette er arealet under $f(t) = 2t + 1$ fra $t = 1$ til $t = 3$.' },
        ],
        solution: 'a) $A(x) = x^2 + x - 2$, b) $A\'(x) = 2x + 1$, c) $x = 1$, d) $A(3) = 10$',
        hints: [
          'Husk å sette inn begge grensene ved bestemt integrasjon',
          'Den deriverte av arealfunksjonen skal være lik integranden',
        ],
      },
    },

    // ========== NYTT: Fundamentalteoremet med kjerneregel ==========
    {
      id: 'r2-3-7-text-4b',
      type: 'text',
      content: `### Fundamentalteoremet med kjerneregel

Hva om den øvre grensen ikke bare er $x$, men en funksjon $g(x)$?

For eksempel, hva er den deriverte av $A(x) = \\int_0^{x^2} f(t)\\,dt$?

Her må vi bruke kjerneregelen.`,
    },

    {
      id: 'r2-3-7-thm-2b',
      type: 'theorem',
      title: 'Fundamentalteoremet med kjerneregel',
      content: `Hvis $f$ er kontinuerlig og $g$ er deriverbar, så er:

$$\\frac{d}{dx}\\left[\\int_a^{g(x)} f(t)\\,dt\\right] = f(g(x)) \\cdot g'(x)$$

**Forklaring:** Vi deriverer først med hensyn på den øvre grensen (gir $f(g(x))$), og multipliserer med den deriverte av selve grensen (kjerneregelen).`,
    },

    {
      id: 'r2-3-7-ex-3b',
      type: 'example',
      title: 'Eksempel 3b: Derivere integral med variabel grense',
      problem: `Finn den deriverte av:

a) $A(x) = \\int_0^{x^2} t^3\\,dt$

b) $B(x) = \\int_1^{\\sin x} e^t\\,dt$

c) $C(x) = \\int_{x}^{x^2} t\\,dt$`,
      solution: `**Løsning:**

**a)** Her er $f(t) = t^3$ og $g(x) = x^2$, så $g'(x) = 2x$.

$$A'(x) = f(g(x)) \\cdot g'(x) = (x^2)^3 \\cdot 2x = x^6 \\cdot 2x = 2x^7$$

**b)** Her er $f(t) = e^t$ og $g(x) = \\sin x$, så $g'(x) = \\cos x$.

$$B'(x) = f(\\sin x) \\cdot \\cos x = e^{\\sin x} \\cdot \\cos x$$

**c)** Her må vi splitte integralet:
$$C(x) = \\int_{x}^{x^2} t\\,dt = \\int_0^{x^2} t\\,dt - \\int_0^{x} t\\,dt$$

$$C'(x) = x^2 \\cdot 2x - x \\cdot 1 = 2x^3 - x$$

**Sjekk c):** Vi kan også regne ut $C(x)$ eksplisitt:
$$C(x) = \\left[\\frac{t^2}{2}\\right]_x^{x^2} = \\frac{x^4}{2} - \\frac{x^2}{2}$$
$$C'(x) = 2x^3 - x \\; \\checkmark$$`,
    },

    {
      id: 'r2-3-7-exercise-3b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-3b',
        number: '3.7.3b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn den deriverte av følgende integralfunksjoner.',
        subTasks: [
          { label: 'a', task: '$F(x) = \\int_0^{x^3} \\sqrt{t}\\,dt$', solution: '$F\'(x) = \\sqrt{x^3} \\cdot 3x^2 = x^{3/2} \\cdot 3x^2 = 3x^{7/2}$' },
          { label: 'b', task: '$G(x) = \\int_1^{e^x} \\frac{1}{t}\\,dt$', solution: '$G\'(x) = \\frac{1}{e^x} \\cdot e^x = 1$' },
          { label: 'c', task: '$H(x) = \\int_{x}^{2x} t^2\\,dt$', solution: '$H\'(x) = (2x)^2 \\cdot 2 - x^2 \\cdot 1 = 8x^2 - x^2 = 7x^2$' },
          { label: 'd', task: '$K(x) = \\int_0^{\\cos x} e^{t^2}\\,dt$', solution: '$K\'(x) = e^{\\cos^2 x} \\cdot (-\\sin x) = -\\sin x \\cdot e^{\\cos^2 x}$' },
        ],
        solution: 'a) $3x^{7/2}$, b) $1$, c) $7x^2$, d) $-\\sin x \\cdot e^{\\cos^2 x}$',
        hints: [
          'Bruk formelen $\\frac{d}{dx}\\int_a^{g(x)} f(t)\\,dt = f(g(x)) \\cdot g\'(x)$',
          'For variabel nedre grense, husk at integralet skifter fortegn',
          'For oppgave c), splitt integralet via et fast punkt',
        ],
      },
    },

    // ========== SEKSJON 4: ANALYSERE HVORDAN AREALET VOKSER ==========
    {
      id: 'r2-3-7-text-5',
      type: 'text',
      content: `## Analysere hvordan arealet vokser

Arealfunksjonen $A(x) = \\int_a^x f(t)\\,dt$ forteller oss hvor raskt arealet akkumuleres. Siden $A'(x) = f(x)$, kan vi bruke egenskapene til $f$ til å forstå veksten av $A$:

- Når $f(x) > 0$: Arealet $A$ vokser (fordi $A'(x) > 0$)
- Når $f(x) < 0$: Arealet $A$ synker (fordi $A'(x) < 0$)
- Når $f(x) = 0$: Arealet $A$ har et mulig ekstremalpunkt

Dette gir en dypere forståelse av sammenhengen mellom en funksjon og dens integral.`,
    },

    {
      id: 'r2-3-7-ex-4',
      type: 'example',
      title: 'Eksempel 4: Vekst av arealfunksjonen',
      problem: `La $f(t) = 4 - t$ og $A(x) = \\int_0^x (4-t)\\,dt$ for $0 \\leq x \\leq 6$.

a) Regn ut $A(x)$ eksplisitt.
b) Når vokser $A(x)$? Når synker $A(x)$?
c) Finn maksimumspunktet til $A(x)$ og forklar hvorfor dette skjer.
d) Skisser grafene til $f$ og $A$ i samme koordinatsystem.`,
      solution: `**Løsning:**

**a)** Vi integrerer:
$$A(x) = \\int_0^x (4-t)\\,dt = \\left[4t - \\frac{t^2}{2}\\right]_0^x = 4x - \\frac{x^2}{2}$$

**b)** Vi vet at $A'(x) = f(x) = 4 - x$.

- $A'(x) > 0$ når $4 - x > 0$, dvs. når $x < 4$: **$A$ vokser**
- $A'(x) < 0$ når $4 - x < 0$, dvs. når $x > 4$: **$A$ synker**

**c)** Maksimum skjer når $A'(x) = 0$, dvs. når $x = 4$.

$$A(4) = 4 \\cdot 4 - \\frac{16}{2} = 16 - 8 = 8$$

Maksimumspunktet er $(4, 8)$.

**Forklaring:** Når $x = 4$ krysser $f(t) = 4 - t$ $t$-aksen. For $t > 4$ er $f(t) < 0$, og areal under $x$-aksen trekkes fra. Derfor begynner totalarealet å synke etter $x = 4$.

**d)** Grafen til $f(t) = 4 - t$ er en rett linje som synker fra $(0, 4)$ og krysser $t$-aksen i $(4, 0)$.
Grafen til $A(x) = 4x - \\frac{x^2}{2}$ er en parabel med topp i $(4, 8)$.`,
    },

    {
      id: 'r2-3-7-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-4',
        number: '3.7.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'La $f(t) = t^2 - 4$ og $A(x) = \\int_0^x (t^2 - 4)\\,dt$ for $x \\geq 0$.',
        subTasks: [
          { label: 'a', task: 'Regn ut $A(x)$ eksplisitt', solution: '$A(x) = \\int_0^x (t^2 - 4)\\,dt = [\\frac{t^3}{3} - 4t]_0^x = \\frac{x^3}{3} - 4x$' },
          { label: 'b', task: 'For hvilke verdier av $x$ vokser $A(x)$?', solution: '$A\'(x) = x^2 - 4 > 0$ når $x^2 > 4$, dvs. $x > 2$ (siden $x \\geq 0$)' },
          { label: 'c', task: 'Finn eventuelle ekstremalpunkter til $A(x)$ for $x \\geq 0$', solution: '$A\'(x) = 0$ når $x = 2$. $A\'\'(x) = 2x$, så $A\'\'(2) = 4 > 0$. Minimum i $x = 2$: $A(2) = \\frac{8}{3} - 8 = -\\frac{16}{3}$' },
          { label: 'd', task: 'Hva forteller det negative arealet $A(2)$ oss?', solution: 'Negativt areal betyr at grafen til $f(t) = t^2 - 4$ ligger under $t$-aksen for $0 < t < 2$. Integralet måler netto areal, med negativt bidrag under aksen.' },
        ],
        solution: 'a) $A(x) = \\frac{x^3}{3} - 4x$, b) $x > 2$, c) Minimum $(2, -\\frac{16}{3})$, d) Se løsning',
        hints: [
          'Husk at arealet er negativt når $f(t) < 0$',
          'Ekstremalpunkter til $A$ skjer der $f$ har nullpunkt',
        ],
      },
    },

    // ========== NYTT: Gjennomsnittsverditeoremet ==========
    {
      id: 'r2-3-7-text-5b',
      type: 'text',
      content: `### Gjennomsnittsverdien til en funksjon

Integralet kan brukes til å finne gjennomsnittsverdien til en funksjon over et intervall. Dette er viktig i mange praktiske sammenhenger.`,
    },

    {
      id: 'r2-3-7-def-2b',
      type: 'definition',
      title: 'Gjennomsnittsverdi av en funksjon',
      content: `**Gjennomsnittsverdien** til en kontinuerlig funksjon $f$ på intervallet $[a, b]$ er:

$$\\bar{f} = \\frac{1}{b-a} \\int_a^b f(x)\\,dx$$

**Tolkning:** Hvis $f$ representerer en hastighet, temperatur eller lignende over tid, gir $\\bar{f}$ gjennomsnittsverdien over tidsperioden $[a, b]$.`,
    },

    {
      id: 'r2-3-7-ex-4b',
      type: 'example',
      title: 'Eksempel 4b: Gjennomsnittsverdi',
      problem: `Temperaturen i et rom over en 6-timersperiode er gitt ved $T(t) = 20 + 4\\sin\\left(\\frac{\\pi t}{6}\\right)$ grader Celsius, der $t$ er tiden i timer fra $t = 0$ til $t = 6$.

a) Finn gjennomsnittstemperaturen over de 6 timene.
b) Når er temperaturen lik gjennomsnittet?`,
      solution: `**Løsning:**

**a)** Gjennomsnittstemperaturen er:
$$\\bar{T} = \\frac{1}{6-0} \\int_0^6 \\left(20 + 4\\sin\\left(\\frac{\\pi t}{6}\\right)\\right)\\,dt$$

Vi regner ut integralet:
$$\\int_0^6 \\left(20 + 4\\sin\\left(\\frac{\\pi t}{6}\\right)\\right)\\,dt = \\left[20t - \\frac{24}{\\pi}\\cos\\left(\\frac{\\pi t}{6}\\right)\\right]_0^6$$

$$= \\left(120 - \\frac{24}{\\pi}\\cos(\\pi)\\right) - \\left(0 - \\frac{24}{\\pi}\\cos(0)\\right)$$

$$= 120 - \\frac{24}{\\pi}(-1) + \\frac{24}{\\pi}(1) = 120 + \\frac{48}{\\pi}$$

Gjennomsnittet:
$$\\bar{T} = \\frac{1}{6}\\left(120 + \\frac{48}{\\pi}\\right) = 20 + \\frac{8}{\\pi} \\approx 22{,}55°C$$

**b)** Vi løser $T(t) = \\bar{T}$:
$$20 + 4\\sin\\left(\\frac{\\pi t}{6}\\right) = 20 + \\frac{8}{\\pi}$$
$$\\sin\\left(\\frac{\\pi t}{6}\\right) = \\frac{2}{\\pi}$$
$$\\frac{\\pi t}{6} = \\arcsin\\left(\\frac{2}{\\pi}\\right) \\approx 0{,}69$$
$$t \\approx 1{,}32 \\text{ timer}$$

Temperaturen er også lik gjennomsnittet ved $t = 6 - 1{,}32 = 4{,}68$ timer (symmetri).`,
    },

    {
      id: 'r2-3-7-exercise-4b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-4b',
        number: '3.7.4b',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn gjennomsnittsverdien til følgende funksjoner på de gitte intervallene.',
        subTasks: [
          { label: 'a', task: '$f(x) = x^2$ på $[0, 3]$', solution: '$\\bar{f} = \\frac{1}{3}\\int_0^3 x^2\\,dx = \\frac{1}{3}[\\frac{x^3}{3}]_0^3 = \\frac{1}{3} \\cdot 9 = 3$' },
          { label: 'b', task: '$g(x) = e^x$ på $[0, 1]$', solution: '$\\bar{g} = \\frac{1}{1}\\int_0^1 e^x\\,dx = [e^x]_0^1 = e - 1 \\approx 1{,}72$' },
          { label: 'c', task: '$h(x) = \\cos x$ på $[0, \\pi]$', solution: '$\\bar{h} = \\frac{1}{\\pi}\\int_0^\\pi \\cos x\\,dx = \\frac{1}{\\pi}[\\sin x]_0^\\pi = \\frac{1}{\\pi}(0 - 0) = 0$' },
          { label: 'd', task: 'Forklar geometrisk hvorfor svaret i c) er null', solution: 'På $[0, \\pi/2]$ er $\\cos x \\geq 0$, mens på $[\\pi/2, \\pi]$ er $\\cos x \\leq 0$. De to områdene har like stort areal med motsatt fortegn, så gjennomsnittet blir null.' },
        ],
        solution: 'a) 3, b) $e-1$, c) 0, d) Se løsning',
        hints: [
          'Bruk formelen $\\bar{f} = \\frac{1}{b-a}\\int_a^b f(x)\\,dx$',
          'Gjennomsnitt av positiv og negativ del kan gi null',
        ],
      },
    },

    // ========== SEKSJON 5: KOMBINERE DERIVASJON OG INTEGRASJON ==========
    {
      id: 'r2-3-7-text-6',
      type: 'text',
      content: `## Kombinere derivasjon og integrasjon i drøfting

En fullstendig funksjonsdrøfting kan involvere både derivasjon og integrasjon. Vi kan:

1. **Gå fra $f$ til $f'$** (derivasjon): Finne stigningsforhold, ekstremalpunkter, vendepunkter
2. **Gå fra $f'$ til $f$** (integrasjon): Rekonstruere $f$ fra vekstfarten
3. **Gå fra $f$ til arealfunksjonen**: Analysere akkumulerte verdier

Denne fleksibiliteten er særlig nyttig når vi arbeider med praktiske problemer der vi får oppgitt ulike typer informasjon.`,
    },

    {
      id: 'r2-3-7-thm-3',
      type: 'theorem',
      title: 'Kjedegang gjennom funksjonshierarkiet',
      content: `For en tre ganger deriverbar funksjon $f$ har vi følgende sammenheng:

$$\\cdots \\xleftarrow{\\int} f''(x) \\xleftarrow{\\int} f'(x) \\xleftarrow{\\int} f(x) \\xleftarrow{\\int} F(x) \\xleftarrow{\\int} \\cdots$$

$$\\cdots \\xrightarrow{\\frac{d}{dx}} f''(x) \\xrightarrow{\\frac{d}{dx}} f'(x) \\xrightarrow{\\frac{d}{dx}} f(x) \\xrightarrow{\\frac{d}{dx}} F(x) \\xrightarrow{\\frac{d}{dx}} \\cdots$$

Hver pil representerer enten derivasjon (høyre) eller integrasjon (venstre).`,
    },

    {
      id: 'r2-3-7-ex-5',
      type: 'example',
      title: 'Eksempel 5: Fullstendig drøfting',
      problem: `En funksjon $f$ oppfyller $f''(x) = 6x$, $f'(0) = 2$ og $f(0) = 1$.

a) Finn $f'(x)$.
b) Finn $f(x)$.
c) Finn nullpunktene til $f$.
d) Finn ekstremalpunktene til $f$ og avgjør om de er maksimum eller minimum.
e) Finn arealfunksjonen $A(x) = \\int_0^x f(t)\\,dt$.`,
      solution: `**Løsning:**

**a)** Vi integrerer $f''(x)$:
$$f'(x) = \\int 6x\\,dx = 3x^2 + C_1$$
Fra $f'(0) = 2$: $3 \\cdot 0^2 + C_1 = 2 \\Rightarrow C_1 = 2$
$$f'(x) = 3x^2 + 2$$

**b)** Vi integrerer $f'(x)$:
$$f(x) = \\int (3x^2 + 2)\\,dx = x^3 + 2x + C_2$$
Fra $f(0) = 1$: $0 + 0 + C_2 = 1 \\Rightarrow C_2 = 1$
$$f(x) = x^3 + 2x + 1$$

**c)** Nullpunkter: $x^3 + 2x + 1 = 0$

Ved numerisk metode eller CAS finner vi ett reelt nullpunkt ca. $x \\approx -0{,}453$.

**d)** Ekstremalpunkter: $f'(x) = 3x^2 + 2 = 0$ gir $x^2 = -\\frac{2}{3}$, som ikke har reelle løsninger.

Siden $f'(x) = 3x^2 + 2 > 0$ for alle $x$, har $f$ **ingen ekstremalpunkter**.

**e)** Arealfunksjonen:
$$A(x) = \\int_0^x (t^3 + 2t + 1)\\,dt = \\left[\\frac{t^4}{4} + t^2 + t\\right]_0^x = \\frac{x^4}{4} + x^2 + x$$`,
    },

    {
      id: 'r2-3-7-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-5',
        number: '3.7.5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En funksjon $g$ oppfyller $g\'\'(x) = 12x - 6$, $g\'(1) = 0$ og $g(1) = 2$.',
        subTasks: [
          { label: 'a', task: 'Finn $g\'(x)$', solution: '$g\'(x) = \\int(12x-6)\\,dx = 6x^2 - 6x + C_1$. Fra $g\'(1) = 6 - 6 + C_1 = 0$ får vi $C_1 = 0$. Svar: $g\'(x) = 6x^2 - 6x = 6x(x-1)$' },
          { label: 'b', task: 'Finn $g(x)$', solution: '$g(x) = \\int(6x^2 - 6x)\\,dx = 2x^3 - 3x^2 + C_2$. Fra $g(1) = 2 - 3 + C_2 = 2$ får vi $C_2 = 3$. Svar: $g(x) = 2x^3 - 3x^2 + 3$' },
          { label: 'c', task: 'Finn og klassifiser alle ekstremalpunktene til $g$', solution: '$g\'(x) = 6x(x-1) = 0$ gir $x = 0$ eller $x = 1$. $g\'\'(0) = -6 < 0$: maksimum. $g\'\'(1) = 6 > 0$: minimum. Maks: $(0, 3)$, min: $(1, 2)$.' },
          { label: 'd', task: 'Finn $\\int_0^1 g(x)\\,dx$ og tolk svaret geometrisk', solution: '$\\int_0^1 (2x^3 - 3x^2 + 3)\\,dx = [\\frac{x^4}{2} - x^3 + 3x]_0^1 = \\frac{1}{2} - 1 + 3 = \\frac{5}{2}$. Dette er arealet under grafen til $g$ fra $x = 0$ til $x = 1$.' },
        ],
        solution: 'a) $6x^2 - 6x$, b) $2x^3 - 3x^2 + 3$, c) Maks $(0, 3)$, min $(1, 2)$, d) $\\frac{5}{2}$',
        hints: [
          'Integrer to ganger for å gå fra $g\'\'$ til $g$',
          'Bruk initialbetingelsene til å finne konstantene',
          'Klassifiser ekstremalpunkter med $g\'\'$',
        ],
      },
    },

    // ========== NYTT: Tegne graf fra f' ==========
    {
      id: 'r2-3-7-text-6b',
      type: 'text',
      content: `### Skissere graf fra informasjon om den deriverte

Ofte får vi informasjon om $f'(x)$ (enten som formel, graf eller tabell) og skal bruke dette til å tegne grafen til $f(x)$. Her bruker vi integrasjon implisitt.

**Nøkkelprinsipper:**
- $f'(x) > 0$ betyr at $f$ stiger
- $f'(x) < 0$ betyr at $f$ synker
- $f'(x) = 0$ kan være et ekstremalpunkt for $f$
- $f'$ skifter fortegn i et ekstremalpunkt for $f$
- Stor $|f'(x)|$ betyr bratt graf, liten $|f'(x)|$ betyr slak graf`,
    },

    {
      id: 'r2-3-7-ex-5b',
      type: 'example',
      title: 'Eksempel 5b: Skissere f fra grafen til f\'',
      problem: `Grafen til $f'(x)$ er en parabel med toppunkt i $(1, 4)$ som krysser $x$-aksen i $x = -1$ og $x = 3$. Vi vet at $f(0) = 2$.

a) Finn et uttrykk for $f'(x)$.
b) Finn $f(x)$.
c) Finn ekstremalpunktene til $f$.
d) Skisser grafen til $f$.`,
      solution: `**Løsning:**

**a)** En parabel med nullpunkter i $x = -1$ og $x = 3$ kan skrives:
$$f'(x) = a(x+1)(x-3)$$

Toppunktet er i $x = 1$ (midt mellom nullpunktene). Der er $f'(1) = 4$:
$$f'(1) = a(1+1)(1-3) = a \\cdot 2 \\cdot (-2) = -4a = 4$$
$$a = -1$$

Så $f'(x) = -(x+1)(x-3) = -(x^2 - 2x - 3) = -x^2 + 2x + 3$

**b)** Vi integrerer:
$$f(x) = \\int(-x^2 + 2x + 3)\\,dx = -\\frac{x^3}{3} + x^2 + 3x + C$$

Fra $f(0) = 2$: $0 + 0 + 0 + C = 2$, så $C = 2$.

$$f(x) = -\\frac{x^3}{3} + x^2 + 3x + 2$$

**c)** Ekstremalpunkter der $f'(x) = 0$: $x = -1$ og $x = 3$

- For $x < -1$: $f'(x) < 0$ (synker)
- For $-1 < x < 3$: $f'(x) > 0$ (stiger)
- For $x > 3$: $f'(x) < 0$ (synker)

Så: **Minimum i $x = -1$** og **maksimum i $x = 3$**.

$f(-1) = \\frac{1}{3} + 1 - 3 + 2 = \\frac{1}{3}$

$f(3) = -9 + 9 + 9 + 2 = 11$

**d)** Grafen til $f$ har minimum $(−1, \\frac{1}{3})$, maksimum $(3, 11)$, og går gjennom $(0, 2)$.`,
    },

    {
      id: 'r2-3-7-exercise-5b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-5b',
        number: '3.7.5b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Grafen til $f\'(x)$ går gjennom punktene $(-2, 0)$, $(0, -4)$ og $(2, 0)$, og er en parabel. Vi vet at $f(0) = 0$.',
        subTasks: [
          { label: 'a', task: 'Finn $f\'(x)$', solution: 'Parabel med nullpunkter $x = -2$ og $x = 2$: $f\'(x) = a(x+2)(x-2) = a(x^2-4)$. Fra $f\'(0) = -4$: $a(-4) = -4$, så $a = 1$. Svar: $f\'(x) = x^2 - 4$' },
          { label: 'b', task: 'Finn $f(x)$', solution: '$f(x) = \\int(x^2-4)\\,dx = \\frac{x^3}{3} - 4x + C$. Fra $f(0) = 0$: $C = 0$. Svar: $f(x) = \\frac{x^3}{3} - 4x$' },
          { label: 'c', task: 'Finn og klassifiser ekstremalpunktene til $f$', solution: '$f\'(x) = 0$ for $x = \\pm 2$. $f\'\'(x) = 2x$. $f\'\'(-2) = -4 < 0$: maks. $f\'\'(2) = 4 > 0$: min. Maks $(-2, \\frac{16}{3})$, min $(2, -\\frac{16}{3})$.' },
          { label: 'd', task: 'Finn vendepunktet til $f$', solution: '$f\'\'(x) = 2x = 0$ gir $x = 0$. Vendepunkt $(0, 0)$.' },
        ],
        solution: 'a) $x^2 - 4$, b) $\\frac{x^3}{3} - 4x$, c) Maks $(-2, \\frac{16}{3})$, min $(2, -\\frac{16}{3})$, d) $(0, 0)$',
        hints: [
          'En parabel med nullpunkter $r$ og $s$ kan skrives $a(x-r)(x-s)$',
          'Bruk et kjent punkt til å finne $a$',
          'Vendepunkter til $f$ er der $f\'\' = 0$',
        ],
      },
    },

    // ========== SEKSJON 6: TOLKNING AV INTEGRAL I KONTEKST ==========
    {
      id: 'r2-3-7-text-7',
      type: 'text',
      content: `## Tolkning av integral i kontekst

Integraler har viktige tolkninger i mange fagfelt:

**Fysikk:**
- Hvis $v(t)$ er hastighet, er $\\int_a^b v(t)\\,dt$ tilbakelagt strekning (med fortegn)
- Hvis $a(t)$ er akselerasjon, er $\\int_a^b a(t)\\,dt$ endring i hastighet
- Hvis $P(t)$ er effekt, er $\\int_a^b P(t)\\,dt$ arbeid/energi

**Økonomi:**
- Hvis $r(t)$ er en rente (momentan vekstrate), er $\\int_a^b r(t)\\,dt$ total akkumulert vekst
- Hvis $MC(x)$ er marginalkostnad, er $\\int_a^b MC(x)\\,dx$ endring i totalkostnad

**Generelt:** Integralet av en rate gir den totale mengden.`,
    },

    {
      id: 'r2-3-7-def-3',
      type: 'definition',
      title: 'Integral som akkumulert mengde',
      content: `Hvis $r(t)$ er en **rate** (mengde per tidsenhet), så er:

$$\\int_a^b r(t)\\,dt = \\text{total akkumulert mengde fra } t = a \\text{ til } t = b$$

**Eksempler på rater:**
- Hastighet (meter per sekund)
- Effekt (joule per sekund = watt)
- Inntektsrate (kroner per måned)
- Befolkningsvekst (personer per år)
- Vannstrøm (liter per minutt)`,
    },

    {
      id: 'r2-3-7-ex-6',
      type: 'example',
      title: 'Eksempel 6: Fysikk - bevegelse',
      problem: `En partikkel beveger seg langs en rett linje med hastighet $v(t) = 3t^2 - 6t$ m/s for $t \\geq 0$.

a) Finn posisjonen $s(t)$ gitt at $s(0) = 2$ m.
b) Finn den totale tilbakelagte strekningen i løpet av de første 4 sekundene.
c) Finn netto forflytning (endring i posisjon) fra $t = 0$ til $t = 4$.`,
      solution: `**Løsning:**

**a)** Posisjonen er integralet av hastigheten:
$$s(t) = \\int v(t)\\,dt = \\int (3t^2 - 6t)\\,dt = t^3 - 3t^2 + C$$
Fra $s(0) = 2$: $0 - 0 + C = 2 \\Rightarrow C = 2$
$$s(t) = t^3 - 3t^2 + 2$$

**b)** Total tilbakelagt strekning tar hensyn til retningsskifter.

$v(t) = 3t^2 - 6t = 3t(t - 2) = 0$ når $t = 0$ eller $t = 2$.

- For $0 < t < 2$: $v(t) < 0$ (partikkelen beveger seg bakover)
- For $t > 2$: $v(t) > 0$ (partikkelen beveger seg fremover)

Total strekning:
$$\\int_0^4 |v(t)|\\,dt = \\int_0^2 |3t^2 - 6t|\\,dt + \\int_2^4 |3t^2 - 6t|\\,dt$$
$$= -\\int_0^2 (3t^2 - 6t)\\,dt + \\int_2^4 (3t^2 - 6t)\\,dt$$
$$= -[t^3 - 3t^2]_0^2 + [t^3 - 3t^2]_2^4$$
$$= -(8 - 12 - 0) + (64 - 48 - 8 + 12)$$
$$= -(-4) + 20 = 4 + 20 = 24 \\text{ m}$$

**c)** Netto forflytning:
$$\\int_0^4 v(t)\\,dt = [t^3 - 3t^2]_0^4 = 64 - 48 = 16 \\text{ m}$$

Eller: $s(4) - s(0) = (64 - 48 + 2) - 2 = 16$ m`,
    },

    {
      id: 'r2-3-7-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-6',
        number: '3.7.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'En bil har akselerasjon $a(t) = 6 - 2t$ m/s$^2$ for $t \\geq 0$. Ved $t = 0$ har bilen hastighet $v(0) = 10$ m/s og posisjon $s(0) = 0$ m.',
        subTasks: [
          { label: 'a', task: 'Finn hastighetsfunksjonen $v(t)$', solution: '$v(t) = \\int(6-2t)\\,dt = 6t - t^2 + C$. Fra $v(0) = 10$: $C = 10$. Svar: $v(t) = 6t - t^2 + 10$' },
          { label: 'b', task: 'Finn posisjonsfunksjonen $s(t)$', solution: '$s(t) = \\int(6t - t^2 + 10)\\,dt = 3t^2 - \\frac{t^3}{3} + 10t + C$. Fra $s(0) = 0$: $C = 0$. Svar: $s(t) = 3t^2 - \\frac{t^3}{3} + 10t$' },
          { label: 'c', task: 'Når stopper bilen?', solution: '$v(t) = 6t - t^2 + 10 = -(t^2 - 6t - 10) = 0$. $t = \\frac{6 \\pm \\sqrt{36+40}}{2} = \\frac{6 \\pm \\sqrt{76}}{2} \\approx 7{,}36$ s (vi tar positiv løsning)' },
          { label: 'd', task: 'Hvor langt har bilen kjørt når den stopper?', solution: 'Sett inn $t \\approx 7{,}36$ i $s(t)$: $s(7{,}36) = 3(7{,}36)^2 - \\frac{(7{,}36)^3}{3} + 10(7{,}36) \\approx 98{,}5$ m' },
        ],
        solution: 'a) $6t - t^2 + 10$, b) $3t^2 - \\frac{t^3}{3} + 10t$, c) $t \\approx 7{,}36$ s, d) $s \\approx 98{,}5$ m',
        hints: [
          'Integrer akselerasjon for å finne hastighet',
          'Integrer hastighet for å finne posisjon',
          'Bilen stopper når $v(t) = 0$',
        ],
      },
    },

    {
      id: 'r2-3-7-ex-7',
      type: 'example',
      title: 'Eksempel 7: Okonomi - marginalanalyse',
      problem: `En bedrift har marginalkostnad gitt ved $MC(x) = 3x^2 - 12x + 15$ kroner per enhet, der $x$ er antall enheter produsert. De faste kostnadene (kostnaden ved $x = 0$) er 1000 kr.

a) Finn totalkostnadsfunksjonen $K(x)$.
b) Hvor mye koster det å produsere de første 10 enhetene?
c) Hvor mye koster det å øke produksjonen fra 10 til 20 enheter?`,
      solution: `**Løsning:**

**a)** Totalkostnaden er integralet av marginalkostnaden:
$$K(x) = \\int MC(x)\\,dx = \\int (3x^2 - 12x + 15)\\,dx = x^3 - 6x^2 + 15x + C$$

Faste kostnader: $K(0) = 1000$, så $C = 1000$.
$$K(x) = x^3 - 6x^2 + 15x + 1000$$

**b)** Kostnad for de første 10 enhetene:
$$K(10) = 1000 - 600 + 150 + 1000 = 1550 \\text{ kr}$$

(Merk: Vi regner $K(10) = 10^3 - 6 \\cdot 10^2 + 15 \\cdot 10 + 1000 = 1000 - 600 + 150 + 1000 = 1550$)

**c)** Kostnadsøkning fra 10 til 20 enheter:
$$K(20) - K(10) = \\int_{10}^{20} MC(x)\\,dx = \\int_{10}^{20} (3x^2 - 12x + 15)\\,dx$$
$$= [x^3 - 6x^2 + 15x]_{10}^{20}$$
$$= (8000 - 2400 + 300) - (1000 - 600 + 150)$$
$$= 5900 - 550 = 5350 \\text{ kr}$$

Alternativt: $K(20) = 20^3 - 6 \\cdot 20^2 + 15 \\cdot 20 + 1000 = 8000 - 2400 + 300 + 1000 = 6900$ kr
$K(20) - K(10) = 6900 - 1550 = 5350$ kr ✓`,
    },

    {
      id: 'r2-3-7-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-7',
        number: '3.7.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'En bedrift har marginalinntekt $MR(x) = 100 - 2x$ kroner per enhet, der $x$ er antall enheter solgt.',
        subTasks: [
          { label: 'a', task: 'Finn totalinntektsfunksjonen $R(x)$ gitt at $R(0) = 0$', solution: '$R(x) = \\int(100 - 2x)\\,dx = 100x - x^2 + C$. Fra $R(0) = 0$: $C = 0$. Svar: $R(x) = 100x - x^2$' },
          { label: 'b', task: 'Finn gjennomsnittsinntekten per enhet, $\\overline{R}(x) = \\frac{R(x)}{x}$', solution: '$\\overline{R}(x) = \\frac{100x - x^2}{x} = 100 - x$' },
          { label: 'c', task: 'For hvilken verdi av $x$ er totalinntekten størst?', solution: '$R\'(x) = 100 - 2x = 0 \\Rightarrow x = 50$. $R\'\'(x) = -2 < 0$, så dette er maksimum.' },
          { label: 'd', task: 'Beregn den maksimale totalinntekten', solution: '$R(50) = 100 \\cdot 50 - 50^2 = 5000 - 2500 = 2500$ kr' },
        ],
        solution: 'a) $100x - x^2$, b) $100 - x$, c) $x = 50$, d) $R_{maks} = 2500$ kr',
        hints: [
          'Totalinntekt er integralet av marginalinntekt',
          'Maksimal inntekt finnes der $R\'(x) = MR(x) = 0$',
        ],
      },
    },

    // ========== NYTT: Mer fysikk - fritt fall ==========
    {
      id: 'r2-3-7-ex-7b',
      type: 'example',
      title: 'Eksempel 7b: Fritt fall med luftmotstand',
      problem: `En gjenstand slippes fra ro og faller med akselerasjon $a(t) = g - kv(t)$, der $g = 10$ m/s$^2$ er tyngdeakselerasjonen og $k = 0{,}5$ s$^{-1}$ er en luftmotstandskonstant.

For små hastigheter kan vi tilnærme $a(t) \\approx 10 - 0{,}5 \\cdot 10t = 10 - 5t$ m/s$^2$ for $0 \\leq t \\leq 2$ s.

a) Finn $v(t)$ for $0 \\leq t \\leq 2$.
b) Finn $s(t)$ (fallhøyde) for $0 \\leq t \\leq 2$.
c) Hvor langt har gjenstanden falt etter 2 sekunder?`,
      solution: `**Løsning:**

**a)** Hastigheten er integralet av akselerasjonen:
$$v(t) = \\int (10 - 5t)\\,dt = 10t - \\frac{5t^2}{2} + C$$

Fra $v(0) = 0$ (slippes fra ro): $C = 0$

$$v(t) = 10t - 2{,}5t^2$$

**b)** Fallhøyden er integralet av hastigheten:
$$s(t) = \\int (10t - 2{,}5t^2)\\,dt = 5t^2 - \\frac{2{,}5t^3}{3} + C$$

Fra $s(0) = 0$: $C = 0$

$$s(t) = 5t^2 - \\frac{5t^3}{6}$$

**c)** Etter 2 sekunder:
$$s(2) = 5 \\cdot 4 - \\frac{5 \\cdot 8}{6} = 20 - \\frac{40}{6} = 20 - 6{,}67 \\approx 13{,}3 \\text{ m}$$

**Sammenligning:** Uten luftmotstand ville $s(2) = \\frac{1}{2}gt^2 = 5 \\cdot 4 = 20$ m.
Luftmotstanden har redusert fallet med ca. 6,7 m.`,
    },

    {
      id: 'r2-3-7-exercise-7b',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-7b',
        number: '3.7.7b',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En rakett skytes rett opp med startfart $v_0 = 50$ m/s. Akselerasjonen er $a(t) = -10$ m/s$^2$ (tyngdekraften).',
        subTasks: [
          { label: 'a', task: 'Finn $v(t)$', solution: '$v(t) = \\int(-10)\\,dt = -10t + C$. Fra $v(0) = 50$: $C = 50$. Svar: $v(t) = 50 - 10t$' },
          { label: 'b', task: 'Finn høyden $h(t)$ når $h(0) = 0$', solution: '$h(t) = \\int(50 - 10t)\\,dt = 50t - 5t^2 + C$. Fra $h(0) = 0$: $C = 0$. Svar: $h(t) = 50t - 5t^2$' },
          { label: 'c', task: 'Når er raketten på sitt høyeste?', solution: '$v(t) = 0$ når $50 - 10t = 0$, dvs. $t = 5$ s.' },
          { label: 'd', task: 'Hva er maksimal høyde?', solution: '$h(5) = 50 \\cdot 5 - 5 \\cdot 25 = 250 - 125 = 125$ m' },
          { label: 'e', task: 'Når treffer raketten bakken?', solution: '$h(t) = 50t - 5t^2 = 5t(10 - t) = 0$ gir $t = 0$ eller $t = 10$ s. Raketten treffer bakken etter 10 s.' },
        ],
        solution: 'a) $50 - 10t$, b) $50t - 5t^2$, c) $t = 5$ s, d) $h_{maks} = 125$ m, e) $t = 10$ s',
        hints: [
          'Konstant akselerasjon gir lineær hastighet',
          'Høyeste punkt når $v = 0$',
          'Symmetri: oppover tar like lang tid som nedover',
        ],
      },
    },

    // ========== SEKSJON 7: EKSAMENSRELEVANTE OPPGAVER ==========
    {
      id: 'r2-3-7-text-8',
      type: 'text',
      content: `## Eksamensrelevante oppgaver

Funksjonsdrøfting med integrasjon er et viktig tema på eksamen i R2. Typiske oppgavetyper inkluderer:

1. Finne $f(x)$ når $f'(x)$ og et punkt er gitt
2. Drøfte arealfunksjoner og tolke resultater
3. Kombinere derivasjon og integrasjon i samme oppgave
4. Anvende integraler i praktiske kontekster
5. Vise sammenhenger mellom $f$, $f'$, $f''$ og integraler
6. Tolke grafer av $f'$ for å forstå $f$

De følgende oppgavene er typiske eksamensoppgaver som tester flere aspekter av dette temaet.`,
    },

    {
      id: 'r2-3-7-ex-8',
      type: 'example',
      title: 'Eksempel 8: Eksamensoppgave',
      problem: `Grafen til $f'(x)$ er vist. Funksjonen $f'$ er gitt ved $f'(x) = -x^2 + 4$.

a) Bestem $f(x)$ når $f(0) = 3$.
b) Finn nullpunktene til $f$.
c) Finn og klassifiser ekstremalpunktene til $f$.
d) Beregn arealet av området mellom grafen til $f$ og $x$-aksen for $-2 \\leq x \\leq 2$.`,
      solution: `**Løsning:**

**a)** Vi integrerer:
$$f(x) = \\int (-x^2 + 4)\\,dx = -\\frac{x^3}{3} + 4x + C$$
Fra $f(0) = 3$: $0 + 0 + C = 3 \\Rightarrow C = 3$
$$f(x) = -\\frac{x^3}{3} + 4x + 3$$

**b)** Nullpunkter: $-\\frac{x^3}{3} + 4x + 3 = 0$

Multipliser med $-3$: $x^3 - 12x - 9 = 0$

Ved CAS eller numerisk metode finner vi $x \\approx -2{,}81$, $x \\approx -0{,}73$ og $x \\approx 3{,}54$.

**c)** Ekstremalpunkter: $f'(x) = -x^2 + 4 = 0 \\Rightarrow x = \\pm 2$

$f''(x) = -2x$
- $f''(-2) = 4 > 0$: Minimum i $x = -2$
- $f''(2) = -4 < 0$: Maksimum i $x = 2$

$f(-2) = -\\frac{(-2)^3}{3} + 4(-2) + 3 = \\frac{8}{3} - 8 + 3 = \\frac{8}{3} - 5 = -\\frac{7}{3}$

$f(2) = -\\frac{8}{3} + 8 + 3 = -\\frac{8}{3} + 11 = \\frac{25}{3}$

Minimum: $(-2, -\\frac{7}{3})$, Maksimum: $(2, \\frac{25}{3})$

**d)** Siden $f(-2) < 0$ og $f(2) > 0$, må vi finne hvor grafen krysser $x$-aksen mellom $-2$ og $2$.

Fra b) vet vi at det er et nullpunkt ca. $x_0 \\approx -0{,}73$.

Areal $= \\left|\\int_{-2}^{x_0} f(x)\\,dx\\right| + \\int_{x_0}^{2} f(x)\\,dx$

$\\int f(x)\\,dx = -\\frac{x^4}{12} + 2x^2 + 3x + C$

Med numerisk beregning blir arealet ca. $\\approx 11{,}6$.`,
    },

    {
      id: 'r2-3-7-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-8',
        number: '3.7.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En funksjon $f$ er gitt ved $f\'(x) = x^2 - 4x + 3 = (x-1)(x-3)$. Vi vet at $f(2) = 0$.',
        subTasks: [
          { label: 'a', task: 'Bestem $f(x)$', solution: '$f(x) = \\int(x^2-4x+3)\\,dx = \\frac{x^3}{3} - 2x^2 + 3x + C$. Fra $f(2) = \\frac{8}{3} - 8 + 6 + C = 0$ får vi $C = -\\frac{2}{3}$. Svar: $f(x) = \\frac{x^3}{3} - 2x^2 + 3x - \\frac{2}{3}$' },
          { label: 'b', task: 'Finn og klassifiser ekstremalpunktene til $f$', solution: '$f\'(x) = 0$ når $x = 1$ eller $x = 3$. $f\'\'(x) = 2x - 4$. $f\'\'(1) = -2 < 0$: maks. $f\'\'(3) = 2 > 0$: min. Maks $(1, \\frac{2}{3})$, min $(3, -\\frac{2}{3})$.' },
          { label: 'c', task: 'Finn arealfunksjonen $A(x) = \\int_1^x f(t)\\,dt$', solution: '$A(x) = [\\frac{t^4}{12} - \\frac{2t^3}{3} + \\frac{3t^2}{2} - \\frac{2t}{3}]_1^x = \\frac{x^4}{12} - \\frac{2x^3}{3} + \\frac{3x^2}{2} - \\frac{2x}{3} - (\\frac{1}{12} - \\frac{2}{3} + \\frac{3}{2} - \\frac{2}{3})$' },
          { label: 'd', task: 'For hvilke verdier av $x > 1$ er $A(x) = 0$?', solution: 'Fra symmetrien i funksjonen og dens ekstremalpunkter kan vi vise at $A(3) = 0$ (arealet over og under $x$-aksen mellom 1 og 3 er like store).' },
        ],
        solution: 'a) $\\frac{x^3}{3} - 2x^2 + 3x - \\frac{2}{3}$, b) Maks $(1, \\frac{2}{3})$, min $(3, -\\frac{2}{3})$, c) Se løsning, d) $x = 3$',
        hints: [
          'Integrer og bruk initialbetingelsen for å finne $C$',
          'Klassifiser ekstremalpunkter med fortegnet til $f\'\'$',
          'Arealet er null når like mye ligger over og under $x$-aksen',
        ],
      },
    },

    {
      id: 'r2-3-7-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-9',
        number: '3.7.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vannstanden i en tank endrer seg med raten $r(t) = 10 - 2t$ liter per minutt, der $t$ er tiden i minutter. Ved $t = 0$ er det 50 liter vann i tanken.',
        subTasks: [
          { label: 'a', task: 'Finn vannmengden $V(t)$ som funksjon av tiden', solution: '$V(t) = \\int(10-2t)\\,dt = 10t - t^2 + C$. Fra $V(0) = 50$: $C = 50$. Svar: $V(t) = 10t - t^2 + 50$' },
          { label: 'b', task: 'Når er vannmengden størst, og hvor mye vann er det da?', solution: '$V\'(t) = 10 - 2t = 0 \\Rightarrow t = 5$. $V(5) = 50 - 25 + 50 = 75$ liter.' },
          { label: 'c', task: 'Når er tanken tom?', solution: '$V(t) = 10t - t^2 + 50 = -t^2 + 10t + 50 = 0$. $t = \\frac{-10 \\pm \\sqrt{100 + 200}}{-2} = \\frac{-10 \\pm \\sqrt{300}}{-2}$. $t \\approx 13{,}66$ min (positiv løsning).' },
          { label: 'd', task: 'Hvor mye vann renner totalt inn i tanken de første 5 minuttene?', solution: '$\\int_0^5 r(t)\\,dt = [10t - t^2]_0^5 = 50 - 25 = 25$ liter. Dette stemmer med $V(5) - V(0) = 75 - 50 = 25$ liter.' },
        ],
        solution: 'a) $V(t) = 10t - t^2 + 50$, b) $t = 5$ min, $V = 75$ L, c) $t \\approx 13{,}66$ min, d) 25 liter',
        hints: [
          'Vannmengden er integralet av raten pluss startverdien',
          'Maksimal vannmengde når $r(t) = 0$',
          'Tanken er tom når $V(t) = 0$',
        ],
      },
    },

    {
      id: 'r2-3-7-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-10',
        number: '3.7.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'La $f(x) = x \\cdot e^{-x}$ for $x \\geq 0$.',
        subTasks: [
          { label: 'a', task: 'Vis at $f\'(x) = (1-x)e^{-x}$', solution: 'Produktregelen: $f\'(x) = 1 \\cdot e^{-x} + x \\cdot (-e^{-x}) = e^{-x} - xe^{-x} = (1-x)e^{-x}$ ✓' },
          { label: 'b', task: 'Finn ekstremalpunktene til $f$', solution: '$f\'(x) = (1-x)e^{-x} = 0$ når $x = 1$ (siden $e^{-x} \\neq 0$). $f\'\'(x) = -e^{-x} + (x-1)e^{-x} = (x-2)e^{-x}$. $f\'\'(1) = -e^{-1} < 0$: maksimum. Maks: $(1, e^{-1})$.' },
          { label: 'c', task: 'Vis at $\\int f(x)\\,dx = -(x+1)e^{-x} + C$ ved å derivere høyre side', solution: '$(-(x+1)e^{-x})\' = -e^{-x} - (x+1)(-e^{-x}) = -e^{-x} + (x+1)e^{-x} = xe^{-x} = f(x)$ ✓' },
          { label: 'd', task: 'Beregn $\\int_0^{\\infty} f(x)\\,dx$ og tolk resultatet', solution: '$\\int_0^{\\infty} xe^{-x}\\,dx = \\lim_{b \\to \\infty}[-(x+1)e^{-x}]_0^b = \\lim_{b \\to \\infty}(-(b+1)e^{-b} + 1) = 0 + 1 = 1$. Dette er det totale arealet under grafen til $f$ for alle $x \\geq 0$.' },
        ],
        solution: 'a) Se løsning, b) Maks $(1, e^{-1})$, c) Se løsning, d) Areal = 1',
        hints: [
          'Bruk produktregelen for derivasjon',
          'For uegentlige integraler, bruk grenseverdier',
          'Husk at $\\lim_{x \\to \\infty} x \\cdot e^{-x} = 0$',
        ],
      },
    },

    // ========== NYTT: Flere eksamensoppgaver ==========
    {
      id: 'r2-3-7-exercise-11',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-11',
        number: '3.7.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En funksjon $f$ er gitt ved $f(x) = x^3 - 3x^2 + 2x$.',
        subTasks: [
          { label: 'a', task: 'Finn nullpunktene til $f$', solution: '$f(x) = x(x^2 - 3x + 2) = x(x-1)(x-2) = 0$ gir $x = 0, 1, 2$' },
          { label: 'b', task: 'Finn ekstremalpunktene til $f$ og avgjør om de er maksimum eller minimum', solution: '$f\'(x) = 3x^2 - 6x + 2 = 0$. $x = \\frac{6 \\pm \\sqrt{36-24}}{6} = \\frac{6 \\pm \\sqrt{12}}{6} = 1 \\pm \\frac{\\sqrt{3}}{3}$. $f\'\'(x) = 6x - 6$. For $x_1 = 1 - \\frac{\\sqrt{3}}{3} \\approx 0{,}42$: $f\'\'(x_1) < 0$ (maks). For $x_2 = 1 + \\frac{\\sqrt{3}}{3} \\approx 1{,}58$: $f\'\'(x_2) > 0$ (min).' },
          { label: 'c', task: 'Beregn $\\int_0^2 |f(x)|\\,dx$', solution: '$f(x) \\geq 0$ for $x \\in [0,1]$ og $f(x) \\leq 0$ for $x \\in [1,2]$. $\\int_0^2 |f(x)|\\,dx = \\int_0^1 f(x)\\,dx - \\int_1^2 f(x)\\,dx = [\\frac{x^4}{4} - x^3 + x^2]_0^1 - [\\frac{x^4}{4} - x^3 + x^2]_1^2 = \\frac{1}{4} - (0 - \\frac{1}{4}) = \\frac{1}{2}$' },
          { label: 'd', task: 'Finn gjennomsnittet av $f$ på $[0, 2]$', solution: '$\\bar{f} = \\frac{1}{2}\\int_0^2 (x^3 - 3x^2 + 2x)\\,dx = \\frac{1}{2}[\\frac{x^4}{4} - x^3 + x^2]_0^2 = \\frac{1}{2}(4 - 8 + 4) = 0$' },
        ],
        solution: 'a) $x = 0, 1, 2$, b) Maks ca. $(0{,}42, 0{,}38)$, min ca. $(1{,}58, -0{,}38)$, c) $\\frac{1}{2}$, d) 0',
        hints: [
          'Faktoriser polynomet for å finne nullpunkter',
          'Bruk ABC-formelen for å løse $f\'(x) = 0$',
          'Del opp integralet der funksjonen skifter fortegn',
        ],
      },
    },

    {
      id: 'r2-3-7-exercise-12',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-12',
        number: '3.7.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'La $G(x) = \\int_0^x e^{-t^2}\\,dt$ for $x \\geq 0$. (Dette er relatert til feilfunksjonen $\\text{erf}$, som ikke har elementær antiderivert.)',
        subTasks: [
          { label: 'a', task: 'Finn $G\'(x)$', solution: 'Ifølge fundamentalteoremet: $G\'(x) = e^{-x^2}$' },
          { label: 'b', task: 'Bestem $G(0)$', solution: '$G(0) = \\int_0^0 e^{-t^2}\\,dt = 0$' },
          { label: 'c', task: 'Er $G$ voksende eller avtagende for $x > 0$? Begrunn.', solution: '$G\'(x) = e^{-x^2} > 0$ for alle $x$, så $G$ er strengt voksende for alle $x > 0$.' },
          { label: 'd', task: 'Finn $G\'\'(x)$ og bestem vendepunktet til $G$', solution: '$G\'\'(x) = (e^{-x^2})\' = -2x \\cdot e^{-x^2}$. $G\'\'(x) = 0$ når $x = 0$. For $x < 0$: $G\'\' > 0$. For $x > 0$: $G\'\' < 0$. Vendepunkt i $(0, 0)$.' },
          { label: 'e', task: 'Skisser grafen til $G(x)$ basert på informasjonen ovenfor', solution: 'Grafen starter i $(0, 0)$, er alltid voksende, konkav ned for $x > 0$, og nærmer seg en horisontal asymptote (verdien $\\frac{\\sqrt{\\pi}}{2}$) når $x \\to \\infty$.' },
        ],
        solution: 'a) $e^{-x^2}$, b) 0, c) Voksende, d) Vendepunkt $(0, 0)$, e) Se beskrivelse',
        hints: [
          'Bruk fundamentalteoremet for å finne $G\'$',
          'Fortegnet til $G\'$ bestemmer om $G$ vokser eller synker',
          'Vendepunkt der $G\'\' = 0$ og skifter fortegn',
        ],
      },
    },

    {
      id: 'r2-3-7-exercise-13',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-13',
        number: '3.7.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En befolkning vokser med raten $r(t) = 1000 \\cdot e^{0{,}02t}$ personer per år, der $t$ er antall år fra nå. Dagens befolkning er 50 000.',
        subTasks: [
          { label: 'a', task: 'Finn befolkningen $P(t)$ som funksjon av $t$', solution: '$P(t) = \\int 1000e^{0{,}02t}\\,dt = 50000e^{0{,}02t} + C$. Fra $P(0) = 50000$: $50000 + C = 50000$, så $C = 0$. Svar: $P(t) = 50000e^{0{,}02t}$' },
          { label: 'b', task: 'Hvor stor er befolkningen om 10 år?', solution: '$P(10) = 50000e^{0{,}2} = 50000 \\cdot 1{,}221 \\approx 61050$ personer' },
          { label: 'c', task: 'Hvor mange flere personer er det etter 10 år sammenlignet med nå?', solution: '$P(10) - P(0) = 61050 - 50000 = 11050$ personer. Alternativt: $\\int_0^{10} r(t)\\,dt = [50000e^{0{,}02t}]_0^{10} = 50000(e^{0{,}2} - 1) \\approx 11050$' },
          { label: 'd', task: 'Når dobler befolkningen seg?', solution: '$P(t) = 100000$ når $50000e^{0{,}02t} = 100000$, dvs. $e^{0{,}02t} = 2$. $0{,}02t = \\ln 2$, så $t = \\frac{\\ln 2}{0{,}02} = 50 \\ln 2 \\approx 34{,}7$ år.' },
        ],
        solution: 'a) $50000e^{0{,}02t}$, b) ca. 61 050, c) ca. 11 050, d) ca. 35 år',
        hints: [
          'Husk at $\\int e^{at}\\,dt = \\frac{1}{a}e^{at} + C$',
          'Doblingstid: løs $P(t) = 2P(0)$',
        ],
      },
    },

    {
      id: 'r2-3-7-exercise-14',
      type: 'exercise',
      exercise: {
        id: 'r2-3-7-task-14',
        number: '3.7.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Konsumentoverskuddet er definert som $KO = \\int_0^{x^*} (D(x) - p^*)\\,dx$, der $D(x)$ er etterspørselsfunksjonen, $p^*$ er markedsprisen og $x^*$ er solgt kvantum. Anta $D(x) = 100 - x^2$ og markedspris $p^* = 75$.',
        subTasks: [
          { label: 'a', task: 'Finn solgt kvantum $x^*$ ved markedspris', solution: '$D(x^*) = p^*$ gir $100 - (x^*)^2 = 75$, så $(x^*)^2 = 25$ og $x^* = 5$' },
          { label: 'b', task: 'Beregn konsumentoverskuddet', solution: '$KO = \\int_0^5 (100 - x^2 - 75)\\,dx = \\int_0^5 (25 - x^2)\\,dx = [25x - \\frac{x^3}{3}]_0^5 = 125 - \\frac{125}{3} = \\frac{250}{3} \\approx 83{,}3$' },
          { label: 'c', task: 'Tolk konsumentoverskuddet geometrisk', solution: 'Konsumentoverskuddet er arealet mellom etterspørselskurven $D(x)$ og den horisontale linjen $p = 75$ fra $x = 0$ til $x = 5$. Det representerer den ekstra nytten konsumentene får ved å betale mindre enn de var villige til.' },
          { label: 'd', task: 'Hva skjer med konsumentoverskuddet hvis prisen synker til $p^* = 64$?', solution: 'Ny $x^*$: $100 - (x^*)^2 = 64 \\Rightarrow x^* = 6$. $KO = \\int_0^6 (36 - x^2)\\,dx = [36x - \\frac{x^3}{3}]_0^6 = 216 - 72 = 144$. Konsumentoverskuddet øker fra ca. 83 til 144.' },
        ],
        solution: 'a) $x^* = 5$, b) $KO = \\frac{250}{3}$, c) Se tolkning, d) $KO = 144$ (øker)',
        hints: [
          'Finn $x^*$ ved å løse $D(x^*) = p^*$',
          'Konsumentoverskudd er et bestemt integral',
          'Lavere pris gir høyere kvantum og større overskudd',
        ],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-3-7-text-9',
      type: 'text',
      content: `## Oppsummering

I dette kapitlet har vi lært:

**1. Sammenhengen mellom $f$, $f'$ og $\\int f$:**
- Derivasjon og integrasjon er inverse operasjoner
- $\\frac{d}{dx}[\\int f(x)\\,dx] = f(x)$ og $\\int f'(x)\\,dx = f(x) + C$

**2. Bestemme $f(x)$ fra $f'(x)$:**
- Integrer $f'(x)$ og bruk et kjent punkt til å finne konstanten $C$
- For to betingelser (fra $f''$): integrer to ganger med to konstanter

**3. Arealfunksjonen $A(x) = \\int_a^x f(t)\\,dt$:**
- $A'(x) = f(x)$ (analysens fundamentalteorem)
- Arealet vokser når $f(x) > 0$ og synker når $f(x) < 0$
- Med kjerneregel: $\\frac{d}{dx}\\int_a^{g(x)} f(t)\\,dt = f(g(x)) \\cdot g'(x)$

**4. Gjennomsnittsverdi:**
- $\\bar{f} = \\frac{1}{b-a}\\int_a^b f(x)\\,dx$

**5. Praktiske anvendelser:**
- Fysikk: Posisjon fra hastighet, hastighet fra akselerasjon
- Økonomi: Totalkostnad fra marginalkostnad, konsumentoverskudd
- Generelt: Integralet av en rate gir den akkumulerte mengden

Kombinasjonen av derivasjon og integrasjon gir et kraftig verktøy for fullstendig funksjonsanalyse.`,
    },

    // ========== TIPS TIL EKSAMEN ==========
    {
      id: 'r2-3-7-tip-1',
      type: 'tip',
      content: `**Tips til eksamen:**

1. **Les oppgaven nøye** - identifiser om du skal derivere, integrere, eller begge deler.

2. **Sjekk svarene dine** - deriver integralet for å verifisere at du får tilbake integranden.

3. **Ikke glem konstantene** - hver integrasjon gir en ny konstant $C$.

4. **Bruk initialbetingelser** - sett alltid inn kjente verdier for å finne $C$.

5. **Tegn skisse** - en graf hjelper deg å forstå problemet og verifisere svar.

6. **Fortegnsanalyse** - bruk fortegnet til $f'$ for å bestemme vekst/avtagning av $f$.

7. **Fysiske enheter** - i praktiske problemer, sjekk at enhetene stemmer.`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_4_1: TextbookChapter = {
  id: 'r2-4-1',
  courseId: 'r2',
  chapterNumber: '4.1',
  title: 'Radianer og vinkelmål',
  description: 'Sammenhengen mellom grader og radianer, buelengde, sektorareal og enhetssirkelen.',
  estimatedMinutes: 45,
  competenceGoals: [
    'utforske eigenskapar ved radianer og samanhengen mellom gradar og radianer',
    'bruke radianmål i utrekningar av buelengde og sektorareal',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-1-intro',
      type: 'text',
      content: `## Hvorfor radianer?

Til nå har du mest sannsynlig brukt grader som vinkelmål. En hel omdreining er $360°$, en rett vinkel er $90°$, og så videre. Men i høyere matematikk, spesielt i kalkulus og trigonometri, er det mye mer praktisk å bruke et annet vinkelmål: **radianer**.

Radianer gjør mange formler enklere og mer elegante. For eksempel blir derivasjon av trigonometriske funksjoner mye penere når vi bruker radianer. I dette kapitlet skal vi lære:

- Hva en radian er
- Hvordan vi regner om mellom grader og radianer
- Viktige vinkler uttrykt i radianer
- Formler for buelengde og sektorareal
- Enhetssirkelen`,
    },

    {
      id: 'r2-4-1-komplekse-tall-bilde',
      type: 'image',
      src: '/images/r2/komplekse-tall.svg',
      alt: 'Illustrasjon av komplekse tall i det komplekse planet',
      caption: 'Komplekse tall - sammenheng mellom trigonometri og det komplekse planet',
    },

    // ========== DEFINISJON AV RADIAN ==========
    {
      id: 'r2-4-1-def-radian',
      type: 'definition',
      title: 'Radian',
      content: `En **radian** er vinkelen som tilsvarer en bue med lengde lik radiusen i en sirkel.

Hvis $s$ er buelengden og $r$ er radius, er vinkelen $v$ i radianer gitt ved:

$$v = \\frac{s}{r}$$

En hel omdreining ($360°$) tilsvarer en bue med lengde lik hele omkretsen $2\\pi r$, så:

$$360° = \\frac{2\\pi r}{r} = 2\\pi \\text{ radianer}$$`,
    },
    {
      id: 'r2-4-1-radianer-grader-bilde',
      type: 'image',
      src: '/images/trigonometry/radianer-grader.svg',
      alt: 'Sammenligning av grader og radianer med enhetssirkel',
      caption: 'Omregning mellom grader og radianer',
    },

    {
      id: 'r2-4-1-radian-forklaring',
      type: 'text',
      content: `### Intuisjon bak radianer

Tenk deg at du har en sirkel med radius $r$. Hvis du "ruller ut" en bue langs sirkelen som er nøyaktig like lang som radiusen, så er vinkelen denne buen spenner over nøyaktig **1 radian**.

Siden omkretsen til en sirkel er $2\\pi r$, får vi plass til nøyaktig $2\\pi$ slike buer rundt hele sirkelen. Derfor er en hel omdreining lik $2\\pi$ radianer.

En radian er omtrent $57{,}3°$ (mer presist: $\\frac{180°}{\\pi} \\approx 57{,}2958°$).`,
    },

    // ========== OMREGNING ==========
    {
      id: 'r2-4-1-omregning-teorem',
      type: 'theorem',
      title: 'Omregning mellom grader og radianer',
      content: `Siden $360° = 2\\pi$ radianer, har vi:

$$180° = \\pi \\text{ radianer}$$

**Fra grader til radianer:**
$$v_{\\text{rad}} = v_{\\text{grad}} \\cdot \\frac{\\pi}{180}$$

**Fra radianer til grader:**
$$v_{\\text{grad}} = v_{\\text{rad}} \\cdot \\frac{180}{\\pi}$$`,
    },

    {
      id: 'r2-4-1-tip-omregning',
      type: 'tip',
      content: `**Huskeregel:** For å gå fra grader til radianer, ganger du med $\\frac{\\pi}{180}$. For å gå motsatt vei, ganger du med $\\frac{180}{\\pi}$.

Du kan også tenke på det slik: $\\pi$ radianer = $180°$, så brøken $\\frac{\\pi}{180}$ gir deg "radianer per grad".`,
    },

    // ========== EKSEMPEL 1 ==========
    {
      id: 'r2-4-1-example-1',
      type: 'example',
      title: 'Eksempel 1: Omregning fra grader til radianer',
      problem: `Skriv om disse vinklene fra grader til radianer. Gi eksakt svar.

a) $90°$
b) $45°$
c) $60°$
d) $30°$
e) $120°$`,
      solution: `**Løsning:**

Vi bruker formelen $v_{\\text{rad}} = v_{\\text{grad}} \\cdot \\frac{\\pi}{180}$

a) $90° = 90 \\cdot \\frac{\\pi}{180} = \\frac{90\\pi}{180} = \\frac{\\pi}{2}$

b) $45° = 45 \\cdot \\frac{\\pi}{180} = \\frac{45\\pi}{180} = \\frac{\\pi}{4}$

c) $60° = 60 \\cdot \\frac{\\pi}{180} = \\frac{60\\pi}{180} = \\frac{\\pi}{3}$

d) $30° = 30 \\cdot \\frac{\\pi}{180} = \\frac{30\\pi}{180} = \\frac{\\pi}{6}$

e) $120° = 120 \\cdot \\frac{\\pi}{180} = \\frac{120\\pi}{180} = \\frac{2\\pi}{3}$`,
    },

    // ========== EKSEMPEL 2 ==========
    {
      id: 'r2-4-1-example-2',
      type: 'example',
      title: 'Eksempel 2: Omregning fra radianer til grader',
      problem: `Skriv om disse vinklene fra radianer til grader.

a) $\\frac{\\pi}{2}$
b) $\\frac{3\\pi}{4}$
c) $\\frac{5\\pi}{6}$
d) $2\\pi$
e) $\\frac{7\\pi}{4}$`,
      solution: `**Løsning:**

Vi bruker formelen $v_{\\text{grad}} = v_{\\text{rad}} \\cdot \\frac{180}{\\pi}$

a) $\\frac{\\pi}{2} = \\frac{\\pi}{2} \\cdot \\frac{180}{\\pi} = \\frac{180}{2} = 90°$

b) $\\frac{3\\pi}{4} = \\frac{3\\pi}{4} \\cdot \\frac{180}{\\pi} = \\frac{3 \\cdot 180}{4} = \\frac{540}{4} = 135°$

c) $\\frac{5\\pi}{6} = \\frac{5\\pi}{6} \\cdot \\frac{180}{\\pi} = \\frac{5 \\cdot 180}{6} = \\frac{900}{6} = 150°$

d) $2\\pi = 2\\pi \\cdot \\frac{180}{\\pi} = 2 \\cdot 180 = 360°$

e) $\\frac{7\\pi}{4} = \\frac{7\\pi}{4} \\cdot \\frac{180}{\\pi} = \\frac{7 \\cdot 180}{4} = \\frac{1260}{4} = 315°$`,
    },

    // ========== VIKTIGE VINKLER ==========
    {
      id: 'r2-4-1-viktige-vinkler',
      type: 'text',
      content: `## Viktige vinkler i radianer

Det er noen vinkler du bør kunne utenat. Disse dukker opp igjen og igjen i matematikk og fysikk.

| Grader | Radianer |
|--------|----------|
| $0°$ | $0$ |
| $30°$ | $\\frac{\\pi}{6}$ |
| $45°$ | $\\frac{\\pi}{4}$ |
| $60°$ | $\\frac{\\pi}{3}$ |
| $90°$ | $\\frac{\\pi}{2}$ |
| $120°$ | $\\frac{2\\pi}{3}$ |
| $135°$ | $\\frac{3\\pi}{4}$ |
| $150°$ | $\\frac{5\\pi}{6}$ |
| $180°$ | $\\pi$ |
| $270°$ | $\\frac{3\\pi}{2}$ |
| $360°$ | $2\\pi$ |`,
    },

    {
      id: 'r2-4-1-tip-huske-vinkler',
      type: 'tip',
      content: `**Hvordan huske disse?**

- $\\frac{\\pi}{6}$, $\\frac{\\pi}{4}$, $\\frac{\\pi}{3}$, $\\frac{\\pi}{2}$ tilsvarer $30°$, $45°$, $60°$, $90°$
- Nevnerne synker: $6, 4, 3, 2$ mens vinklene i grader øker
- $\\pi = 180°$ er en halv omdreining
- $2\\pi = 360°$ er en hel omdreining

Vinkler i andre kvadranter kan du finne ved å bruke symmetri. For eksempel er $120° = 180° - 60°$, så $\\frac{2\\pi}{3} = \\pi - \\frac{\\pi}{3}$.`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-4-1-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-1',
        number: '4.1.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv om fra grader til radianer. Gi eksakt svar.',
        subTasks: [
          { label: 'a', task: '$180°$', solution: '$180° = 180 \\cdot \\frac{\\pi}{180} = \\pi$' },
          { label: 'b', task: '$270°$', solution: '$270° = 270 \\cdot \\frac{\\pi}{180} = \\frac{3\\pi}{2}$' },
          { label: 'c', task: '$150°$', solution: '$150° = 150 \\cdot \\frac{\\pi}{180} = \\frac{5\\pi}{6}$' },
          { label: 'd', task: '$225°$', solution: '$225° = 225 \\cdot \\frac{\\pi}{180} = \\frac{5\\pi}{4}$' },
          { label: 'e', task: '$315°$', solution: '$315° = 315 \\cdot \\frac{\\pi}{180} = \\frac{7\\pi}{4}$' },
          { label: 'f', task: '$540°$', solution: '$540° = 540 \\cdot \\frac{\\pi}{180} = 3\\pi$' },
        ],
        hints: ['Bruk formelen $v_{\\text{rad}} = v_{\\text{grad}} \\cdot \\frac{\\pi}{180}$ og forkort brøken'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-4-1-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-2',
        number: '4.1.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv om fra radianer til grader.',
        subTasks: [
          { label: 'a', task: '$\\frac{\\pi}{3}$', solution: '$\\frac{\\pi}{3} \\cdot \\frac{180}{\\pi} = 60°$' },
          { label: 'b', task: '$\\frac{2\\pi}{3}$', solution: '$\\frac{2\\pi}{3} \\cdot \\frac{180}{\\pi} = 120°$' },
          { label: 'c', task: '$\\frac{5\\pi}{4}$', solution: '$\\frac{5\\pi}{4} \\cdot \\frac{180}{\\pi} = 225°$' },
          { label: 'd', task: '$\\frac{11\\pi}{6}$', solution: '$\\frac{11\\pi}{6} \\cdot \\frac{180}{\\pi} = 330°$' },
          { label: 'e', task: '$\\frac{4\\pi}{3}$', solution: '$\\frac{4\\pi}{3} \\cdot \\frac{180}{\\pi} = 240°$' },
          { label: 'f', task: '$5\\pi$', solution: '$5\\pi \\cdot \\frac{180}{\\pi} = 900°$' },
        ],
        hints: ['Ganger du radianer med $\\frac{180}{\\pi}$, får du grader'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== EKSEMPEL 3 ==========
    {
      id: 'r2-4-1-example-3',
      type: 'example',
      title: 'Eksempel 3: Desimaltall til eksakt form',
      problem: `Skriv $1{,}5\\pi$ radianer i grader, og skriv $72°$ i radianer på eksakt form.`,
      solution: `**Løsning:**

**$1{,}5\\pi$ til grader:**
$$1{,}5\\pi = \\frac{3\\pi}{2}$$
$$\\frac{3\\pi}{2} \\cdot \\frac{180}{\\pi} = \\frac{3 \\cdot 180}{2} = \\frac{540}{2} = 270°$$

**$72°$ til radianer:**
$$72° = 72 \\cdot \\frac{\\pi}{180} = \\frac{72\\pi}{180}$$

Vi forkorter med $\\gcd(72, 180) = 36$:
$$\\frac{72\\pi}{180} = \\frac{2\\pi}{5}$$

Så $72° = \\frac{2\\pi}{5}$ radianer.`,
    },

    // ========== BUELENGDE ==========
    {
      id: 'r2-4-1-buelengde-intro',
      type: 'text',
      content: `## Buelengde

Når vi har definert radianer som $v = \\frac{s}{r}$, kan vi enkelt løse denne for buelengden $s$.`,
    },

    {
      id: 'r2-4-1-buelengde-formel',
      type: 'theorem',
      title: 'Formel for buelengde',
      content: `Buelengden $s$ i en sirkelbue med radius $r$ og sentralvinkel $v$ (i radianer) er gitt ved:

$$s = r \\cdot v$$

Dersom vinkelen er oppgitt i grader, må vi først regne om til radianer:

$$s = r \\cdot v_{\\text{grad}} \\cdot \\frac{\\pi}{180} = \\frac{\\pi r v_{\\text{grad}}}{180}$$`,
    },

    {
      id: 'r2-4-1-buelengde-note',
      type: 'note',
      content: `Legg merke til hvor enkel formelen $s = rv$ er når vinkelen er i radianer. Dette er en av grunnene til at radianer er så nyttige i matematikken.`,
    },

    // ========== EKSEMPEL 4 ==========
    {
      id: 'r2-4-1-example-4',
      type: 'example',
      title: 'Eksempel 4: Buelengde med radian',
      problem: `En sirkelbue har radius $r = 8$ cm og sentralvinkel $v = \\frac{3\\pi}{4}$ radianer. Finn buelengden.`,
      solution: `**Løsning:**

Vi bruker formelen $s = r \\cdot v$:

$$s = 8 \\cdot \\frac{3\\pi}{4} = \\frac{24\\pi}{4} = 6\\pi \\text{ cm}$$

Som desimaltall: $s \\approx 18{,}85$ cm`,
    },

    // ========== EKSEMPEL 5 ==========
    {
      id: 'r2-4-1-example-5',
      type: 'example',
      title: 'Eksempel 5: Buelengde med grader',
      problem: `En sirkelbue har radius $r = 10$ cm og sentralvinkel $v = 72°$. Finn buelengden.`,
      solution: `**Løsning:**

**Metode 1: Regn om til radianer først**
$$v = 72° = 72 \\cdot \\frac{\\pi}{180} = \\frac{2\\pi}{5} \\text{ radianer}$$

$$s = r \\cdot v = 10 \\cdot \\frac{2\\pi}{5} = \\frac{20\\pi}{5} = 4\\pi \\text{ cm}$$

**Metode 2: Bruk formelen direkte**
$$s = \\frac{\\pi r v_{\\text{grad}}}{180} = \\frac{\\pi \\cdot 10 \\cdot 72}{180} = \\frac{720\\pi}{180} = 4\\pi \\text{ cm}$$

Som desimaltall: $s \\approx 12{,}57$ cm`,
    },

    // ========== EKSEMPEL 6 ==========
    {
      id: 'r2-4-1-example-6',
      type: 'example',
      title: 'Eksempel 6: Finne vinkelen',
      problem: `En sirkelbue har radius $r = 5$ cm og buelengde $s = 10$ cm. Finn sentralvinkelen i radianer og i grader.`,
      solution: `**Løsning:**

Vi løser $s = rv$ for $v$:
$$v = \\frac{s}{r} = \\frac{10}{5} = 2 \\text{ radianer}$$

Omregning til grader:
$$v = 2 \\cdot \\frac{180}{\\pi} = \\frac{360}{\\pi} \\approx 114{,}6°$$`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-4-1-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-3',
        number: '4.1.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn buelengden $s$ i hver sirkel. Gi eksakt svar.',
        subTasks: [
          { label: 'a', task: '$r = 6$ cm, $v = \\frac{\\pi}{2}$', solution: '$s = 6 \\cdot \\frac{\\pi}{2} = 3\\pi$ cm' },
          { label: 'b', task: '$r = 4$ cm, $v = \\frac{2\\pi}{3}$', solution: '$s = 4 \\cdot \\frac{2\\pi}{3} = \\frac{8\\pi}{3}$ cm' },
          { label: 'c', task: '$r = 9$ cm, $v = \\frac{\\pi}{6}$', solution: '$s = 9 \\cdot \\frac{\\pi}{6} = \\frac{3\\pi}{2}$ cm' },
          { label: 'd', task: '$r = 12$ cm, $v = \\frac{5\\pi}{4}$', solution: '$s = 12 \\cdot \\frac{5\\pi}{4} = 15\\pi$ cm' },
        ],
        hints: ['Bruk formelen $s = rv$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-4-1-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-4',
        number: '4.1.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn buelengden $s$ når vinkelen er oppgitt i grader.',
        subTasks: [
          { label: 'a', task: '$r = 5$ cm, $v = 90°$', solution: 'Først: $v = 90° = \\frac{\\pi}{2}$. Så $s = 5 \\cdot \\frac{\\pi}{2} = \\frac{5\\pi}{2}$ cm' },
          { label: 'b', task: '$r = 8$ cm, $v = 45°$', solution: 'Først: $v = 45° = \\frac{\\pi}{4}$. Så $s = 8 \\cdot \\frac{\\pi}{4} = 2\\pi$ cm' },
          { label: 'c', task: '$r = 3$ cm, $v = 120°$', solution: 'Først: $v = 120° = \\frac{2\\pi}{3}$. Så $s = 3 \\cdot \\frac{2\\pi}{3} = 2\\pi$ cm' },
          { label: 'd', task: '$r = 10$ cm, $v = 36°$', solution: 'Først: $v = 36° = \\frac{\\pi}{5}$. Så $s = 10 \\cdot \\frac{\\pi}{5} = 2\\pi$ cm' },
        ],
        hints: ['Regn først om vinkelen til radianer, deretter bruk $s = rv$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== SEKTORAREAL ==========
    {
      id: 'r2-4-1-sektorareal-intro',
      type: 'text',
      content: `## Sektorareal

En **sirkelsektor** er den "kakestykke-formede" delen av en sirkel som begrenses av to radier og en sirkelbue.`,
    },

    {
      id: 'r2-4-1-sektorareal-formel',
      type: 'theorem',
      title: 'Formel for sektorareal',
      content: `Arealet $A$ av en sirkelsektor med radius $r$ og sentralvinkel $v$ (i radianer) er:

$$A = \\frac{1}{2}r^2 v$$

Dersom vinkelen er i grader:

$$A = \\frac{\\pi r^2 v_{\\text{grad}}}{360}$$

**Alternativ formel:** Siden $s = rv$, kan vi også skrive:

$$A = \\frac{1}{2}rs$$

der $s$ er buelengden.`,
    },

    {
      id: 'r2-4-1-sektorareal-bevis',
      type: 'proof',
      title: 'Utledning av sektorarealformelen',
      content: `En hel sirkel har areal $\\pi r^2$ og sentralvinkel $2\\pi$ radianer.

En sektor med vinkel $v$ utgjør andelen $\\frac{v}{2\\pi}$ av hele sirkelen.

Derfor er sektorarealet:
$$A = \\frac{v}{2\\pi} \\cdot \\pi r^2 = \\frac{v \\cdot \\pi r^2}{2\\pi} = \\frac{1}{2}r^2 v$$`,
    },

    // ========== EKSEMPEL 7 ==========
    {
      id: 'r2-4-1-example-7',
      type: 'example',
      title: 'Eksempel 7: Sektorareal med radian',
      problem: `Finn arealet av en sirkelsektor med radius $r = 6$ cm og sentralvinkel $v = \\frac{\\pi}{3}$.`,
      solution: `**Løsning:**

Vi bruker formelen $A = \\frac{1}{2}r^2 v$:

$$A = \\frac{1}{2} \\cdot 6^2 \\cdot \\frac{\\pi}{3} = \\frac{1}{2} \\cdot 36 \\cdot \\frac{\\pi}{3} = 18 \\cdot \\frac{\\pi}{3} = 6\\pi \\text{ cm}^2$$

Som desimaltall: $A \\approx 18{,}85$ cm$^2$`,
    },

    // ========== EKSEMPEL 8 ==========
    {
      id: 'r2-4-1-example-8',
      type: 'example',
      title: 'Eksempel 8: Sektorareal med grader',
      problem: `Finn arealet av en sirkelsektor med radius $r = 10$ cm og sentralvinkel $v = 45°$.`,
      solution: `**Løsning:**

**Metode 1: Regn om til radianer**
$$v = 45° = \\frac{\\pi}{4}$$

$$A = \\frac{1}{2} \\cdot 10^2 \\cdot \\frac{\\pi}{4} = \\frac{1}{2} \\cdot 100 \\cdot \\frac{\\pi}{4} = \\frac{100\\pi}{8} = \\frac{25\\pi}{2} \\text{ cm}^2$$

**Metode 2: Bruk graderformelen**
$$A = \\frac{\\pi r^2 v_{\\text{grad}}}{360} = \\frac{\\pi \\cdot 100 \\cdot 45}{360} = \\frac{4500\\pi}{360} = \\frac{25\\pi}{2} \\text{ cm}^2$$

Som desimaltall: $A \\approx 39{,}27$ cm$^2$`,
    },

    // ========== EKSEMPEL 9 ==========
    {
      id: 'r2-4-1-example-9',
      type: 'example',
      title: 'Eksempel 9: Fra areal til vinkel',
      problem: `En sirkelsektor har radius $r = 8$ cm og areal $A = 16\\pi$ cm$^2$. Finn sentralvinkelen i radianer.`,
      solution: `**Løsning:**

Vi løser $A = \\frac{1}{2}r^2 v$ for $v$:

$$16\\pi = \\frac{1}{2} \\cdot 64 \\cdot v$$
$$16\\pi = 32v$$
$$v = \\frac{16\\pi}{32} = \\frac{\\pi}{2}$$

Sentralvinkelen er $\\frac{\\pi}{2}$ radianer (= $90°$).`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-4-1-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-5',
        number: '4.1.5',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn arealet av sirkelsektoren. Gi eksakt svar.',
        subTasks: [
          { label: 'a', task: '$r = 4$ cm, $v = \\frac{\\pi}{2}$', solution: '$A = \\frac{1}{2} \\cdot 16 \\cdot \\frac{\\pi}{2} = 4\\pi$ cm$^2$' },
          { label: 'b', task: '$r = 6$ cm, $v = \\frac{\\pi}{4}$', solution: '$A = \\frac{1}{2} \\cdot 36 \\cdot \\frac{\\pi}{4} = \\frac{9\\pi}{2}$ cm$^2$' },
          { label: 'c', task: '$r = 5$ cm, $v = \\frac{2\\pi}{5}$', solution: '$A = \\frac{1}{2} \\cdot 25 \\cdot \\frac{2\\pi}{5} = 5\\pi$ cm$^2$' },
          { label: 'd', task: '$r = 3$ cm, $v = \\pi$', solution: '$A = \\frac{1}{2} \\cdot 9 \\cdot \\pi = \\frac{9\\pi}{2}$ cm$^2$' },
        ],
        hints: ['Bruk formelen $A = \\frac{1}{2}r^2 v$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 6 ==========
    {
      id: 'r2-4-1-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-6',
        number: '4.1.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn arealet av sirkelsektoren når vinkelen er i grader.',
        subTasks: [
          { label: 'a', task: '$r = 8$ cm, $v = 60°$', solution: '$v = 60° = \\frac{\\pi}{3}$. $A = \\frac{1}{2} \\cdot 64 \\cdot \\frac{\\pi}{3} = \\frac{32\\pi}{3}$ cm$^2$' },
          { label: 'b', task: '$r = 12$ cm, $v = 30°$', solution: '$v = 30° = \\frac{\\pi}{6}$. $A = \\frac{1}{2} \\cdot 144 \\cdot \\frac{\\pi}{6} = 12\\pi$ cm$^2$' },
          { label: 'c', task: '$r = 9$ cm, $v = 40°$', solution: '$v = 40° = \\frac{2\\pi}{9}$. $A = \\frac{1}{2} \\cdot 81 \\cdot \\frac{2\\pi}{9} = 9\\pi$ cm$^2$' },
        ],
        hints: ['Regn først om til radianer, deretter bruk $A = \\frac{1}{2}r^2 v$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 7 ==========
    {
      id: 'r2-4-1-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-7',
        number: '4.1.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn den ukjente størrelsen.',
        subTasks: [
          { label: 'a', task: 'Radius: $r = 10$ cm, Areal: $A = 25\\pi$ cm$^2$. Finn vinkelen $v$ i radianer.', solution: '$25\\pi = \\frac{1}{2} \\cdot 100 \\cdot v \\Rightarrow v = \\frac{25\\pi}{50} = \\frac{\\pi}{2}$' },
          { label: 'b', task: 'Radius: $r = ?$, Vinkel: $v = \\frac{\\pi}{3}$, Areal: $A = 6\\pi$ cm$^2$. Finn $r$.', solution: '$6\\pi = \\frac{1}{2} \\cdot r^2 \\cdot \\frac{\\pi}{3} \\Rightarrow r^2 = \\frac{6\\pi \\cdot 6}{\\pi} = 36 \\Rightarrow r = 6$ cm' },
          { label: 'c', task: 'Buelengde: $s = 4\\pi$ cm, Radius: $r = 8$ cm. Finn arealet av sektoren.', solution: 'Først: $v = \\frac{s}{r} = \\frac{4\\pi}{8} = \\frac{\\pi}{2}$. Så $A = \\frac{1}{2}rs = \\frac{1}{2} \\cdot 8 \\cdot 4\\pi = 16\\pi$ cm$^2$' },
        ],
        hints: ['Bruk $A = \\frac{1}{2}r^2 v$ og $s = rv$ og løs for den ukjente'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== ENHETSSIRKELEN ==========
    {
      id: 'r2-4-1-enhetssirkel-intro',
      type: 'text',
      content: `## Enhetssirkelen

**Enhetssirkelen** er en sirkel med sentrum i origo og radius 1. Den er et uvurderlig verktøy for å forstå trigonometriske funksjoner.`,
    },

    {
      id: 'r2-4-1-enhetssirkel-def',
      type: 'definition',
      title: 'Enhetssirkelen',
      content: `Enhetssirkelen er sirkelen med ligning:

$$x^2 + y^2 = 1$$

For en vinkel $v$ (målt i radianer mot klokken fra positiv $x$-akse), er punktet $(\\cos v, \\sin v)$ skjæringspunktet mellom vinkelbenet og enhetssirkelen.

Dette betyr at:
- $\\cos v$ = $x$-koordinaten til punktet
- $\\sin v$ = $y$-koordinaten til punktet`,
    },

    {
      id: 'r2-4-1-enhetssirkel-forklaring',
      type: 'text',
      content: `### Hvordan bruke enhetssirkelen

Tenk deg at du starter i punktet $(1, 0)$ på $x$-aksen og beveger deg mot klokken langs sirkelen. Etter å ha beveget deg en buelengde på $v$ (der $v$ er vinkelen i radianer), befinner du deg i punktet $(\\cos v, \\sin v)$.

Siden omkretsen til enhetssirkelen er $2\\pi$, tilsvarer dette at en hel omdreining er $2\\pi$ radianer.

**Viktige punkter på enhetssirkelen:**

| Vinkel | Punkt | $\\cos v$ | $\\sin v$ |
|--------|-------|----------|----------|
| $0$ | $(1, 0)$ | $1$ | $0$ |
| $\\frac{\\pi}{2}$ | $(0, 1)$ | $0$ | $1$ |
| $\\pi$ | $(-1, 0)$ | $-1$ | $0$ |
| $\\frac{3\\pi}{2}$ | $(0, -1)$ | $0$ | $-1$ |
| $2\\pi$ | $(1, 0)$ | $1$ | $0$ |`,
    },

    // ========== EKSEMPEL 10 ==========
    {
      id: 'r2-4-1-example-10',
      type: 'example',
      title: 'Eksempel 10: Punkter på enhetssirkelen',
      problem: `Finn koordinatene til punktet på enhetssirkelen som tilsvarer vinkelen $v = \\frac{\\pi}{4}$.`,
      solution: `**Løsning:**

Vinkelen $\\frac{\\pi}{4}$ tilsvarer $45°$. Punktet ligger på linja $y = x$ (siden vinkelen er midt mellom $x$-aksen og $y$-aksen).

Punktet må tilfredsstille $x^2 + y^2 = 1$ og $x = y$:
$$x^2 + x^2 = 1$$
$$2x^2 = 1$$
$$x^2 = \\frac{1}{2}$$
$$x = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$$

Siden vi er i første kvadrant, er både $x$ og $y$ positive.

Punktet er $\\left(\\frac{\\sqrt{2}}{2}, \\frac{\\sqrt{2}}{2}\\right)$.

Dette betyr at $\\cos\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$ og $\\sin\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$.`,
    },

    // ========== EKSEMPEL 11 ==========
    {
      id: 'r2-4-1-example-11',
      type: 'example',
      title: 'Eksempel 11: Trigonometriske verdier fra enhetssirkelen',
      problem: `Bruk enhetssirkelen til å finne $\\cos\\frac{2\\pi}{3}$ og $\\sin\\frac{2\\pi}{3}$.`,
      solution: `**Løsning:**

Vinkelen $\\frac{2\\pi}{3}$ radianer = $120°$ ligger i andre kvadrant.

Vi kan skrive $\\frac{2\\pi}{3} = \\pi - \\frac{\\pi}{3}$, så dette er vinkelen $\\frac{\\pi}{3}$ ($60°$) speilet om $y$-aksen.

Fra tabeller eller trekanter vet vi at $\\cos\\frac{\\pi}{3} = \\frac{1}{2}$ og $\\sin\\frac{\\pi}{3} = \\frac{\\sqrt{3}}{2}$.

Ved speiling om $y$-aksen endrer $x$-koordinaten fortegn, mens $y$-koordinaten beholder fortegnet:

$$\\cos\\frac{2\\pi}{3} = -\\frac{1}{2}$$
$$\\sin\\frac{2\\pi}{3} = \\frac{\\sqrt{3}}{2}$$`,
    },

    // ========== VIKTIGE TRIGONOMETRISKE VERDIER ==========
    {
      id: 'r2-4-1-trig-verdier',
      type: 'theorem',
      title: 'Viktige trigonometriske verdier',
      content: `For standardvinklene har vi følgende eksakte verdier:

| Vinkel | $\\cos v$ | $\\sin v$ |
|--------|----------|----------|
| $0$ | $1$ | $0$ |
| $\\frac{\\pi}{6}$ | $\\frac{\\sqrt{3}}{2}$ | $\\frac{1}{2}$ |
| $\\frac{\\pi}{4}$ | $\\frac{\\sqrt{2}}{2}$ | $\\frac{\\sqrt{2}}{2}$ |
| $\\frac{\\pi}{3}$ | $\\frac{1}{2}$ | $\\frac{\\sqrt{3}}{2}$ |
| $\\frac{\\pi}{2}$ | $0$ | $1$ |

For vinkler i andre kvadranter, bruk symmetri:
- $\\cos(\\pi - v) = -\\cos v$, $\\sin(\\pi - v) = \\sin v$
- $\\cos(\\pi + v) = -\\cos v$, $\\sin(\\pi + v) = -\\sin v$
- $\\cos(2\\pi - v) = \\cos v$, $\\sin(2\\pi - v) = -\\sin v$`,
    },

    {
      id: 'r2-4-1-tip-huske-verdier',
      type: 'tip',
      content: `**Huskeregel for sinus og cosinus:**

For vinklene $0, \\frac{\\pi}{6}, \\frac{\\pi}{4}, \\frac{\\pi}{3}, \\frac{\\pi}{2}$:

Sinus-verdiene er: $\\frac{\\sqrt{0}}{2}, \\frac{\\sqrt{1}}{2}, \\frac{\\sqrt{2}}{2}, \\frac{\\sqrt{3}}{2}, \\frac{\\sqrt{4}}{2}$

Det vil si: $0, \\frac{1}{2}, \\frac{\\sqrt{2}}{2}, \\frac{\\sqrt{3}}{2}, 1$

Cosinus-verdiene er de samme, men i omvendt rekkefølge: $1, \\frac{\\sqrt{3}}{2}, \\frac{\\sqrt{2}}{2}, \\frac{1}{2}, 0$`,
    },

    // ========== EKSEMPEL 12 ==========
    {
      id: 'r2-4-1-example-12',
      type: 'example',
      title: 'Eksempel 12: Vinkler utenfor første kvadrant',
      problem: `Finn eksakt verdi av:
a) $\\sin\\frac{5\\pi}{6}$
b) $\\cos\\frac{7\\pi}{4}$
c) $\\sin\\frac{4\\pi}{3}$`,
      solution: `**Løsning:**

a) $\\frac{5\\pi}{6} = \\pi - \\frac{\\pi}{6}$ (andre kvadrant)

$\\sin\\frac{5\\pi}{6} = \\sin\\left(\\pi - \\frac{\\pi}{6}\\right) = \\sin\\frac{\\pi}{6} = \\frac{1}{2}$

b) $\\frac{7\\pi}{4} = 2\\pi - \\frac{\\pi}{4}$ (fjerde kvadrant)

$\\cos\\frac{7\\pi}{4} = \\cos\\left(2\\pi - \\frac{\\pi}{4}\\right) = \\cos\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$

c) $\\frac{4\\pi}{3} = \\pi + \\frac{\\pi}{3}$ (tredje kvadrant)

$\\sin\\frac{4\\pi}{3} = \\sin\\left(\\pi + \\frac{\\pi}{3}\\right) = -\\sin\\frac{\\pi}{3} = -\\frac{\\sqrt{3}}{2}$`,
    },

    // ========== EKSEMPEL 13 ==========
    {
      id: 'r2-4-1-example-13',
      type: 'example',
      title: 'Eksempel 13: Buelengde på enhetssirkelen',
      problem: `På enhetssirkelen starter vi i punktet $(1, 0)$ og beveger oss en buelengde på $\\frac{2\\pi}{3}$ mot klokken. Hvor ender vi?`,
      solution: `**Løsning:**

På enhetssirkelen er radius $r = 1$, så buelengden er lik vinkelen i radianer.

Å bevege seg en buelengde på $\\frac{2\\pi}{3}$ tilsvarer å rotere vinkelen $v = \\frac{2\\pi}{3}$.

Vi ender i punktet $(\\cos\\frac{2\\pi}{3}, \\sin\\frac{2\\pi}{3})$.

Fra eksempel 11 vet vi at dette er $\\left(-\\frac{1}{2}, \\frac{\\sqrt{3}}{2}\\right)$.`,
    },

    // ========== WARNING ==========
    {
      id: 'r2-4-1-warning-kalkulator',
      type: 'warning',
      title: 'Kalkulator og vinkelmodus',
      content: `Pass på at kalkulatoren din er satt til riktig modus:

- **RAD** (radianer) for oppgaver med radianer
- **DEG** (grader) for oppgaver med grader

En vanlig feil er å beregne $\\sin\\frac{\\pi}{2}$ og få $0{,}027...$ i stedet for $1$. Dette skjer når kalkulatoren er i gradermodus og tolker $\\frac{\\pi}{2} \\approx 1{,}57$ som grader.

Sjekk alltid at $\\sin\\frac{\\pi}{2} = 1$ for å verifisere at du er i radianmodus.`,
    },

    // ========== OPPGAVE 8 ==========
    {
      id: 'r2-4-1-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-8',
        number: '4.1.8',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn eksakt verdi av følgende trigonometriske uttrykk.',
        subTasks: [
          { label: 'a', task: '$\\sin\\frac{\\pi}{6}$', solution: '$\\sin\\frac{\\pi}{6} = \\frac{1}{2}$' },
          { label: 'b', task: '$\\cos\\frac{\\pi}{3}$', solution: '$\\cos\\frac{\\pi}{3} = \\frac{1}{2}$' },
          { label: 'c', task: '$\\sin\\frac{\\pi}{4}$', solution: '$\\sin\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$' },
          { label: 'd', task: '$\\cos\\pi$', solution: '$\\cos\\pi = -1$' },
          { label: 'e', task: '$\\sin\\frac{3\\pi}{2}$', solution: '$\\sin\\frac{3\\pi}{2} = -1$' },
        ],
        hints: ['Bruk enhetssirkelen og de viktige punktene'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 9 ==========
    {
      id: 'r2-4-1-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-9',
        number: '4.1.9',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn eksakt verdi av følgende. Bruk symmetri i enhetssirkelen.',
        subTasks: [
          { label: 'a', task: '$\\cos\\frac{3\\pi}{4}$', solution: '$\\frac{3\\pi}{4} = \\pi - \\frac{\\pi}{4}$, så $\\cos\\frac{3\\pi}{4} = -\\cos\\frac{\\pi}{4} = -\\frac{\\sqrt{2}}{2}$' },
          { label: 'b', task: '$\\sin\\frac{5\\pi}{4}$', solution: '$\\frac{5\\pi}{4} = \\pi + \\frac{\\pi}{4}$, så $\\sin\\frac{5\\pi}{4} = -\\sin\\frac{\\pi}{4} = -\\frac{\\sqrt{2}}{2}$' },
          { label: 'c', task: '$\\cos\\frac{11\\pi}{6}$', solution: '$\\frac{11\\pi}{6} = 2\\pi - \\frac{\\pi}{6}$, så $\\cos\\frac{11\\pi}{6} = \\cos\\frac{\\pi}{6} = \\frac{\\sqrt{3}}{2}$' },
          { label: 'd', task: '$\\sin\\frac{7\\pi}{6}$', solution: '$\\frac{7\\pi}{6} = \\pi + \\frac{\\pi}{6}$, så $\\sin\\frac{7\\pi}{6} = -\\sin\\frac{\\pi}{6} = -\\frac{1}{2}$' },
        ],
        hints: ['Skriv vinkelen som $\\pi \\pm$ en standardvinkel eller $2\\pi -$ en standardvinkel'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 10 ==========
    {
      id: 'r2-4-1-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-10',
        number: '4.1.10',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn koordinatene til punktet på enhetssirkelen.',
        subTasks: [
          { label: 'a', task: 'Vinkelen $v = \\frac{\\pi}{3}$', solution: 'Punktet er $(\\cos\\frac{\\pi}{3}, \\sin\\frac{\\pi}{3}) = \\left(\\frac{1}{2}, \\frac{\\sqrt{3}}{2}\\right)$' },
          { label: 'b', task: 'Vinkelen $v = \\frac{5\\pi}{6}$', solution: 'Punktet er $(\\cos\\frac{5\\pi}{6}, \\sin\\frac{5\\pi}{6}) = \\left(-\\frac{\\sqrt{3}}{2}, \\frac{1}{2}\\right)$' },
          { label: 'c', task: 'Vinkelen $v = \\frac{5\\pi}{3}$', solution: 'Punktet er $(\\cos\\frac{5\\pi}{3}, \\sin\\frac{5\\pi}{3}) = \\left(\\frac{1}{2}, -\\frac{\\sqrt{3}}{2}\\right)$' },
        ],
        hints: ['Punktet på enhetssirkelen for vinkel $v$ er $(\\cos v, \\sin v)$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== EKSEMPEL 14 ==========
    {
      id: 'r2-4-1-example-14',
      type: 'example',
      title: 'Eksempel 14: Praktisk anvendelse - hjul',
      problem: `Et hjul med radius 30 cm roterer med vinkelhastighet $\\omega = 2$ rad/s.
a) Hvor langt beveger et punkt på kanten av hjulet seg på 5 sekunder?
b) Hvor mange hele omdreininger gjør hjulet på 10 sekunder?`,
      solution: `**Løsning:**

a) På 5 sekunder roterer hjulet vinkelen:
$$v = \\omega \\cdot t = 2 \\cdot 5 = 10 \\text{ radianer}$$

Buelengden (distansen punktet beveger seg) er:
$$s = r \\cdot v = 30 \\cdot 10 = 300 \\text{ cm} = 3 \\text{ m}$$

b) På 10 sekunder roterer hjulet:
$$v = 2 \\cdot 10 = 20 \\text{ radianer}$$

Antall hele omdreininger:
$$n = \\frac{v}{2\\pi} = \\frac{20}{2\\pi} = \\frac{10}{\\pi} \\approx 3{,}18$$

Hjulet gjør **3 hele omdreininger**.`,
    },

    // ========== EKSEMPEL 15 ==========
    {
      id: 'r2-4-1-example-15',
      type: 'example',
      title: 'Eksempel 15: Kombinert oppgave',
      problem: `En sirkelsektor har buelengde $s = 12$ cm og areal $A = 36$ cm$^2$. Finn radius og sentralvinkel.`,
      solution: `**Løsning:**

Vi har to likninger:
- $s = rv$, altså $12 = rv$
- $A = \\frac{1}{2}r^2v$, altså $36 = \\frac{1}{2}r^2v$

Fra den alternative arealformelen $A = \\frac{1}{2}rs$:
$$36 = \\frac{1}{2} \\cdot r \\cdot 12 = 6r$$
$$r = 6 \\text{ cm}$$

Nå kan vi finne vinkelen fra $s = rv$:
$$12 = 6v$$
$$v = 2 \\text{ radianer}$$

**Svar:** Radius er 6 cm og sentralvinkelen er 2 radianer (ca. $114{,}6°$).`,
    },

    // ========== OPPGAVE 11 ==========
    {
      id: 'r2-4-1-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-11',
        number: '4.1.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Kombinerte oppgaver med buelengde og sektorareal.',
        subTasks: [
          { label: 'a', task: 'En sektor har buelengde $s = 8$ cm og areal $A = 24$ cm$^2$. Finn $r$ og $v$.', solution: 'Fra $A = \\frac{1}{2}rs$: $24 = \\frac{1}{2} \\cdot r \\cdot 8 = 4r$, så $r = 6$ cm. Fra $s = rv$: $8 = 6v$, så $v = \\frac{4}{3}$ rad.' },
          { label: 'b', task: 'En sektor har buelengde $s = 10$ cm og radius $r = 4$ cm. Finn arealet.', solution: '$A = \\frac{1}{2}rs = \\frac{1}{2} \\cdot 4 \\cdot 10 = 20$ cm$^2$' },
          { label: 'c', task: 'En sektor har areal $A = 50$ cm$^2$ og vinkel $v = 2$ rad. Finn radius og buelengde.', solution: 'Fra $A = \\frac{1}{2}r^2v$: $50 = r^2$, så $r = \\sqrt{50} = 5\\sqrt{2}$ cm. $s = rv = 5\\sqrt{2} \\cdot 2 = 10\\sqrt{2}$ cm.' },
        ],
        hints: ['Bruk formlene $s = rv$, $A = \\frac{1}{2}r^2v$ og $A = \\frac{1}{2}rs$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 12 ==========
    {
      id: 'r2-4-1-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-12',
        number: '4.1.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Praktiske anvendelser.',
        subTasks: [
          { label: 'a', task: 'En pendel med lengde 50 cm svinger gjennom en vinkel på $\\frac{\\pi}{6}$ rad. Hvor lang er banen pendelspissen beskriver?', solution: '$s = 50 \\cdot \\frac{\\pi}{6} = \\frac{25\\pi}{3}$ cm $\\approx 26{,}2$ cm' },
          { label: 'b', task: 'Et pariserhjul med radius 40 m roterer $\\frac{3\\pi}{4}$ radianer. Hvor langt har en passasjer beveget seg langs kanten?', solution: '$s = 40 \\cdot \\frac{3\\pi}{4} = 30\\pi$ m $\\approx 94{,}2$ m' },
          { label: 'c', task: 'En pizzabit har form som en sirkelsektor med radius 15 cm og vinkel $\\frac{\\pi}{4}$. Finn arealet av pizzabiten.', solution: '$A = \\frac{1}{2} \\cdot 225 \\cdot \\frac{\\pi}{4} = \\frac{225\\pi}{8}$ cm$^2$ $\\approx 88{,}4$ cm$^2$' },
        ],
        hints: ['Bruk formlene for buelengde og sektorareal'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 13 ==========
    {
      id: 'r2-4-1-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-13',
        number: '4.1.13',
        type: 'classic',
        difficulty: 'medium',
        task: 'Regn ut uten kalkulator.',
        subTasks: [
          { label: 'a', task: '$\\sin^2\\frac{\\pi}{4} + \\cos^2\\frac{\\pi}{4}$', solution: '$\\left(\\frac{\\sqrt{2}}{2}\\right)^2 + \\left(\\frac{\\sqrt{2}}{2}\\right)^2 = \\frac{1}{2} + \\frac{1}{2} = 1$' },
          { label: 'b', task: '$2\\sin\\frac{\\pi}{6}\\cos\\frac{\\pi}{6}$', solution: '$2 \\cdot \\frac{1}{2} \\cdot \\frac{\\sqrt{3}}{2} = \\frac{\\sqrt{3}}{2}$ (som er lik $\\sin\\frac{\\pi}{3}$)' },
          { label: 'c', task: '$\\cos^2\\frac{\\pi}{3} - \\sin^2\\frac{\\pi}{3}$', solution: '$\\frac{1}{4} - \\frac{3}{4} = -\\frac{1}{2}$ (som er lik $\\cos\\frac{2\\pi}{3}$)' },
          { label: 'd', task: '$\\sin\\frac{\\pi}{3}\\cos\\frac{\\pi}{6} + \\cos\\frac{\\pi}{3}\\sin\\frac{\\pi}{6}$', solution: '$\\frac{\\sqrt{3}}{2} \\cdot \\frac{\\sqrt{3}}{2} + \\frac{1}{2} \\cdot \\frac{1}{2} = \\frac{3}{4} + \\frac{1}{4} = 1$' },
        ],
        hints: ['Bruk de eksakte verdiene for standardvinklene'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 14 ==========
    {
      id: 'r2-4-1-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-14',
        number: '4.1.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfordrende oppgaver.',
        subTasks: [
          { label: 'a', task: 'Vis at $1$ radian $\\approx 57{,}3°$ ved å beregne $\\frac{180}{\\pi}$.', solution: '$\\frac{180}{\\pi} = \\frac{180}{3{,}14159...} \\approx 57{,}296°$' },
          { label: 'b', task: 'Finn alle vinkler $v \\in [0, 2\\pi)$ slik at $\\sin v = \\frac{1}{2}$.', solution: '$\\sin v = \\frac{1}{2}$ for $v = \\frac{\\pi}{6}$ (første kvadrant) og $v = \\pi - \\frac{\\pi}{6} = \\frac{5\\pi}{6}$ (andre kvadrant)' },
          { label: 'c', task: 'Finn alle vinkler $v \\in [0, 2\\pi)$ slik at $\\cos v = -\\frac{\\sqrt{2}}{2}$.', solution: '$\\cos v = -\\frac{\\sqrt{2}}{2}$ for $v = \\pi - \\frac{\\pi}{4} = \\frac{3\\pi}{4}$ og $v = \\pi + \\frac{\\pi}{4} = \\frac{5\\pi}{4}$' },
        ],
        hints: ['Bruk symmetriegenskapene til sinus og cosinus i ulike kvadranter'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 15 ==========
    {
      id: 'r2-4-1-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-4-1-ex-15',
        number: '4.1.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Tekstoppgaver med radianer.',
        subTasks: [
          { label: 'a', task: 'Jordas radius ved ekvator er ca. 6378 km. Hvor lang er en breddegradslinje ved ekvator som dekker $15°$?', solution: 'Først: $15° = \\frac{\\pi}{12}$ rad. $s = 6378 \\cdot \\frac{\\pi}{12} = \\frac{6378\\pi}{12} \\approx 1669$ km' },
          { label: 'b', task: 'En CD-plate har indre radius 2{,}3 cm og ytre radius 5{,}8 cm. Finn arealet av "ringen" av musikk mellom disse radiene for en sektor på $\\frac{\\pi}{2}$.', solution: 'Areal av stor sektor: $A_1 = \\frac{1}{2} \\cdot 5{,}8^2 \\cdot \\frac{\\pi}{2} = \\frac{33{,}64\\pi}{4}$. Areal av liten sektor: $A_2 = \\frac{1}{2} \\cdot 2{,}3^2 \\cdot \\frac{\\pi}{2} = \\frac{5{,}29\\pi}{4}$. Differanse: $\\frac{(33{,}64 - 5{,}29)\\pi}{4} = \\frac{28{,}35\\pi}{4} \\approx 22{,}3$ cm$^2$' },
        ],
        hints: ['Bruk formlene for buelengde og sektorareal med riktige enheter'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-4-1-oppsummering',
      type: 'text',
      content: `## Oppsummering

I dette kapitlet har du lært:

**Radianer:**
- En radian er vinkelen som tilsvarer en bue med lengde lik radiusen
- $180° = \\pi$ radianer, $360° = 2\\pi$ radianer
- Omregning: $v_{\\text{rad}} = v_{\\text{grad}} \\cdot \\frac{\\pi}{180}$

**Buelengde og sektorareal:**
- Buelengde: $s = rv$ (når $v$ er i radianer)
- Sektorareal: $A = \\frac{1}{2}r^2v$ eller $A = \\frac{1}{2}rs$

**Enhetssirkelen:**
- Sirkel med radius 1 og sentrum i origo
- Punktet for vinkel $v$ er $(\\cos v, \\sin v)$
- Viktige verdier bør pugges for standardvinklene

**Viktige vinkler å huske:**

$\\frac{\\pi}{6} = 30°$, $\\frac{\\pi}{4} = 45°$, $\\frac{\\pi}{3} = 60°$, $\\frac{\\pi}{2} = 90°$, $\\pi = 180°$, $2\\pi = 360°$`,
    },

  ],

  // ========== ALLE OPPGAVER SAMLET ==========
  exercises: [
    {
      id: 'r2-4-1-ex-1',
      number: '4.1.1',
      type: 'classic',
      difficulty: 'lett',
      task: 'Skriv om fra grader til radianer. Gi eksakt svar.',
      subTasks: [
        { label: 'a', task: '$180°$', solution: '$180° = \\pi$' },
        { label: 'b', task: '$270°$', solution: '$270° = \\frac{3\\pi}{2}$' },
        { label: 'c', task: '$150°$', solution: '$150° = \\frac{5\\pi}{6}$' },
        { label: 'd', task: '$225°$', solution: '$225° = \\frac{5\\pi}{4}$' },
        { label: 'e', task: '$315°$', solution: '$315° = \\frac{7\\pi}{4}$' },
        { label: 'f', task: '$540°$', solution: '$540° = 3\\pi$' },
      ],
      hints: ['Bruk formelen $v_{\\text{rad}} = v_{\\text{grad}} \\cdot \\frac{\\pi}{180}$ og forkort brøken'],
      topic: 'omregning',
    },
    {
      id: 'r2-4-1-ex-2',
      number: '4.1.2',
      type: 'classic',
      difficulty: 'lett',
      task: 'Skriv om fra radianer til grader.',
      subTasks: [
        { label: 'a', task: '$\\frac{\\pi}{3}$', solution: '$60°$' },
        { label: 'b', task: '$\\frac{2\\pi}{3}$', solution: '$120°$' },
        { label: 'c', task: '$\\frac{5\\pi}{4}$', solution: '$225°$' },
        { label: 'd', task: '$\\frac{11\\pi}{6}$', solution: '$330°$' },
        { label: 'e', task: '$\\frac{4\\pi}{3}$', solution: '$240°$' },
        { label: 'f', task: '$5\\pi$', solution: '$900°$' },
      ],
      hints: ['Ganger du radianer med $\\frac{180}{\\pi}$, får du grader'],
      topic: 'omregning',
    },
    {
      id: 'r2-4-1-ex-3',
      number: '4.1.3',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn buelengden $s$ i hver sirkel. Gi eksakt svar.',
      subTasks: [
        { label: 'a', task: '$r = 6$ cm, $v = \\frac{\\pi}{2}$', solution: '$s = 3\\pi$ cm' },
        { label: 'b', task: '$r = 4$ cm, $v = \\frac{2\\pi}{3}$', solution: '$s = \\frac{8\\pi}{3}$ cm' },
        { label: 'c', task: '$r = 9$ cm, $v = \\frac{\\pi}{6}$', solution: '$s = \\frac{3\\pi}{2}$ cm' },
        { label: 'd', task: '$r = 12$ cm, $v = \\frac{5\\pi}{4}$', solution: '$s = 15\\pi$ cm' },
      ],
      hints: ['Bruk formelen $s = rv$'],
      topic: 'buelengde',
    },
    {
      id: 'r2-4-1-ex-4',
      number: '4.1.4',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn buelengden $s$ når vinkelen er oppgitt i grader.',
      subTasks: [
        { label: 'a', task: '$r = 5$ cm, $v = 90°$', solution: '$s = \\frac{5\\pi}{2}$ cm' },
        { label: 'b', task: '$r = 8$ cm, $v = 45°$', solution: '$s = 2\\pi$ cm' },
        { label: 'c', task: '$r = 3$ cm, $v = 120°$', solution: '$s = 2\\pi$ cm' },
        { label: 'd', task: '$r = 10$ cm, $v = 36°$', solution: '$s = 2\\pi$ cm' },
      ],
      hints: ['Regn først om vinkelen til radianer, deretter bruk $s = rv$'],
      topic: 'buelengde',
    },
    {
      id: 'r2-4-1-ex-5',
      number: '4.1.5',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn arealet av sirkelsektoren. Gi eksakt svar.',
      subTasks: [
        { label: 'a', task: '$r = 4$ cm, $v = \\frac{\\pi}{2}$', solution: '$A = 4\\pi$ cm$^2$' },
        { label: 'b', task: '$r = 6$ cm, $v = \\frac{\\pi}{4}$', solution: '$A = \\frac{9\\pi}{2}$ cm$^2$' },
        { label: 'c', task: '$r = 5$ cm, $v = \\frac{2\\pi}{5}$', solution: '$A = 5\\pi$ cm$^2$' },
        { label: 'd', task: '$r = 3$ cm, $v = \\pi$', solution: '$A = \\frac{9\\pi}{2}$ cm$^2$' },
      ],
      hints: ['Bruk formelen $A = \\frac{1}{2}r^2 v$'],
      topic: 'sektorareal',
    },
    {
      id: 'r2-4-1-ex-6',
      number: '4.1.6',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn arealet av sirkelsektoren når vinkelen er i grader.',
      subTasks: [
        { label: 'a', task: '$r = 8$ cm, $v = 60°$', solution: '$A = \\frac{32\\pi}{3}$ cm$^2$' },
        { label: 'b', task: '$r = 12$ cm, $v = 30°$', solution: '$A = 12\\pi$ cm$^2$' },
        { label: 'c', task: '$r = 9$ cm, $v = 40°$', solution: '$A = 9\\pi$ cm$^2$' },
      ],
      hints: ['Regn først om til radianer, deretter bruk $A = \\frac{1}{2}r^2 v$'],
      topic: 'sektorareal',
    },
    {
      id: 'r2-4-1-ex-7',
      number: '4.1.7',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn den ukjente størrelsen.',
      subTasks: [
        { label: 'a', task: 'Radius: $r = 10$ cm, Areal: $A = 25\\pi$ cm$^2$. Finn vinkelen $v$ i radianer.', solution: '$v = \\frac{\\pi}{2}$' },
        { label: 'b', task: 'Vinkel: $v = \\frac{\\pi}{3}$, Areal: $A = 6\\pi$ cm$^2$. Finn $r$.', solution: '$r = 6$ cm' },
        { label: 'c', task: 'Buelengde: $s = 4\\pi$ cm, Radius: $r = 8$ cm. Finn arealet av sektoren.', solution: '$A = 16\\pi$ cm$^2$' },
      ],
      hints: ['Bruk $A = \\frac{1}{2}r^2 v$ og $s = rv$ og løs for den ukjente'],
      topic: 'sektorareal',
    },
    {
      id: 'r2-4-1-ex-8',
      number: '4.1.8',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn eksakt verdi av følgende trigonometriske uttrykk.',
      subTasks: [
        { label: 'a', task: '$\\sin\\frac{\\pi}{6}$', solution: '$\\frac{1}{2}$' },
        { label: 'b', task: '$\\cos\\frac{\\pi}{3}$', solution: '$\\frac{1}{2}$' },
        { label: 'c', task: '$\\sin\\frac{\\pi}{4}$', solution: '$\\frac{\\sqrt{2}}{2}$' },
        { label: 'd', task: '$\\cos\\pi$', solution: '$-1$' },
        { label: 'e', task: '$\\sin\\frac{3\\pi}{2}$', solution: '$-1$' },
      ],
      hints: ['Bruk enhetssirkelen og de viktige punktene'],
      topic: 'enhetssirkelen',
    },
    {
      id: 'r2-4-1-ex-9',
      number: '4.1.9',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn eksakt verdi av følgende. Bruk symmetri i enhetssirkelen.',
      subTasks: [
        { label: 'a', task: '$\\cos\\frac{3\\pi}{4}$', solution: '$-\\frac{\\sqrt{2}}{2}$' },
        { label: 'b', task: '$\\sin\\frac{5\\pi}{4}$', solution: '$-\\frac{\\sqrt{2}}{2}$' },
        { label: 'c', task: '$\\cos\\frac{11\\pi}{6}$', solution: '$\\frac{\\sqrt{3}}{2}$' },
        { label: 'd', task: '$\\sin\\frac{7\\pi}{6}$', solution: '$-\\frac{1}{2}$' },
      ],
      hints: ['Skriv vinkelen som $\\pi \\pm$ en standardvinkel eller $2\\pi -$ en standardvinkel'],
      topic: 'enhetssirkelen',
    },
    {
      id: 'r2-4-1-ex-10',
      number: '4.1.10',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn koordinatene til punktet på enhetssirkelen.',
      subTasks: [
        { label: 'a', task: 'Vinkelen $v = \\frac{\\pi}{3}$', solution: '$\\left(\\frac{1}{2}, \\frac{\\sqrt{3}}{2}\\right)$' },
        { label: 'b', task: 'Vinkelen $v = \\frac{5\\pi}{6}$', solution: '$\\left(-\\frac{\\sqrt{3}}{2}, \\frac{1}{2}\\right)$' },
        { label: 'c', task: 'Vinkelen $v = \\frac{5\\pi}{3}$', solution: '$\\left(\\frac{1}{2}, -\\frac{\\sqrt{3}}{2}\\right)$' },
      ],
      hints: ['Punktet på enhetssirkelen for vinkel $v$ er $(\\cos v, \\sin v)$'],
      topic: 'enhetssirkelen',
    },
    {
      id: 'r2-4-1-ex-11',
      number: '4.1.11',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Kombinerte oppgaver med buelengde og sektorareal.',
      subTasks: [
        { label: 'a', task: 'En sektor har buelengde $s = 8$ cm og areal $A = 24$ cm$^2$. Finn $r$ og $v$.', solution: '$r = 6$ cm, $v = \\frac{4}{3}$ rad' },
        { label: 'b', task: 'En sektor har buelengde $s = 10$ cm og radius $r = 4$ cm. Finn arealet.', solution: '$A = 20$ cm$^2$' },
        { label: 'c', task: 'En sektor har areal $A = 50$ cm$^2$ og vinkel $v = 2$ rad. Finn radius og buelengde.', solution: '$r = 5\\sqrt{2}$ cm, $s = 10\\sqrt{2}$ cm' },
      ],
      hints: ['Bruk formlene $s = rv$, $A = \\frac{1}{2}r^2v$ og $A = \\frac{1}{2}rs$'],
      topic: 'kombinert',
    },
    {
      id: 'r2-4-1-ex-12',
      number: '4.1.12',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Praktiske anvendelser.',
      subTasks: [
        { label: 'a', task: 'En pendel med lengde 50 cm svinger gjennom en vinkel på $\\frac{\\pi}{6}$ rad. Hvor lang er banen pendelspissen beskriver?', solution: '$\\frac{25\\pi}{3}$ cm $\\approx 26{,}2$ cm' },
        { label: 'b', task: 'Et pariserhjul med radius 40 m roterer $\\frac{3\\pi}{4}$ radianer. Hvor langt har en passasjer beveget seg langs kanten?', solution: '$30\\pi$ m $\\approx 94{,}2$ m' },
        { label: 'c', task: 'En pizzabit har form som en sirkelsektor med radius 15 cm og vinkel $\\frac{\\pi}{4}$. Finn arealet av pizzabiten.', solution: '$\\frac{225\\pi}{8}$ cm$^2$ $\\approx 88{,}4$ cm$^2$' },
      ],
      hints: ['Bruk formlene for buelengde og sektorareal'],
      topic: 'anvendelser',
    },
    {
      id: 'r2-4-1-ex-13',
      number: '4.1.13',
      type: 'classic',
      difficulty: 'medium',
      task: 'Regn ut uten kalkulator.',
      subTasks: [
        { label: 'a', task: '$\\sin^2\\frac{\\pi}{4} + \\cos^2\\frac{\\pi}{4}$', solution: '$1$' },
        { label: 'b', task: '$2\\sin\\frac{\\pi}{6}\\cos\\frac{\\pi}{6}$', solution: '$\\frac{\\sqrt{3}}{2}$' },
        { label: 'c', task: '$\\cos^2\\frac{\\pi}{3} - \\sin^2\\frac{\\pi}{3}$', solution: '$-\\frac{1}{2}$' },
        { label: 'd', task: '$\\sin\\frac{\\pi}{3}\\cos\\frac{\\pi}{6} + \\cos\\frac{\\pi}{3}\\sin\\frac{\\pi}{6}$', solution: '$1$' },
      ],
      hints: ['Bruk de eksakte verdiene for standardvinklene'],
      topic: 'trigonometri',
    },
    {
      id: 'r2-4-1-ex-14',
      number: '4.1.14',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Utfordrende oppgaver.',
      subTasks: [
        { label: 'a', task: 'Vis at $1$ radian $\\approx 57{,}3°$ ved å beregne $\\frac{180}{\\pi}$.', solution: '$\\frac{180}{\\pi} \\approx 57{,}296°$' },
        { label: 'b', task: 'Finn alle vinkler $v \\in [0, 2\\pi)$ slik at $\\sin v = \\frac{1}{2}$.', solution: '$v = \\frac{\\pi}{6}$ og $v = \\frac{5\\pi}{6}$' },
        { label: 'c', task: 'Finn alle vinkler $v \\in [0, 2\\pi)$ slik at $\\cos v = -\\frac{\\sqrt{2}}{2}$.', solution: '$v = \\frac{3\\pi}{4}$ og $v = \\frac{5\\pi}{4}$' },
      ],
      hints: ['Bruk symmetriegenskapene til sinus og cosinus i ulike kvadranter'],
      topic: 'utforskning',
    },
    {
      id: 'r2-4-1-ex-15',
      number: '4.1.15',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Tekstoppgaver med radianer.',
      subTasks: [
        { label: 'a', task: 'Jordas radius ved ekvator er ca. 6378 km. Hvor lang er en breddegradslinje ved ekvator som dekker $15°$?', solution: '$\\frac{6378\\pi}{12} \\approx 1669$ km' },
        { label: 'b', task: 'En CD-plate har indre radius 2{,}3 cm og ytre radius 5{,}8 cm. Finn arealet av "ringen" av musikk mellom disse radiene for en sektor på $\\frac{\\pi}{2}$.', solution: '$\\frac{28{,}35\\pi}{4} \\approx 22{,}3$ cm$^2$' },
      ],
      hints: ['Bruk formlene for buelengde og sektorareal med riktige enheter'],
      topic: 'anvendelser',
    },
  ],

  prevChapter: 'r2-3-4',
  nextChapter: 'r2-4-2',
};

export const CHAPTER_R2_4_2: TextbookChapter = {
  id: 'r2-4-2',
  courseId: 'r2',
  chapterNumber: '4.2',
  title: 'Enhetssirkelen og trigonometriske definisjoner',
  description: 'Definisjon av sin, cos og tan for alle vinkler ved hjelp av enhetssirkelen.',
  estimatedMinutes: 50,
  competenceGoals: [
    'utforske eigenskapar ved trigonometriske funksjonar',
    'bruke enhetssirkelen til aa definere trigonometriske verdier for alle vinkler',
    'beherske eksakte verdier for standardvinkler',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-2-intro',
      type: 'text',
      content: `## Fra rettvinklede trekanter til alle vinkler

I tidligere kurs har du laert aa bruke sinus, cosinus og tangens i rettvinklede trekanter. Men hva betyr $\\sin 150°$ eller $\\cos(-45°)$? Disse vinklene passer ikke inn i en rettvinklet trekant!

For aa utvide de trigonometriske funksjonene til **alle vinkler** - positive, negative, og storre enn $90°$ - bruker vi **enhetssirkelen**.

Enhetssirkelen er et av de viktigste verktøyene i matematikk og fysikk, og gir oss en elegant maate aa forsta trigonometri paa.`,
    },
    {
      id: 'r2-4-2-enhetssirkel-bilde',
      type: 'image',
      src: '/images/r1/trigonometri-enhetssirkel.svg',
      alt: 'Enhetssirkelen med sinus og cosinus markert',
      caption: 'Enhetssirkelen - grunnlaget for trigonometriske funksjoner',
    },

    // ========== DEFINISJON: ENHETSSIRKELEN ==========
    {
      id: 'r2-4-2-def-enhetssirkel',
      type: 'definition',
      title: 'Enhetssirkelen',
      content: `**Enhetssirkelen** er sirkelen med sentrum i origo og radius $1$.

Ligningen for enhetssirkelen er:
$$x^2 + y^2 = 1$$

Ethvert punkt $P$ paa enhetssirkelen kan skrives som $P = (x, y)$ der $x^2 + y^2 = 1$.`,
    },
    {
      id: 'r2-4-2-enhetssirkel-bilde',
      type: 'image',
      src: '/images/trigonometry/enhetssirkel.svg',
      alt: 'Enhetssirkelen med punkt P, vinkel v, og koordinatene (cos v, sin v)',
      caption: 'Enhetssirkelen definerer sinus og cosinus for alle vinkler',
    },

    {
      id: 'r2-4-2-text-1',
      type: 'text',
      content: `### Vinkler i enhetssirkelen

Vi maler vinkler fra den positive $x$-aksen:
- **Positive vinkler** males mot klokken (mot urviseren)
- **Negative vinkler** males med klokken

En vinkel $v$ bestemmer et punkt $P$ paa enhetssirkelen ved aa starte fra punktet $(1, 0)$ og bevege seg langs sirkelen.`,
    },

    // ========== DEFINISJON: TRIGONOMETRISKE FUNKSJONER ==========
    {
      id: 'r2-4-2-def-trig',
      type: 'definition',
      title: 'Sinus, cosinus og tangens for alle vinkler',
      content: `La $v$ være en vinkel, og la $P = (x, y)$ være det tilsvarende punktet paa enhetssirkelen.

Da definerer vi:
$$\\cos v = x$$
$$\\sin v = y$$
$$\\tan v = \\frac{\\sin v}{\\cos v} = \\frac{y}{x}, \\quad \\cos v \\neq 0$$

Med andre ord:
- **Cosinus** er $x$-koordinaten til punktet paa enhetssirkelen
- **Sinus** er $y$-koordinaten til punktet paa enhetssirkelen
- **Tangens** er forholdet mellom $y$ og $x$`,
    },

    // ========== EKSEMPEL 1 ==========
    {
      id: 'r2-4-2-example-1',
      type: 'example',
      title: 'Eksempel 1: Trigonometriske verdier for $0°$, $90°$, $180°$, $270°$',
      problem: 'Finn $\\sin v$ og $\\cos v$ for $v = 0°$, $90°$, $180°$ og $270°$.',
      solution: `Vi finner punktene paa enhetssirkelen:

**For $v = 0°$:** Punktet er $(1, 0)$
$$\\cos 0° = 1, \\quad \\sin 0° = 0$$

**For $v = 90°$:** Punktet er $(0, 1)$
$$\\cos 90° = 0, \\quad \\sin 90° = 1$$

**For $v = 180°$:** Punktet er $(-1, 0)$
$$\\cos 180° = -1, \\quad \\sin 180° = 0$$

**For $v = 270°$:** Punktet er $(0, -1)$
$$\\cos 270° = 0, \\quad \\sin 270° = -1$$`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-4-2-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\tan v$ for $v = 0°$, $45°$, $180°$ og $270°$. For hvilke vinkler er tangens ikke definert?',
        solution: `$\\tan 0° = \\frac{0}{1} = 0$

$\\tan 45° = \\frac{\\sin 45°}{\\cos 45°} = \\frac{\\frac{\\sqrt{2}}{2}}{\\frac{\\sqrt{2}}{2}} = 1$

$\\tan 180° = \\frac{0}{-1} = 0$

$\\tan 270°$ er ikke definert siden $\\cos 270° = 0$.

Generelt er $\\tan v$ ikke definert naar $\\cos v = 0$, dvs. for $v = 90° + n \\cdot 180°$ der $n$ er et heltall.`,
        hints: ['Husk at $\\tan v = \\frac{\\sin v}{\\cos v}$.', 'Tangens er ikke definert naar nevneren er null.'],
      },
    },

    // ========== RADIANER ==========
    {
      id: 'r2-4-2-text-radianer',
      type: 'text',
      content: `### Radianer

I R2 bruker vi ofte **radianer** i stedet for grader. Sammenhengen er:
$$180° = \\pi \\text{ radianer}$$

Viktige omregninger:
- $90° = \\frac{\\pi}{2}$
- $60° = \\frac{\\pi}{3}$
- $45° = \\frac{\\pi}{4}$
- $30° = \\frac{\\pi}{6}$

**Omregningsformler:**
$$\\text{Radianer} = \\text{Grader} \\cdot \\frac{\\pi}{180}$$
$$\\text{Grader} = \\text{Radianer} \\cdot \\frac{180}{\\pi}$$`,
    },

    // ========== EKSEMPEL 2 ==========
    {
      id: 'r2-4-2-example-2',
      type: 'example',
      title: 'Eksempel 2: Omregning mellom grader og radianer',
      problem: 'a) Gjor om $120°$ til radianer.\nb) Gjor om $\\frac{5\\pi}{4}$ radianer til grader.',
      solution: `**a)** $120° = 120 \\cdot \\frac{\\pi}{180} = \\frac{120\\pi}{180} = \\frac{2\\pi}{3}$

**b)** $\\frac{5\\pi}{4} = \\frac{5\\pi}{4} \\cdot \\frac{180}{\\pi} = \\frac{5 \\cdot 180}{4} = 225°$`,
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-4-2-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'a) Gjor om $150°$ og $210°$ til radianer.\nb) Gjor om $\\frac{3\\pi}{4}$ og $\\frac{7\\pi}{6}$ til grader.',
        solution: `a) $150° = \\frac{5\\pi}{6}$, $210° = \\frac{7\\pi}{6}$

b) $\\frac{3\\pi}{4} = 135°$, $\\frac{7\\pi}{6} = 210°$`,
        hints: ['Bruk at $180° = \\pi$.'],
      },
    },

    // ========== EKSAKTE VERDIER ==========
    {
      id: 'r2-4-2-text-eksakte',
      type: 'text',
      content: `## Eksakte verdier for standardvinkler

For visse vinkler kan vi finne **eksakte verdier** for sinus, cosinus og tangens. Disse vinklene er sa viktige at du bor kunne dem utenat.`,
    },

    // ========== TEOREM: EKSAKTE VERDIER ==========
    {
      id: 'r2-4-2-theorem-eksakte',
      type: 'theorem',
      title: 'Eksakte verdier i forste kvadrant',
      content: `| Vinkel | $0°$ | $30°$ | $45°$ | $60°$ | $90°$ |
|--------|------|-------|-------|-------|-------|
| Radianer | $0$ | $\\frac{\\pi}{6}$ | $\\frac{\\pi}{4}$ | $\\frac{\\pi}{3}$ | $\\frac{\\pi}{2}$ |
| $\\sin v$ | $0$ | $\\frac{1}{2}$ | $\\frac{\\sqrt{2}}{2}$ | $\\frac{\\sqrt{3}}{2}$ | $1$ |
| $\\cos v$ | $1$ | $\\frac{\\sqrt{3}}{2}$ | $\\frac{\\sqrt{2}}{2}$ | $\\frac{1}{2}$ | $0$ |
| $\\tan v$ | $0$ | $\\frac{1}{\\sqrt{3}}$ | $1$ | $\\sqrt{3}$ | udef. |

**Huskeregel for sinus:** $\\frac{\\sqrt{0}}{2}, \\frac{\\sqrt{1}}{2}, \\frac{\\sqrt{2}}{2}, \\frac{\\sqrt{3}}{2}, \\frac{\\sqrt{4}}{2}$`,
    },

    // ========== EKSEMPEL 3 ==========
    {
      id: 'r2-4-2-example-3',
      type: 'example',
      title: 'Eksempel 3: Verifisere verdier fra tabellen',
      problem: 'Vis at $\\sin 45° = \\frac{\\sqrt{2}}{2}$ ved hjelp av en rettvinklet trekant.',
      solution: `I en rettvinklet trekant med to $45°$-vinkler er de to katetene like lange.

La katetene være $1$. Da er hypotenusen (etter Pytagoras):
$$h = \\sqrt{1^2 + 1^2} = \\sqrt{2}$$

Dermed:
$$\\sin 45° = \\frac{\\text{motstaaende katet}}{\\text{hypotenus}} = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$$`,
    },

    // ========== EKSEMPEL 4 ==========
    {
      id: 'r2-4-2-example-4',
      type: 'example',
      title: 'Eksempel 4: Verdier for $30°$ og $60°$',
      problem: 'Forklar hvorfor $\\sin 30° = \\frac{1}{2}$ og $\\cos 30° = \\frac{\\sqrt{3}}{2}$.',
      solution: `Vi starter med en likesidet trekant med sidelengde $2$. Alle vinkler er $60°$.

Naar vi deler trekanten i to med en høyde, faar vi en rettvinklet trekant med:
- Hypotenus = $2$
- En katet = $1$ (halve grunnlinjen)
- Den andre kateten = $\\sqrt{2^2 - 1^2} = \\sqrt{3}$ (høyden)

For $30°$-vinkelen:
$$\\sin 30° = \\frac{\\text{motstaaende}}{\\text{hypotenus}} = \\frac{1}{2}$$
$$\\cos 30° = \\frac{\\text{hosliggende}}{\\text{hypotenus}} = \\frac{\\sqrt{3}}{2}$$

For $60°$-vinkelen blir det motsatt:
$$\\sin 60° = \\frac{\\sqrt{3}}{2}, \\quad \\cos 60° = \\frac{1}{2}$$`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-4-2-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut uten kalkulator: a) $\\sin 30° + \\cos 60°$ b) $\\sin^2 45° + \\cos^2 45°$ c) $\\tan 60° \\cdot \\tan 30°$',
        solution: `a) $\\sin 30° + \\cos 60° = \\frac{1}{2} + \\frac{1}{2} = 1$

b) $\\sin^2 45° + \\cos^2 45° = \\left(\\frac{\\sqrt{2}}{2}\\right)^2 + \\left(\\frac{\\sqrt{2}}{2}\\right)^2 = \\frac{1}{2} + \\frac{1}{2} = 1$

c) $\\tan 60° \\cdot \\tan 30° = \\sqrt{3} \\cdot \\frac{1}{\\sqrt{3}} = 1$`,
        hints: ['Bruk tabellen med eksakte verdier.'],
      },
    },

    // ========== DE FIRE KVADRANTENE ==========
    {
      id: 'r2-4-2-text-kvadranter',
      type: 'text',
      content: `## Fortegn i de fire kvadrantene

Enhetssirkelen deles inn i fire **kvadranter**:

- **1. kvadrant:** $0° < v < 90°$ (begge koordinater positive)
- **2. kvadrant:** $90° < v < 180°$ ($x < 0$, $y > 0$)
- **3. kvadrant:** $180° < v < 270°$ (begge koordinater negative)
- **4. kvadrant:** $270° < v < 360°$ ($x > 0$, $y < 0$)`,
    },

    // ========== TEOREM: FORTEGN ==========
    {
      id: 'r2-4-2-theorem-fortegn',
      type: 'theorem',
      title: 'Fortegn for de trigonometriske funksjonene',
      content: `| Kvadrant | $\\cos v$ | $\\sin v$ | $\\tan v$ |
|----------|----------|----------|----------|
| 1. ($0° - 90°$) | $+$ | $+$ | $+$ |
| 2. ($90° - 180°$) | $-$ | $+$ | $-$ |
| 3. ($180° - 270°$) | $-$ | $-$ | $+$ |
| 4. ($270° - 360°$) | $+$ | $-$ | $-$ |

**Huskeregel (CAST):** Start i 4. kvadrant og gaa mot klokken:
- **C**osinus positiv i 4. kvadrant
- **A**lle positive i 1. kvadrant
- **S**inus positiv i 2. kvadrant
- **T**angens positiv i 3. kvadrant`,
    },

    // ========== EKSEMPEL 5 ==========
    {
      id: 'r2-4-2-example-5',
      type: 'example',
      title: 'Eksempel 5: Bestemme fortegn',
      problem: 'Avgjor fortegnet til: a) $\\sin 150°$ b) $\\cos 200°$ c) $\\tan 320°$',
      solution: `**a) $\\sin 150°$:**
$150°$ ligger i 2. kvadrant (mellom $90°$ og $180°$).
I 2. kvadrant er $y > 0$, saa $\\sin 150° > 0$ (positiv).

**b) $\\cos 200°$:**
$200°$ ligger i 3. kvadrant (mellom $180°$ og $270°$).
I 3. kvadrant er $x < 0$, saa $\\cos 200° < 0$ (negativ).

**c) $\\tan 320°$:**
$320°$ ligger i 4. kvadrant (mellom $270°$ og $360°$).
I 4. kvadrant er $x > 0$ og $y < 0$, saa $\\tan 320° = \\frac{y}{x} < 0$ (negativ).`,
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-4-2-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'lett',
        task: 'Avgjor fortegnet til: a) $\\cos 120°$ b) $\\sin 250°$ c) $\\tan 100°$ d) $\\sin(-30°)$',
        solution: `a) $\\cos 120°$ er negativ (2. kvadrant)
b) $\\sin 250°$ er negativ (3. kvadrant)
c) $\\tan 100°$ er negativ (2. kvadrant)
d) $\\sin(-30°)$ er negativ (4. kvadrant, siden $-30°$ tilsvarer $330°$)`,
        hints: ['Bestem hvilken kvadrant vinkelen ligger i.', 'For negative vinkler: legg til $360°$.'],
      },
    },

    // ========== REFERANSEVINKLER ==========
    {
      id: 'r2-4-2-text-referanse',
      type: 'text',
      content: `## Referansevinkler

For aa finne eksakte verdier for vinkler utenfor forste kvadrant bruker vi **referansevinkler**.`,
    },

    // ========== DEFINISJON: REFERANSEVINKEL ==========
    {
      id: 'r2-4-2-def-referanse',
      type: 'definition',
      title: 'Referansevinkel',
      content: `**Referansevinkelen** $v_r$ til en vinkel $v$ er den spisse vinkelen mellom vinkelens endepunkt paa enhetssirkelen og $x$-aksen.

Referansevinkelen er alltid mellom $0°$ og $90°$.

**Formler:**
- 1. kvadrant: $v_r = v$
- 2. kvadrant: $v_r = 180° - v$
- 3. kvadrant: $v_r = v - 180°$
- 4. kvadrant: $v_r = 360° - v$`,
    },

    // ========== EKSEMPEL 6 ==========
    {
      id: 'r2-4-2-example-6',
      type: 'example',
      title: 'Eksempel 6: Finne referansevinkler',
      problem: 'Finn referansevinkelen til: a) $135°$ b) $240°$ c) $315°$',
      solution: `**a) $135°$** ligger i 2. kvadrant:
$$v_r = 180° - 135° = 45°$$

**b) $240°$** ligger i 3. kvadrant:
$$v_r = 240° - 180° = 60°$$

**c) $315°$** ligger i 4. kvadrant:
$$v_r = 360° - 315° = 45°$$`,
    },

    // ========== TEOREM: BRUK AV REFERANSEVINKLER ==========
    {
      id: 'r2-4-2-theorem-referanse',
      type: 'theorem',
      title: 'Bruk av referansevinkler',
      content: `De trigonometriske verdiene for en vinkel $v$ har samme **absoluttverdi** som for referansevinkelen $v_r$.

Fortegnet bestemmes av hvilken kvadrant $v$ ligger i.

$$|\\sin v| = \\sin v_r$$
$$|\\cos v| = \\cos v_r$$
$$|\\tan v| = \\tan v_r$$`,
    },

    // ========== EKSEMPEL 7 ==========
    {
      id: 'r2-4-2-example-7',
      type: 'example',
      title: 'Eksempel 7: Eksakte verdier med referansevinkler',
      problem: 'Finn eksakt verdi for $\\sin 150°$.',
      solution: `**Steg 1:** $150°$ ligger i 2. kvadrant.

**Steg 2:** Referansevinkelen er $v_r = 180° - 150° = 30°$.

**Steg 3:** $\\sin 30° = \\frac{1}{2}$

**Steg 4:** I 2. kvadrant er sinus positiv.

**Svar:** $\\sin 150° = +\\frac{1}{2} = \\frac{1}{2}$`,
    },

    // ========== EKSEMPEL 8 ==========
    {
      id: 'r2-4-2-example-8',
      type: 'example',
      title: 'Eksempel 8: Cosinus i 3. kvadrant',
      problem: 'Finn eksakt verdi for $\\cos 240°$.',
      solution: `**Steg 1:** $240°$ ligger i 3. kvadrant.

**Steg 2:** Referansevinkelen er $v_r = 240° - 180° = 60°$.

**Steg 3:** $\\cos 60° = \\frac{1}{2}$

**Steg 4:** I 3. kvadrant er cosinus negativ.

**Svar:** $\\cos 240° = -\\frac{1}{2}$`,
    },

    // ========== EKSEMPEL 9 ==========
    {
      id: 'r2-4-2-example-9',
      type: 'example',
      title: 'Eksempel 9: Tangens i 4. kvadrant',
      problem: 'Finn eksakt verdi for $\\tan 315°$.',
      solution: `**Steg 1:** $315°$ ligger i 4. kvadrant.

**Steg 2:** Referansevinkelen er $v_r = 360° - 315° = 45°$.

**Steg 3:** $\\tan 45° = 1$

**Steg 4:** I 4. kvadrant er tangens negativ (positiv $x$, negativ $y$).

**Svar:** $\\tan 315° = -1$`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-4-2-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn eksakt verdi for: a) $\\sin 120°$ b) $\\cos 225°$ c) $\\tan 300°$',
        solution: `a) $\\sin 120° = \\sin(180° - 60°) = \\sin 60° = \\frac{\\sqrt{3}}{2}$ (positiv i 2. kvadrant)

b) $\\cos 225° = -\\cos 45° = -\\frac{\\sqrt{2}}{2}$ (negativ i 3. kvadrant, referansevinkel $45°$)

c) $\\tan 300° = -\\tan 60° = -\\sqrt{3}$ (negativ i 4. kvadrant, referansevinkel $60°$)`,
        hints: ['Finn forst referansevinkelen.', 'Bestem fortegnet ut fra kvadranten.'],
      },
    },

    // ========== OPPGAVE 6 ==========
    {
      id: 'r2-4-2-ex-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-6',
        number: '6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn eksakt verdi for: a) $\\sin \\frac{2\\pi}{3}$ b) $\\cos \\frac{5\\pi}{4}$ c) $\\tan \\frac{5\\pi}{6}$',
        solution: `a) $\\frac{2\\pi}{3} = 120°$, referansevinkel $60°$. $\\sin \\frac{2\\pi}{3} = \\frac{\\sqrt{3}}{2}$

b) $\\frac{5\\pi}{4} = 225°$, referansevinkel $45°$. $\\cos \\frac{5\\pi}{4} = -\\frac{\\sqrt{2}}{2}$

c) $\\frac{5\\pi}{6} = 150°$, referansevinkel $30°$. $\\tan \\frac{5\\pi}{6} = -\\frac{1}{\\sqrt{3}} = -\\frac{\\sqrt{3}}{3}$`,
        hints: ['Gjor om til grader forst.'],
      },
    },

    // ========== PYTAGOREISK IDENTITET ==========
    {
      id: 'r2-4-2-text-pytagoras',
      type: 'text',
      content: `## Den pytagoreiske identiteten

En av de viktigste sammenhengene i trigonometri følger direkte fra definisjonen paa enhetssirkelen.`,
    },

    // ========== TEOREM: PYTAGOREISK IDENTITET ==========
    {
      id: 'r2-4-2-theorem-pytagoras',
      type: 'theorem',
      title: 'Den pytagoreiske identiteten',
      content: `For alle vinkler $v$ gjelder:

$$\\sin^2 v + \\cos^2 v = 1$$

Denne identiteten kalles ogsaa **grunnidentiteten** i trigonometri.`,
      proof: `**Bevis:**

Et punkt $P$ paa enhetssirkelen har koordinater $(\\cos v, \\sin v)$.

Siden $P$ ligger paa sirkelen $x^2 + y^2 = 1$, faar vi:

$$(\\cos v)^2 + (\\sin v)^2 = 1$$

som gir oss identiteten $\\sin^2 v + \\cos^2 v = 1$.`,
    },

    // ========== EKSEMPEL 10 ==========
    {
      id: 'r2-4-2-example-10',
      type: 'example',
      title: 'Eksempel 10: Finne sin naar cos er kjent',
      problem: 'Gitt at $\\cos v = \\frac{3}{5}$ og $v$ ligger i 4. kvadrant. Finn $\\sin v$.',
      solution: `Vi bruker $\\sin^2 v + \\cos^2 v = 1$:

$$\\sin^2 v + \\left(\\frac{3}{5}\\right)^2 = 1$$
$$\\sin^2 v + \\frac{9}{25} = 1$$
$$\\sin^2 v = 1 - \\frac{9}{25} = \\frac{16}{25}$$
$$\\sin v = \\pm \\frac{4}{5}$$

Siden $v$ ligger i 4. kvadrant, er sinus negativ:
$$\\sin v = -\\frac{4}{5}$$`,
    },

    // ========== EKSEMPEL 11 ==========
    {
      id: 'r2-4-2-example-11',
      type: 'example',
      title: 'Eksempel 11: Finne cos naar sin er kjent',
      problem: 'Gitt at $\\sin v = \\frac{5}{13}$ og $90° < v < 180°$. Finn $\\cos v$ og $\\tan v$.',
      solution: `**Finn $\\cos v$:**

$$\\sin^2 v + \\cos^2 v = 1$$
$$\\left(\\frac{5}{13}\\right)^2 + \\cos^2 v = 1$$
$$\\frac{25}{169} + \\cos^2 v = 1$$
$$\\cos^2 v = \\frac{144}{169}$$
$$\\cos v = \\pm \\frac{12}{13}$$

Siden $v$ er i 2. kvadrant, er cosinus negativ:
$$\\cos v = -\\frac{12}{13}$$

**Finn $\\tan v$:**
$$\\tan v = \\frac{\\sin v}{\\cos v} = \\frac{\\frac{5}{13}}{-\\frac{12}{13}} = -\\frac{5}{12}$$`,
    },

    // ========== OPPGAVE 7 ==========
    {
      id: 'r2-4-2-ex-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-7',
        number: '7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Gitt at $\\cos v = -\\frac{4}{5}$ og $v$ ligger i 3. kvadrant. Finn $\\sin v$ og $\\tan v$.',
        solution: `Fra $\\sin^2 v + \\cos^2 v = 1$:
$\\sin^2 v = 1 - \\frac{16}{25} = \\frac{9}{25}$

Siden $v$ er i 3. kvadrant (sinus negativ):
$\\sin v = -\\frac{3}{5}$

$\\tan v = \\frac{-3/5}{-4/5} = \\frac{3}{4}$`,
        hints: ['Bruk den pytagoreiske identiteten.', 'I 3. kvadrant er baade sin og cos negative.'],
      },
    },

    // ========== OPPGAVE 8 ==========
    {
      id: 'r2-4-2-ex-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-8',
        number: '8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Gitt at $\\sin v = -\\frac{7}{25}$ og $270° < v < 360°$. Finn $\\cos v$.',
        solution: `$\\cos^2 v = 1 - \\sin^2 v = 1 - \\frac{49}{625} = \\frac{576}{625}$

Siden $v$ er i 4. kvadrant (cosinus positiv):
$\\cos v = \\frac{24}{25}$`,
        hints: ['4. kvadrant: cos er positiv, sin er negativ.'],
      },
    },

    // ========== EKSEMPEL 12: NEGATIVE VINKLER ==========
    {
      id: 'r2-4-2-example-12',
      type: 'example',
      title: 'Eksempel 12: Negative vinkler',
      problem: 'Finn eksakt verdi for $\\sin(-60°)$ og $\\cos(-60°)$.',
      solution: `En negativ vinkel gaar med klokken fra $(1, 0)$.

$-60°$ havner i 4. kvadrant (samme som $300°$).

Referansevinkelen er $60°$.

$$\\sin(-60°) = -\\sin 60° = -\\frac{\\sqrt{3}}{2}$$
(negativ fordi $y < 0$ i 4. kvadrant)

$$\\cos(-60°) = \\cos 60° = \\frac{1}{2}$$
(positiv fordi $x > 0$ i 4. kvadrant)

**Generelt:** $\\sin(-v) = -\\sin v$ og $\\cos(-v) = \\cos v$`,
    },

    // ========== TEOREM: SYMMETRIEGENSKAPER ==========
    {
      id: 'r2-4-2-theorem-symmetri',
      type: 'theorem',
      title: 'Symmetriegenskaper',
      content: `**For negative vinkler:**
$$\\sin(-v) = -\\sin v \\quad \\text{(odde funksjon)}$$
$$\\cos(-v) = \\cos v \\quad \\text{(like funksjon)}$$
$$\\tan(-v) = -\\tan v \\quad \\text{(odde funksjon)}$$

**For vinkler over $360°$:**
$$\\sin(v + 360°) = \\sin v$$
$$\\cos(v + 360°) = \\cos v$$
$$\\tan(v + 180°) = \\tan v$$`,
    },

    // ========== OPPGAVE 9 ==========
    {
      id: 'r2-4-2-ex-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-9',
        number: '9',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn eksakt verdi for: a) $\\sin(-45°)$ b) $\\cos(-120°)$ c) $\\tan(-30°)$',
        solution: `a) $\\sin(-45°) = -\\sin 45° = -\\frac{\\sqrt{2}}{2}$

b) $\\cos(-120°) = \\cos 120° = -\\frac{1}{2}$ (cosinus er en like funksjon)

c) $\\tan(-30°) = -\\tan 30° = -\\frac{1}{\\sqrt{3}} = -\\frac{\\sqrt{3}}{3}$`,
        hints: ['Bruk symmetriegenskapene.'],
      },
    },

    // ========== EKSEMPEL 13: VINKLER OVER 360 GRADER ==========
    {
      id: 'r2-4-2-example-13',
      type: 'example',
      title: 'Eksempel 13: Store vinkler',
      problem: 'Finn eksakt verdi for $\\sin 420°$ og $\\cos 750°$.',
      solution: `**$\\sin 420°$:**
$420° = 360° + 60°$, saa vi har gatt en hel runde pluss $60°$.
$$\\sin 420° = \\sin 60° = \\frac{\\sqrt{3}}{2}$$

**$\\cos 750°$:**
$750° = 2 \\cdot 360° + 30° = 720° + 30°$
$$\\cos 750° = \\cos 30° = \\frac{\\sqrt{3}}{2}$$`,
    },

    // ========== OPPGAVE 10 ==========
    {
      id: 'r2-4-2-ex-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-10',
        number: '10',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn eksakt verdi for: a) $\\cos 405°$ b) $\\sin 510°$ c) $\\tan 585°$',
        solution: `a) $405° = 360° + 45°$, saa $\\cos 405° = \\cos 45° = \\frac{\\sqrt{2}}{2}$

b) $510° = 360° + 150°$, saa $\\sin 510° = \\sin 150° = \\frac{1}{2}$

c) $585° = 360° + 225°$, referansevinkel $45°$, 3. kvadrant: $\\tan 585° = \\tan 225° = 1$`,
        hints: ['Trekk fra $360°$ til vinkelen er mellom $0°$ og $360°$.'],
      },
    },

    // ========== EKSEMPEL 14: ANVENDE IDENTITETEN ==========
    {
      id: 'r2-4-2-example-14',
      type: 'example',
      title: 'Eksempel 14: Forenkle uttrykk',
      problem: 'Forenkle uttrykket $\\frac{1 - \\cos^2 v}{\\sin v}$ for $\\sin v \\neq 0$.',
      solution: `Vi bruker at $\\sin^2 v + \\cos^2 v = 1$, som gir $\\sin^2 v = 1 - \\cos^2 v$.

$$\\frac{1 - \\cos^2 v}{\\sin v} = \\frac{\\sin^2 v}{\\sin v} = \\sin v$$`,
    },

    // ========== EKSEMPEL 15: BEVISE IDENTITETER ==========
    {
      id: 'r2-4-2-example-15',
      type: 'example',
      title: 'Eksempel 15: Bevise en identitet',
      problem: 'Vis at $\\tan^2 v + 1 = \\frac{1}{\\cos^2 v}$ for $\\cos v \\neq 0$.',
      solution: `Vi starter med venstre side:

$$\\tan^2 v + 1 = \\frac{\\sin^2 v}{\\cos^2 v} + 1 = \\frac{\\sin^2 v + \\cos^2 v}{\\cos^2 v}$$

Ved aa bruke $\\sin^2 v + \\cos^2 v = 1$:

$$= \\frac{1}{\\cos^2 v}$$

som er hoyre side. $\\square$`,
    },

    // ========== OPPGAVE 11 ==========
    {
      id: 'r2-4-2-ex-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-11',
        number: '11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Forenkle: a) $(\\sin v + \\cos v)^2$ b) $\\frac{\\sin^2 v}{1 + \\cos v}$',
        solution: `a) $(\\sin v + \\cos v)^2 = \\sin^2 v + 2\\sin v \\cos v + \\cos^2 v = 1 + 2\\sin v \\cos v$

b) $\\frac{\\sin^2 v}{1 + \\cos v} = \\frac{1 - \\cos^2 v}{1 + \\cos v} = \\frac{(1-\\cos v)(1+\\cos v)}{1 + \\cos v} = 1 - \\cos v$`,
        hints: ['Bruk at $\\sin^2 v = 1 - \\cos^2 v$.', 'Faktoriser telleren.'],
      },
    },

    // ========== EKSEMPEL 16: KOORDINATER PAA ENHETSSIRKELEN ==========
    {
      id: 'r2-4-2-example-16',
      type: 'example',
      title: 'Eksempel 16: Finne koordinater paa enhetssirkelen',
      problem: 'Finn koordinatene til punktet paa enhetssirkelen som svarer til vinkelen $v = 210°$.',
      solution: `Punktet har koordinater $(\\cos 210°, \\sin 210°)$.

**Referansevinkel:** $210° - 180° = 30°$

**Kvadrant:** 3. kvadrant (baade $x$ og $y$ negative)

$$\\cos 210° = -\\cos 30° = -\\frac{\\sqrt{3}}{2}$$
$$\\sin 210° = -\\sin 30° = -\\frac{1}{2}$$

**Svar:** Punktet er $\\left(-\\frac{\\sqrt{3}}{2}, -\\frac{1}{2}\\right)$`,
    },

    // ========== OPPGAVE 12 ==========
    {
      id: 'r2-4-2-ex-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-12',
        number: '12',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn koordinatene til punktet paa enhetssirkelen for: a) $v = 135°$ b) $v = 330°$',
        solution: `a) $135°$ er i 2. kvadrant, referansevinkel $45°$.
Punktet er $\\left(-\\frac{\\sqrt{2}}{2}, \\frac{\\sqrt{2}}{2}\\right)$

b) $330°$ er i 4. kvadrant, referansevinkel $30°$.
Punktet er $\\left(\\frac{\\sqrt{3}}{2}, -\\frac{1}{2}\\right)$`,
        hints: ['Koordinatene er $(\\cos v, \\sin v)$.'],
      },
    },

    // ========== OPPGAVE 13 ==========
    {
      id: 'r2-4-2-ex-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-13',
        number: '13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et punkt paa enhetssirkelen har $x$-koordinat $-\\frac{1}{2}$. Finn alle mulige $y$-koordinater og tilhorende vinkler $v$ med $0° \\leq v < 360°$.',
        solution: `Fra $x^2 + y^2 = 1$:
$\\left(-\\frac{1}{2}\\right)^2 + y^2 = 1$
$y^2 = 1 - \\frac{1}{4} = \\frac{3}{4}$
$y = \\pm \\frac{\\sqrt{3}}{2}$

For $y = \\frac{\\sqrt{3}}{2}$ (2. kvadrant): $v = 120°$
For $y = -\\frac{\\sqrt{3}}{2}$ (3. kvadrant): $v = 240°$`,
        hints: ['Bruk at $x^2 + y^2 = 1$.', 'Husk at $\\cos 60° = \\frac{1}{2}$.'],
      },
    },

    // ========== OPPGAVE 14 ==========
    {
      id: 'r2-4-2-ex-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-14',
        number: '14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at $1 + \\tan^2 v = \\frac{1}{\\cos^2 v}$ for $\\cos v \\neq 0$, og bruk dette til aa finne $\\cos v$ naar $\\tan v = 2$ og $v$ er i 1. kvadrant.',
        solution: `**Bevis:**
$1 + \\tan^2 v = 1 + \\frac{\\sin^2 v}{\\cos^2 v} = \\frac{\\cos^2 v + \\sin^2 v}{\\cos^2 v} = \\frac{1}{\\cos^2 v}$

**Anvend:**
$\\frac{1}{\\cos^2 v} = 1 + 4 = 5$
$\\cos^2 v = \\frac{1}{5}$
$\\cos v = \\frac{1}{\\sqrt{5}} = \\frac{\\sqrt{5}}{5}$ (positiv i 1. kvadrant)`,
        hints: ['Start med venstre side og skriv $\\tan v$ som $\\frac{\\sin v}{\\cos v}$.'],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-4-2-summary',
      type: 'note',
      content: `## Oppsummering

**Enhetssirkelen:**
- Sirkel med radius 1 og sentrum i origo
- Ligning: $x^2 + y^2 = 1$

**Definisjoner:**
- $\\cos v = x$-koordinaten paa enhetssirkelen
- $\\sin v = y$-koordinaten paa enhetssirkelen
- $\\tan v = \\frac{\\sin v}{\\cos v}$

**Grunnidentiteten:** $\\sin^2 v + \\cos^2 v = 1$

**Eksakte verdier:** Husk tabellen for $0°$, $30°$, $45°$, $60°$, $90°$

**Referansevinkler:** Brukes til aa finne verdier utenfor 1. kvadrant`,
    },

    // ========== OPPGAVE 15 ==========
    {
      id: 'r2-4-2-ex-15',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-15',
        number: '15',
        type: 'classic',
        difficulty: 'lett',
        task: 'Regn ut uten kalkulator: $\\sin^2 30° + \\sin^2 45° + \\sin^2 60°$',
        solution: `$\\sin^2 30° + \\sin^2 45° + \\sin^2 60°$
$= \\left(\\frac{1}{2}\\right)^2 + \\left(\\frac{\\sqrt{2}}{2}\\right)^2 + \\left(\\frac{\\sqrt{3}}{2}\\right)^2$
$= \\frac{1}{4} + \\frac{2}{4} + \\frac{3}{4} = \\frac{6}{4} = \\frac{3}{2}$`,
        hints: ['Bruk tabellen med eksakte verdier.'],
      },
    },

    // ========== OPPGAVE 16 ==========
    {
      id: 'r2-4-2-ex-16',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-16',
        number: '16',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los ligningen $\\sin v = \\frac{1}{2}$ for $0° \\leq v < 360°$.',
        solution: `$\\sin v = \\frac{1}{2}$

Fra tabellen vet vi at $\\sin 30° = \\frac{1}{2}$.

Sinus er positiv i 1. og 2. kvadrant.

**1. kvadrant:** $v = 30°$
**2. kvadrant:** $v = 180° - 30° = 150°$

**Svar:** $v = 30°$ eller $v = 150°$`,
        hints: ['Hvilken standardvinkel har sinus lik $\\frac{1}{2}$?', 'I hvilke kvadranter er sinus positiv?'],
      },
    },

    // ========== OPPGAVE 17 ==========
    {
      id: 'r2-4-2-ex-17',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-17',
        number: '17',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los ligningen $\\cos v = -\\frac{\\sqrt{2}}{2}$ for $0° \\leq v < 360°$.',
        solution: `Referansevinkelen er $45°$ (siden $\\cos 45° = \\frac{\\sqrt{2}}{2}$).

Cosinus er negativ i 2. og 3. kvadrant.

**2. kvadrant:** $v = 180° - 45° = 135°$
**3. kvadrant:** $v = 180° + 45° = 225°$

**Svar:** $v = 135°$ eller $v = 225°$`,
        hints: ['Finn referansevinkelen forst.', 'I hvilke kvadranter er cosinus negativ?'],
      },
    },

    // ========== OPPGAVE 18 ==========
    {
      id: 'r2-4-2-ex-18',
      type: 'exercise',
      exercise: {
        id: 'r2-4-2-ex-18',
        number: '18',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los ligningen $\\tan v = -1$ for $0 \\leq v < 2\\pi$.',
        solution: `Referansevinkelen er $\\frac{\\pi}{4}$ (siden $\\tan \\frac{\\pi}{4} = 1$).

Tangens er negativ i 2. og 4. kvadrant.

**2. kvadrant:** $v = \\pi - \\frac{\\pi}{4} = \\frac{3\\pi}{4}$
**4. kvadrant:** $v = 2\\pi - \\frac{\\pi}{4} = \\frac{7\\pi}{4}$

**Svar:** $v = \\frac{3\\pi}{4}$ eller $v = \\frac{7\\pi}{4}$`,
        hints: ['Bruk radianer.', 'Tangens er negativ i 2. og 4. kvadrant.'],
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_4_3: TextbookChapter = {
  id: 'r2-4-3',
  courseId: 'r2',
  chapterNumber: '4.3',
  title: 'Sinuslikninger',
  description: 'Lose likninger med sinusfunksjonen, inkludert generelle losninger og praktiske anvendelser.',
  estimatedMinutes: 55,
  competenceGoals: [
    'bruke trigonometriske funksjonar til aa loyse praktiske problem',
    'analysere og tolke trigonometriske funksjonar grafisk',
    'finne alle losningar av trigonometriske likningar i gitte intervall',
  ],
  content: [
    // ============================================================================
    // INTRODUKSJON
    // ============================================================================
    {
      id: 'r2-4-3-text-1',
      type: 'text',
      content: `## Sinuslikninger

Sinuslikninger er likninger der den ukjente $x$ star som argument i en sinusfunksjon. Slike likninger dukker opp i mange praktiske sammenhenger, som bolgefenomener, periodiske svingninger og lydanalyse.

**Hva skal vi laere?**
- Lose grunnleggende likninger av typen $\\sin x = a$
- Finne den generelle losningen med $n \\in \\mathbb{Z}$
- Lose mer sammensatte likninger som $\\sin(kx + c) = a$
- Tolke losningene grafisk
- Finne antall losninger i et gitt intervall
- Anvende sinuslikninger på praktiske problemer

**Hvorfor er dette viktig?**
Sinusfunksjonen beskriver periodiske fenomener overalt i naturen: havbolger, lydbolgr, vekselstrom, pendelbevegelser og mye mer. Aa kunne lose sinuslikninger er derfor essensielt for aa forstaa og modellere slike fenomener.`,
    },
    {
      id: 'r2-4-3-triggrafer-bilde',
      type: 'image',
      src: '/images/r1/trigonometri-grafer.svg',
      alt: 'Grafene til sinus, cosinus og tangens',
      caption: 'De trigonometriske funksjonene og deres grafer',
    },

    // ============================================================================
    // DEL 1: GRUNNLEGGENDE LIKNING sin(x) = a
    // ============================================================================
    {
      id: 'r2-4-3-def-1',
      type: 'definition',
      title: 'Sinuslikning av typen sin(x) = a',
      content: `En sinuslikning er en likning på formen $\\sin x = a$ der $a$ er en konstant.

**Losbarhet:** Likningen $\\sin x = a$ har losning hvis og bare hvis $-1 \\leq a \\leq 1$.

Hvis $|a| > 1$, har likningen ingen losning siden sinusfunksjonen kun tar verdier i intervallet $[-1, 1]$.`,
    },
    {
      id: 'r2-4-3-text-2',
      type: 'text',
      content: `### Spesielle verdier

Noen sinusverdier bor du kunne utenat:

| $x$ | $0$ | $\\frac{\\pi}{6}$ | $\\frac{\\pi}{4}$ | $\\frac{\\pi}{3}$ | $\\frac{\\pi}{2}$ | $\\pi$ | $\\frac{3\\pi}{2}$ | $2\\pi$ |
|-----|-----|----------|----------|----------|----------|--------|-----------|---------|
| $\\sin x$ | $0$ | $\\frac{1}{2}$ | $\\frac{\\sqrt{2}}{2}$ | $\\frac{\\sqrt{3}}{2}$ | $1$ | $0$ | $-1$ | $0$ |

Disse verdiene følger fra enhetssirkelen og de likesidede trekantene du kjenner fra R1.`,
    },
    {
      id: 'r2-4-3-theorem-1',
      type: 'theorem',
      title: 'Generell losning av sin(x) = a',
      content: `Hvis $-1 \\leq a \\leq 1$ og $\\sin v = a$ for en vinkel $v$, sa har likningen $\\sin x = a$ den generelle losningen:

$$x = v + 2\\pi n \\quad \\text{eller} \\quad x = \\pi - v + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

Dette kan ogsaa skrives som:
$$x = v + 2\\pi n \\quad \\text{og} \\quad x = (\\pi - v) + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Forklaring:** Sinusfunksjonen har periode $2\\pi$, og for hver verdi $a$ (unntatt $\\pm 1$) finnes det to vinkler i $[0, 2\\pi)$ med samme sinusverdi. Disse ligger symmetrisk om $\\frac{\\pi}{2}$.`,
    },
    {
      id: 'r2-4-3-tip-1',
      type: 'tip',
      content: `**Fremgangsmate for aa lose $\\sin x = a$:**

1. Sjekk om $|a| \\leq 1$. Hvis ikke, har likningen ingen losning.
2. Finn en vinkel $v$ slik at $\\sin v = a$. Bruk kalkulator eller kjente verdier.
3. Skriv opp begge losningsgrener:
   - $x = v + 2\\pi n$
   - $x = (\\pi - v) + 2\\pi n$
4. Hvis du skal finne losninger i et bestemt intervall, sett inn verdier for $n$ (typisk $n = 0, \\pm 1, \\pm 2, ...$).`,
    },
    {
      id: 'r2-4-3-ex-1',
      type: 'example',
      title: 'Eksempel 1: Grunnleggende sinuslikning',
      problem: 'Los likningen $\\sin x = \\frac{1}{2}$.',
      solution: `**Steg 1:** Sjekk losbarhet.
$\\frac{1}{2}$ ligger mellom $-1$ og $1$, sa likningen har losning.

**Steg 2:** Finn en vinkel $v$ slik at $\\sin v = \\frac{1}{2}$.
Fra tabellen vet vi at $\\sin \\frac{\\pi}{6} = \\frac{1}{2}$, sa $v = \\frac{\\pi}{6}$.

**Steg 3:** Skriv opp den generelle losningen.
$$x = \\frac{\\pi}{6} + 2\\pi n \\quad \\text{eller} \\quad x = \\pi - \\frac{\\pi}{6} + 2\\pi n$$
$$x = \\frac{\\pi}{6} + 2\\pi n \\quad \\text{eller} \\quad x = \\frac{5\\pi}{6} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Svar:** $x = \\frac{\\pi}{6} + 2\\pi n$ eller $x = \\frac{5\\pi}{6} + 2\\pi n$ der $n \\in \\mathbb{Z}$.`,
    },
    {
      id: 'r2-4-3-exercise-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-1',
        number: '4.31',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\sin x = \\frac{\\sqrt{3}}{2}$ og angi den generelle losningen.',
        solution: 'Vi vet at $\\sin \\frac{\\pi}{3} = \\frac{\\sqrt{3}}{2}$. Den generelle losningen er $x = \\frac{\\pi}{3} + 2\\pi n$ eller $x = \\frac{2\\pi}{3} + 2\\pi n$ der $n \\in \\mathbb{Z}$.',
        hints: ['Hvilken vinkel har sinusverdi $\\frac{\\sqrt{3}}{2}$?', 'Bruk at $\\pi - \\frac{\\pi}{3} = \\frac{2\\pi}{3}$.'],
      },
    },
    {
      id: 'r2-4-3-ex-2',
      type: 'example',
      title: 'Eksempel 2: Negativ sinusverdi',
      problem: 'Los likningen $\\sin x = -\\frac{\\sqrt{2}}{2}$.',
      solution: `**Steg 1:** Sjekk losbarhet.
$-\\frac{\\sqrt{2}}{2} \\approx -0.707$ ligger mellom $-1$ og $1$. \\checkmark

**Steg 2:** Finn en vinkel $v$ slik at $\\sin v = -\\frac{\\sqrt{2}}{2}$.
Vi vet at $\\sin \\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$.
Siden vi trenger en negativ verdi, bruker vi $v = -\\frac{\\pi}{4}$.

**Steg 3:** Skriv opp den generelle losningen.
$$x = -\\frac{\\pi}{4} + 2\\pi n \\quad \\text{eller} \\quad x = \\pi - \\left(-\\frac{\\pi}{4}\\right) + 2\\pi n$$
$$x = -\\frac{\\pi}{4} + 2\\pi n \\quad \\text{eller} \\quad x = \\frac{5\\pi}{4} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Alternativ form:** Vi kan ogsaa skrive losningene som:
$$x = \\frac{7\\pi}{4} + 2\\pi n \\quad \\text{eller} \\quad x = \\frac{5\\pi}{4} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$`,
    },
    {
      id: 'r2-4-3-exercise-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-2',
        number: '4.32',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\sin x = -\\frac{1}{2}$ og angi den generelle losningen.',
        solution: 'Vi bruker $v = -\\frac{\\pi}{6}$. Den generelle losningen er $x = -\\frac{\\pi}{6} + 2\\pi n$ eller $x = \\frac{7\\pi}{6} + 2\\pi n$ der $n \\in \\mathbb{Z}$. Alternativt: $x = \\frac{11\\pi}{6} + 2\\pi n$ eller $x = \\frac{7\\pi}{6} + 2\\pi n$.',
        hints: ['Start med aa finne vinkelen der $\\sin v = \\frac{1}{2}$.', 'Hva blir $\\pi - (-\\frac{\\pi}{6})$?'],
      },
    },
    {
      id: 'r2-4-3-ex-3',
      type: 'example',
      title: 'Eksempel 3: Ekstremverdier',
      problem: 'Los likningen $\\sin x = 1$.',
      solution: `**Steg 1:** Sjekk losbarhet.
$1$ er maksimalverdien til sinusfunksjonen, sa likningen har losning.

**Steg 2:** Finn vinkelen.
$\\sin x = 1$ kun nar $x = \\frac{\\pi}{2}$.

**Steg 3:** Generell losning.
Siden dette er en ekstremverdi, far vi bare en losningsgren:
$$x = \\frac{\\pi}{2} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Merk:** Ved $a = 1$ faller de to losningsgrenene sammen fordi $\\pi - \\frac{\\pi}{2} = \\frac{\\pi}{2}$.`,
    },
    {
      id: 'r2-4-3-exercise-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-3',
        number: '4.33',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\sin x = -1$.',
        solution: '$\\sin x = -1$ gir $x = -\\frac{\\pi}{2} + 2\\pi n$ eller ekvivalent $x = \\frac{3\\pi}{2} + 2\\pi n$ der $n \\in \\mathbb{Z}$.',
        hints: ['Nar er sinusfunksjonen lik $-1$?'],
      },
    },
    {
      id: 'r2-4-3-ex-4',
      type: 'example',
      title: 'Eksempel 4: Ingen losning',
      problem: 'Los likningen $\\sin x = 2$.',
      solution: `**Steg 1:** Sjekk losbarhet.
$2 > 1$, sa verdien ligger utenfor verdiomradet til sinusfunksjonen.

**Konklusjon:** Likningen har **ingen losning** siden $\\sin x \\in [-1, 1]$ for alle $x$.`,
    },
    {
      id: 'r2-4-3-warning-1',
      type: 'warning',
      title: 'Vanlig feil',
      content: `Husk aa sjekke at $|a| \\leq 1$ for likningen har losning. Mange glemmer dette og forsaker aa lose likninger som $\\sin x = 1.5$ eller $\\sin x = -3$, som ikke har losninger.`,
    },

    // ============================================================================
    // DEL 2: LOSNINGER I ET BESTEMT INTERVALL
    // ============================================================================
    {
      id: 'r2-4-3-text-3',
      type: 'text',
      content: `## Løsninger i et bestemt intervall

Ofte blir vi bedt om aa finne alle losninger i et gitt intervall, for eksempel $[0, 2\\pi)$ eller $[-\\pi, \\pi]$.

**Fremgangsmate:**
1. Finn den generelle losningen
2. Sett inn ulike verdier for $n$ ($n = 0, \\pm 1, \\pm 2, ...$)
3. Behold kun de losningene som ligger i det angitte intervallet`,
    },
    {
      id: 'r2-4-3-ex-5',
      type: 'example',
      title: 'Eksempel 5: Løsninger i [0, 2pi)',
      problem: 'Finn alle losninger av $\\sin x = \\frac{\\sqrt{2}}{2}$ i intervallet $[0, 2\\pi)$.',
      solution: `**Steg 1:** Finn den generelle losningen.
Vi vet at $\\sin \\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$.
$$x = \\frac{\\pi}{4} + 2\\pi n \\quad \\text{eller} \\quad x = \\frac{3\\pi}{4} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Steg 2:** Finn losninger i $[0, 2\\pi)$.

For $x = \\frac{\\pi}{4} + 2\\pi n$:
- $n = 0$: $x = \\frac{\\pi}{4} \\approx 0.79$ \\checkmark (i intervallet)
- $n = 1$: $x = \\frac{\\pi}{4} + 2\\pi \\approx 7.07$ (utenfor)
- $n = -1$: $x = \\frac{\\pi}{4} - 2\\pi \\approx -5.50$ (utenfor)

For $x = \\frac{3\\pi}{4} + 2\\pi n$:
- $n = 0$: $x = \\frac{3\\pi}{4} \\approx 2.36$ \\checkmark (i intervallet)
- $n = 1$: $x = \\frac{3\\pi}{4} + 2\\pi \\approx 8.64$ (utenfor)
- $n = -1$: $x = \\frac{3\\pi}{4} - 2\\pi \\approx -3.93$ (utenfor)

**Svar:** $x = \\frac{\\pi}{4}$ og $x = \\frac{3\\pi}{4}$`,
    },
    {
      id: 'r2-4-3-exercise-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-4',
        number: '4.34',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn alle losninger av $\\sin x = \\frac{1}{2}$ i intervallet $[0, 2\\pi)$.',
        solution: 'Den generelle losningen er $x = \\frac{\\pi}{6} + 2\\pi n$ eller $x = \\frac{5\\pi}{6} + 2\\pi n$. I $[0, 2\\pi)$ far vi $x = \\frac{\\pi}{6}$ og $x = \\frac{5\\pi}{6}$.',
        hints: ['Finn forst den generelle losningen.', 'Sett inn $n = 0$ og sjekk om verdiene ligger i intervallet.'],
      },
    },
    {
      id: 'r2-4-3-ex-6',
      type: 'example',
      title: 'Eksempel 6: Løsninger i [-pi, pi]',
      problem: 'Finn alle losninger av $\\sin x = -\\frac{\\sqrt{3}}{2}$ i intervallet $[-\\pi, \\pi]$.',
      solution: `**Steg 1:** Finn den generelle losningen.
Vi bruker $v = -\\frac{\\pi}{3}$ siden $\\sin(-\\frac{\\pi}{3}) = -\\frac{\\sqrt{3}}{2}$.
$$x = -\\frac{\\pi}{3} + 2\\pi n \\quad \\text{eller} \\quad x = \\pi - \\left(-\\frac{\\pi}{3}\\right) + 2\\pi n = \\frac{4\\pi}{3} + 2\\pi n$$

**Steg 2:** Finn losninger i $[-\\pi, \\pi]$.

For $x = -\\frac{\\pi}{3} + 2\\pi n$:
- $n = 0$: $x = -\\frac{\\pi}{3} \\approx -1.05$ \\checkmark

For $x = \\frac{4\\pi}{3} + 2\\pi n$:
- $n = 0$: $x = \\frac{4\\pi}{3} \\approx 4.19$ (utenfor, $> \\pi$)
- $n = -1$: $x = \\frac{4\\pi}{3} - 2\\pi = -\\frac{2\\pi}{3} \\approx -2.09$ \\checkmark

**Svar:** $x = -\\frac{\\pi}{3}$ og $x = -\\frac{2\\pi}{3}$`,
    },
    {
      id: 'r2-4-3-exercise-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-5',
        number: '4.35',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn alle losninger av $\\sin x = -\\frac{\\sqrt{2}}{2}$ i intervallet $[-\\pi, \\pi]$.',
        solution: 'Den generelle losningen er $x = -\\frac{\\pi}{4} + 2\\pi n$ eller $x = \\frac{5\\pi}{4} + 2\\pi n$. I $[-\\pi, \\pi]$: For forste gren med $n=0$: $x = -\\frac{\\pi}{4}$. For andre gren med $n=-1$: $x = \\frac{5\\pi}{4} - 2\\pi = -\\frac{3\\pi}{4}$. Svar: $x = -\\frac{\\pi}{4}$ og $x = -\\frac{3\\pi}{4}$.',
        hints: ['Bruk at $\\sin(-\\frac{\\pi}{4}) = -\\frac{\\sqrt{2}}{2}$.', 'Husk aa sjekke $n = -1$ for den andre losningsgrenen.'],
      },
    },

    // ============================================================================
    // DEL 3: GRAFISK TOLKNING
    // ============================================================================
    {
      id: 'r2-4-3-text-4',
      type: 'text',
      content: `## Grafisk tolkning

Aa lose $\\sin x = a$ grafisk betyr aa finne skjaringspunktene mellom grafen til $y = \\sin x$ og den horisontale linjen $y = a$.

**Viktige observasjoner:**
- Sinusgrafen svinger mellom $-1$ og $1$ med periode $2\\pi$
- For $-1 < a < 1$ skjaerer linjen $y = a$ sinusgrafen **to ganger** per periode
- For $a = \\pm 1$ skjaerer linjen sinusgrafen **en gang** per periode (i topp/bunnpunktene)
- For $|a| > 1$ skjaerer linjen **aldri** sinusgrafen

Denne grafiske forstaelsen hjelper oss aa:
1. Raskt avgjore om en likning har losning
2. Finne antall losninger i et gitt intervall
3. Estimere losningene visuelt`,
    },
    {
      id: 'r2-4-3-geogebra-1',
      type: 'geogebra',
      title: 'Utforsk sinuslikninger grafisk',
      description: 'Dra glideren for aa endre verdien av $a$ og se hvor linjen $y = a$ skjaerer sinusgrafen.',
      appType: 'graphing',
      commands: [
        'f(x) = sin(x)',
        'a = 0.5',
        'g(x) = a',
        'Intersection(f, g, -10, 10)',
      ],
    },
    {
      id: 'r2-4-3-ex-7',
      type: 'example',
      title: 'Eksempel 7: Antall losninger grafisk',
      problem: 'Hvor mange losninger har likningen $\\sin x = 0.3$ i intervallet $[0, 4\\pi]$?',
      solution: `**Grafisk resonnement:**
Linjen $y = 0.3$ skjaerer sinusgrafen to ganger per periode ($2\\pi$).

Intervallet $[0, 4\\pi]$ inneholder $\\frac{4\\pi}{2\\pi} = 2$ fulle perioder.

**Antall losninger:** $2 \\times 2 = 4$ losninger.

**Verifisering med regning:**
$\\sin^{-1}(0.3) \\approx 0.305$ radianer.
Løsningene er omtrent:
- $x \\approx 0.305$ (1. periode, stigende)
- $x \\approx \\pi - 0.305 \\approx 2.837$ (1. periode, synkende)
- $x \\approx 0.305 + 2\\pi \\approx 6.588$ (2. periode, stigende)
- $x \\approx 2.837 + 2\\pi \\approx 9.120$ (2. periode, synkende)

Alle fire ligger i $[0, 4\\pi] \\approx [0, 12.57]$.`,
    },
    {
      id: 'r2-4-3-exercise-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-6',
        number: '4.36',
        type: 'classic',
        difficulty: 'medium',
        task: 'Hvor mange losninger har likningen $\\sin x = 0.7$ i intervallet $[0, 6\\pi]$?',
        solution: 'Intervallet $[0, 6\\pi]$ inneholder 3 fulle perioder. Siden $0.7$ er mellom $-1$ og $1$ (og ikke lik $\\pm 1$), far vi 2 losninger per periode. Totalt: $3 \\times 2 = 6$ losninger.',
        hints: ['Hvor mange perioder er det i intervallet?', 'Hvor mange ganger per periode skjaerer $y = 0.7$ sinusgrafen?'],
      },
    },
    {
      id: 'r2-4-3-theorem-2',
      type: 'theorem',
      title: 'Antall losninger i et intervall',
      content: `For likningen $\\sin x = a$ der $-1 < a < 1$:

I et intervall som inneholder $n$ fulle perioder (lengde $2\\pi n$), er antall losninger lik $2n$.

**Spesialtilfeller:**
- Hvis $a = 1$ eller $a = -1$: $n$ losninger
- Hvis $|a| > 1$: $0$ losninger

**Merk:** For intervaller som ikke inneholder hele perioder, ma man telle mer noyaktig ved aa finne de eksakte losningene.`,
    },

    // ============================================================================
    // DEL 4: SAMMENSATTE SINUSLIKNINGER sin(kx + c) = a
    // ============================================================================
    {
      id: 'r2-4-3-text-5',
      type: 'text',
      content: `## Sammensatte sinuslikninger: $\\sin(kx + c) = a$

Nar sinusfunksjonen har et mer komplisert argument, som $\\sin(2x + \\frac{\\pi}{3})$ eller $\\sin(3x - 1)$, bruker vi substitusjon.

**Strategi:**
1. Sett $u = kx + c$ (det indre uttrykket)
2. Los $\\sin u = a$ for $u$
3. Los for $x$ fra $u = kx + c$

**Viktig:** Husk at perioden til $\\sin(kx)$ er $\\frac{2\\pi}{|k|}$, ikke $2\\pi$!`,
    },
    {
      id: 'r2-4-3-ex-8',
      type: 'example',
      title: 'Eksempel 8: Likning med dobbelt argument',
      problem: 'Los likningen $\\sin(2x) = \\frac{\\sqrt{3}}{2}$.',
      solution: `**Steg 1:** Sett $u = 2x$.
Likningen blir $\\sin u = \\frac{\\sqrt{3}}{2}$.

**Steg 2:** Los for $u$.
$$u = \\frac{\\pi}{3} + 2\\pi n \\quad \\text{eller} \\quad u = \\frac{2\\pi}{3} + 2\\pi n$$

**Steg 3:** Los for $x$.
Fra $u = 2x$ far vi $x = \\frac{u}{2}$:
$$x = \\frac{\\pi}{6} + \\pi n \\quad \\text{eller} \\quad x = \\frac{\\pi}{3} + \\pi n, \\quad n \\in \\mathbb{Z}$$

**Merk:** Perioden er halvert fra $2\\pi$ til $\\pi$ fordi koeffisienten foran $x$ er $2$.`,
    },
    {
      id: 'r2-4-3-exercise-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-7',
        number: '4.37',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\sin(3x) = \\frac{1}{2}$.',
        solution: 'Sett $u = 3x$. Da er $\\sin u = \\frac{1}{2}$, som gir $u = \\frac{\\pi}{6} + 2\\pi n$ eller $u = \\frac{5\\pi}{6} + 2\\pi n$. Dermed far vi $x = \\frac{\\pi}{18} + \\frac{2\\pi n}{3}$ eller $x = \\frac{5\\pi}{18} + \\frac{2\\pi n}{3}$ der $n \\in \\mathbb{Z}$.',
        hints: ['Sett $u = 3x$ og los forst for $u$.', 'Husk aa dele på 3 nar du gar tilbake til $x$.'],
      },
    },
    {
      id: 'r2-4-3-ex-9',
      type: 'example',
      title: 'Eksempel 9: Likning med faseforskyvning',
      problem: 'Los likningen $\\sin\\left(x - \\frac{\\pi}{4}\\right) = \\frac{\\sqrt{2}}{2}$.',
      solution: `**Steg 1:** Sett $u = x - \\frac{\\pi}{4}$.
Likningen blir $\\sin u = \\frac{\\sqrt{2}}{2}$.

**Steg 2:** Los for $u$.
$$u = \\frac{\\pi}{4} + 2\\pi n \\quad \\text{eller} \\quad u = \\frac{3\\pi}{4} + 2\\pi n$$

**Steg 3:** Los for $x$ fra $u = x - \\frac{\\pi}{4}$, altsaa $x = u + \\frac{\\pi}{4}$:
$$x = \\frac{\\pi}{4} + \\frac{\\pi}{4} + 2\\pi n = \\frac{\\pi}{2} + 2\\pi n$$
$$x = \\frac{3\\pi}{4} + \\frac{\\pi}{4} + 2\\pi n = \\pi + 2\\pi n$$

**Svar:** $x = \\frac{\\pi}{2} + 2\\pi n$ eller $x = \\pi + 2\\pi n$ der $n \\in \\mathbb{Z}$.`,
    },
    {
      id: 'r2-4-3-exercise-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-8',
        number: '4.38',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\sin\\left(x + \\frac{\\pi}{6}\\right) = \\frac{1}{2}$.',
        solution: 'Sett $u = x + \\frac{\\pi}{6}$. Da er $\\sin u = \\frac{1}{2}$, som gir $u = \\frac{\\pi}{6} + 2\\pi n$ eller $u = \\frac{5\\pi}{6} + 2\\pi n$. Dermed: $x = \\frac{\\pi}{6} - \\frac{\\pi}{6} + 2\\pi n = 2\\pi n$ eller $x = \\frac{5\\pi}{6} - \\frac{\\pi}{6} + 2\\pi n = \\frac{2\\pi}{3} + 2\\pi n$.',
        hints: ['Sett $u = x + \\frac{\\pi}{6}$.', '$x = u - \\frac{\\pi}{6}$.'],
      },
    },
    {
      id: 'r2-4-3-ex-10',
      type: 'example',
      title: 'Eksempel 10: Generell sammensetning',
      problem: 'Los likningen $\\sin(2x + \\frac{\\pi}{3}) = -\\frac{1}{2}$.',
      solution: `**Steg 1:** Sett $u = 2x + \\frac{\\pi}{3}$.
Likningen blir $\\sin u = -\\frac{1}{2}$.

**Steg 2:** Los for $u$.
Vi bruker $\\sin(-\\frac{\\pi}{6}) = -\\frac{1}{2}$:
$$u = -\\frac{\\pi}{6} + 2\\pi n \\quad \\text{eller} \\quad u = \\pi - \\left(-\\frac{\\pi}{6}\\right) + 2\\pi n = \\frac{7\\pi}{6} + 2\\pi n$$

**Steg 3:** Los for $x$ fra $2x + \\frac{\\pi}{3} = u$:
$$2x = u - \\frac{\\pi}{3}$$
$$x = \\frac{u}{2} - \\frac{\\pi}{6}$$

For $u = -\\frac{\\pi}{6} + 2\\pi n$:
$$x = \\frac{-\\frac{\\pi}{6} + 2\\pi n}{2} - \\frac{\\pi}{6} = -\\frac{\\pi}{12} + \\pi n - \\frac{\\pi}{6} = -\\frac{\\pi}{4} + \\pi n$$

For $u = \\frac{7\\pi}{6} + 2\\pi n$:
$$x = \\frac{\\frac{7\\pi}{6} + 2\\pi n}{2} - \\frac{\\pi}{6} = \\frac{7\\pi}{12} + \\pi n - \\frac{\\pi}{6} = \\frac{5\\pi}{12} + \\pi n$$

**Svar:** $x = -\\frac{\\pi}{4} + \\pi n$ eller $x = \\frac{5\\pi}{12} + \\pi n$ der $n \\in \\mathbb{Z}$.`,
    },
    {
      id: 'r2-4-3-exercise-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-9',
        number: '4.39',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los likningen $\\sin(3x - \\frac{\\pi}{4}) = \\frac{\\sqrt{2}}{2}$ og finn alle losninger i $[0, 2\\pi)$.',
        solution: 'Sett $u = 3x - \\frac{\\pi}{4}$. $\\sin u = \\frac{\\sqrt{2}}{2}$ gir $u = \\frac{\\pi}{4} + 2\\pi n$ eller $u = \\frac{3\\pi}{4} + 2\\pi n$. Dermed $x = \\frac{\\pi}{6} + \\frac{2\\pi n}{3}$ eller $x = \\frac{\\pi}{3} + \\frac{2\\pi n}{3}$. I $[0, 2\\pi)$: For forste gren ($n=0,1,2$): $\\frac{\\pi}{6}, \\frac{5\\pi}{6}, \\frac{3\\pi}{2}$. For andre gren ($n=0,1,2$): $\\frac{\\pi}{3}, \\pi, \\frac{5\\pi}{3}$. Totalt 6 losninger.',
        hints: ['Sett $u = 3x - \\frac{\\pi}{4}$.', 'Perioden til $\\sin(3x)$ er $\\frac{2\\pi}{3}$, sa det blir 3 perioder i $[0, 2\\pi)$.'],
      },
    },
    {
      id: 'r2-4-3-tip-2',
      type: 'tip',
      content: `**Huskeregel for $\\sin(kx + c) = a$:**

Nar du har funnet den generelle losningen for $u$, deler du $2\\pi n$-leddet på $k$ for aa fa riktig periode for $x$.

For eksempel: Hvis $u = v + 2\\pi n$ og $u = kx + c$, da blir:
$$x = \\frac{v - c}{k} + \\frac{2\\pi n}{k}$$

Perioden til losningen er $\\frac{2\\pi}{k}$, ikke $2\\pi$.`,
    },

    // ============================================================================
    // DEL 5: FLERE EKSEMPLER OG TEKNIKKER
    // ============================================================================
    {
      id: 'r2-4-3-text-6',
      type: 'text',
      content: `## Flere teknikker

Noen sinuslikninger krever ekstra manipulasjon for de kan loses. Her ser vi på noen vanlige situasjoner.`,
    },
    {
      id: 'r2-4-3-ex-11',
      type: 'example',
      title: 'Eksempel 11: Likning med kalkulator',
      problem: 'Los likningen $\\sin x = 0.4$ og finn alle losninger i $[0, 2\\pi)$. Angi svarene med tre desimaler.',
      solution: `**Steg 1:** Bruk kalkulator til aa finne arcsin.
$v = \\sin^{-1}(0.4) \\approx 0.412$ radianer.

**Steg 2:** Den generelle losningen er:
$$x \\approx 0.412 + 2\\pi n \\quad \\text{eller} \\quad x \\approx \\pi - 0.412 + 2\\pi n \\approx 2.730 + 2\\pi n$$

**Steg 3:** I $[0, 2\\pi)$:
- $x \\approx 0.412$
- $x \\approx 2.730$

**Svar:** $x \\approx 0.412$ og $x \\approx 2.730$.`,
    },
    {
      id: 'r2-4-3-exercise-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-10',
        number: '4.310',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\sin x = 0.6$ og finn alle losninger i $[0, 2\\pi)$. Angi svarene med tre desimaler.',
        solution: '$\\sin^{-1}(0.6) \\approx 0.644$. Den andre losningen er $\\pi - 0.644 \\approx 2.498$. Svar: $x \\approx 0.644$ og $x \\approx 2.498$.',
        hints: ['Bruk kalkulator til aa finne $\\sin^{-1}(0.6)$.', 'Den andre losningen er $\\pi - v$.'],
      },
    },
    {
      id: 'r2-4-3-ex-12',
      type: 'example',
      title: 'Eksempel 12: Likning som krever omforming',
      problem: 'Los likningen $2\\sin x + 1 = 0$.',
      solution: `**Steg 1:** Isoler sinusleddet.
$$2\\sin x = -1$$
$$\\sin x = -\\frac{1}{2}$$

**Steg 2:** Los den enkle sinuslikningen.
Vi vet at $\\sin(-\\frac{\\pi}{6}) = -\\frac{1}{2}$.
$$x = -\\frac{\\pi}{6} + 2\\pi n \\quad \\text{eller} \\quad x = \\frac{7\\pi}{6} + 2\\pi n$$

**Alternativ form:** $x = \\frac{11\\pi}{6} + 2\\pi n$ eller $x = \\frac{7\\pi}{6} + 2\\pi n$ der $n \\in \\mathbb{Z}$.`,
    },
    {
      id: 'r2-4-3-exercise-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-11',
        number: '4.311',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $4\\sin x - 2 = 0$.',
        solution: '$4\\sin x = 2 \\Rightarrow \\sin x = \\frac{1}{2}$. Da er $x = \\frac{\\pi}{6} + 2\\pi n$ eller $x = \\frac{5\\pi}{6} + 2\\pi n$ der $n \\in \\mathbb{Z}$.',
        hints: ['Forst: isoler $\\sin x$.', 'Deretter: los $\\sin x = \\frac{1}{2}$.'],
      },
    },
    {
      id: 'r2-4-3-ex-13',
      type: 'example',
      title: 'Eksempel 13: Likning med sin x = 0',
      problem: 'Los likningen $\\sin x = 0$ i intervallet $[-2\\pi, 2\\pi]$.',
      solution: `**Løsning av $\\sin x = 0$:**
Sinusfunksjonen er null nar $x$ er et heltallsmultiplum av $\\pi$:
$$x = n\\pi, \\quad n \\in \\mathbb{Z}$$

**I intervallet $[-2\\pi, 2\\pi]$:**
- $n = -2$: $x = -2\\pi$
- $n = -1$: $x = -\\pi$
- $n = 0$: $x = 0$
- $n = 1$: $x = \\pi$
- $n = 2$: $x = 2\\pi$

**Svar:** $x = -2\\pi, -\\pi, 0, \\pi, 2\\pi$ (5 losninger).`,
    },
    {
      id: 'r2-4-3-exercise-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-12',
        number: '4.312',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\sin(2x) = 0$ i intervallet $[0, 2\\pi)$.',
        solution: '$\\sin(2x) = 0$ betyr $2x = n\\pi$, altsaa $x = \\frac{n\\pi}{2}$. I $[0, 2\\pi)$: $x = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}$ (4 losninger).',
        hints: ['Sett $u = 2x$ og los $\\sin u = 0$.', 'Hvilke verdier av $n$ gir $x$ i $[0, 2\\pi)$?'],
      },
    },

    // ============================================================================
    // DEL 6: PRAKTISKE ANVENDELSER
    // ============================================================================
    {
      id: 'r2-4-3-text-7',
      type: 'text',
      content: `## Praktiske anvendelser

Sinuslikninger dukker opp i mange praktiske situasjoner der vi modellerer periodiske fenomener. Her er noen typiske eksempler.`,
    },
    {
      id: 'r2-4-3-ex-14',
      type: 'example',
      title: 'Eksempel 14: Tidevann',
      problem: `Vannstanden i en havn kan modelleres med funksjonen
$$h(t) = 2 + 1.5\\sin\\left(\\frac{\\pi}{6}t\\right)$$
der $h$ er vanndybden i meter og $t$ er tiden i timer etter midnatt.

a) Nar er vannstanden noyaktig 2.75 meter i løpet av det forste dognet?
b) I hvilke tidsperioder er vannstanden over 3 meter?`,
      solution: `**a) Finn nar $h(t) = 2.75$:**
$$2 + 1.5\\sin\\left(\\frac{\\pi}{6}t\\right) = 2.75$$
$$\\sin\\left(\\frac{\\pi}{6}t\\right) = 0.5$$

Sett $u = \\frac{\\pi}{6}t$:
$$\\sin u = 0.5 \\Rightarrow u = \\frac{\\pi}{6} + 2\\pi n \\text{ eller } u = \\frac{5\\pi}{6} + 2\\pi n$$

Los for $t$:
$$t = \\frac{6u}{\\pi} = 1 + 12n \\text{ eller } t = 5 + 12n$$

I det forste dognet ($0 \\leq t < 24$):
- $t = 1$ time (kl. 01:00)
- $t = 5$ timer (kl. 05:00)
- $t = 13$ timer (kl. 13:00)
- $t = 17$ timer (kl. 17:00)

**b) Finn nar $h(t) > 3$:**
$$2 + 1.5\\sin\\left(\\frac{\\pi}{6}t\\right) > 3$$
$$\\sin\\left(\\frac{\\pi}{6}t\\right) > \\frac{2}{3}$$

$\\sin^{-1}(\\frac{2}{3}) \\approx 0.7297$ rad.
Sinusfunksjonen er storre enn $\\frac{2}{3}$ nar:
$$0.7297 + 2\\pi n < \\frac{\\pi}{6}t < (\\pi - 0.7297) + 2\\pi n$$

For $n = 0$: $1.4 < t < 5.6$ timer
For $n = 1$: $13.4 < t < 17.6$ timer

**Svar:** Vannstanden er over 3 meter mellom ca. kl. 01:24-05:36 og kl. 13:24-17:36.`,
    },
    {
      id: 'r2-4-3-exercise-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-13',
        number: '4.313',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Temperaturen i et rom varierer gjennom dognet og kan beskrives med
$$T(t) = 20 + 3\\sin\\left(\\frac{\\pi}{12}(t - 6)\\right)$$
der $T$ er temperaturen i grader Celsius og $t$ er tiden i timer etter midnatt.

Nar i løpet av dognet er temperaturen noyaktig 21.5 grader?`,
        solution: '$T(t) = 21.5$ gir $\\sin(\\frac{\\pi}{12}(t-6)) = 0.5$. Med $u = \\frac{\\pi}{12}(t-6)$: $u = \\frac{\\pi}{6} + 2\\pi n$ eller $u = \\frac{5\\pi}{6} + 2\\pi n$. Da er $t - 6 = 2 + 24n$ eller $t - 6 = 10 + 24n$. I løpet av dognet: $t = 8$ (kl. 08:00) og $t = 16$ (kl. 16:00).',
        hints: ['Isoler sinusuttrykket forst.', 'Perioden til denne funksjonen er 24 timer.'],
      },
    },
    {
      id: 'r2-4-3-ex-15',
      type: 'example',
      title: 'Eksempel 15: Fjorarm',
      problem: `En fjorarm beveger seg opp og ned i henhold til formelen
$$s(t) = 4\\sin(\\pi t)$$
der $s$ er posisjonen i cm fra likevektspunktet og $t$ er tiden i sekunder.

a) Nar er fjoerarmen noyaktig 2 cm over likevektspunktet i de forste 3 sekundene?
b) Hvor ofte krysser fjaoerarmen likevektspunktet?`,
      solution: `**a) Finn nar $s(t) = 2$:**
$$4\\sin(\\pi t) = 2$$
$$\\sin(\\pi t) = \\frac{1}{2}$$

Sett $u = \\pi t$:
$$u = \\frac{\\pi}{6} + 2\\pi n \\text{ eller } u = \\frac{5\\pi}{6} + 2\\pi n$$
$$t = \\frac{1}{6} + 2n \\text{ eller } t = \\frac{5}{6} + 2n$$

I de forste 3 sekundene ($0 \\leq t \\leq 3$):
- $t = \\frac{1}{6} \\approx 0.17$ s
- $t = \\frac{5}{6} \\approx 0.83$ s
- $t = \\frac{1}{6} + 2 = \\frac{13}{6} \\approx 2.17$ s
- $t = \\frac{5}{6} + 2 = \\frac{17}{6} \\approx 2.83$ s

**b) Kryssing av likevektspunktet:**
$s(t) = 0$ nar $\\sin(\\pi t) = 0$, altsaa $\\pi t = n\\pi$, dvs. $t = n$ sekunder.

Fjaoerarmen krysser likevektspunktet hvert sekund (ved $t = 0, 1, 2, 3, ...$).`,
    },
    {
      id: 'r2-4-3-exercise-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-3-task-14',
        number: '4.314',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En pendel svinger slik at vinkelen fra vertikalen er gitt ved
$$\\theta(t) = 15\\sin(2\\pi t)$$
der $\\theta$ er vinkelen i grader og $t$ er tiden i sekunder.

a) Nar passerer pendelen gjennom stillingen $\\theta = 7.5$ grader for forste gang?
b) Hvor ofte star pendelen vertikalt ($\\theta = 0$)?`,
        solution: 'a) $15\\sin(2\\pi t) = 7.5$ gir $\\sin(2\\pi t) = 0.5$. Med $u = 2\\pi t$: $u = \\frac{\\pi}{6}$, sa $t = \\frac{1}{12}$ sekund (forste gang). b) $\\theta = 0$ nar $\\sin(2\\pi t) = 0$, dvs. $2\\pi t = n\\pi$, altsaa $t = \\frac{n}{2}$. Pendelen star vertikalt hvert halve sekund.',
        hints: ['Perioden til $\\sin(2\\pi t)$ er 1 sekund.', 'For forste gang: velg minste positive $t$.'],
      },
    },
    {
      id: 'r2-4-3-ex-16',
      type: 'example',
      title: 'Eksempel 16: Lydbolge',
      problem: `En lydbolge beskrives av funksjonen
$$p(t) = 0.02\\sin(880\\pi t)$$
der $p$ er trykket i pascal og $t$ er tiden i sekunder. Dette tilsvarer tonen A4 (kammertonen).

Hvor mange ganger per sekund er trykket noyaktig null?`,
      solution: `**Finn nar $p(t) = 0$:**
$$\\sin(880\\pi t) = 0$$
$$880\\pi t = n\\pi, \\quad n \\in \\mathbb{Z}$$
$$t = \\frac{n}{880}$$

**Antall nullpunkter per sekund:**
For $t \\in [0, 1]$ far vi $n = 0, 1, 2, ..., 880$.
Det gir **881 nullpunkter** (inkludert begge endepunktene).

Hvis vi teller antall ganger trykket *passerer gjennom* null (ikke inkludert $t = 0$), far vi **880 passeringer per sekund**.

**Merk:** Frekvensen til lyden er $\\frac{880}{2} = 440$ Hz, som er kammertonen A4.`,
    },

    // ============================================================================
    // OPPSUMMERING
    // ============================================================================
    {
      id: 'r2-4-3-note-1',
      type: 'note',
      content: `## Oppsummering: Sinuslikninger

**Grunnleggende likning $\\sin x = a$:**
- Har losning kun nar $-1 \\leq a \\leq 1$
- Generell losning: $x = v + 2\\pi n$ eller $x = (\\pi - v) + 2\\pi n$, der $\\sin v = a$

**Sammensatt likning $\\sin(kx + c) = a$:**
1. Sett $u = kx + c$
2. Los $\\sin u = a$ for $u$
3. Los for $x$: $x = \\frac{u - c}{k}$
4. Perioden blir $\\frac{2\\pi}{|k|}$

**Antall losninger:**
- I et intervall med lengde $2\\pi$: vanligvis 2 losninger (for $|a| < 1$)
- For $\\sin(kx + c) = a$: multipliser med $|k|$

**Grafisk tolkning:**
- Løsningene er skjaringspunktene mellom $y = \\sin x$ og $y = a$`,
    },
  ],
  exercises: [
    // ============================================================================
    // OVINGSOPPGAVER
    // ============================================================================
    {
      id: 'r2-4-3-ov-1',
      number: '4.315',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn den generelle losningen av $\\sin x = \\frac{\\sqrt{3}}{2}$.',
      solution: '$x = \\frac{\\pi}{3} + 2\\pi n$ eller $x = \\frac{2\\pi}{3} + 2\\pi n$ der $n \\in \\mathbb{Z}$.',
    },
    {
      id: 'r2-4-3-ov-2',
      number: '4.316',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn den generelle losningen av $\\sin x = -\\frac{\\sqrt{3}}{2}$.',
      solution: '$x = -\\frac{\\pi}{3} + 2\\pi n$ eller $x = \\frac{4\\pi}{3} + 2\\pi n$ der $n \\in \\mathbb{Z}$.',
    },
    {
      id: 'r2-4-3-ov-3',
      number: '4.317',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn alle losninger av $\\sin x = 0$ i intervallet $[0, 4\\pi]$.',
      solution: '$x = 0, \\pi, 2\\pi, 3\\pi, 4\\pi$ (5 losninger).',
    },
    {
      id: 'r2-4-3-ov-4',
      number: '4.318',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn alle losninger av $\\sin(2x) = \\frac{1}{2}$ i intervallet $[0, 2\\pi)$.',
      solution: 'Sett $u = 2x$. $\\sin u = \\frac{1}{2}$ gir $u = \\frac{\\pi}{6} + 2\\pi n$ eller $u = \\frac{5\\pi}{6} + 2\\pi n$. Dermed $x = \\frac{\\pi}{12} + \\pi n$ eller $x = \\frac{5\\pi}{12} + \\pi n$. I $[0, 2\\pi)$: $x = \\frac{\\pi}{12}, \\frac{5\\pi}{12}, \\frac{13\\pi}{12}, \\frac{17\\pi}{12}$.',
    },
    {
      id: 'r2-4-3-ov-5',
      number: '4.319',
      type: 'classic',
      difficulty: 'medium',
      task: 'Los likningen $\\sin(x + \\frac{\\pi}{4}) = \\frac{\\sqrt{2}}{2}$ og angi den generelle losningen.',
      solution: 'Sett $u = x + \\frac{\\pi}{4}$. $\\sin u = \\frac{\\sqrt{2}}{2}$ gir $u = \\frac{\\pi}{4} + 2\\pi n$ eller $u = \\frac{3\\pi}{4} + 2\\pi n$. Dermed $x = 2\\pi n$ eller $x = \\frac{\\pi}{2} + 2\\pi n$.',
    },
    {
      id: 'r2-4-3-ov-6',
      number: '4.320',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn alle losninger av $2\\sin x - \\sqrt{3} = 0$ i intervallet $[0, 2\\pi)$.',
      solution: '$\\sin x = \\frac{\\sqrt{3}}{2}$ gir $x = \\frac{\\pi}{3}$ eller $x = \\frac{2\\pi}{3}$ i $[0, 2\\pi)$.',
    },
    {
      id: 'r2-4-3-ov-7',
      number: '4.321',
      type: 'classic',
      difficulty: 'medium',
      task: 'Hvor mange losninger har $\\sin x = 0.8$ i intervallet $[0, 10\\pi]$?',
      solution: 'Intervallet har lengde $10\\pi$, som er 5 perioder. Med 2 losninger per periode blir det $5 \\times 2 = 10$ losninger.',
    },
    {
      id: 'r2-4-3-ov-8',
      number: '4.322',
      type: 'classic',
      difficulty: 'medium',
      task: 'Los likningen $\\sin(3x - \\frac{\\pi}{6}) = 0$ og finn alle losninger i $[0, \\pi]$.',
      solution: '$3x - \\frac{\\pi}{6} = n\\pi$ gir $x = \\frac{\\pi}{18} + \\frac{n\\pi}{3}$. I $[0, \\pi]$: $x = \\frac{\\pi}{18}, \\frac{7\\pi}{18}, \\frac{13\\pi}{18}$ (3 losninger).',
    },
    {
      id: 'r2-4-3-ov-9',
      number: '4.323',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Finn alle losninger av $\\sin(2x) = \\sin(x)$ i intervallet $[0, 2\\pi)$.',
      hints: ['Bruk at $\\sin(2x) = 2\\sin(x)\\cos(x)$.', 'Faktoriser og sett hver faktor lik null.'],
      solution: '$2\\sin x \\cos x = \\sin x$ gir $\\sin x (2\\cos x - 1) = 0$. Enten $\\sin x = 0$ (gir $x = 0, \\pi$) eller $\\cos x = \\frac{1}{2}$ (gir $x = \\frac{\\pi}{3}, \\frac{5\\pi}{3}$). Svar: $x = 0, \\frac{\\pi}{3}, \\pi, \\frac{5\\pi}{3}$.',
    },
    {
      id: 'r2-4-3-ov-10',
      number: '4.324',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Los likningen $\\sin^2 x = \\frac{1}{4}$ i intervallet $[0, 2\\pi)$.',
      hints: ['Ta kvadratroten av begge sider.', 'Husk at du far bade positiv og negativ losning.'],
      solution: '$\\sin x = \\pm \\frac{1}{2}$. For $\\sin x = \\frac{1}{2}$: $x = \\frac{\\pi}{6}, \\frac{5\\pi}{6}$. For $\\sin x = -\\frac{1}{2}$: $x = \\frac{7\\pi}{6}, \\frac{11\\pi}{6}$. Totalt 4 losninger.',
    },
    {
      id: 'r2-4-3-ov-11',
      number: '4.325',
      type: 'classic',
      difficulty: 'vanskelig',
      task: `Dybden i en havn varierer med tiden og kan modelleres med
$$d(t) = 8 + 2\\sin\\left(\\frac{\\pi}{6}t - \\frac{\\pi}{2}\\right)$$
der $d$ er dybden i meter og $t$ er tiden i timer etter midnatt.

Et skip trenger minst 9 meter dybde for aa seile inn. I hvilke tidsperioder i løpet av et dogn kan skipet seile inn i havnen?`,
      solution: '$d(t) \\geq 9$ gir $\\sin(\\frac{\\pi}{6}t - \\frac{\\pi}{2}) \\geq \\frac{1}{2}$. Med $u = \\frac{\\pi}{6}t - \\frac{\\pi}{2}$: $\\sin u \\geq \\frac{1}{2}$ nar $\\frac{\\pi}{6} + 2\\pi n \\leq u \\leq \\frac{5\\pi}{6} + 2\\pi n$. Dette gir $4 + 12n \\leq t \\leq 8 + 12n$. I løpet av et dogn: kl. 04:00-08:00 og kl. 16:00-20:00.',
    },
    {
      id: 'r2-4-3-ov-12',
      number: '4.326',
      type: 'classic',
      difficulty: 'medium',
      task: 'Los likningen $\\sin x = \\cos x$ i intervallet $[0, 2\\pi)$.',
      hints: ['Del begge sider på $\\cos x$.', 'Husk aa sjekke om $\\cos x = 0$ gir losninger.'],
      solution: 'Hvis $\\cos x \\neq 0$: $\\tan x = 1$, som gir $x = \\frac{\\pi}{4}, \\frac{5\\pi}{4}$. Sjekk $\\cos x = 0$: $x = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$, men da er $\\sin x = \\pm 1 \\neq 0$. Svar: $x = \\frac{\\pi}{4}, \\frac{5\\pi}{4}$.',
    },
    {
      id: 'r2-4-3-ov-13',
      number: '4.327',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Bestem alle verdier av $k$ slik at likningen $\\sin x = k$ har noyaktig 6 losninger i intervallet $[0, 5\\pi]$.',
      solution: 'Intervallet $[0, 5\\pi]$ inneholder 2.5 perioder. For $k \\neq \\pm 1, 0$: 5 losninger (2+2+1 fra halv periode). For $k = 0$: $x = 0, \\pi, 2\\pi, 3\\pi, 4\\pi, 5\\pi$ = 6 losninger. Svar: $k = 0$.',
    },
    {
      id: 'r2-4-3-ov-14',
      number: '4.328',
      type: 'classic',
      difficulty: 'vanskelig',
      task: `En sykkel har hjul med radius 30 cm. Nar sykkelen ruller, beveger et punkt på dekket seg i en sykloide. Den vertikale posisjonen til punktet kan tilnaermes med
$$y(t) = 30 + 30\\sin\\left(\\frac{v}{30}t - \\frac{\\pi}{2}\\right)$$
der $y$ er høyde over bakken i cm, $v$ er hastigheten i cm/s, og $t$ er tiden i sekunder.

Hvis sykkelen har hastighet $v = 300$ cm/s, hvor ofte er punktet noyaktig 45 cm over bakken?`,
      solution: 'Med $v = 300$: $y(t) = 30 + 30\\sin(10t - \\frac{\\pi}{2}) = 45$. Da er $\\sin(10t - \\frac{\\pi}{2}) = 0.5$. Generell losning: $10t - \\frac{\\pi}{2} = \\frac{\\pi}{6} + 2\\pi n$ eller $10t - \\frac{\\pi}{2} = \\frac{5\\pi}{6} + 2\\pi n$. Perioden er $\\frac{2\\pi}{10} = \\frac{\\pi}{5}$ sekunder. Det er 2 losninger per periode, sa punktet er på 45 cm høyde $\\frac{2}{\\pi/5} = \\frac{10}{\\pi} \\approx 3.18$ ganger per sekund.',
    },
    {
      id: 'r2-4-3-ov-15',
      number: '4.329',
      type: 'classic',
      difficulty: 'medium',
      task: 'Los likningen $|\\sin x| = \\frac{1}{2}$ i intervallet $[0, 2\\pi)$.',
      solution: '$|\\sin x| = \\frac{1}{2}$ betyr $\\sin x = \\frac{1}{2}$ eller $\\sin x = -\\frac{1}{2}$. Løsninger: $x = \\frac{\\pi}{6}, \\frac{5\\pi}{6}, \\frac{7\\pi}{6}, \\frac{11\\pi}{6}$ (4 losninger).',
    },
    {
      id: 'r2-4-3-ov-16',
      number: '4.330',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Vis at likningen $\\sin x = x - 1$ har noyaktig en losning.',
      hints: ['Betrakt funksjonen $f(x) = \\sin x - x + 1$.', 'Bruk egenskaper til $f$ for aa vise at den kun krysser $x$-aksen en gang.'],
      solution: 'La $f(x) = \\sin x - x + 1$. $f(0) = 1 > 0$ og $f(\\pi) = -\\pi + 1 < 0$. Siden $f$ er kontinuerlig, finnes minst en losning i $(0, \\pi)$. $f\'(x) = \\cos x - 1 \\leq 0$ for alle $x$, sa $f$ er monotont avtagende. Dermed finnes noyaktig en losning.',
    },
  ],
};

export const CHAPTER_R2_4_4: TextbookChapter = {
  id: 'r2-4-4',
  courseId: 'r2',
  chapterNumber: '4.4',
  title: 'Cosinuslikninger',
  description: 'Lose likninger med cosinus, inkludert generelle losninger og praktiske anvendelser.',
  estimatedMinutes: 50,
  competenceGoals: [
    'bruke trigonometriske funksjonar til a loyse praktiske problem',
    'analysere og lose trigonometriske likningar',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-4-intro',
      type: 'text',
      content: `## Introduksjon til cosinuslikninger

I forrige kapittel larte vi å løse sinuslikninger. Na skal vi se på **cosinuslikninger**, som er likninger der den ukjente star inne i en cosinusfunksjon.

**Eksempler på cosinuslikninger:**
- $\\cos(x) = \\frac{1}{2}$
- $\\cos(2x) = -1$
- $\\cos(x - \\frac{\\pi}{4}) = \\frac{\\sqrt{2}}{2}$

Cosinusfunksjonen har andre symmetriegenskaper enn sinus, noe som pavirker hvordan vi finner losningene.`,
    },

    // ========== COSINUSFUNKSJONENS EGENSKAPER ==========
    {
      id: 'r2-4-4-egenskaper',
      type: 'text',
      content: `## Cosinusfunksjonens symmetri

Cosinusfunksjonen $\\cos(x)$ har folgende viktige egenskaper:

**Verdimengde:** $-1 \\leq \\cos(x) \\leq 1$

**Periode:** $2\\pi$ (funksjonen gjentar seg for hver $2\\pi$)

**Symmetri:** $\\cos(-x) = \\cos(x)$ (partallssymmetri om $y$-aksen)

Denne symmetrien betyr at hvis $\\cos(\\alpha) = a$, så er ogsa $\\cos(-\\alpha) = a$.`,
    },

    {
      id: 'r2-4-4-def-1',
      type: 'definition',
      title: 'Cosinuslikning',
      content: `En **cosinuslikning** er en likning på formen

$$\\cos(u) = a$$

der $u$ er et uttrykk med den ukjente $x$, og $a$ er en konstant.

**Losbarhet:**
- Likningen har losning bare nar $-1 \\leq a \\leq 1$
- Hvis $|a| > 1$, finnes ingen losning`,
    },

    // ========== GRUNNLEGGENDE LOSNINGSMETODE ==========
    {
      id: 'r2-4-4-metode-intro',
      type: 'text',
      content: `## Steg-for-steg metode

For å løse cosinuslikninger bruker vi folgende fremgangmate:`,
    },

    {
      id: 'r2-4-4-theorem-1',
      type: 'theorem',
      title: 'Generell losning av $\\cos(x) = a$',
      content: `Hvis $\\cos(x) = a$ der $-1 \\leq a \\leq 1$, er den generelle losningen:

$$x = \\pm \\arccos(a) + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Forklaring:**
- $\\arccos(a)$ gir hovedlosningen i $[0, \\pi]$
- $\\pm$ kommer fra cosinusfunksjonens symmetri
- $+ 2\\pi n$ gir alle periodiske losninger`,
    },

    {
      id: 'r2-4-4-note-1',
      type: 'note',
      content: `**Sammenligning med sinus:**

| Funksjon | Generell losning |
|----------|------------------|
| $\\sin(x) = a$ | $x = \\arcsin(a) + 2\\pi n$ eller $x = \\pi - \\arcsin(a) + 2\\pi n$ |
| $\\cos(x) = a$ | $x = \\pm \\arccos(a) + 2\\pi n$ |

For cosinus bruker vi $\\pm$ i stedet for to separate uttrykk.`,
    },

    // ========== EKSEMPEL 1: GRUNNLEGGENDE ==========
    {
      id: 'r2-4-4-example-1',
      type: 'example',
      title: 'Eksempel 1: Enkel cosinuslikning',
      problem: 'Los likningen $\\cos(x) = \\frac{1}{2}$',
      solution: `**Steg 1:** Sjekk losbarhet
$\\frac{1}{2}$ ligger mellom $-1$ og $1$, sa likningen har losning.

**Steg 2:** Finn hovedlosningen
$\\arccos\\left(\\frac{1}{2}\\right) = \\frac{\\pi}{3}$

**Steg 3:** Skriv generell losning
$$x = \\pm \\frac{\\pi}{3} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Løsninger i $[0, 2\\pi)$:**
- $x = \\frac{\\pi}{3}$ (n = 0, positivt fortegn)
- $x = -\\frac{\\pi}{3} + 2\\pi = \\frac{5\\pi}{3}$ (n = 1, negativt fortegn)`,
    },

    {
      id: 'r2-4-4-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\cos(x) = \\frac{\\sqrt{3}}{2}$. Finn generell losning og alle losninger i $[0, 2\\pi)$.',
        solution: `$\\arccos\\left(\\frac{\\sqrt{3}}{2}\\right) = \\frac{\\pi}{6}$

Generell losning: $x = \\pm \\frac{\\pi}{6} + 2\\pi n$

Løsninger i $[0, 2\\pi)$: $x = \\frac{\\pi}{6}$ og $x = \\frac{11\\pi}{6}$`,
        hints: ['Husk at $\\cos(\\frac{\\pi}{6}) = \\frac{\\sqrt{3}}{2}$'],
      },
    },

    // ========== EKSEMPEL 2: NEGATIV VERDI ==========
    {
      id: 'r2-4-4-example-2',
      type: 'example',
      title: 'Eksempel 2: Negativ cosinusverdi',
      problem: 'Los likningen $\\cos(x) = -\\frac{1}{2}$',
      solution: `**Steg 1:** Finn hovedlosningen
$\\arccos\\left(-\\frac{1}{2}\\right) = \\frac{2\\pi}{3}$

**Steg 2:** Skriv generell losning
$$x = \\pm \\frac{2\\pi}{3} + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

**Løsninger i $[0, 2\\pi)$:**
- $x = \\frac{2\\pi}{3}$
- $x = -\\frac{2\\pi}{3} + 2\\pi = \\frac{4\\pi}{3}$

**Kontroll:** $\\cos\\left(\\frac{2\\pi}{3}\\right) = -\\frac{1}{2}$ \\checkmark`,
    },

    {
      id: 'r2-4-4-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\cos(x) = -\\frac{\\sqrt{2}}{2}$. Finn alle losninger i $[0, 2\\pi)$.',
        solution: `$\\arccos\\left(-\\frac{\\sqrt{2}}{2}\\right) = \\frac{3\\pi}{4}$

Generell losning: $x = \\pm \\frac{3\\pi}{4} + 2\\pi n$

Løsninger i $[0, 2\\pi)$: $x = \\frac{3\\pi}{4}$ og $x = \\frac{5\\pi}{4}$`,
        hints: ['$\\arccos(-a)$ ligger i intervallet $(\\frac{\\pi}{2}, \\pi]$'],
      },
    },

    // ========== EKSEMPEL 3: SPESIELLE VERDIER ==========
    {
      id: 'r2-4-4-example-3',
      type: 'example',
      title: 'Eksempel 3: Spesielle cosinusverdier',
      problem: 'Los likningene: a) $\\cos(x) = 0$ b) $\\cos(x) = 1$ c) $\\cos(x) = -1$',
      solution: `**a) $\\cos(x) = 0$**

$\\arccos(0) = \\frac{\\pi}{2}$

Generell losning: $x = \\pm \\frac{\\pi}{2} + 2\\pi n$

Dette kan skrives enklere som: $x = \\frac{\\pi}{2} + \\pi n$ (alle oddetalls-multipler av $\\frac{\\pi}{2}$)

**b) $\\cos(x) = 1$**

$\\arccos(1) = 0$

Generell losning: $x = 2\\pi n$ (bare en losning per periode)

**c) $\\cos(x) = -1$**

$\\arccos(-1) = \\pi$

Generell losning: $x = \\pi + 2\\pi n$`,
    },

    {
      id: 'r2-4-4-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\cos(x) = -1$ og finn alle losninger i intervallet $[-2\\pi, 2\\pi]$.',
        solution: `Generell losning: $x = \\pi + 2\\pi n$

I intervallet $[-2\\pi, 2\\pi]$:
- $n = -1$: $x = \\pi - 2\\pi = -\\pi$
- $n = 0$: $x = \\pi$

Løsninger: $x = -\\pi$ og $x = \\pi$`,
        hints: ['Cosinus er lik $-1$ kun i ett punkt per periode'],
      },
    },

    // ========== LIKNINGER PA FORMEN cos(kx) = a ==========
    {
      id: 'r2-4-4-kx-intro',
      type: 'text',
      content: `## Likninger på formen $\\cos(kx) = a$

Nar argumentet inneholder en faktor $k$, ma vi lose for hele argumentet forst, og deretter dele på $k$.`,
    },

    {
      id: 'r2-4-4-theorem-2',
      type: 'theorem',
      title: 'Løsning av $\\cos(kx) = a$',
      content: `For å løse $\\cos(kx) = a$ der $k \\neq 0$:

1. Sett $u = kx$ og los $\\cos(u) = a$
2. Fa $u = \\pm \\arccos(a) + 2\\pi n$
3. Del på $k$: $x = \\frac{\\pm \\arccos(a) + 2\\pi n}{k}$

**Generell losning:**
$$x = \\pm \\frac{\\arccos(a)}{k} + \\frac{2\\pi n}{k}, \\quad n \\in \\mathbb{Z}$$`,
    },

    // ========== EKSEMPEL 4: cos(2x) ==========
    {
      id: 'r2-4-4-example-4',
      type: 'example',
      title: 'Eksempel 4: Likning med $\\cos(2x)$',
      problem: 'Los likningen $\\cos(2x) = \\frac{1}{2}$. Finn alle losninger i $[0, 2\\pi)$.',
      solution: `**Steg 1:** Sett $u = 2x$
$\\cos(u) = \\frac{1}{2}$

**Steg 2:** Finn generell losning for $u$
$u = \\pm \\frac{\\pi}{3} + 2\\pi n$

**Steg 3:** Sett inn $u = 2x$ og los for $x$
$2x = \\pm \\frac{\\pi}{3} + 2\\pi n$
$x = \\pm \\frac{\\pi}{6} + \\pi n$

**Steg 4:** Finn losninger i $[0, 2\\pi)$

*Med positivt fortegn ($x = \\frac{\\pi}{6} + \\pi n$):*
- $n = 0$: $x = \\frac{\\pi}{6}$
- $n = 1$: $x = \\frac{\\pi}{6} + \\pi = \\frac{7\\pi}{6}$

*Med negativt fortegn ($x = -\\frac{\\pi}{6} + \\pi n$):*
- $n = 1$: $x = -\\frac{\\pi}{6} + \\pi = \\frac{5\\pi}{6}$
- $n = 2$: $x = -\\frac{\\pi}{6} + 2\\pi = \\frac{11\\pi}{6}$

**Løsninger:** $x = \\frac{\\pi}{6}, \\frac{5\\pi}{6}, \\frac{7\\pi}{6}, \\frac{11\\pi}{6}$`,
    },

    {
      id: 'r2-4-4-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\cos(2x) = -\\frac{\\sqrt{3}}{2}$. Finn alle losninger i $[0, 2\\pi)$.',
        solution: `$\\arccos\\left(-\\frac{\\sqrt{3}}{2}\\right) = \\frac{5\\pi}{6}$

$2x = \\pm \\frac{5\\pi}{6} + 2\\pi n$
$x = \\pm \\frac{5\\pi}{12} + \\pi n$

Løsninger i $[0, 2\\pi)$: $x = \\frac{5\\pi}{12}, \\frac{7\\pi}{12}, \\frac{17\\pi}{12}, \\frac{19\\pi}{12}$`,
        hints: ['Husk at perioden til $\\cos(2x)$ er $\\pi$, sa det blir dobbelt sa mange losninger'],
      },
    },

    // ========== EKSEMPEL 5: cos(3x) ==========
    {
      id: 'r2-4-4-example-5',
      type: 'example',
      title: 'Eksempel 5: Likning med $\\cos(3x)$',
      problem: 'Los likningen $\\cos(3x) = 0$. Finn alle losninger i $[0, 2\\pi)$.',
      solution: `**Steg 1:** Los for argumentet
$3x = \\frac{\\pi}{2} + \\pi n$ (forenklet form for $\\cos(u) = 0$)

**Steg 2:** Del på 3
$x = \\frac{\\pi}{6} + \\frac{\\pi n}{3}$

**Steg 3:** List opp losninger i $[0, 2\\pi)$
- $n = 0$: $x = \\frac{\\pi}{6}$
- $n = 1$: $x = \\frac{\\pi}{6} + \\frac{\\pi}{3} = \\frac{\\pi}{2}$
- $n = 2$: $x = \\frac{\\pi}{6} + \\frac{2\\pi}{3} = \\frac{5\\pi}{6}$
- $n = 3$: $x = \\frac{\\pi}{6} + \\pi = \\frac{7\\pi}{6}$
- $n = 4$: $x = \\frac{\\pi}{6} + \\frac{4\\pi}{3} = \\frac{3\\pi}{2}$
- $n = 5$: $x = \\frac{\\pi}{6} + \\frac{5\\pi}{3} = \\frac{11\\pi}{6}$

**Løsninger:** $x = \\frac{\\pi}{6}, \\frac{\\pi}{2}, \\frac{5\\pi}{6}, \\frac{7\\pi}{6}, \\frac{3\\pi}{2}, \\frac{11\\pi}{6}$`,
    },

    {
      id: 'r2-4-4-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\cos(3x) = 1$. Finn alle losninger i $[0, 2\\pi)$.',
        solution: `$3x = 2\\pi n$ (siden $\\cos(u) = 1$ gir $u = 2\\pi n$)

$x = \\frac{2\\pi n}{3}$

Løsninger i $[0, 2\\pi)$: $x = 0, \\frac{2\\pi}{3}, \\frac{4\\pi}{3}$`,
        hints: ['$\\cos(u) = 1$ har bare en losning per periode'],
      },
    },

    // ========== LIKNINGER PA FORMEN cos(kx + c) = a ==========
    {
      id: 'r2-4-4-kxc-intro',
      type: 'text',
      content: `## Likninger på formen $\\cos(kx + c) = a$

Nar argumentet ogsa inneholder en konstant $c$, ma vi ta hensyn til denne i losningen.`,
    },

    {
      id: 'r2-4-4-theorem-3',
      type: 'theorem',
      title: 'Løsning av $\\cos(kx + c) = a$',
      content: `For å løse $\\cos(kx + c) = a$:

1. Sett $u = kx + c$ og los $\\cos(u) = a$
2. Fa $u = \\pm \\arccos(a) + 2\\pi n$
3. Sett inn og los for $x$: $kx + c = \\pm \\arccos(a) + 2\\pi n$

**Generell losning:**
$$x = \\frac{-c \\pm \\arccos(a) + 2\\pi n}{k}, \\quad n \\in \\mathbb{Z}$$`,
    },

    // ========== EKSEMPEL 6: cos(x - pi/4) ==========
    {
      id: 'r2-4-4-example-6',
      type: 'example',
      title: 'Eksempel 6: Faseforskyving',
      problem: 'Los likningen $\\cos\\left(x - \\frac{\\pi}{4}\\right) = \\frac{\\sqrt{2}}{2}$',
      solution: `**Steg 1:** Sett $u = x - \\frac{\\pi}{4}$
$\\cos(u) = \\frac{\\sqrt{2}}{2}$

**Steg 2:** Finn losning for $u$
$u = \\pm \\frac{\\pi}{4} + 2\\pi n$

**Steg 3:** Sett inn og los for $x$
$x - \\frac{\\pi}{4} = \\pm \\frac{\\pi}{4} + 2\\pi n$
$x = \\frac{\\pi}{4} \\pm \\frac{\\pi}{4} + 2\\pi n$

**To losningsrekker:**
- $x = \\frac{\\pi}{4} + \\frac{\\pi}{4} + 2\\pi n = \\frac{\\pi}{2} + 2\\pi n$
- $x = \\frac{\\pi}{4} - \\frac{\\pi}{4} + 2\\pi n = 2\\pi n$

**Generell losning:** $x = 2\\pi n$ eller $x = \\frac{\\pi}{2} + 2\\pi n$

**Løsninger i $[0, 2\\pi)$:** $x = 0$ og $x = \\frac{\\pi}{2}$`,
    },

    {
      id: 'r2-4-4-ex-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-6',
        number: '6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\cos\\left(x + \\frac{\\pi}{3}\\right) = -\\frac{1}{2}$. Finn alle losninger i $[0, 2\\pi)$.',
        solution: `$x + \\frac{\\pi}{3} = \\pm \\frac{2\\pi}{3} + 2\\pi n$

Med positivt fortegn: $x = \\frac{2\\pi}{3} - \\frac{\\pi}{3} + 2\\pi n = \\frac{\\pi}{3} + 2\\pi n$
Med negativt fortegn: $x = -\\frac{2\\pi}{3} - \\frac{\\pi}{3} + 2\\pi n = -\\pi + 2\\pi n = \\pi + 2\\pi(n-1)$

Løsninger i $[0, 2\\pi)$: $x = \\frac{\\pi}{3}$ og $x = \\pi$`,
        hints: ['Husk a trekke fra $\\frac{\\pi}{3}$ fra begge losningsuttrykk'],
      },
    },

    // ========== EKSEMPEL 7: cos(2x + pi/6) ==========
    {
      id: 'r2-4-4-example-7',
      type: 'example',
      title: 'Eksempel 7: Kombinasjon av k og c',
      problem: 'Los likningen $\\cos\\left(2x + \\frac{\\pi}{6}\\right) = \\frac{\\sqrt{3}}{2}$. Finn alle losninger i $[0, \\pi]$.',
      solution: `**Steg 1:** La $u = 2x + \\frac{\\pi}{6}$
$\\cos(u) = \\frac{\\sqrt{3}}{2}$
$u = \\pm \\frac{\\pi}{6} + 2\\pi n$

**Steg 2:** Sett inn og los for $x$
$2x + \\frac{\\pi}{6} = \\pm \\frac{\\pi}{6} + 2\\pi n$
$2x = -\\frac{\\pi}{6} \\pm \\frac{\\pi}{6} + 2\\pi n$

**Med positivt fortegn:**
$2x = -\\frac{\\pi}{6} + \\frac{\\pi}{6} + 2\\pi n = 2\\pi n$
$x = \\pi n$

**Med negativt fortegn:**
$2x = -\\frac{\\pi}{6} - \\frac{\\pi}{6} + 2\\pi n = -\\frac{\\pi}{3} + 2\\pi n$
$x = -\\frac{\\pi}{6} + \\pi n$

**Løsninger i $[0, \\pi]$:**
- Fra $x = \\pi n$: $x = 0$ og $x = \\pi$
- Fra $x = -\\frac{\\pi}{6} + \\pi n$: $x = -\\frac{\\pi}{6} + \\pi = \\frac{5\\pi}{6}$

**Løsninger:** $x = 0, \\frac{5\\pi}{6}, \\pi$`,
    },

    {
      id: 'r2-4-4-ex-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-7',
        number: '7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los likningen $\\cos\\left(2x - \\frac{\\pi}{4}\\right) = -\\frac{\\sqrt{2}}{2}$. Finn alle losninger i $[0, 2\\pi)$.',
        solution: `$2x - \\frac{\\pi}{4} = \\pm \\frac{3\\pi}{4} + 2\\pi n$

Med +: $2x = \\frac{\\pi}{4} + \\frac{3\\pi}{4} + 2\\pi n = \\pi + 2\\pi n$, sa $x = \\frac{\\pi}{2} + \\pi n$
Med -: $2x = \\frac{\\pi}{4} - \\frac{3\\pi}{4} + 2\\pi n = -\\frac{\\pi}{2} + 2\\pi n$, sa $x = -\\frac{\\pi}{4} + \\pi n$

Løsninger i $[0, 2\\pi)$: $x = \\frac{\\pi}{2}, \\frac{3\\pi}{4}, \\frac{3\\pi}{2}, \\frac{7\\pi}{4}$`,
        hints: ['$\\arccos\\left(-\\frac{\\sqrt{2}}{2}\\right) = \\frac{3\\pi}{4}$'],
      },
    },

    // ========== SAMMENLIGNING MED SINUSLIKNINGER ==========
    {
      id: 'r2-4-4-sammenligning',
      type: 'text',
      content: `## Sammenligning: Sinus vs. Cosinus

Det er viktig a forsta forskjellene mellom losningsmetodene for sinus- og cosinuslikninger.`,
    },

    {
      id: 'r2-4-4-def-2',
      type: 'definition',
      title: 'Løsningsformler - oppsummering',
      content: `**Sinuslikning $\\sin(x) = a$:**
$$x = \\arcsin(a) + 2\\pi n \\quad \\text{eller} \\quad x = \\pi - \\arcsin(a) + 2\\pi n$$

**Cosinuslikning $\\cos(x) = a$:**
$$x = \\pm \\arccos(a) + 2\\pi n$$

**Merk:**
- Sinus: To separate uttrykk ($\\arcsin$ og $\\pi - \\arcsin$)
- Cosinus: Ett uttrykk med $\\pm$`,
    },

    // ========== EKSEMPEL 8: SAMMENLIGNING ==========
    {
      id: 'r2-4-4-example-8',
      type: 'example',
      title: 'Eksempel 8: Sammenligning av sinus og cosinus',
      problem: 'Los bade $\\sin(x) = \\frac{1}{2}$ og $\\cos(x) = \\frac{1}{2}$ i $[0, 2\\pi)$.',
      solution: `**Sinuslikning: $\\sin(x) = \\frac{1}{2}$**
$x = \\arcsin\\left(\\frac{1}{2}\\right) = \\frac{\\pi}{6}$
$x = \\pi - \\frac{\\pi}{6} = \\frac{5\\pi}{6}$

Løsninger: $x = \\frac{\\pi}{6}$ og $x = \\frac{5\\pi}{6}$

**Cosinuslikning: $\\cos(x) = \\frac{1}{2}$**
$x = \\pm \\arccos\\left(\\frac{1}{2}\\right) = \\pm \\frac{\\pi}{3}$
Med +: $x = \\frac{\\pi}{3}$
Med -: $x = -\\frac{\\pi}{3} + 2\\pi = \\frac{5\\pi}{3}$

Løsninger: $x = \\frac{\\pi}{3}$ og $x = \\frac{5\\pi}{3}$

**Observasjon:** Begge gir to losninger per periode, men på forskjellige steder.`,
    },

    {
      id: 'r2-4-4-ex-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-8',
        number: '8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los bade $\\sin(x) = -\\frac{\\sqrt{3}}{2}$ og $\\cos(x) = -\\frac{\\sqrt{3}}{2}$ i $[0, 2\\pi)$. Hvilken likning har losninger i tredje kvadrant?',
        solution: `**Sinus:** $x = -\\frac{\\pi}{3} + 2\\pi = \\frac{5\\pi}{3}$ og $x = \\pi + \\frac{\\pi}{3} = \\frac{4\\pi}{3}$

**Cosinus:** $x = \\frac{5\\pi}{6}$ og $x = \\frac{7\\pi}{6}$

Begge har losninger i tredje kvadrant: sinus har $\\frac{4\\pi}{3}$, cosinus har $\\frac{7\\pi}{6}$`,
        hints: ['Tredje kvadrant er der bade sinus og cosinus er negative'],
      },
    },

    // ========== LIKNINGER UTEN LOSNING ==========
    {
      id: 'r2-4-4-ingen-losning',
      type: 'text',
      content: `## Likninger uten losning

En cosinuslikning $\\cos(x) = a$ har ingen losning hvis $|a| > 1$.`,
    },

    // ========== EKSEMPEL 9: INGEN LOSNING ==========
    {
      id: 'r2-4-4-example-9',
      type: 'example',
      title: 'Eksempel 9: Likning uten losning',
      problem: 'Undersok om likningen $\\cos(x) = 2$ har noen losning.',
      solution: `Siden verdimengden til cosinus er $[-1, 1]$, og $2 > 1$, kan $\\cos(x)$ aldri være lik $2$.

**Konklusjon:** Likningen har **ingen losning**.

Pa samme mate har $\\cos(x) = -3$ ingen losning siden $-3 < -1$.`,
    },

    {
      id: 'r2-4-4-ex-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-9',
        number: '9',
        type: 'classic',
        difficulty: 'lett',
        task: 'Avgjor hvilke av folgende likninger som har losning:\na) $\\cos(x) = 0{,}8$\nb) $\\cos(x) = 1{,}2$\nc) $\\cos(x) = -0{,}99$\nd) $\\cos(2x) = -1{,}5$',
        solution: `a) Ja, $0{,}8 \\in [-1, 1]$
b) Nei, $1{,}2 > 1$
c) Ja, $-0{,}99 \\in [-1, 1]$
d) Nei, $-1{,}5 < -1$`,
        hints: ['Sjekk om verdien ligger i cosinusfunksjonens verdimengde $[-1, 1]$'],
      },
    },

    // ========== PRAKTISKE ANVENDELSER ==========
    {
      id: 'r2-4-4-anvendelser-intro',
      type: 'text',
      content: `## Praktiske anvendelser

Cosinuslikninger dukker opp i mange praktiske sammenhenger, spesielt i periodiske fenomener.`,
    },

    // ========== EKSEMPEL 10: TEMPERATUR ==========
    {
      id: 'r2-4-4-example-10',
      type: 'example',
      title: 'Eksempel 10: Temperaturmodell',
      problem: `Temperaturen i en by gjennom aret kan modelleres med funksjonen:

$$T(t) = 12 + 10\\cos\\left(\\frac{\\pi t}{6}\\right)$$

der $T$ er temperaturen i grader Celsius og $t$ er antall måneder etter 1. januar.

a) Nar er temperaturen $17$ grader?
b) Nar er temperaturen under $7$ grader?`,
      solution: `**a) Finn nar $T(t) = 17$:**

$12 + 10\\cos\\left(\\frac{\\pi t}{6}\\right) = 17$

$10\\cos\\left(\\frac{\\pi t}{6}\\right) = 5$

$\\cos\\left(\\frac{\\pi t}{6}\\right) = 0{,}5 = \\frac{1}{2}$

La $u = \\frac{\\pi t}{6}$:
$u = \\pm \\frac{\\pi}{3} + 2\\pi n$

$\\frac{\\pi t}{6} = \\pm \\frac{\\pi}{3} + 2\\pi n$

$t = \\pm 2 + 12n$

I løpet av et år ($0 \\leq t < 12$):
- $t = 2$ (mars)
- $t = -2 + 12 = 10$ (november)

**b) Finn nar $T(t) < 7$:**

$12 + 10\\cos\\left(\\frac{\\pi t}{6}\\right) < 7$

$\\cos\\left(\\frac{\\pi t}{6}\\right) < -0{,}5$

Cosinus er mindre enn $-0{,}5$ nar argumentet er mellom $\\frac{2\\pi}{3}$ og $\\frac{4\\pi}{3}$ (pluss perioder).

$\\frac{2\\pi}{3} < \\frac{\\pi t}{6} < \\frac{4\\pi}{3}$

$4 < t < 8$

Temperaturen er under 7 grader fra mai til august (dette gir ikke mening for en nordlig by, sa modellen er forenklet).`,
    },

    {
      id: 'r2-4-4-ex-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-10',
        number: '10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En pendel svinger slik at posisjonen er gitt ved $x(t) = 5\\cos(2t)$ cm, der $t$ er tid i sekunder.

a) Nar er pendelen i posisjon $x = 2{,}5$ cm for forste gang?
b) Hvor ofte passerer pendelen gjennom $x = 0$?`,
        solution: `a) $\\cos(2t) = 0{,}5$, sa $2t = \\pm\\frac{\\pi}{3} + 2\\pi n$.
For forste positive tid: $t = \\frac{\\pi}{6} \\approx 0{,}52$ sekunder.

b) $\\cos(2t) = 0$ gir $2t = \\frac{\\pi}{2} + \\pi n$, sa $t = \\frac{\\pi}{4} + \\frac{\\pi n}{2}$.
Pendelen passerer gjennom nullpunktet annenhver $\\frac{\\pi}{4}$ sekund, dvs. ca. 1,27 ganger per sekund.`,
        hints: ['Bruk at perioden til $\\cos(2t)$ er $\\pi$'],
      },
    },

    // ========== EKSEMPEL 11: LYDBOLGER ==========
    {
      id: 'r2-4-4-example-11',
      type: 'example',
      title: 'Eksempel 11: Lydbolger',
      problem: `En lydbylge beskrives av trykket $P(t) = P_0\\cos(2\\pi f t)$, der $f = 440$ Hz (tonen A).

Nar er trykket maksimalt ($P = P_0$) i løpet av de forste 10 millisekunder?`,
      solution: `**Finn nar $P(t) = P_0$:**

$P_0\\cos(2\\pi \\cdot 440 \\cdot t) = P_0$

$\\cos(880\\pi t) = 1$

$880\\pi t = 2\\pi n$

$t = \\frac{n}{440}$ sekunder

**I løpet av 10 ms ($0 \\leq t < 0{,}01$):**

Perioden er $T = \\frac{1}{440} \\approx 0{,}00227$ sekunder.

- $n = 0$: $t = 0$ ms
- $n = 1$: $t \\approx 2{,}27$ ms
- $n = 2$: $t \\approx 4{,}55$ ms
- $n = 3$: $t \\approx 6{,}82$ ms
- $n = 4$: $t \\approx 9{,}09$ ms

**Trykket er maksimalt ved $t = 0$, $2{,}27$, $4{,}55$, $6{,}82$ og $9{,}09$ ms.**`,
    },

    {
      id: 'r2-4-4-ex-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-11',
        number: '11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En vekselspenning er gitt ved $V(t) = 230\\sqrt{2}\\cos(100\\pi t)$ volt.

a) Finn alle tidspunkter i det forste sekundet der spenningen er $230$ volt.
b) Hvor mange ganger per sekund er spenningen null?`,
        solution: `a) $\\cos(100\\pi t) = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$

$100\\pi t = \\pm\\frac{\\pi}{4} + 2\\pi n$
$t = \\pm\\frac{1}{400} + \\frac{n}{50}$

I $[0, 1)$: 50 perioder gir 100 tidspunkter.

b) $\\cos(100\\pi t) = 0$ gir $100\\pi t = \\frac{\\pi}{2} + \\pi n$.
100 nullpunkter per sekund.`,
        hints: ['Perioden til funksjonen er $\\frac{1}{50}$ sekund'],
      },
    },

    // ========== EKSEMPEL 12: GEOMETRI ==========
    {
      id: 'r2-4-4-example-12',
      type: 'example',
      title: 'Eksempel 12: Geometrisk problem',
      problem: `I en trekant ABC er $\\angle A = x$, og vi vet at $\\cos(x) = \\frac{3}{5}$.

a) Finn $x$ i grader.
b) Finn $\\sin(x)$.`,
      solution: `**a) Finn vinkelen:**
$x = \\arccos\\left(\\frac{3}{5}\\right) = \\arccos(0{,}6)$

Bruker kalkulator: $x \\approx 53{,}13^\\circ$

**b) Finn $\\sin(x)$:**
Bruker identiteten $\\sin^2(x) + \\cos^2(x) = 1$:

$\\sin^2(x) = 1 - \\cos^2(x) = 1 - \\frac{9}{25} = \\frac{16}{25}$

$\\sin(x) = \\frac{4}{5}$ (positiv siden $x$ er en vinkel i en trekant)

**Merk:** Dette er en 3-4-5 rettvinklet trekant!`,
    },

    {
      id: 'r2-4-4-ex-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-12',
        number: '12',
        type: 'classic',
        difficulty: 'medium',
        task: 'En vinkel $\\theta$ i en rettvinklet trekant oppfyller $\\cos(\\theta) = \\frac{5}{13}$. Finn $\\sin(\\theta)$ og $\\tan(\\theta)$.',
        solution: `$\\sin^2(\\theta) = 1 - \\frac{25}{169} = \\frac{144}{169}$

$\\sin(\\theta) = \\frac{12}{13}$

$\\tan(\\theta) = \\frac{\\sin(\\theta)}{\\cos(\\theta)} = \\frac{12/13}{5/13} = \\frac{12}{5}$`,
        hints: ['Bruk den pytagoreiske identiteten $\\sin^2 + \\cos^2 = 1$'],
      },
    },

    // ========== EKSEMPEL 13: KOMBINERT ==========
    {
      id: 'r2-4-4-example-13',
      type: 'example',
      title: 'Eksempel 13: Krevende likning',
      problem: 'Los likningen $2\\cos^2(x) - 1 = 0$',
      solution: `**Steg 1:** Omform likningen
$2\\cos^2(x) = 1$
$\\cos^2(x) = \\frac{1}{2}$
$\\cos(x) = \\pm \\frac{1}{\\sqrt{2}} = \\pm \\frac{\\sqrt{2}}{2}$

**Steg 2:** Los for $\\cos(x) = \\frac{\\sqrt{2}}{2}$
$x = \\pm \\frac{\\pi}{4} + 2\\pi n$

**Steg 3:** Los for $\\cos(x) = -\\frac{\\sqrt{2}}{2}$
$x = \\pm \\frac{3\\pi}{4} + 2\\pi n$

**Kombinert losning i $[0, 2\\pi)$:**
$x = \\frac{\\pi}{4}, \\frac{3\\pi}{4}, \\frac{5\\pi}{4}, \\frac{7\\pi}{4}$

**Alternativ:** Bruk identiteten $\\cos(2x) = 2\\cos^2(x) - 1$:
$\\cos(2x) = 0$
$2x = \\frac{\\pi}{2} + \\pi n$
$x = \\frac{\\pi}{4} + \\frac{\\pi n}{2}$`,
    },

    {
      id: 'r2-4-4-ex-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-13',
        number: '13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los likningen $\\cos^2(x) - \\cos(x) = 0$ i $[0, 2\\pi)$.',
        solution: `$\\cos(x)(\\cos(x) - 1) = 0$

Enten $\\cos(x) = 0$ eller $\\cos(x) = 1$.

$\\cos(x) = 0$: $x = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$
$\\cos(x) = 1$: $x = 0$

Løsninger: $x = 0, \\frac{\\pi}{2}, \\frac{3\\pi}{2}$`,
        hints: ['Faktoriser ved a trekke ut $\\cos(x)$'],
      },
    },

    // ========== EKSEMPEL 14: RADIANER OG GRADER ==========
    {
      id: 'r2-4-4-example-14',
      type: 'example',
      title: 'Eksempel 14: Løsning i grader',
      problem: 'Los likningen $\\cos(x) = 0{,}6$ og gi svaret i grader. Finn alle losninger i $[0^\\circ, 360^\\circ)$.',
      solution: `**Steg 1:** Finn hovedlosningen
$x = \\arccos(0{,}6) \\approx 53{,}13^\\circ$

**Steg 2:** Skriv generell losning
$x = \\pm 53{,}13^\\circ + 360^\\circ \\cdot n$

**Steg 3:** Finn losninger i $[0^\\circ, 360^\\circ)$
- Med +: $x \\approx 53{,}13^\\circ$
- Med -: $x \\approx -53{,}13^\\circ + 360^\\circ = 306{,}87^\\circ$

**Løsninger:** $x \\approx 53{,}13^\\circ$ og $x \\approx 306{,}87^\\circ$`,
    },

    {
      id: 'r2-4-4-ex-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-4-ex-14',
        number: '14',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\cos(x) = -0{,}3$ og gi svaret i grader. Finn alle losninger i $[0^\\circ, 360^\\circ)$.',
        solution: `$\\arccos(-0{,}3) \\approx 107{,}46^\\circ$

Generell losning: $x = \\pm 107{,}46^\\circ + 360^\\circ n$

Løsninger i $[0^\\circ, 360^\\circ)$:
$x \\approx 107{,}46^\\circ$ og $x \\approx 252{,}54^\\circ$`,
        hints: ['Bruk kalkulator for å finne $\\arccos(-0{,}3)$'],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-4-4-oppsummering',
      type: 'text',
      content: `## Oppsummering

### Hovedpunkter

1. **Generell losning av $\\cos(x) = a$:**
   $$x = \\pm \\arccos(a) + 2\\pi n, \\quad n \\in \\mathbb{Z}$$

2. **For $\\cos(kx + c) = a$:**
   $$x = \\frac{-c \\pm \\arccos(a) + 2\\pi n}{k}$$

3. **Symmetri:** $\\cos(-x) = \\cos(x)$ gir $\\pm$ i losningsformelen

4. **Losbarhet:** Kun losning nar $-1 \\leq a \\leq 1$

5. **Antall losninger:** Per periode $[0, 2\\pi)$:
   - Generelt 2 losninger
   - 1 losning hvis $a = \\pm 1$
   - 0 losninger hvis $|a| > 1$`,
    },

    {
      id: 'r2-4-4-tip-1',
      type: 'tip',
      content: `**Huskeliste for cosinuslikninger:**
1. Sjekk om $|a| \\leq 1$
2. Finn $\\arccos(a)$
3. Bruk $\\pm$ for a fa begge losningsrekker
4. Husk a dele på $k$ hvis argumentet er $kx + c$
5. Juster for faseforskyvning $c$
6. List opp losninger i gitt intervall`,
    },

    // ========== EKSTRAOPPGAVER ==========
    {
      id: 'r2-4-4-ekstra',
      type: 'collapsible',
      title: 'Ekstraoppgaver',
      buttonText: 'Vis ekstraoppgaver',
      content: [
        {
          id: 'r2-4-4-ekstra-1',
          type: 'exercise',
          exercise: {
            id: 'r2-4-4-ekstra-ex-1',
            number: '15',
            type: 'classic',
            difficulty: 'medium',
            task: 'Los likningen $\\cos\\left(\\frac{x}{2}\\right) = \\frac{1}{2}$ i $[0, 4\\pi)$.',
            solution: `$\\frac{x}{2} = \\pm\\frac{\\pi}{3} + 2\\pi n$
$x = \\pm\\frac{2\\pi}{3} + 4\\pi n$

Løsninger i $[0, 4\\pi)$: $x = \\frac{2\\pi}{3}, \\frac{10\\pi}{3}$ (fra +) og $x = \\frac{4\\pi}{3} + 4\\pi = \\frac{16\\pi}{3}$ (utenfor)
og $x = -\\frac{2\\pi}{3} + 4\\pi = \\frac{10\\pi}{3}$ (duplikat)

Faktiske losninger: $x = \\frac{2\\pi}{3}$ og $x = \\frac{10\\pi}{3}$`,
            hints: ['Perioden til $\\cos(x/2)$ er $4\\pi$'],
          },
        },
        {
          id: 'r2-4-4-ekstra-2',
          type: 'exercise',
          exercise: {
            id: 'r2-4-4-ekstra-ex-2',
            number: '16',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'Los likningssystemet:\n$\\cos(x) = \\sin(x)$\ni $[0, 2\\pi)$.',
            solution: `$\\cos(x) = \\sin(x)$
$\\frac{\\sin(x)}{\\cos(x)} = 1$
$\\tan(x) = 1$
$x = \\frac{\\pi}{4} + \\pi n$

Løsninger i $[0, 2\\pi)$: $x = \\frac{\\pi}{4}$ og $x = \\frac{5\\pi}{4}$`,
            hints: ['Del begge sider på $\\cos(x)$ og bruk tangens'],
          },
        },
        {
          id: 'r2-4-4-ekstra-3',
          type: 'exercise',
          exercise: {
            id: 'r2-4-4-ekstra-ex-3',
            number: '17',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'For hvilke verdier av $k$ har likningen $\\cos(x) = k$ noyaktig en losning i $[0, \\pi]$?',
            solution: `I intervallet $[0, \\pi]$ er cosinus strengt avtagende fra 1 til -1.

For $-1 < k < 1$ finnes noyaktig en losning.
For $k = 1$ er losningen $x = 0$ (randslosning).
For $k = -1$ er losningen $x = \\pi$ (randslosning).

Svar: Alle $k \\in [-1, 1]$ gir noyaktig en losning i $[0, \\pi]$.`,
            hints: ['Tenk på hvordan cosinusgrafen ser ut i intervallet $[0, \\pi]$'],
          },
        },
        {
          id: 'r2-4-4-ekstra-4',
          type: 'exercise',
          exercise: {
            id: 'r2-4-4-ekstra-ex-4',
            number: '18',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'En satellitt følger en bane der høyde over jordoverflaten er gitt ved $h(t) = 400 + 50\\cos\\left(\\frac{2\\pi t}{90}\\right)$ km, der $t$ er tid i minutter. Finn alle tidspunkter i en hel periode der hoyen er noyaktig 425 km.',
            solution: `$400 + 50\\cos\\left(\\frac{2\\pi t}{90}\\right) = 425$
$\\cos\\left(\\frac{2\\pi t}{90}\\right) = 0{,}5$
$\\frac{2\\pi t}{90} = \\pm\\frac{\\pi}{3} + 2\\pi n$
$t = \\pm 15 + 90n$

I en periode $[0, 90)$:
$t = 15$ min og $t = -15 + 90 = 75$ min`,
            hints: ['Perioden er 90 minutter'],
          },
        },
      ],
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_4_5: TextbookChapter = {
  id: 'r2-4-5',
  courseId: 'r2',
  chapterNumber: '4.5',
  title: 'Tangenslikninger',
  description: 'Loese likninger med tangens.',
  estimatedMinutes: 45,
  competenceGoals: [
    'bruke trigonometriske funksjonar til aa loyse praktiske problem',
    'analysere og loyse likningar med tangensfunksjonen',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-5-intro',
      type: 'text',
      content: `## Hva er en tangenslikning?

En **tangenslikning** er en likning der den ukjente $x$ star i argumentet til en tangensfunksjon.

**Eksempler på tangenslikninger:**
- $\\tan(x) = 1$
- $\\tan(2x) = \\sqrt{3}$
- $\\tan(x - \\frac{\\pi}{4}) = -1$

I dette kapitlet skal vi laere hvordan vi loser slike likninger og finner alle losningene.`,
    },

    // ========== TANGENSFUNKSJONEN - REPETISJON ==========
    {
      id: 'r2-4-5-repetisjon',
      type: 'definition',
      title: 'Tangensfunksjonen',
      content: `Tangensfunksjonen er definert som:

$$\\tan(x) = \\frac{\\sin(x)}{\\cos(x)}$$

**Viktige egenskaper:**
- **Periode:** $\\pi$ (ikke $2\\pi$ som for sinus og cosinus)
- **Definisjonsmengde:** $x \\neq \\frac{\\pi}{2} + n\\pi$, der $n \\in \\mathbb{Z}$
- **Verdimengde:** $\\mathbb{R}$ (alle reelle tall)
- **Nullpunkter:** $x = n\\pi$, der $n \\in \\mathbb{Z}$`,
    },

    {
      id: 'r2-4-5-graf',
      type: 'geogebra',
      title: 'Grafen til tangensfunksjonen',
      description: 'Studer grafen til $y = \\tan(x)$. Legg merke til periodisiteten og de vertikale asymptotene.',
      appType: 'graphing',
      commands: [
        'f(x) = tan(x)',
        'SetAxisLabels(1, "x", "y")',
        'ZoomIn(-2*pi, -5, 2*pi, 5)',
      ],
    },

    // ========== GRUNNLEGGENDE TANGENSLIKNING ==========
    {
      id: 'r2-4-5-grunnleggende',
      type: 'theorem',
      title: 'Løsning av tan(x) = a',
      content: `For likningen $\\tan(x) = a$ der $a$ er et reelt tall:

$$x = \\arctan(a) + n\\pi, \\quad n \\in \\mathbb{Z}$$

**Merk:** Siden tangens har periode $\\pi$, far vi en ny losning for hver $\\pi$ vi legger til.

Dette er enklere enn for sinus og cosinus, der vi matte finne to losninger per periode!`,
    },

    {
      id: 'r2-4-5-eksempel-1',
      type: 'example',
      title: 'Eksempel 1: Enkel tangenslikning',
      problem: `Los likningen $\\tan(x) = 1$.`,
      solution: `Vi vet at $\\tan(\\frac{\\pi}{4}) = 1$.

Den generelle losningen er:
$$x = \\frac{\\pi}{4} + n\\pi, \\quad n \\in \\mathbb{Z}$$

**De forste positive losningene:**
- $n = 0$: $x = \\frac{\\pi}{4}$
- $n = 1$: $x = \\frac{\\pi}{4} + \\pi = \\frac{5\\pi}{4}$
- $n = 2$: $x = \\frac{\\pi}{4} + 2\\pi = \\frac{9\\pi}{4}$

**Svar:** $x = \\frac{\\pi}{4} + n\\pi$, der $n \\in \\mathbb{Z}$`,
    },

    {
      id: 'r2-4-5-oppgave-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\tan(x) = 0$. Gi den generelle losningen.',
        solution: '$x = n\\pi$, der $n \\in \\mathbb{Z}$',
        hints: ['Nar er $\\tan(x) = 0$? Tenk på nullpunktene til sinusfunksjonen.'],
      },
    },

    {
      id: 'r2-4-5-eksempel-2',
      type: 'example',
      title: 'Eksempel 2: Tangenslikning med sqrt(3)',
      problem: `Los likningen $\\tan(x) = \\sqrt{3}$.`,
      solution: `Vi vet at $\\tan(\\frac{\\pi}{3}) = \\sqrt{3}$ (fra den likesidete trekanten).

Den generelle losningen er:
$$x = \\frac{\\pi}{3} + n\\pi, \\quad n \\in \\mathbb{Z}$$

**Svar:** $x = \\frac{\\pi}{3} + n\\pi$, der $n \\in \\mathbb{Z}$`,
    },

    {
      id: 'r2-4-5-oppgave-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-2',
        number: '2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\tan(x) = \\frac{1}{\\sqrt{3}}$. Gi den generelle losningen.',
        solution: '$x = \\frac{\\pi}{6} + n\\pi$, der $n \\in \\mathbb{Z}$',
        hints: ['Husk at $\\tan(\\frac{\\pi}{6}) = \\frac{1}{\\sqrt{3}}$.'],
      },
    },

    // ========== NEGATIVE VERDIER ==========
    {
      id: 'r2-4-5-negative',
      type: 'text',
      content: `## Tangenslikninger med negative verdier

Nar $\\tan(x) = -a$ (negativ verdi), bruker vi at:
$$\\tan(-\\theta) = -\\tan(\\theta)$$

Dette betyr at hvis $\\tan(\\theta) = a$, så er $\\tan(-\\theta) = -a$.`,
    },

    {
      id: 'r2-4-5-eksempel-3',
      type: 'example',
      title: 'Eksempel 3: Negativ tangensverdi',
      problem: `Los likningen $\\tan(x) = -1$.`,
      solution: `Vi vet at $\\tan(\\frac{\\pi}{4}) = 1$, sa $\\tan(-\\frac{\\pi}{4}) = -1$.

Alternativt kan vi bruke $\\tan(\\frac{3\\pi}{4}) = -1$ (i andre kvadrant).

Den generelle losningen er:
$$x = -\\frac{\\pi}{4} + n\\pi = \\frac{3\\pi}{4} + n\\pi, \\quad n \\in \\mathbb{Z}$$

**Begge uttrykk gir de samme losningene!**

**Svar:** $x = -\\frac{\\pi}{4} + n\\pi$ eller $x = \\frac{3\\pi}{4} + n\\pi$`,
    },

    {
      id: 'r2-4-5-oppgave-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-3',
        number: '3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Los likningen $\\tan(x) = -\\sqrt{3}$. Gi den generelle losningen.',
        solution: '$x = -\\frac{\\pi}{3} + n\\pi$ eller $x = \\frac{2\\pi}{3} + n\\pi$, der $n \\in \\mathbb{Z}$',
        hints: ['Bruk at $\\tan(\\frac{\\pi}{3}) = \\sqrt{3}$.'],
      },
    },

    // ========== BRUK AV KALKULATOR ==========
    {
      id: 'r2-4-5-kalkulator',
      type: 'text',
      content: `## Bruk av kalkulator for arctan

Nar tangensverdien ikke er en "pen" verdi, bruker vi kalkulator:

$$x = \\arctan(a) + n\\pi$$

**Viktig:** Kalkulatoren gir kun en verdi (hovedverdien) i intervallet $(-\\frac{\\pi}{2}, \\frac{\\pi}{2})$. Vi ma legge til $n\\pi$ for a fa alle losninger.`,
    },

    {
      id: 'r2-4-5-eksempel-4',
      type: 'example',
      title: 'Eksempel 4: Bruk av arctan på kalkulator',
      problem: `Los likningen $\\tan(x) = 2{,}5$.`,
      solution: `Med kalkulator finner vi:
$$\\arctan(2{,}5) \\approx 1{,}19 \\text{ rad}$$

Den generelle losningen er:
$$x \\approx 1{,}19 + n\\pi, \\quad n \\in \\mathbb{Z}$$

**Løsninger i intervallet $[0, 2\\pi]$:**
- $n = 0$: $x \\approx 1{,}19$
- $n = 1$: $x \\approx 1{,}19 + \\pi \\approx 4{,}33$

**Svar:** $x \\approx 1{,}19 + n\\pi$, der $n \\in \\mathbb{Z}$`,
    },

    {
      id: 'r2-4-5-oppgave-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\tan(x) = 3$. Finn den generelle losningen og alle losninger i $[0, 2\\pi]$.',
        solution: '$x \\approx 1{,}25 + n\\pi$. I $[0, 2\\pi]$: $x \\approx 1{,}25$ og $x \\approx 4{,}39$',
        hints: ['Bruk kalkulator for å finne $\\arctan(3)$.'],
      },
    },

    // ========== TRANSFORMERTE TANGENSLIKNINGER ==========
    {
      id: 'r2-4-5-transformert',
      type: 'theorem',
      title: 'Løsning av tan(kx + c) = a',
      content: `For likningen $\\tan(kx + c) = a$:

**Fremgangsmate:**
1. Sett $u = kx + c$
2. Los $\\tan(u) = a$ og fa $u = \\arctan(a) + n\\pi$
3. Los for $x$: $kx + c = \\arctan(a) + n\\pi$
4. $x = \\frac{\\arctan(a) + n\\pi - c}{k}$

**Generell formel:**
$$x = \\frac{\\arctan(a) - c + n\\pi}{k}, \\quad n \\in \\mathbb{Z}$$`,
    },

    {
      id: 'r2-4-5-eksempel-5',
      type: 'example',
      title: 'Eksempel 5: Tangenslikning med koeffisient foran x',
      problem: `Los likningen $\\tan(2x) = 1$.`,
      solution: `**Steg 1:** Sett $u = 2x$
$$\\tan(u) = 1$$

**Steg 2:** Los for $u$
$$u = \\frac{\\pi}{4} + n\\pi$$

**Steg 3:** Tilbake til $x$
$$2x = \\frac{\\pi}{4} + n\\pi$$
$$x = \\frac{\\pi}{8} + \\frac{n\\pi}{2}$$

**Svar:** $x = \\frac{\\pi}{8} + \\frac{n\\pi}{2}$, der $n \\in \\mathbb{Z}$

**Løsninger i $[0, 2\\pi]$:**
$x = \\frac{\\pi}{8}, \\frac{5\\pi}{8}, \\frac{9\\pi}{8}, \\frac{13\\pi}{8}$`,
    },

    {
      id: 'r2-4-5-oppgave-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\tan(3x) = \\sqrt{3}$. Finn den generelle losningen.',
        solution: '$x = \\frac{\\pi}{9} + \\frac{n\\pi}{3}$, der $n \\in \\mathbb{Z}$',
        hints: ['Sett $u = 3x$ og los $\\tan(u) = \\sqrt{3}$ forst.'],
      },
    },

    {
      id: 'r2-4-5-eksempel-6',
      type: 'example',
      title: 'Eksempel 6: Tangenslikning med faseforskyvning',
      problem: `Los likningen $\\tan(x - \\frac{\\pi}{4}) = 1$.`,
      solution: `**Steg 1:** Sett $u = x - \\frac{\\pi}{4}$
$$\\tan(u) = 1$$

**Steg 2:** Los for $u$
$$u = \\frac{\\pi}{4} + n\\pi$$

**Steg 3:** Tilbake til $x$
$$x - \\frac{\\pi}{4} = \\frac{\\pi}{4} + n\\pi$$
$$x = \\frac{\\pi}{2} + n\\pi$$

**Svar:** $x = \\frac{\\pi}{2} + n\\pi$, der $n \\in \\mathbb{Z}$`,
    },

    {
      id: 'r2-4-5-oppgave-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-6',
        number: '6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\tan(x + \\frac{\\pi}{6}) = -1$. Finn den generelle losningen.',
        solution: '$x = \\frac{7\\pi}{12} + n\\pi$, der $n \\in \\mathbb{Z}$',
        hints: ['Sett $u = x + \\frac{\\pi}{6}$ og los $\\tan(u) = -1$ forst.'],
      },
    },

    {
      id: 'r2-4-5-eksempel-7',
      type: 'example',
      title: 'Eksempel 7: Kombinert transformasjon',
      problem: `Los likningen $\\tan(2x + \\frac{\\pi}{3}) = \\sqrt{3}$.`,
      solution: `**Steg 1:** Sett $u = 2x + \\frac{\\pi}{3}$
$$\\tan(u) = \\sqrt{3}$$

**Steg 2:** Los for $u$
$$u = \\frac{\\pi}{3} + n\\pi$$

**Steg 3:** Tilbake til $x$
$$2x + \\frac{\\pi}{3} = \\frac{\\pi}{3} + n\\pi$$
$$2x = n\\pi$$
$$x = \\frac{n\\pi}{2}$$

**Svar:** $x = \\frac{n\\pi}{2}$, der $n \\in \\mathbb{Z}$

**Løsninger i $[0, 2\\pi]$:** $x = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}, 2\\pi$`,
    },

    {
      id: 'r2-4-5-oppgave-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-7',
        number: '7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los likningen $\\tan(2x - \\frac{\\pi}{4}) = -\\sqrt{3}$. Finn alle losninger i $[0, \\pi]$.',
        solution: '$x = \\frac{5\\pi}{24}$ og $x = \\frac{17\\pi}{24}$',
        hints: [
          'Sett $u = 2x - \\frac{\\pi}{4}$ og los $\\tan(u) = -\\sqrt{3}$.',
          'Husk at $\\tan(-\\frac{\\pi}{3}) = -\\sqrt{3}$.',
        ],
      },
    },

    // ========== DEFINISJONSMENGDE ==========
    {
      id: 'r2-4-5-definisjon',
      type: 'warning',
      title: 'Definisjonsmengde for tangens',
      content: `Tangensfunksjonen er **ikke definert** nar cosinus er null:

$$\\tan(x) = \\frac{\\sin(x)}{\\cos(x)} \\text{ er udefinert nar } \\cos(x) = 0$$

Dette skjer for:
$$x = \\frac{\\pi}{2} + n\\pi, \\quad n \\in \\mathbb{Z}$$

**Nar du loser tangenslikninger, ma du alltid sjekke at losningene ikke faller på disse punktene!**`,
    },

    {
      id: 'r2-4-5-eksempel-8',
      type: 'example',
      title: 'Eksempel 8: Sjekk av definisjonsmengde',
      problem: `Los likningen $\\tan(x) = \\tan(\\frac{\\pi}{2})$.`,
      solution: `**Denne likningen har ingen losning!**

$\\tan(\\frac{\\pi}{2})$ er udefinert, sa vi kan ikke ha en likning der tangens skal være lik denne verdien.

Ved $x = \\frac{\\pi}{2}$ har tangensfunksjonen en vertikal asymptote.`,
    },

    {
      id: 'r2-4-5-oppgave-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-8',
        number: '8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Forklar hvorfor likningen $\\tan(2x) = \\tan(\\frac{\\pi}{2})$ ikke har noen losning.',
        solution: '$\\tan(\\frac{\\pi}{2})$ er udefinert fordi $\\cos(\\frac{\\pi}{2}) = 0$. Tangens har en vertikal asymptote her.',
        hints: ['Nar er tangensfunksjonen udefinert?'],
      },
    },

    // ========== SAMMENLIGNING MED SIN/COS ==========
    {
      id: 'r2-4-5-sammenligning',
      type: 'text',
      content: `## Sammenligning med sinus- og cosinuslikninger

| Egenskap | Sinus/Cosinus | Tangens |
|----------|---------------|---------|
| Periode | $2\\pi$ | $\\pi$ |
| Løsninger per periode | 2 (vanligvis) | 1 |
| Generell losning | $x = \\alpha + 2n\\pi$ og $x = \\pi - \\alpha + 2n\\pi$ | $x = \\alpha + n\\pi$ |
| Verdimengde | $[-1, 1]$ | $\\mathbb{R}$ |
| Definisjonsmengde | $\\mathbb{R}$ | $x \\neq \\frac{\\pi}{2} + n\\pi$ |

**Fordel med tangenslikninger:** Vi far bare en "type" losning, ikke to som for sinus og cosinus!`,
    },

    {
      id: 'r2-4-5-eksempel-9',
      type: 'example',
      title: 'Eksempel 9: Sammenligning av losningsmetoder',
      problem: `Sammenlign losningene av:
a) $\\sin(x) = \\frac{\\sqrt{2}}{2}$
b) $\\tan(x) = 1$`,
      solution: `**a) Sinuslikning:**
$\\sin(x) = \\frac{\\sqrt{2}}{2}$

Løsninger: $x = \\frac{\\pi}{4} + 2n\\pi$ og $x = \\frac{3\\pi}{4} + 2n\\pi$

I $[0, 2\\pi]$: $x = \\frac{\\pi}{4}$ og $x = \\frac{3\\pi}{4}$ (2 losninger)

**b) Tangenslikning:**
$\\tan(x) = 1$

Løsning: $x = \\frac{\\pi}{4} + n\\pi$

I $[0, 2\\pi]$: $x = \\frac{\\pi}{4}$ og $x = \\frac{5\\pi}{4}$ (2 losninger)

**Merk:** Begge har 2 losninger i $[0, 2\\pi]$, men tangenslikningen har enklere generell form!`,
    },

    {
      id: 'r2-4-5-oppgave-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-9',
        number: '9',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn alle losninger i $[0, 2\\pi]$ for: a) $\\cos(x) = \\frac{1}{2}$ b) $\\tan(x) = \\frac{1}{\\sqrt{3}}$. Sammenlign antall losninger.',
        solution: 'a) $x = \\frac{\\pi}{3}$ og $x = \\frac{5\\pi}{3}$. b) $x = \\frac{\\pi}{6}$ og $x = \\frac{7\\pi}{6}$. Begge har 2 losninger.',
        hints: ['Husk de eksakte verdiene for cosinus og tangens.'],
      },
    },

    // ========== LIKNINGER SOM KAN OMFORMES ==========
    {
      id: 'r2-4-5-omforming',
      type: 'text',
      content: `## Likninger som kan omformes til tangenslikninger

Noen likninger som inneholder sinus og cosinus kan omformes til tangenslikninger:

$$\\frac{\\sin(x)}{\\cos(x)} = a \\quad \\Rightarrow \\quad \\tan(x) = a$$

Dette er nyttig nar vi har braker med sinus og cosinus.`,
    },

    {
      id: 'r2-4-5-eksempel-10',
      type: 'example',
      title: 'Eksempel 10: Omforming til tangenslikning',
      problem: `Los likningen $\\sin(x) = \\cos(x)$.`,
      solution: `**Metode:** Del på $\\cos(x)$ (forutsatt at $\\cos(x) \\neq 0$):

$$\\frac{\\sin(x)}{\\cos(x)} = 1$$
$$\\tan(x) = 1$$

Løsning: $x = \\frac{\\pi}{4} + n\\pi$

**Sjekk:** Er $\\cos(\\frac{\\pi}{4} + n\\pi) = 0$? Nei, sa losningene er gyldige.

**Svar:** $x = \\frac{\\pi}{4} + n\\pi$, der $n \\in \\mathbb{Z}$`,
    },

    {
      id: 'r2-4-5-oppgave-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-10',
        number: '10',
        type: 'classic',
        difficulty: 'medium',
        task: 'Los likningen $\\sin(x) = \\sqrt{3}\\cos(x)$.',
        solution: '$x = \\frac{\\pi}{3} + n\\pi$, der $n \\in \\mathbb{Z}$',
        hints: ['Del på $\\cos(x)$ for a fa en tangenslikning.'],
      },
    },

    {
      id: 'r2-4-5-eksempel-11',
      type: 'example',
      title: 'Eksempel 11: Mer kompleks omforming',
      problem: `Los likningen $2\\sin(x) + 3\\cos(x) = 0$.`,
      solution: `**Metode:** Flytt og del på $\\cos(x)$:

$$2\\sin(x) = -3\\cos(x)$$
$$\\frac{\\sin(x)}{\\cos(x)} = -\\frac{3}{2}$$
$$\\tan(x) = -\\frac{3}{2}$$

Med kalkulator: $\\arctan(-\\frac{3}{2}) \\approx -0{,}98$ rad

Løsning: $x \\approx -0{,}98 + n\\pi$

I $[0, 2\\pi]$: $x \\approx 2{,}16$ og $x \\approx 5{,}30$

**Svar:** $x \\approx -0{,}98 + n\\pi$ eller $x \\approx 2{,}16 + n\\pi$`,
    },

    {
      id: 'r2-4-5-oppgave-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-11',
        number: '11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Los likningen $3\\sin(x) - 4\\cos(x) = 0$. Finn alle losninger i $[0, 2\\pi]$.',
        solution: '$x \\approx 0{,}93$ og $x \\approx 4{,}07$',
        hints: [
          'Omform til $\\tan(x) = \\frac{4}{3}$.',
          'Bruk kalkulator for $\\arctan(\\frac{4}{3})$.',
        ],
      },
    },

    // ========== PRAKTISKE ANVENDELSER ==========
    {
      id: 'r2-4-5-anvendelser',
      type: 'text',
      content: `## Praktiske anvendelser

Tangenslikninger dukker opp i mange praktiske sammenhenger:

- **Helningsvinkler:** $\\tan(\\theta) = \\frac{\\text{motstaaende}}{\\text{hosliggende}}$
- **Vinkler i fysikk:** Bevegelse i skratt plan, prosjektilbevegelse
- **Optikk:** Brewsters vinkel for polarisering
- **Navigasjon:** Beregning av kursvinkler`,
    },

    {
      id: 'r2-4-5-eksempel-12',
      type: 'example',
      title: 'Eksempel 12: Helningsvinkel',
      problem: `En vei har en stigning på 15 %. Finn helningsvinkelen.`,
      solution: `15 % stigning betyr at veien stiger 15 meter per 100 meter horisontalt.

$$\\tan(\\theta) = \\frac{15}{100} = 0{,}15$$

$$\\theta = \\arctan(0{,}15) \\approx 8{,}5°$$

**Svar:** Helningsvinkelen er ca. $8{,}5°$.`,
    },

    {
      id: 'r2-4-5-oppgave-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-12',
        number: '12',
        type: 'classic',
        difficulty: 'medium',
        task: 'En trapp har trinn som er 17 cm hoye og 28 cm dype. Finn helningsvinkelen til trappen.',
        solution: '$\\theta = \\arctan(\\frac{17}{28}) \\approx 31{,}3°$',
        hints: ['$\\tan(\\theta) = \\frac{\\text{høyde}}{\\text{dybde}}$'],
      },
    },

    {
      id: 'r2-4-5-eksempel-13',
      type: 'example',
      title: 'Eksempel 13: Prosjektilbevegelse',
      problem: `En ball kastes med utgangshastighet $v_0 = 20$ m/s. Ved hvilken vinkel $\\theta$ fra horisontalplanet na ballen en maksimal horisontal rekkevidde på 30 m?

Formelen for horisontal rekkevidde er: $R = \\frac{v_0^2 \\sin(2\\theta)}{g}$`,
      solution: `Med $R = 30$ m, $v_0 = 20$ m/s og $g = 10$ m/s²:

$$30 = \\frac{20^2 \\sin(2\\theta)}{10}$$
$$30 = \\frac{400 \\sin(2\\theta)}{10}$$
$$30 = 40 \\sin(2\\theta)$$
$$\\sin(2\\theta) = 0{,}75$$

$2\\theta = \\arcsin(0{,}75) \\approx 48{,}6°$ eller $2\\theta \\approx 131{,}4°$

$\\theta \\approx 24{,}3°$ eller $\\theta \\approx 65{,}7°$

**Svar:** Ballen kan kastes med vinkel ca. $24{,}3°$ eller $65{,}7°$.`,
    },

    {
      id: 'r2-4-5-oppgave-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-5-oppg-13',
        number: '13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et tarn er 50 m hoyt. Fra toppen av tarnet ser man et punkt på bakken med synkvinkel $30°$. Hvor langt fra tarnets fot ligger punktet?',
        solution: 'Avstand = $\\frac{50}{\\tan(30°)} = \\frac{50}{\\frac{1}{\\sqrt{3}}} = 50\\sqrt{3} \\approx 86{,}6$ m',
        hints: [
          'Tegn en figur med tarnet og synklinjen.',
          'Bruk $\\tan(30°) = \\frac{\\text{motstaaende}}{\\text{hosliggende}}$.',
        ],
      },
    },

    {
      id: 'r2-4-5-eksempel-14',
      type: 'example',
      title: 'Eksempel 14: Periodisk losning i praksis',
      problem: `En pendel svinger slik at vinkelen $\\theta$ (i radianer) fra vertikalen er gitt ved:
$$\\theta(t) = 0{,}1 \\sin(2t)$$

Finn alle tidspunkter $t > 0$ der $\\tan(\\theta) = 0{,}05$.`,
      solution: `For sma vinkler er $\\tan(\\theta) \\approx \\theta$ (i radianer).

Sa vi loser omtrent: $0{,}1 \\sin(2t) = 0{,}05$

$$\\sin(2t) = 0{,}5$$
$$2t = \\frac{\\pi}{6} + 2n\\pi \\quad \\text{eller} \\quad 2t = \\frac{5\\pi}{6} + 2n\\pi$$

$$t = \\frac{\\pi}{12} + n\\pi \\quad \\text{eller} \\quad t = \\frac{5\\pi}{12} + n\\pi$$

**De forste positive tidspunktene:**
$t \\approx 0{,}26$ s, $t \\approx 1{,}31$ s, $t \\approx 3{,}40$ s, ...

**Svar:** $t = \\frac{\\pi}{12} + n\\pi$ eller $t = \\frac{5\\pi}{12} + n\\pi$, der $n \\geq 0$`,
    },

    // ========== SAMMENDRAG ==========
    {
      id: 'r2-4-5-sammendrag',
      type: 'definition',
      title: 'Sammendrag: Tangenslikninger',
      content: `**Grunnleggende tangenslikning:**
$$\\tan(x) = a \\quad \\Rightarrow \\quad x = \\arctan(a) + n\\pi$$

**Transformert tangenslikning:**
$$\\tan(kx + c) = a \\quad \\Rightarrow \\quad x = \\frac{\\arctan(a) - c + n\\pi}{k}$$

**Viktige verdier:**
- $\\tan(0) = 0$
- $\\tan(\\frac{\\pi}{6}) = \\frac{1}{\\sqrt{3}}$
- $\\tan(\\frac{\\pi}{4}) = 1$
- $\\tan(\\frac{\\pi}{3}) = \\sqrt{3}$

**Husk:**
- Periode: $\\pi$ (ikke $2\\pi$)
- En losning per periode
- Tangens er udefinert for $x = \\frac{\\pi}{2} + n\\pi$`,
    },

    // ========== EKSTRA OPPGAVER ==========
    {
      id: 'r2-4-5-ekstra',
      type: 'collapsible',
      title: 'Ekstraoppgaver',
      buttonText: 'Vis ekstraoppgaver',
      content: [
        {
          id: 'r2-4-5-ekstra-1',
          type: 'exercise',
          exercise: {
            id: 'r2-4-5-ekstra-oppg-1',
            number: '14',
            type: 'classic',
            difficulty: 'lett',
            task: 'Los likningen $\\tan(x) = -\\frac{1}{\\sqrt{3}}$. Gi den generelle losningen.',
            solution: '$x = -\\frac{\\pi}{6} + n\\pi$ eller $x = \\frac{5\\pi}{6} + n\\pi$, der $n \\in \\mathbb{Z}$',
            hints: ['Bruk at $\\tan(\\frac{\\pi}{6}) = \\frac{1}{\\sqrt{3}}$.'],
          },
        },
        {
          id: 'r2-4-5-ekstra-2',
          type: 'exercise',
          exercise: {
            id: 'r2-4-5-ekstra-oppg-2',
            number: '15',
            type: 'classic',
            difficulty: 'medium',
            task: 'Los likningen $\\tan(4x) = 1$. Finn alle losninger i $[0, \\pi]$.',
            solution: '$x = \\frac{\\pi}{16}, \\frac{5\\pi}{16}, \\frac{9\\pi}{16}, \\frac{13\\pi}{16}$',
            hints: ['Sett $u = 4x$ og los $\\tan(u) = 1$ forst.'],
          },
        },
        {
          id: 'r2-4-5-ekstra-3',
          type: 'exercise',
          exercise: {
            id: 'r2-4-5-ekstra-oppg-3',
            number: '16',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'Los likningen $\\tan^2(x) = 3$.',
            solution: '$x = \\frac{\\pi}{3} + n\\frac{\\pi}{2}$, der $n \\in \\mathbb{Z}$. Alternativt: $x = \\pm\\frac{\\pi}{3} + n\\pi$',
            hints: [
              '$\\tan^2(x) = 3$ betyr at $\\tan(x) = \\pm\\sqrt{3}$.',
              'Los begge likninger separat.',
            ],
          },
        },
      ],
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_4_6: TextbookChapter = {
  id: 'r2-4-6',
  courseId: 'r2',
  chapterNumber: '4.6',
  title: 'Trigonometriske formler',
  description: 'Addisjonsformler, dobbeltvinkelformler, halvvinkelformler og andre trigonometriske identiteter.',
  estimatedMinutes: 60,
  competenceGoals: [
    'utforske eigenskapar ved trigonometriske funksjonar',
    'bruke trigonometriske identitetar til å forenkle uttrykk',
    'bevise og anvende addisjonsformlene',
    'utlede og bruke dobbeltvinkel- og halvvinkelformler',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-6-intro',
      type: 'text',
      content: `## Trigonometriske formler

I dette kapittelet skal vi utforske de viktigste trigonometriske formlene. Disse formlene lar oss uttrykke trigonometriske funksjoner av summer, differanser og multipler av vinkler. De er essensielle verktøy for å forenkle uttrykk, løse likninger og bevise identiteter.

Vi starter med **addisjonsformlene**, som er fundamentet for alle de andre formlene vi skal se på. Fra addisjonsformlene utleder vi dobbeltvinkelformler, halvvinkelformler, produktformler og sumformler.`,
    },

    // ========== ADDISJONSFORMLENE ==========
    {
      id: 'r2-4-6-addisjon-intro',
      type: 'text',
      content: `## Addisjonsformlene

Addisjonsformlene uttrykker $\\sin$ og $\\cos$ av en sum eller differanse av to vinkler. Disse formlene er grunnleggende i trigonometrien og har mange anvendelser.`,
    },

    {
      id: 'r2-4-6-theorem-addisjon',
      type: 'theorem',
      title: 'Addisjonsformlene',
      content: `For alle vinkler $u$ og $v$ gjelder:

**Sinus:**
$$\\sin(u + v) = \\sin u \\cos v + \\cos u \\sin v$$
$$\\sin(u - v) = \\sin u \\cos v - \\cos u \\sin v$$

**Cosinus:**
$$\\cos(u + v) = \\cos u \\cos v - \\sin u \\sin v$$
$$\\cos(u - v) = \\cos u \\cos v + \\sin u \\sin v$$`,
    },
    {
      id: 'r2-4-6-trig-identitet-bilde',
      type: 'image',
      src: '/images/trigonometry/trigonometrisk-identitet.svg',
      alt: 'Oversikt over de viktigste trigonometriske identitetene',
      caption: 'De grunnleggende trigonometriske identitetene og formlene',
    },

    {
      id: 'r2-4-6-proof-addisjon',
      type: 'proof',
      title: 'Bevis for addisjonsformlene for cosinus',
      content: `Vi beviser først $\\cos(u - v) = \\cos u \\cos v + \\sin u \\sin v$ ved hjelp av enhetssirkelen.

**Geometrisk bevis:**

Betrakt enhetssirkelen med sentrum i origo. La punktene være:
- $P_1 = (\\cos u, \\sin u)$ svarende til vinkelen $u$
- $P_2 = (\\cos v, \\sin v)$ svarende til vinkelen $v$
- $P_3 = (\\cos(u-v), \\sin(u-v))$ svarende til vinkelen $u-v$
- $P_4 = (1, 0)$ svarende til vinkelen $0$

Avstanden mellom $P_1$ og $P_2$ er lik avstanden mellom $P_3$ og $P_4$ (begge buer har lengde $|u-v|$).

**Avstand mellom $P_1$ og $P_2$:**
$$d_1^2 = (\\cos u - \\cos v)^2 + (\\sin u - \\sin v)^2$$
$$= \\cos^2 u - 2\\cos u \\cos v + \\cos^2 v + \\sin^2 u - 2\\sin u \\sin v + \\sin^2 v$$
$$= (\\cos^2 u + \\sin^2 u) + (\\cos^2 v + \\sin^2 v) - 2(\\cos u \\cos v + \\sin u \\sin v)$$
$$= 2 - 2(\\cos u \\cos v + \\sin u \\sin v)$$

**Avstand mellom $P_3$ og $P_4$:**
$$d_2^2 = (\\cos(u-v) - 1)^2 + (\\sin(u-v))^2$$
$$= \\cos^2(u-v) - 2\\cos(u-v) + 1 + \\sin^2(u-v)$$
$$= 1 - 2\\cos(u-v) + 1 = 2 - 2\\cos(u-v)$$

Siden $d_1 = d_2$:
$$2 - 2(\\cos u \\cos v + \\sin u \\sin v) = 2 - 2\\cos(u-v)$$
$$\\cos(u-v) = \\cos u \\cos v + \\sin u \\sin v$$

**Utledning av de andre formlene:**

For $\\cos(u + v)$: Sett inn $-v$ for $v$:
$$\\cos(u + v) = \\cos(u - (-v)) = \\cos u \\cos(-v) + \\sin u \\sin(-v)$$
$$= \\cos u \\cos v - \\sin u \\sin v$$

For $\\sin(u + v)$: Bruk at $\\sin \\theta = \\cos(\\frac{\\pi}{2} - \\theta)$:
$$\\sin(u + v) = \\cos\\left(\\frac{\\pi}{2} - (u + v)\\right) = \\cos\\left(\\left(\\frac{\\pi}{2} - u\\right) - v\\right)$$
$$= \\cos\\left(\\frac{\\pi}{2} - u\\right)\\cos v + \\sin\\left(\\frac{\\pi}{2} - u\\right)\\sin v$$
$$= \\sin u \\cos v + \\cos u \\sin v$$

For $\\sin(u - v)$: Sett inn $-v$ for $v$ i formelen for $\\sin(u+v)$:
$$\\sin(u - v) = \\sin u \\cos v - \\cos u \\sin v$$`,
    },

    {
      id: 'r2-4-6-example-1',
      type: 'example',
      title: 'Eksempel 1: Eksakt verdi med addisjonsformel',
      problem: `Finn den eksakte verdien av $\\sin 75°$ uten kalkulator.`,
      solution: `**Løsning:**

Vi skriver $75° = 45° + 30°$ og bruker addisjonsformelen:

$$\\sin 75° = \\sin(45° + 30°)$$
$$= \\sin 45° \\cos 30° + \\cos 45° \\sin 30°$$
$$= \\frac{\\sqrt{2}}{2} \\cdot \\frac{\\sqrt{3}}{2} + \\frac{\\sqrt{2}}{2} \\cdot \\frac{1}{2}$$
$$= \\frac{\\sqrt{6}}{4} + \\frac{\\sqrt{2}}{4}$$
$$= \\frac{\\sqrt{6} + \\sqrt{2}}{4}$$`,
    },

    {
      id: 'r2-4-6-example-2',
      type: 'example',
      title: 'Eksempel 2: Eksakt verdi av cosinus',
      problem: `Finn den eksakte verdien av $\\cos 15°$.`,
      solution: `**Løsning:**

Vi skriver $15° = 45° - 30°$ og bruker addisjonsformelen:

$$\\cos 15° = \\cos(45° - 30°)$$
$$= \\cos 45° \\cos 30° + \\sin 45° \\sin 30°$$
$$= \\frac{\\sqrt{2}}{2} \\cdot \\frac{\\sqrt{3}}{2} + \\frac{\\sqrt{2}}{2} \\cdot \\frac{1}{2}$$
$$= \\frac{\\sqrt{6}}{4} + \\frac{\\sqrt{2}}{4}$$
$$= \\frac{\\sqrt{6} + \\sqrt{2}}{4}$$

**Merk:** $\\cos 15° = \\sin 75°$, som stemmer med at $\\sin(90° - \\theta) = \\cos \\theta$.`,
    },

    {
      id: 'r2-4-6-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn de eksakte verdiene ved hjelp av addisjonsformlene.',
        subTasks: [
          { label: 'a', task: '$\\sin 105°$', solution: '$\\sin 105° = \\sin(60° + 45°) = \\frac{\\sqrt{6} + \\sqrt{2}}{4}$' },
          { label: 'b', task: '$\\cos 75°$', solution: '$\\cos 75° = \\cos(45° + 30°) = \\frac{\\sqrt{6} - \\sqrt{2}}{4}$' },
          { label: 'c', task: '$\\sin 15°$', solution: '$\\sin 15° = \\sin(45° - 30°) = \\frac{\\sqrt{6} - \\sqrt{2}}{4}$' },
        ],
        hints: [
          'Skriv vinkelen som en sum eller differanse av kjente vinkler (30°, 45°, 60°)',
          'Bruk de kjente verdiene: $\\sin 30° = \\frac{1}{2}$, $\\cos 30° = \\frac{\\sqrt{3}}{2}$, $\\sin 45° = \\cos 45° = \\frac{\\sqrt{2}}{2}$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-example-3',
      type: 'example',
      title: 'Eksempel 3: Addisjonsformel med ukjente vinkler',
      problem: `Gitt at $\\sin u = \\frac{3}{5}$ der $u$ er i første kvadrant, og $\\cos v = \\frac{12}{13}$ der $v$ er i første kvadrant. Finn $\\sin(u + v)$.`,
      solution: `**Løsning:**

Først finner vi de manglende verdiene ved hjelp av Pytagoras' identitet $\\sin^2 \\theta + \\cos^2 \\theta = 1$.

**For vinkel $u$:**
$$\\cos^2 u = 1 - \\sin^2 u = 1 - \\frac{9}{25} = \\frac{16}{25}$$
$$\\cos u = \\frac{4}{5} \\quad \\text{(positiv siden } u \\text{ er i 1. kvadrant)}$$

**For vinkel $v$:**
$$\\sin^2 v = 1 - \\cos^2 v = 1 - \\frac{144}{169} = \\frac{25}{169}$$
$$\\sin v = \\frac{5}{13} \\quad \\text{(positiv siden } v \\text{ er i 1. kvadrant)}$$

**Addisjonsformelen:**
$$\\sin(u + v) = \\sin u \\cos v + \\cos u \\sin v$$
$$= \\frac{3}{5} \\cdot \\frac{12}{13} + \\frac{4}{5} \\cdot \\frac{5}{13}$$
$$= \\frac{36}{65} + \\frac{20}{65} = \\frac{56}{65}$$`,
    },

    {
      id: 'r2-4-6-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Gitt at $\\sin u = \\frac{5}{13}$ og $\\cos v = \\frac{3}{5}$, der begge vinklene er i første kvadrant.',
        subTasks: [
          { label: 'a', task: 'Finn $\\cos u$ og $\\sin v$', solution: '$\\cos u = \\frac{12}{13}$ og $\\sin v = \\frac{4}{5}$' },
          { label: 'b', task: 'Finn $\\sin(u + v)$', solution: '$\\sin(u+v) = \\frac{5}{13} \\cdot \\frac{3}{5} + \\frac{12}{13} \\cdot \\frac{4}{5} = \\frac{15 + 48}{65} = \\frac{63}{65}$' },
          { label: 'c', task: 'Finn $\\cos(u - v)$', solution: '$\\cos(u-v) = \\frac{12}{13} \\cdot \\frac{3}{5} + \\frac{5}{13} \\cdot \\frac{4}{5} = \\frac{36 + 20}{65} = \\frac{56}{65}$' },
        ],
        hints: [
          'Bruk $\\sin^2 \\theta + \\cos^2 \\theta = 1$ for å finne de manglende verdiene',
          'Husk at i første kvadrant er både sinus og cosinus positive',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== TANGENS ADDISJONSFORMEL ==========
    {
      id: 'r2-4-6-tan-addisjon-intro',
      type: 'text',
      content: `## Addisjonsformel for tangens

Vi kan utlede en addisjonsformel for tangens fra formlene for sinus og cosinus.`,
    },

    {
      id: 'r2-4-6-theorem-tan-addisjon',
      type: 'theorem',
      title: 'Addisjonsformlene for tangens',
      content: `For vinkler $u$ og $v$ der tangensverdiene er definert:

$$\\tan(u + v) = \\frac{\\tan u + \\tan v}{1 - \\tan u \\tan v}$$

$$\\tan(u - v) = \\frac{\\tan u - \\tan v}{1 + \\tan u \\tan v}$$`,
    },

    {
      id: 'r2-4-6-proof-tan',
      type: 'proof',
      title: 'Utledning av tangensformelen',
      content: `Vi bruker at $\\tan \\theta = \\frac{\\sin \\theta}{\\cos \\theta}$:

$$\\tan(u + v) = \\frac{\\sin(u + v)}{\\cos(u + v)}$$
$$= \\frac{\\sin u \\cos v + \\cos u \\sin v}{\\cos u \\cos v - \\sin u \\sin v}$$

Vi deler teller og nevner med $\\cos u \\cos v$:

$$= \\frac{\\frac{\\sin u \\cos v}{\\cos u \\cos v} + \\frac{\\cos u \\sin v}{\\cos u \\cos v}}{\\frac{\\cos u \\cos v}{\\cos u \\cos v} - \\frac{\\sin u \\sin v}{\\cos u \\cos v}}$$

$$= \\frac{\\frac{\\sin u}{\\cos u} + \\frac{\\sin v}{\\cos v}}{1 - \\frac{\\sin u}{\\cos u} \\cdot \\frac{\\sin v}{\\cos v}}$$

$$= \\frac{\\tan u + \\tan v}{1 - \\tan u \\tan v}$$`,
    },

    {
      id: 'r2-4-6-example-4',
      type: 'example',
      title: 'Eksempel 4: Tangensaddisjon',
      problem: `Finn $\\tan 75°$ uten kalkulator.`,
      solution: `**Løsning:**

Vi bruker $75° = 45° + 30°$:

$$\\tan 75° = \\tan(45° + 30°) = \\frac{\\tan 45° + \\tan 30°}{1 - \\tan 45° \\tan 30°}$$

Vi vet at $\\tan 45° = 1$ og $\\tan 30° = \\frac{1}{\\sqrt{3}} = \\frac{\\sqrt{3}}{3}$.

$$\\tan 75° = \\frac{1 + \\frac{\\sqrt{3}}{3}}{1 - 1 \\cdot \\frac{\\sqrt{3}}{3}} = \\frac{\\frac{3 + \\sqrt{3}}{3}}{\\frac{3 - \\sqrt{3}}{3}} = \\frac{3 + \\sqrt{3}}{3 - \\sqrt{3}}$$

Vi rasjonaliserer nevneren:
$$= \\frac{(3 + \\sqrt{3})(3 + \\sqrt{3})}{(3 - \\sqrt{3})(3 + \\sqrt{3})} = \\frac{9 + 6\\sqrt{3} + 3}{9 - 3} = \\frac{12 + 6\\sqrt{3}}{6} = 2 + \\sqrt{3}$$`,
    },

    // ========== DOBBELTVINKELFORMLENE ==========
    {
      id: 'r2-4-6-dobbeltvinkel-intro',
      type: 'text',
      content: `## Dobbeltvinkelformlene

Dobbeltvinkelformlene er spesialtilfeller av addisjonsformlene der $v = u$. De uttrykker trigonometriske funksjoner av $2u$ ved hjelp av funksjoner av $u$.`,
    },

    {
      id: 'r2-4-6-theorem-dobbeltvinkel',
      type: 'theorem',
      title: 'Dobbeltvinkelformlene',
      content: `For alle vinkler $u$ gjelder:

**Sinus:**
$$\\sin 2u = 2 \\sin u \\cos u$$

**Cosinus:** (tre ekvivalente former)
$$\\cos 2u = \\cos^2 u - \\sin^2 u$$
$$\\cos 2u = 2\\cos^2 u - 1$$
$$\\cos 2u = 1 - 2\\sin^2 u$$

**Tangens:**
$$\\tan 2u = \\frac{2 \\tan u}{1 - \\tan^2 u}$$`,
    },

    {
      id: 'r2-4-6-proof-dobbeltvinkel',
      type: 'proof',
      title: 'Utledning av dobbeltvinkelformlene',
      content: `**Sinus:**
Fra $\\sin(u + v) = \\sin u \\cos v + \\cos u \\sin v$, sett $v = u$:
$$\\sin 2u = \\sin(u + u) = \\sin u \\cos u + \\cos u \\sin u = 2 \\sin u \\cos u$$

**Cosinus:**
Fra $\\cos(u + v) = \\cos u \\cos v - \\sin u \\sin v$, sett $v = u$:
$$\\cos 2u = \\cos u \\cos u - \\sin u \\sin u = \\cos^2 u - \\sin^2 u$$

De andre formene fås ved å bruke $\\sin^2 u + \\cos^2 u = 1$:
$$\\cos 2u = \\cos^2 u - \\sin^2 u = \\cos^2 u - (1 - \\cos^2 u) = 2\\cos^2 u - 1$$
$$\\cos 2u = \\cos^2 u - \\sin^2 u = (1 - \\sin^2 u) - \\sin^2 u = 1 - 2\\sin^2 u$$

**Tangens:**
Fra tangensaddisjon med $v = u$:
$$\\tan 2u = \\frac{\\tan u + \\tan u}{1 - \\tan u \\cdot \\tan u} = \\frac{2\\tan u}{1 - \\tan^2 u}$$`,
    },

    {
      id: 'r2-4-6-example-5',
      type: 'example',
      title: 'Eksempel 5: Bruke dobbeltvinkelformler',
      problem: `Gitt at $\\cos u = \\frac{3}{5}$ der $u$ er i første kvadrant. Finn $\\sin 2u$, $\\cos 2u$ og $\\tan 2u$.`,
      solution: `**Løsning:**

Først finner vi $\\sin u$:
$$\\sin^2 u = 1 - \\cos^2 u = 1 - \\frac{9}{25} = \\frac{16}{25}$$
$$\\sin u = \\frac{4}{5} \\quad \\text{(positiv i 1. kvadrant)}$$

**$\\sin 2u$:**
$$\\sin 2u = 2 \\sin u \\cos u = 2 \\cdot \\frac{4}{5} \\cdot \\frac{3}{5} = \\frac{24}{25}$$

**$\\cos 2u$:**
$$\\cos 2u = \\cos^2 u - \\sin^2 u = \\frac{9}{25} - \\frac{16}{25} = -\\frac{7}{25}$$

**$\\tan 2u$:**
$$\\tan 2u = \\frac{\\sin 2u}{\\cos 2u} = \\frac{24/25}{-7/25} = -\\frac{24}{7}$$

**Alternativ utregning av $\\tan 2u$:**
$$\\tan u = \\frac{\\sin u}{\\cos u} = \\frac{4/5}{3/5} = \\frac{4}{3}$$
$$\\tan 2u = \\frac{2 \\cdot \\frac{4}{3}}{1 - (\\frac{4}{3})^2} = \\frac{\\frac{8}{3}}{1 - \\frac{16}{9}} = \\frac{\\frac{8}{3}}{-\\frac{7}{9}} = \\frac{8}{3} \\cdot (-\\frac{9}{7}) = -\\frac{24}{7}$$`,
    },

    {
      id: 'r2-4-6-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Gitt at $\\sin u = \\frac{5}{13}$ der $u$ er i første kvadrant.',
        subTasks: [
          { label: 'a', task: 'Finn $\\cos u$', solution: '$\\cos u = \\frac{12}{13}$' },
          { label: 'b', task: 'Finn $\\sin 2u$', solution: '$\\sin 2u = 2 \\cdot \\frac{5}{13} \\cdot \\frac{12}{13} = \\frac{120}{169}$' },
          { label: 'c', task: 'Finn $\\cos 2u$', solution: '$\\cos 2u = (\\frac{12}{13})^2 - (\\frac{5}{13})^2 = \\frac{144 - 25}{169} = \\frac{119}{169}$' },
          { label: 'd', task: 'Finn $\\tan 2u$', solution: '$\\tan 2u = \\frac{120/169}{119/169} = \\frac{120}{119}$' },
        ],
        hints: [
          'Bruk Pytagoras-identiteten for å finne $\\cos u$',
          'Husk formelen $\\sin 2u = 2 \\sin u \\cos u$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-example-6',
      type: 'example',
      title: 'Eksempel 6: Forenkle med dobbeltvinkelformel',
      problem: `Forenkle uttrykket $\\frac{\\sin 2x}{1 + \\cos 2x}$.`,
      solution: `**Løsning:**

Vi bruker dobbeltvinkelformlene:
- $\\sin 2x = 2 \\sin x \\cos x$
- $\\cos 2x = 2\\cos^2 x - 1$

$$\\frac{\\sin 2x}{1 + \\cos 2x} = \\frac{2 \\sin x \\cos x}{1 + (2\\cos^2 x - 1)}$$
$$= \\frac{2 \\sin x \\cos x}{2\\cos^2 x}$$
$$= \\frac{\\sin x}{\\cos x}$$
$$= \\tan x$$`,
    },

    {
      id: 'r2-4-6-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Forenkle uttrykkene.',
        subTasks: [
          { label: 'a', task: '$\\frac{1 - \\cos 2x}{\\sin 2x}$', solution: '$= \\frac{1 - (1 - 2\\sin^2 x)}{2\\sin x \\cos x} = \\frac{2\\sin^2 x}{2\\sin x \\cos x} = \\frac{\\sin x}{\\cos x} = \\tan x$' },
          { label: 'b', task: '$\\sin x \\cos x$', solution: '$= \\frac{1}{2} \\cdot 2\\sin x \\cos x = \\frac{1}{2}\\sin 2x$' },
          { label: 'c', task: '$\\cos^2 x - \\sin^2 x$', solution: '$= \\cos 2x$' },
        ],
        hints: [
          'Bruk dobbeltvinkelformlene "baklengs"',
          'Husk at $\\sin 2x = 2\\sin x \\cos x$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== HALVVINKELFORMLENE ==========
    {
      id: 'r2-4-6-halvvinkel-intro',
      type: 'text',
      content: `## Halvvinkelformlene

Halvvinkelformlene uttrykker trigonometriske funksjoner av $\\frac{u}{2}$ ved hjelp av funksjoner av $u$. De utledes fra dobbeltvinkelformlene ved å løse for $\\sin^2 \\frac{u}{2}$ og $\\cos^2 \\frac{u}{2}$.`,
    },

    {
      id: 'r2-4-6-theorem-halvvinkel',
      type: 'theorem',
      title: 'Halvvinkelformlene',
      content: `For alle vinkler $u$ gjelder:

$$\\sin^2 \\frac{u}{2} = \\frac{1 - \\cos u}{2}$$

$$\\cos^2 \\frac{u}{2} = \\frac{1 + \\cos u}{2}$$

$$\\tan \\frac{u}{2} = \\frac{\\sin u}{1 + \\cos u} = \\frac{1 - \\cos u}{\\sin u}$$

Eller med kvadratrot:
$$\\sin \\frac{u}{2} = \\pm\\sqrt{\\frac{1 - \\cos u}{2}}$$
$$\\cos \\frac{u}{2} = \\pm\\sqrt{\\frac{1 + \\cos u}{2}}$$

Fortegnet bestemmes av hvilken kvadrant $\\frac{u}{2}$ ligger i.`,
    },

    {
      id: 'r2-4-6-proof-halvvinkel',
      type: 'proof',
      title: 'Utledning av halvvinkelformlene',
      content: `Vi starter med dobbeltvinkelformelen $\\cos 2\\theta = 1 - 2\\sin^2 \\theta$.

La $2\\theta = u$, slik at $\\theta = \\frac{u}{2}$:
$$\\cos u = 1 - 2\\sin^2 \\frac{u}{2}$$
$$2\\sin^2 \\frac{u}{2} = 1 - \\cos u$$
$$\\sin^2 \\frac{u}{2} = \\frac{1 - \\cos u}{2}$$

Tilsvarende fra $\\cos 2\\theta = 2\\cos^2 \\theta - 1$:
$$\\cos u = 2\\cos^2 \\frac{u}{2} - 1$$
$$2\\cos^2 \\frac{u}{2} = 1 + \\cos u$$
$$\\cos^2 \\frac{u}{2} = \\frac{1 + \\cos u}{2}$$

**For tangensformelen:**
$$\\tan \\frac{u}{2} = \\frac{\\sin \\frac{u}{2}}{\\cos \\frac{u}{2}} = \\frac{\\sin \\frac{u}{2}}{\\cos \\frac{u}{2}} \\cdot \\frac{2\\cos \\frac{u}{2}}{2\\cos \\frac{u}{2}}$$
$$= \\frac{2\\sin \\frac{u}{2} \\cos \\frac{u}{2}}{2\\cos^2 \\frac{u}{2}} = \\frac{\\sin u}{1 + \\cos u}$$`,
    },

    {
      id: 'r2-4-6-example-7',
      type: 'example',
      title: 'Eksempel 7: Halvvinkelformel',
      problem: `Finn den eksakte verdien av $\\cos 22{,}5°$.`,
      solution: `**Løsning:**

Vi bruker halvvinkelformelen med $u = 45°$, slik at $\\frac{u}{2} = 22{,}5°$:

$$\\cos^2 22{,}5° = \\frac{1 + \\cos 45°}{2} = \\frac{1 + \\frac{\\sqrt{2}}{2}}{2}$$

$$= \\frac{\\frac{2 + \\sqrt{2}}{2}}{2} = \\frac{2 + \\sqrt{2}}{4}$$

Siden $22{,}5°$ er i første kvadrant, er $\\cos 22{,}5° > 0$:

$$\\cos 22{,}5° = \\sqrt{\\frac{2 + \\sqrt{2}}{4}} = \\frac{\\sqrt{2 + \\sqrt{2}}}{2}$$`,
    },

    {
      id: 'r2-4-6-example-8',
      type: 'example',
      title: 'Eksempel 8: Halvvinkel med gitt verdi',
      problem: `Gitt at $\\cos u = \\frac{4}{5}$ der $0 < u < \\frac{\\pi}{2}$. Finn $\\sin \\frac{u}{2}$ og $\\cos \\frac{u}{2}$.`,
      solution: `**Løsning:**

Siden $0 < u < \\frac{\\pi}{2}$, har vi $0 < \\frac{u}{2} < \\frac{\\pi}{4}$, som betyr at $\\frac{u}{2}$ er i første kvadrant. Dermed er både $\\sin \\frac{u}{2}$ og $\\cos \\frac{u}{2}$ positive.

**$\\sin \\frac{u}{2}$:**
$$\\sin^2 \\frac{u}{2} = \\frac{1 - \\cos u}{2} = \\frac{1 - \\frac{4}{5}}{2} = \\frac{\\frac{1}{5}}{2} = \\frac{1}{10}$$
$$\\sin \\frac{u}{2} = \\sqrt{\\frac{1}{10}} = \\frac{1}{\\sqrt{10}} = \\frac{\\sqrt{10}}{10}$$

**$\\cos \\frac{u}{2}$:**
$$\\cos^2 \\frac{u}{2} = \\frac{1 + \\cos u}{2} = \\frac{1 + \\frac{4}{5}}{2} = \\frac{\\frac{9}{5}}{2} = \\frac{9}{10}$$
$$\\cos \\frac{u}{2} = \\sqrt{\\frac{9}{10}} = \\frac{3}{\\sqrt{10}} = \\frac{3\\sqrt{10}}{10}$$`,
    },

    {
      id: 'r2-4-6-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk halvvinkelformlene.',
        subTasks: [
          { label: 'a', task: 'Finn $\\sin 15°$ ved å bruke halvvinkelformelen med $u = 30°$', solution: '$\\sin^2 15° = \\frac{1 - \\cos 30°}{2} = \\frac{1 - \\frac{\\sqrt{3}}{2}}{2} = \\frac{2 - \\sqrt{3}}{4}$, så $\\sin 15° = \\frac{\\sqrt{2 - \\sqrt{3}}}{2}$' },
          { label: 'b', task: 'Gitt $\\cos u = \\frac{7}{25}$ der $0 < u < \\frac{\\pi}{2}$, finn $\\cos \\frac{u}{2}$', solution: '$\\cos^2 \\frac{u}{2} = \\frac{1 + \\frac{7}{25}}{2} = \\frac{32}{50} = \\frac{16}{25}$, så $\\cos \\frac{u}{2} = \\frac{4}{5}$' },
          { label: 'c', task: 'Gitt $\\sin u = \\frac{24}{25}$ og $\\cos u = \\frac{7}{25}$, finn $\\tan \\frac{u}{2}$', solution: '$\\tan \\frac{u}{2} = \\frac{\\sin u}{1 + \\cos u} = \\frac{24/25}{1 + 7/25} = \\frac{24/25}{32/25} = \\frac{24}{32} = \\frac{3}{4}$' },
        ],
        hints: [
          'Husk at fortegnet avhenger av hvilken kvadrant halvvinkelen ligger i',
          'Bruk $\\tan \\frac{u}{2} = \\frac{\\sin u}{1 + \\cos u}$ for å unngaa kvadratrøtter',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== PRODUKTFORMLENE ==========
    {
      id: 'r2-4-6-produkt-intro',
      type: 'text',
      content: `## Produktformlene

Produktformlene lar oss skrive om produkter av trigonometriske funksjoner til summer. Dette er nyttig for integrasjon og forenkling av uttrykk.`,
    },

    {
      id: 'r2-4-6-theorem-produkt',
      type: 'theorem',
      title: 'Produktformlene',
      content: `For alle vinkler $u$ og $v$ gjelder:

$$\\sin u \\cos v = \\frac{1}{2}[\\sin(u + v) + \\sin(u - v)]$$

$$\\cos u \\cos v = \\frac{1}{2}[\\cos(u - v) + \\cos(u + v)]$$

$$\\sin u \\sin v = \\frac{1}{2}[\\cos(u - v) - \\cos(u + v)]$$`,
    },

    {
      id: 'r2-4-6-proof-produkt',
      type: 'proof',
      title: 'Utledning av produktformlene',
      content: `Vi starter med addisjonsformlene:
$$\\sin(u + v) = \\sin u \\cos v + \\cos u \\sin v$$
$$\\sin(u - v) = \\sin u \\cos v - \\cos u \\sin v$$

Adderer vi disse to likningene:
$$\\sin(u + v) + \\sin(u - v) = 2 \\sin u \\cos v$$
$$\\sin u \\cos v = \\frac{1}{2}[\\sin(u + v) + \\sin(u - v)]$$

For cosinus-produktet bruker vi:
$$\\cos(u + v) = \\cos u \\cos v - \\sin u \\sin v$$
$$\\cos(u - v) = \\cos u \\cos v + \\sin u \\sin v$$

Adderer vi disse:
$$\\cos(u + v) + \\cos(u - v) = 2 \\cos u \\cos v$$
$$\\cos u \\cos v = \\frac{1}{2}[\\cos(u - v) + \\cos(u + v)]$$

Subtraherer vi i stedet:
$$\\cos(u - v) - \\cos(u + v) = 2 \\sin u \\sin v$$
$$\\sin u \\sin v = \\frac{1}{2}[\\cos(u - v) - \\cos(u + v)]$$`,
    },

    {
      id: 'r2-4-6-example-9',
      type: 'example',
      title: 'Eksempel 9: Produktformel',
      problem: `Skriv om $\\sin 5x \\cos 3x$ som en sum.`,
      solution: `**Løsning:**

Vi bruker produktformelen $\\sin u \\cos v = \\frac{1}{2}[\\sin(u + v) + \\sin(u - v)]$ med $u = 5x$ og $v = 3x$:

$$\\sin 5x \\cos 3x = \\frac{1}{2}[\\sin(5x + 3x) + \\sin(5x - 3x)]$$
$$= \\frac{1}{2}[\\sin 8x + \\sin 2x]$$
$$= \\frac{1}{2}\\sin 8x + \\frac{1}{2}\\sin 2x$$`,
    },

    {
      id: 'r2-4-6-example-10',
      type: 'example',
      title: 'Eksempel 10: Produkt av cosinus',
      problem: `Skriv om $\\cos 4x \\cos 2x$ som en sum.`,
      solution: `**Løsning:**

Vi bruker produktformelen $\\cos u \\cos v = \\frac{1}{2}[\\cos(u - v) + \\cos(u + v)]$ med $u = 4x$ og $v = 2x$:

$$\\cos 4x \\cos 2x = \\frac{1}{2}[\\cos(4x - 2x) + \\cos(4x + 2x)]$$
$$= \\frac{1}{2}[\\cos 2x + \\cos 6x]$$
$$= \\frac{1}{2}\\cos 2x + \\frac{1}{2}\\cos 6x$$`,
    },

    {
      id: 'r2-4-6-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-6',
        number: '6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv om produktene som summer.',
        subTasks: [
          { label: 'a', task: '$\\sin 3x \\cos x$', solution: '$= \\frac{1}{2}[\\sin 4x + \\sin 2x]$' },
          { label: 'b', task: '$\\cos 5x \\cos 2x$', solution: '$= \\frac{1}{2}[\\cos 3x + \\cos 7x]$' },
          { label: 'c', task: '$\\sin 4x \\sin 2x$', solution: '$= \\frac{1}{2}[\\cos 2x - \\cos 6x]$' },
        ],
        hints: [
          'Identifiser hvilken produktformel som passer',
          'Husk at $\\sin u \\sin v$ gir $\\cos(u-v) - \\cos(u+v)$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== SUMFORMLENE ==========
    {
      id: 'r2-4-6-sum-intro',
      type: 'text',
      content: `## Sumformlene (sum-til-produkt)

Sumformlene er det motsatte av produktformlene. De lar oss skrive om summer og differanser av trigonometriske funksjoner til produkter.`,
    },

    {
      id: 'r2-4-6-theorem-sum',
      type: 'theorem',
      title: 'Sumformlene (sum-til-produkt)',
      content: `For alle vinkler $A$ og $B$ gjelder:

$$\\sin A + \\sin B = 2 \\sin\\frac{A + B}{2} \\cos\\frac{A - B}{2}$$

$$\\sin A - \\sin B = 2 \\cos\\frac{A + B}{2} \\sin\\frac{A - B}{2}$$

$$\\cos A + \\cos B = 2 \\cos\\frac{A + B}{2} \\cos\\frac{A - B}{2}$$

$$\\cos A - \\cos B = -2 \\sin\\frac{A + B}{2} \\sin\\frac{A - B}{2}$$`,
    },

    {
      id: 'r2-4-6-proof-sum',
      type: 'proof',
      title: 'Utledning av sumformlene',
      content: `Vi utleder sumformlene fra produktformlene ved substitusjon.

La $u + v = A$ og $u - v = B$. Da er:
$$u = \\frac{A + B}{2}, \\quad v = \\frac{A - B}{2}$$

Fra produktformelen $\\sin u \\cos v = \\frac{1}{2}[\\sin(u + v) + \\sin(u - v)]$:
$$2\\sin u \\cos v = \\sin(u + v) + \\sin(u - v)$$
$$\\sin A + \\sin B = 2\\sin\\frac{A + B}{2}\\cos\\frac{A - B}{2}$$

For differansen bruker vi $\\sin(u-v) = \\sin u \\cos v - \\cos u \\sin v$ og $\\sin(u+v) = \\sin u \\cos v + \\cos u \\sin v$:
$$\\sin(u + v) - \\sin(u - v) = 2\\cos u \\sin v$$
$$\\sin A - \\sin B = 2\\cos\\frac{A+B}{2}\\sin\\frac{A-B}{2}$$

Tilsvarende utledes de to cosinusformlene fra produktformlene for cosinus.`,
    },

    {
      id: 'r2-4-6-example-11',
      type: 'example',
      title: 'Eksempel 11: Sumformel',
      problem: `Skriv om $\\sin 5x + \\sin 3x$ som et produkt.`,
      solution: `**Løsning:**

Vi bruker sumformelen $\\sin A + \\sin B = 2 \\sin\\frac{A + B}{2} \\cos\\frac{A - B}{2}$ med $A = 5x$ og $B = 3x$:

$$\\sin 5x + \\sin 3x = 2 \\sin\\frac{5x + 3x}{2} \\cos\\frac{5x - 3x}{2}$$
$$= 2 \\sin 4x \\cos x$$`,
    },

    {
      id: 'r2-4-6-example-12',
      type: 'example',
      title: 'Eksempel 12: Differanse av cosinus',
      problem: `Skriv om $\\cos 2x - \\cos 6x$ som et produkt.`,
      solution: `**Løsning:**

Vi bruker sumformelen $\\cos A - \\cos B = -2 \\sin\\frac{A + B}{2} \\sin\\frac{A - B}{2}$ med $A = 2x$ og $B = 6x$:

$$\\cos 2x - \\cos 6x = -2 \\sin\\frac{2x + 6x}{2} \\sin\\frac{2x - 6x}{2}$$
$$= -2 \\sin 4x \\sin(-2x)$$
$$= -2 \\sin 4x \\cdot (-\\sin 2x)$$
$$= 2 \\sin 4x \\sin 2x$$`,
    },

    {
      id: 'r2-4-6-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-7',
        number: '7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv om summene som produkter.',
        subTasks: [
          { label: 'a', task: '$\\sin 7x + \\sin x$', solution: '$= 2\\sin 4x \\cos 3x$' },
          { label: 'b', task: '$\\cos 5x + \\cos 3x$', solution: '$= 2\\cos 4x \\cos x$' },
          { label: 'c', task: '$\\sin 6x - \\sin 2x$', solution: '$= 2\\cos 4x \\sin 2x$' },
          { label: 'd', task: '$\\cos x - \\cos 5x$', solution: '$= -2\\sin 3x \\sin(-2x) = 2\\sin 3x \\sin 2x$' },
        ],
        hints: [
          'Identifiser $A$ og $B$, og beregn $\\frac{A+B}{2}$ og $\\frac{A-B}{2}$',
          'Husk at $\\sin(-x) = -\\sin x$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== ANVENDELSER OG FORENKLING ==========
    {
      id: 'r2-4-6-anvendelser-intro',
      type: 'text',
      content: `## Anvendelser og forenkling

De trigonometriske formlene har mange anvendelser. Her ser vi på hvordan de brukes til å forenkle uttrykk og bevise identiteter.`,
    },

    {
      id: 'r2-4-6-example-13',
      type: 'example',
      title: 'Eksempel 13: Bevis av identitet',
      problem: `Vis at $\\frac{\\sin 2x}{1 - \\cos 2x} = \\cot x$.`,
      solution: `**Løsning:**

Vi bruker dobbeltvinkelformlene $\\sin 2x = 2\\sin x \\cos x$ og $\\cos 2x = 1 - 2\\sin^2 x$:

$$\\frac{\\sin 2x}{1 - \\cos 2x} = \\frac{2\\sin x \\cos x}{1 - (1 - 2\\sin^2 x)}$$
$$= \\frac{2\\sin x \\cos x}{2\\sin^2 x}$$
$$= \\frac{\\cos x}{\\sin x}$$
$$= \\cot x$$

Dermed er identiteten bevist.`,
    },

    {
      id: 'r2-4-6-example-14',
      type: 'example',
      title: 'Eksempel 14: Forenkle sammensatt uttrykk',
      problem: `Forenkle $\\cos^4 x - \\sin^4 x$.`,
      solution: `**Løsning:**

Vi faktoriserer ved hjelp av konjugatsetningen:
$$\\cos^4 x - \\sin^4 x = (\\cos^2 x)^2 - (\\sin^2 x)^2$$
$$= (\\cos^2 x + \\sin^2 x)(\\cos^2 x - \\sin^2 x)$$

Vi bruker Pytagoras-identiteten $\\cos^2 x + \\sin^2 x = 1$ og dobbeltvinkelformelen $\\cos 2x = \\cos^2 x - \\sin^2 x$:

$$= 1 \\cdot \\cos 2x = \\cos 2x$$`,
    },

    {
      id: 'r2-4-6-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-8',
        number: '8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Vis at identitetene stemmer.',
        subTasks: [
          { label: 'a', task: '$\\sin 3x = 3\\sin x - 4\\sin^3 x$', solution: 'Bruk $\\sin 3x = \\sin(2x + x) = \\sin 2x \\cos x + \\cos 2x \\sin x = 2\\sin x \\cos^2 x + (1 - 2\\sin^2 x)\\sin x = 2\\sin x(1 - \\sin^2 x) + \\sin x - 2\\sin^3 x = 2\\sin x - 2\\sin^3 x + \\sin x - 2\\sin^3 x = 3\\sin x - 4\\sin^3 x$' },
          { label: 'b', task: '$\\cos 3x = 4\\cos^3 x - 3\\cos x$', solution: 'Bruk $\\cos 3x = \\cos(2x + x) = \\cos 2x \\cos x - \\sin 2x \\sin x = (2\\cos^2 x - 1)\\cos x - 2\\sin^2 x \\cos x = 2\\cos^3 x - \\cos x - 2(1 - \\cos^2 x)\\cos x = 2\\cos^3 x - \\cos x - 2\\cos x + 2\\cos^3 x = 4\\cos^3 x - 3\\cos x$' },
        ],
        hints: [
          'Skriv $3x$ som $2x + x$ og bruk addisjonsformlene',
          'Bruk $\\sin^2 x = 1 - \\cos^2 x$ eller $\\cos^2 x = 1 - \\sin^2 x$ for å skrive alt med én funksjon',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-example-15',
      type: 'example',
      title: 'Eksempel 15: Løse likning med dobbeltvinkel',
      problem: `Løs likningen $\\sin 2x = \\cos x$ for $0 \\leq x < 2\\pi$.`,
      solution: `**Løsning:**

Vi bruker $\\sin 2x = 2\\sin x \\cos x$:
$$2\\sin x \\cos x = \\cos x$$
$$2\\sin x \\cos x - \\cos x = 0$$
$$\\cos x(2\\sin x - 1) = 0$$

**Tilfelle 1:** $\\cos x = 0$
$$x = \\frac{\\pi}{2} \\text{ eller } x = \\frac{3\\pi}{2}$$

**Tilfelle 2:** $2\\sin x - 1 = 0 \\Rightarrow \\sin x = \\frac{1}{2}$
$$x = \\frac{\\pi}{6} \\text{ eller } x = \\frac{5\\pi}{6}$$

**Løsninger:** $x = \\frac{\\pi}{6}, \\frac{\\pi}{2}, \\frac{5\\pi}{6}, \\frac{3\\pi}{2}$`,
    },

    {
      id: 'r2-4-6-example-16',
      type: 'example',
      title: 'Eksempel 16: Identitet med sumformler',
      problem: `Vis at $\\frac{\\sin 3x + \\sin x}{\\cos 3x + \\cos x} = \\tan 2x$.`,
      solution: `**Løsning:**

Vi bruker sumformlene:
- $\\sin 3x + \\sin x = 2\\sin\\frac{3x+x}{2}\\cos\\frac{3x-x}{2} = 2\\sin 2x \\cos x$
- $\\cos 3x + \\cos x = 2\\cos\\frac{3x+x}{2}\\cos\\frac{3x-x}{2} = 2\\cos 2x \\cos x$

Dermed:
$$\\frac{\\sin 3x + \\sin x}{\\cos 3x + \\cos x} = \\frac{2\\sin 2x \\cos x}{2\\cos 2x \\cos x} = \\frac{\\sin 2x}{\\cos 2x} = \\tan 2x$$`,
    },

    {
      id: 'r2-4-6-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-9',
        number: '9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Løs likningene for $0 \\leq x < 2\\pi$.',
        subTasks: [
          { label: 'a', task: '$\\cos 2x = \\sin x$', solution: 'Bruk $\\cos 2x = 1 - 2\\sin^2 x$: $1 - 2\\sin^2 x = \\sin x \\Rightarrow 2\\sin^2 x + \\sin x - 1 = 0 \\Rightarrow (2\\sin x - 1)(\\sin x + 1) = 0$. Løsninger: $x = \\frac{\\pi}{6}, \\frac{5\\pi}{6}, \\frac{3\\pi}{2}$' },
          { label: 'b', task: '$\\sin 2x + \\sin x = 0$', solution: 'Bruk sumformel eller faktoriser: $2\\sin x \\cos x + \\sin x = \\sin x(2\\cos x + 1) = 0$. Løsninger: $x = 0, \\pi, \\frac{2\\pi}{3}, \\frac{4\\pi}{3}$' },
          { label: 'c', task: '$\\cos 2x + \\cos x = 0$', solution: 'Bruk sumformel: $2\\cos\\frac{3x}{2}\\cos\\frac{x}{2} = 0$. Løsninger: $x = \\frac{\\pi}{3}, \\pi, \\frac{5\\pi}{3}$' },
        ],
        hints: [
          'Prøv å skrive alt med én type trigonometrisk funksjon',
          'Faktorisering er ofte nøkkelen',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-4-6-oppsummering',
      type: 'text',
      content: `## Oppsummering

I dette kapittelet har vi lært:

**Addisjonsformlene:**
- $\\sin(u \\pm v) = \\sin u \\cos v \\pm \\cos u \\sin v$
- $\\cos(u \\pm v) = \\cos u \\cos v \\mp \\sin u \\sin v$
- $\\tan(u + v) = \\frac{\\tan u + \\tan v}{1 - \\tan u \\tan v}$

**Dobbeltvinkelformlene:**
- $\\sin 2u = 2\\sin u \\cos u$
- $\\cos 2u = \\cos^2 u - \\sin^2 u = 2\\cos^2 u - 1 = 1 - 2\\sin^2 u$

**Halvvinkelformlene:**
- $\\sin^2 \\frac{u}{2} = \\frac{1 - \\cos u}{2}$
- $\\cos^2 \\frac{u}{2} = \\frac{1 + \\cos u}{2}$

**Produktformlene:**
- Produkt til sum: f.eks. $\\sin u \\cos v = \\frac{1}{2}[\\sin(u+v) + \\sin(u-v)]$

**Sumformlene:**
- Sum til produkt: f.eks. $\\sin A + \\sin B = 2\\sin\\frac{A+B}{2}\\cos\\frac{A-B}{2}$

Disse formlene er essensielle verktøy for å forenkle trigonometriske uttrykk, løse likninger og bevise identiteter.`,
    },

    {
      id: 'r2-4-6-note-strategi',
      type: 'tip',
      content: `**Strategi for å velge riktig formel:**

1. **Beregne eksakte verdier:** Bruk addisjonsformlene til å dele opp ukjente vinkler i kjente (30°, 45°, 60°)
2. **Forenkle uttrykk:** Dobbeltvinkelformlene er ofte nyttige for å redusere potenser
3. **Integrasjon:** Produktformlene gjør produkter om til summer, som er lettere å integrere
4. **Faktorisering:** Sumformlene gjør summer om til produkter, nyttig for å løse likninger`,
    },

    // ========== BLANDEDE OPPGAVER ==========
    {
      id: 'r2-4-6-blandet-intro',
      type: 'text',
      content: `## Blandede oppgaver

Her er flere oppgaver som krever bruk av ulike formler fra kapitlet.`,
    },

    {
      id: 'r2-4-6-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-10',
        number: '10',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn de eksakte verdiene.',
        subTasks: [
          { label: 'a', task: '$\\sin 165°$', solution: '$\\sin 165° = \\sin(180° - 15°) = \\sin 15° = \\frac{\\sqrt{6} - \\sqrt{2}}{4}$' },
          { label: 'b', task: '$\\cos 195°$', solution: '$\\cos 195° = \\cos(180° + 15°) = -\\cos 15° = -\\frac{\\sqrt{6} + \\sqrt{2}}{4}$' },
          { label: 'c', task: '$\\tan 105°$', solution: '$\\tan 105° = \\tan(60° + 45°) = \\frac{\\tan 60° + \\tan 45°}{1 - \\tan 60° \\tan 45°} = \\frac{\\sqrt{3} + 1}{1 - \\sqrt{3}} = -(2 + \\sqrt{3})$' },
        ],
        hints: [
          'Skriv vinkelen som en sum/differanse av kjente vinkler',
          'Bruk symmetri: $\\sin(180° - x) = \\sin x$, $\\cos(180° + x) = -\\cos x$',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-11',
        number: '11',
        type: 'classic',
        difficulty: 'medium',
        task: 'Forenkle uttrykkene så mye som mulig.',
        subTasks: [
          { label: 'a', task: '$\\sin^2 x \\cos^2 x$', solution: '$= \\frac{1}{4}(2\\sin x \\cos x)^2 = \\frac{1}{4}\\sin^2 2x = \\frac{1}{4} \\cdot \\frac{1 - \\cos 4x}{2} = \\frac{1 - \\cos 4x}{8}$' },
          { label: 'b', task: '$1 + \\cos 2x + \\cos 4x + \\cos 6x$', solution: 'Bruk sumformel parvis: $= (1 + \\cos 4x) + (\\cos 2x + \\cos 6x) = 2\\cos^2 2x + 2\\cos 4x \\cos 2x = 2\\cos 2x(\\cos 2x + \\cos 4x) = 2\\cos 2x \\cdot 2\\cos 3x \\cos x = 4\\cos x \\cos 2x \\cos 3x$' },
          { label: 'c', task: '$\\frac{\\sin 4x}{\\sin x}$ for $\\sin x \\neq 0$', solution: '$= \\frac{2\\sin 2x \\cos 2x}{\\sin x} = \\frac{4\\sin x \\cos x \\cos 2x}{\\sin x} = 4\\cos x \\cos 2x$' },
        ],
        hints: [
          'Bruk $\\sin 2x = 2\\sin x \\cos x$ gjentatte ganger',
          'Se etter mønstre som kan forenkles med sumformlene',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-12',
        number: '12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at identitetene stemmer.',
        subTasks: [
          { label: 'a', task: '$\\tan x + \\cot x = \\frac{2}{\\sin 2x}$', solution: '$\\tan x + \\cot x = \\frac{\\sin x}{\\cos x} + \\frac{\\cos x}{\\sin x} = \\frac{\\sin^2 x + \\cos^2 x}{\\sin x \\cos x} = \\frac{1}{\\sin x \\cos x} = \\frac{2}{2\\sin x \\cos x} = \\frac{2}{\\sin 2x}$' },
          { label: 'b', task: '$\\frac{1 + \\tan^2 x}{1 - \\tan^2 x} = \\frac{1}{\\cos 2x}$', solution: 'Bruk $1 + \\tan^2 x = \\sec^2 x$ og $\\tan^2 x = \\frac{\\sin^2 x}{\\cos^2 x}$: $\\frac{1 + \\tan^2 x}{1 - \\tan^2 x} = \\frac{\\frac{1}{\\cos^2 x}}{\\frac{\\cos^2 x - \\sin^2 x}{\\cos^2 x}} = \\frac{1}{\\cos^2 x - \\sin^2 x} = \\frac{1}{\\cos 2x}$' },
          { label: 'c', task: '$\\sin 4x = 4\\sin x \\cos x \\cos 2x$', solution: '$\\sin 4x = 2\\sin 2x \\cos 2x = 2 \\cdot 2\\sin x \\cos x \\cdot \\cos 2x = 4\\sin x \\cos x \\cos 2x$' },
        ],
        hints: [
          'Start med én side og transformer til den andre',
          'Skriv tangens og cotangens som brøker med sinus og cosinus',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-13',
        number: '13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Løs likningene for $0 \\leq x < 2\\pi$.',
        subTasks: [
          { label: 'a', task: '$\\sin x + \\sin 3x = 0$', solution: 'Sumformel: $2\\sin 2x \\cos x = 0$. $\\sin 2x = 0$ gir $x = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}$. $\\cos x = 0$ gir $x = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$. Løsninger: $x = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}$' },
          { label: 'b', task: '$\\cos x - \\cos 3x = \\sin 2x$', solution: 'VS: $-2\\sin 2x \\sin(-x) = 2\\sin 2x \\sin x$. Likningen blir $2\\sin 2x \\sin x = \\sin 2x$, dvs. $\\sin 2x(2\\sin x - 1) = 0$. Løsninger: $x = 0, \\frac{\\pi}{6}, \\frac{\\pi}{2}, \\frac{5\\pi}{6}, \\pi, \\frac{3\\pi}{2}$' },
          { label: 'c', task: '$\\cos 2x + 3\\sin x - 2 = 0$', solution: 'Bruk $\\cos 2x = 1 - 2\\sin^2 x$: $1 - 2\\sin^2 x + 3\\sin x - 2 = 0 \\Rightarrow 2\\sin^2 x - 3\\sin x + 1 = 0 \\Rightarrow (2\\sin x - 1)(\\sin x - 1) = 0$. Løsninger: $x = \\frac{\\pi}{6}, \\frac{\\pi}{2}, \\frac{5\\pi}{6}$' },
        ],
        hints: [
          'Prøv sumformlene for å faktorisere',
          'Bruk dobbeltvinkelformel for å få én type trigonometrisk funksjon',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    {
      id: 'r2-4-6-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-6-ex-14',
        number: '14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfordringsoppgaver.',
        subTasks: [
          { label: 'a', task: 'Vis at $\\sin 20° \\sin 40° \\sin 80° = \\frac{\\sqrt{3}}{8}$', solution: 'Bruk produktformel og $\\sin 60° = \\frac{\\sqrt{3}}{2}$. $\\sin 40° \\sin 80° = \\frac{1}{2}[\\cos 40° - \\cos 120°] = \\frac{1}{2}[\\cos 40° + \\frac{1}{2}]$. Med videre manipulering vises resultatet.' },
          { label: 'b', task: 'Finn $\\tan 20° + \\tan 40° + \\tan 80°$ uttrykt med $\\tan 60°$', solution: 'Bruk $\\tan 3\\theta = \\frac{3\\tan\\theta - \\tan^3\\theta}{1 - 3\\tan^2\\theta}$ og at $20°, 40°, 80°$ tilfredsstiller $\\tan 3\\theta = \\sqrt{3}$. Summen blir $\\tan 20° + \\tan 40° + \\tan 80° = 3\\sqrt{3}$.' },
        ],
        hints: [
          'Disse oppgavene krever kreativ bruk av flere formler',
          'Se etter sammenhenger mellom vinklene',
        ],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

// ============================================================================
// KAPITTEL 4.7: OMSKRIVING TIL REN SINUSFORM
// ============================================================================
export const CHAPTER_R2_4_7: TextbookChapter = {
  id: 'r2-4-7',
  courseId: 'r2',
  chapterNumber: '4.7',
  title: 'Omskriving til ren sinusform',
  description: 'Skrive uttrykk på formen a sin x + b cos x som R sin(x + α).',
  estimatedMinutes: 50,
  competenceGoals: [
    'omskrive uttrykk på formen a sin x + b cos x til ren sinusform',
    'bruke omskriving til å løse likninger og finne ekstremverdier',
    'forstå sammenhengen mellom addisjonsformlene og omskriving',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-7-intro',
      type: 'text',
      content: `## Motivasjon

Uttrykk på formen $a\\sin x + b\\cos x$ dukker opp i mange sammenhenger - fra fysikk og teknikk til rene matematikkoppgaver. Slike uttrykk kan virke kompliserte, men de kan alltid skrives om til en **ren sinusfunksjon** på formen $R\\sin(x + \\alpha)$.

Denne omskrivingen gjør det enkelt å:
- Finne maksimums- og minimumsverdier
- Løse likninger
- Tegne grafer
- Analysere periodiske fenomener

**Eksempel på problemstilling:**

Hvordan finner vi maksimumsverdien til $f(x) = 3\\sin x + 4\\cos x$?

Hvis vi kan skrive $f(x) = R\\sin(x + \\alpha)$ for passende $R$ og $\\alpha$, vet vi umiddelbart at maksimumsverdien er $R$!`,
    },

    // ========== HOVEDTEOREM ==========
    {
      id: 'r2-4-7-theorem-main',
      type: 'theorem',
      title: 'Omskriving til ren sinusform',
      content: `For alle reelle tall $a$ og $b$ (ikke begge lik null) gjelder:

$$a\\sin x + b\\cos x = R\\sin(x + \\alpha)$$

der

$$R = \\sqrt{a^2 + b^2}$$

og $\\alpha$ er vinkelen bestemt ved:

$$\\cos\\alpha = \\frac{a}{R} = \\frac{a}{\\sqrt{a^2 + b^2}}, \\quad \\sin\\alpha = \\frac{b}{R} = \\frac{b}{\\sqrt{a^2 + b^2}}$$

**Alternativt:** $\\tan\\alpha = \\frac{b}{a}$ (for $a \\neq 0$), med riktig kvadrant bestemt av fortegnene til $a$ og $b$.`,
    },

    // ========== UTLEDNING ==========
    {
      id: 'r2-4-7-proof',
      type: 'text',
      content: `## Utledning av formelen

Vi bruker **addisjonsformelen for sinus**:

$$\\sin(x + \\alpha) = \\sin x \\cos\\alpha + \\cos x \\sin\\alpha$$

Hvis vi ganger med $R$:

$$R\\sin(x + \\alpha) = R\\cos\\alpha \\cdot \\sin x + R\\sin\\alpha \\cdot \\cos x$$

Sammenligner vi med $a\\sin x + b\\cos x$, ser vi at:
- $a = R\\cos\\alpha$
- $b = R\\sin\\alpha$

**Finne R:**

Fra Pytagoras:
$$a^2 + b^2 = R^2\\cos^2\\alpha + R^2\\sin^2\\alpha = R^2(\\cos^2\\alpha + \\sin^2\\alpha) = R^2$$

Dermed:
$$R = \\sqrt{a^2 + b^2}$$

**Finne α:**

Fra relasjonene over:
$$\\cos\\alpha = \\frac{a}{R}, \\quad \\sin\\alpha = \\frac{b}{R}$$

Dette bestemmer $\\alpha$ entydig i intervallet $[0, 2\\pi)$.`,
    },

    // ========== EKSEMPEL 1 ==========
    {
      id: 'r2-4-7-example-1',
      type: 'example',
      title: 'Eksempel 1: Grunnleggende omskriving',
      problem: `Skriv $3\\sin x + 4\\cos x$ på formen $R\\sin(x + \\alpha)$.`,
      solution: `**Løsning:**

**Steg 1: Finn R**
$$R = \\sqrt{a^2 + b^2} = \\sqrt{3^2 + 4^2} = \\sqrt{9 + 16} = \\sqrt{25} = 5$$

**Steg 2: Finn α**
$$\\cos\\alpha = \\frac{a}{R} = \\frac{3}{5}, \\quad \\sin\\alpha = \\frac{b}{R} = \\frac{4}{5}$$

Siden både $\\cos\\alpha$ og $\\sin\\alpha$ er positive, ligger $\\alpha$ i første kvadrant.

$$\\alpha = \\arctan\\left(\\frac{4}{3}\\right) \\approx 0{,}927 \\text{ rad} \\approx 53{,}1°$$

**Svar:**
$$3\\sin x + 4\\cos x = 5\\sin(x + \\alpha)$$

der $\\alpha = \\arctan\\left(\\frac{4}{3}\\right) \\approx 0{,}927$ rad.

**Kontroll:** Maksimumsverdien til $3\\sin x + 4\\cos x$ er 5, og minimumsverdien er $-5$.`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-4-7-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-1',
        number: '4.7.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Skriv $\\sin x + \\cos x$ på formen $R\\sin(x + \\alpha)$. Finn eksakt verdi for $R$ og $\\alpha$.',
        solution: `$R = \\sqrt{1^2 + 1^2} = \\sqrt{2}$

$\\cos\\alpha = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$, $\\sin\\alpha = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$

$\\alpha = \\frac{\\pi}{4}$

**Svar:** $\\sin x + \\cos x = \\sqrt{2}\\sin\\left(x + \\frac{\\pi}{4}\\right)$`,
        hints: ['Bruk $a = 1$ og $b = 1$ i formelen.', 'Husk at $\\cos\\frac{\\pi}{4} = \\sin\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== EKSEMPEL 2 ==========
    {
      id: 'r2-4-7-example-2',
      type: 'example',
      title: 'Eksempel 2: Negativ koeffisient',
      problem: `Skriv $\\sin x - \\sqrt{3}\\cos x$ på formen $R\\sin(x + \\alpha)$.`,
      solution: `**Løsning:**

Her er $a = 1$ og $b = -\\sqrt{3}$.

**Steg 1: Finn R**
$$R = \\sqrt{1^2 + (-\\sqrt{3})^2} = \\sqrt{1 + 3} = \\sqrt{4} = 2$$

**Steg 2: Finn α**
$$\\cos\\alpha = \\frac{1}{2}, \\quad \\sin\\alpha = \\frac{-\\sqrt{3}}{2}$$

Siden $\\cos\\alpha > 0$ og $\\sin\\alpha < 0$, ligger $\\alpha$ i **fjerde kvadrant**.

$$\\alpha = -\\frac{\\pi}{3}$$

**Svar:**
$$\\sin x - \\sqrt{3}\\cos x = 2\\sin\\left(x - \\frac{\\pi}{3}\\right)$$

**Kontroll:**
$2\\sin\\left(x - \\frac{\\pi}{3}\\right) = 2\\left[\\sin x \\cos\\frac{\\pi}{3} - \\cos x \\sin\\frac{\\pi}{3}\\right] = 2\\left[\\frac{1}{2}\\sin x - \\frac{\\sqrt{3}}{2}\\cos x\\right] = \\sin x - \\sqrt{3}\\cos x$ ✓`,
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-4-7-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-2',
        number: '4.7.2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv $\\sqrt{3}\\sin x - \\cos x$ på formen $R\\sin(x + \\alpha)$. Finn eksakt verdi for $R$ og $\\alpha$.',
        solution: `$R = \\sqrt{(\\sqrt{3})^2 + (-1)^2} = \\sqrt{3 + 1} = 2$

$\\cos\\alpha = \\frac{\\sqrt{3}}{2}$, $\\sin\\alpha = \\frac{-1}{2}$

$\\alpha = -\\frac{\\pi}{6}$

**Svar:** $\\sqrt{3}\\sin x - \\cos x = 2\\sin\\left(x - \\frac{\\pi}{6}\\right)$`,
        hints: ['Her er $a = \\sqrt{3}$ og $b = -1$.', 'Fjerde kvadrant: positiv cosinus, negativ sinus.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== ALTERNATIV FORM ==========
    {
      id: 'r2-4-7-alt-form',
      type: 'theorem',
      title: 'Alternativ form med cosinus',
      content: `Uttrykket $a\\sin x + b\\cos x$ kan også skrives på formen:

$$a\\sin x + b\\cos x = R\\cos(x - \\beta)$$

der

$$R = \\sqrt{a^2 + b^2}$$

og $\\beta$ er bestemt ved:

$$\\sin\\beta = \\frac{a}{R}, \\quad \\cos\\beta = \\frac{b}{R}$$

**Merk:** Denne formen er ofte praktisk når vi ønsker å uttrykke resultatet med cosinus i stedet for sinus.`,
    },

    // ========== TIP ==========
    {
      id: 'r2-4-7-tip-choice',
      type: 'tip',
      content: `**Valg av form:**

- Bruk $R\\sin(x + \\alpha)$ når oppgaven spør etter sinusform
- Bruk $R\\cos(x - \\beta)$ når oppgaven spør etter cosinusform
- Begge formene gir samme $R = \\sqrt{a^2 + b^2}$
- Sammenhengen er: $\\sin(x + \\alpha) = \\cos\\left(\\frac{\\pi}{2} - x - \\alpha\\right) = \\cos\\left(x - \\left(\\frac{\\pi}{2} - \\alpha\\right)\\right)$`,
    },

    // ========== EKSEMPEL 3: ANVENDELSE - MAKSVERDI ==========
    {
      id: 'r2-4-7-example-3',
      type: 'example',
      title: 'Eksempel 3: Finne maksimums- og minimumsverdier',
      problem: `Finn største og minste verdi av $f(x) = 5\\sin x + 12\\cos x$, og bestem for hvilke $x$-verdier disse oppnås.`,
      solution: `**Løsning:**

**Steg 1: Omskriv til ren sinusform**

$R = \\sqrt{5^2 + 12^2} = \\sqrt{25 + 144} = \\sqrt{169} = 13$

$\\cos\\alpha = \\frac{5}{13}$, $\\sin\\alpha = \\frac{12}{13}$

$\\alpha = \\arctan\\left(\\frac{12}{5}\\right) \\approx 1{,}176$ rad

Altså: $f(x) = 13\\sin(x + \\alpha)$

**Steg 2: Finn ekstremverdiene**

Siden $-1 \\leq \\sin(x + \\alpha) \\leq 1$, har vi:
- **Maksimum:** $f_{\\text{maks}} = 13 \\cdot 1 = 13$
- **Minimum:** $f_{\\text{min}} = 13 \\cdot (-1) = -13$

**Steg 3: Finn x-verdiene**

Maksimum når $\\sin(x + \\alpha) = 1$, dvs. $x + \\alpha = \\frac{\\pi}{2} + 2\\pi k$
$$x = \\frac{\\pi}{2} - \\alpha + 2\\pi k \\approx 0{,}395 + 2\\pi k$$

Minimum når $\\sin(x + \\alpha) = -1$, dvs. $x + \\alpha = -\\frac{\\pi}{2} + 2\\pi k$
$$x = -\\frac{\\pi}{2} - \\alpha + 2\\pi k \\approx -2{,}747 + 2\\pi k$$`,
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-4-7-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-3',
        number: '4.7.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn største og minste verdi av $g(x) = 8\\sin x + 6\\cos x$.',
        solution: `$R = \\sqrt{8^2 + 6^2} = \\sqrt{64 + 36} = \\sqrt{100} = 10$

$g(x) = 10\\sin(x + \\alpha)$ der $\\tan\\alpha = \\frac{6}{8} = \\frac{3}{4}$

**Svar:** Maksimum = 10, minimum = $-10$`,
        hints: ['Finn $R$ først.', 'Husk at $-R \\leq R\\sin(\\cdot) \\leq R$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== EKSEMPEL 4: LØSE LIKNING ==========
    {
      id: 'r2-4-7-example-4',
      type: 'example',
      title: 'Eksempel 4: Løse likning ved omskriving',
      problem: `Løs likningen $\\sin x + \\cos x = 1$ for $x \\in [0, 2\\pi)$.`,
      solution: `**Løsning:**

**Steg 1: Omskriv venstre side**

Fra Eksempel 1 vet vi (eller finner):
$$\\sin x + \\cos x = \\sqrt{2}\\sin\\left(x + \\frac{\\pi}{4}\\right)$$

**Steg 2: Løs den nye likningen**

$$\\sqrt{2}\\sin\\left(x + \\frac{\\pi}{4}\\right) = 1$$

$$\\sin\\left(x + \\frac{\\pi}{4}\\right) = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$$

**Steg 3: Finn løsningene**

$\\sin\\theta = \\frac{\\sqrt{2}}{2}$ gir $\\theta = \\frac{\\pi}{4}$ eller $\\theta = \\frac{3\\pi}{4}$ (i $[0, 2\\pi)$)

Med $\\theta = x + \\frac{\\pi}{4}$:

**Løsning 1:** $x + \\frac{\\pi}{4} = \\frac{\\pi}{4} \\Rightarrow x = 0$

**Løsning 2:** $x + \\frac{\\pi}{4} = \\frac{3\\pi}{4} \\Rightarrow x = \\frac{\\pi}{2}$

**Svar:** $x = 0$ eller $x = \\frac{\\pi}{2}$

**Kontroll:**
- $\\sin 0 + \\cos 0 = 0 + 1 = 1$ ✓
- $\\sin\\frac{\\pi}{2} + \\cos\\frac{\\pi}{2} = 1 + 0 = 1$ ✓`,
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-4-7-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-4',
        number: '4.7.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Løs likningen $\\sin x - \\cos x = 1$ for $x \\in [0, 2\\pi)$.',
        solution: `Omskriv: $\\sin x - \\cos x = \\sqrt{2}\\sin\\left(x - \\frac{\\pi}{4}\\right)$

(Her er $a = 1$, $b = -1$, så $\\alpha = -\\frac{\\pi}{4}$)

$\\sqrt{2}\\sin\\left(x - \\frac{\\pi}{4}\\right) = 1$

$\\sin\\left(x - \\frac{\\pi}{4}\\right) = \\frac{\\sqrt{2}}{2}$

$x - \\frac{\\pi}{4} = \\frac{\\pi}{4}$ eller $x - \\frac{\\pi}{4} = \\frac{3\\pi}{4}$

**Svar:** $x = \\frac{\\pi}{2}$ eller $x = \\pi$`,
        hints: ['Her er $b = -1$, så $\\sin\\alpha = \\frac{-1}{\\sqrt{2}}$.', 'Vinkelen $\\alpha$ blir negativ (fjerde kvadrant).'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== EKSEMPEL 5: GENERELT TILFELLE ==========
    {
      id: 'r2-4-7-example-5',
      type: 'example',
      title: 'Eksempel 5: Generelt argument',
      problem: `Skriv $2\\sin(3x) + 2\\cos(3x)$ på formen $R\\sin(3x + \\alpha)$.`,
      solution: `**Løsning:**

Tenk på $3x$ som én variabel. Vi har $a = 2$ og $b = 2$.

**Finn R:**
$$R = \\sqrt{2^2 + 2^2} = \\sqrt{8} = 2\\sqrt{2}$$

**Finn α:**
$$\\cos\\alpha = \\frac{2}{2\\sqrt{2}} = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$$
$$\\sin\\alpha = \\frac{2}{2\\sqrt{2}} = \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$$

$\\alpha = \\frac{\\pi}{4}$

**Svar:**
$$2\\sin(3x) + 2\\cos(3x) = 2\\sqrt{2}\\sin\\left(3x + \\frac{\\pi}{4}\\right)$$

**Merk:** Perioden til denne funksjonen er $\\frac{2\\pi}{3}$ (fra $3x$), og amplituden er $2\\sqrt{2}$.`,
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-4-7-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-5',
        number: '4.7.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Skriv $\\sin(2x) + \\sqrt{3}\\cos(2x)$ på formen $R\\sin(2x + \\alpha)$.',
        solution: `$R = \\sqrt{1^2 + (\\sqrt{3})^2} = \\sqrt{1 + 3} = 2$

$\\cos\\alpha = \\frac{1}{2}$, $\\sin\\alpha = \\frac{\\sqrt{3}}{2}$

$\\alpha = \\frac{\\pi}{3}$

**Svar:** $\\sin(2x) + \\sqrt{3}\\cos(2x) = 2\\sin\\left(2x + \\frac{\\pi}{3}\\right)$`,
        hints: ['Behandle $2x$ som én variabel.', 'Standardvinkel: $\\cos\\frac{\\pi}{3} = \\frac{1}{2}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== PRAKTISK FREMGANGSMÅTE ==========
    {
      id: 'r2-4-7-method',
      type: 'text',
      content: `## Oppsummering: Fremgangsmåte

For å skrive $a\\sin x + b\\cos x$ på formen $R\\sin(x + \\alpha)$:

**Steg 1:** Beregn $R = \\sqrt{a^2 + b^2}$

**Steg 2:** Finn $\\alpha$ ved å løse:
$$\\cos\\alpha = \\frac{a}{R}, \\quad \\sin\\alpha = \\frac{b}{R}$$

**Steg 3:** Bestem riktig kvadrant for $\\alpha$ ut fra fortegnene til $a$ og $b$:

| $a$ | $b$ | Kvadrant | $\\alpha$ |
|-----|-----|----------|-----------|
| $+$ | $+$ | I | $0 < \\alpha < \\frac{\\pi}{2}$ |
| $-$ | $+$ | II | $\\frac{\\pi}{2} < \\alpha < \\pi$ |
| $-$ | $-$ | III | $\\pi < \\alpha < \\frac{3\\pi}{2}$ |
| $+$ | $-$ | IV | $\\frac{3\\pi}{2} < \\alpha < 2\\pi$ (eller $-\\frac{\\pi}{2} < \\alpha < 0$) |

**Steg 4:** Skriv svaret: $a\\sin x + b\\cos x = R\\sin(x + \\alpha)$`,
    },

    // ========== OPPGAVE 6 ==========
    {
      id: 'r2-4-7-ex-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-6',
        number: '4.7.6',
        type: 'classic',
        difficulty: 'medium',
        task: `Skriv hvert uttrykk på formen $R\\sin(x + \\alpha)$:

a) $4\\sin x + 3\\cos x$
b) $-\\sin x + \\cos x$
c) $-\\sin x - \\cos x$`,
        subTasks: [
          {
            label: 'a',
            task: '$4\\sin x + 3\\cos x$',
            solution: '$R = 5$, $\\cos\\alpha = \\frac{4}{5}$, $\\sin\\alpha = \\frac{3}{5}$, $\\alpha = \\arctan\\frac{3}{4} \\approx 0{,}644$ rad. Svar: $5\\sin(x + \\arctan\\frac{3}{4})$',
          },
          {
            label: 'b',
            task: '$-\\sin x + \\cos x$',
            solution: '$R = \\sqrt{2}$, $\\cos\\alpha = \\frac{-1}{\\sqrt{2}}$, $\\sin\\alpha = \\frac{1}{\\sqrt{2}}$, andre kvadrant: $\\alpha = \\frac{3\\pi}{4}$. Svar: $\\sqrt{2}\\sin\\left(x + \\frac{3\\pi}{4}\\right)$',
          },
          {
            label: 'c',
            task: '$-\\sin x - \\cos x$',
            solution: '$R = \\sqrt{2}$, $\\cos\\alpha = \\frac{-1}{\\sqrt{2}}$, $\\sin\\alpha = \\frac{-1}{\\sqrt{2}}$, tredje kvadrant: $\\alpha = \\frac{5\\pi}{4}$ (eller $-\\frac{3\\pi}{4}$). Svar: $\\sqrt{2}\\sin\\left(x + \\frac{5\\pi}{4}\\right)$',
          },
        ],
        solution: 'Se deloppgavene.',
        hints: ['Bruk tabellen for å finne riktig kvadrant.', 'For b og c: Se på fortegnene til $a$ og $b$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== ANVENDELSE: FYSIKK ==========
    {
      id: 'r2-4-7-application',
      type: 'text',
      content: `## Anvendelse: Superposisjon av bølger

I fysikk oppstår uttrykk på formen $a\\sin x + b\\cos x$ når vi legger sammen to bølger med samme frekvens men forskjellig fase.

**Eksempel:** To lydbølger med samme frekvens:
- Bølge 1: $y_1 = A_1\\sin(\\omega t)$
- Bølge 2: $y_2 = A_2\\cos(\\omega t) = A_2\\sin(\\omega t + \\frac{\\pi}{2})$

Den resulterende bølgen er:
$$y = y_1 + y_2 = A_1\\sin(\\omega t) + A_2\\cos(\\omega t) = R\\sin(\\omega t + \\alpha)$$

der $R = \\sqrt{A_1^2 + A_2^2}$ er den **resulterende amplituden**.

Dette kalles **superposisjon** og er grunnleggende i studiet av bølger, lyd, og elektromagnetisme.`,
    },

    // ========== EKSEMPEL 6 ==========
    {
      id: 'r2-4-7-example-6',
      type: 'example',
      title: 'Eksempel 6: Superposisjon av bølger',
      problem: `To lydbølger med samme frekvens beskrives ved:
$$y_1 = 3\\sin(440t)$$
$$y_2 = 4\\cos(440t)$$

der $t$ er tid i sekunder. Finn et uttrykk for den resulterende bølgen $y = y_1 + y_2$.`,
      solution: `**Løsning:**

$$y = 3\\sin(440t) + 4\\cos(440t)$$

Vi bruker omskrivingsformelen med $a = 3$, $b = 4$:

$$R = \\sqrt{3^2 + 4^2} = 5$$

$$\\alpha = \\arctan\\left(\\frac{4}{3}\\right) \\approx 0{,}927 \\text{ rad}$$

**Svar:**
$$y = 5\\sin(440t + 0{,}927)$$

**Tolkning:**
- Den resulterende bølgen har amplitude 5 (større enn hver enkelt bølge!)
- Frekvensen er uendret ($\\omega = 440$, som gir $f = \\frac{440}{2\\pi} \\approx 70$ Hz)
- Bølgen er faseforskjøvet med ca. 0,927 radianer`,
    },

    // ========== OPPGAVE 7: ANVENDELSE ==========
    {
      id: 'r2-4-7-ex-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-7',
        number: '4.7.7',
        type: 'classic',
        difficulty: 'medium',
        task: `En elektrisk krets har spenning $V(t) = 12\\sin(100\\pi t) + 5\\cos(100\\pi t)$ volt.

a) Skriv $V(t)$ på formen $R\\sin(100\\pi t + \\alpha)$.
b) Hva er maksimalspenningen?
c) Hva er frekvensen til vekselspenningen?`,
        subTasks: [
          {
            label: 'a',
            task: 'Omskriv til ren sinusform',
            solution: '$R = \\sqrt{12^2 + 5^2} = \\sqrt{144 + 25} = 13$, $\\alpha = \\arctan\\frac{5}{12} \\approx 0{,}395$ rad. $V(t) = 13\\sin(100\\pi t + 0{,}395)$',
          },
          {
            label: 'b',
            task: 'Finn maksimalspenningen',
            solution: 'Maksimalspenningen er amplituden $R = 13$ V',
          },
          {
            label: 'c',
            task: 'Finn frekvensen',
            solution: '$\\omega = 100\\pi$, så $f = \\frac{\\omega}{2\\pi} = \\frac{100\\pi}{2\\pi} = 50$ Hz',
          },
        ],
        solution: 'a) $V(t) = 13\\sin(100\\pi t + 0{,}395)$, b) 13 V, c) 50 Hz',
        hints: ['Bruk standardformelen for omskriving.', 'Frekvens: $f = \\frac{\\omega}{2\\pi}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== SPESIALTILFELLE ==========
    {
      id: 'r2-4-7-special',
      type: 'theorem',
      title: 'Spesialtilfelle: Like koeffisienter',
      content: `Når $a = b = A$ (like koeffisienter), får vi et viktig spesialtilfelle:

$$A\\sin x + A\\cos x = A\\sqrt{2}\\sin\\left(x + \\frac{\\pi}{4}\\right)$$

**Bevis:**
- $R = \\sqrt{A^2 + A^2} = A\\sqrt{2}$
- $\\cos\\alpha = \\sin\\alpha = \\frac{A}{A\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$
- $\\alpha = \\frac{\\pi}{4}$

Dette er nyttig å huske som en "snarvei" for oppgaver der koeffisientene er like.`,
    },

    // ========== OPPGAVE 8: UTFORDRING ==========
    {
      id: 'r2-4-7-ex-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-8',
        number: '4.7.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `**(Utfordring)** Vis at

$$A\\sin(Bx) + A\\cos(Bx) = A\\sqrt{2}\\sin\\left(Bx + \\frac{\\pi}{4}\\right)$$

Hint: Bruk addisjonsformelen for sinus.`,
        solution: `**Løsning:**

Vi starter med høyre side og bruker addisjonsformelen:

$\\sin(\\alpha + \\beta) = \\sin\\alpha\\cos\\beta + \\cos\\alpha\\sin\\beta$

$A\\sqrt{2}\\sin\\left(Bx + \\frac{\\pi}{4}\\right) = A\\sqrt{2}\\left[\\sin(Bx)\\cos\\left(\\frac{\\pi}{4}\\right) + \\cos(Bx)\\sin\\left(\\frac{\\pi}{4}\\right)\\right]$

$= A\\sqrt{2}\\left[\\sin(Bx) \\cdot \\frac{\\sqrt{2}}{2} + \\cos(Bx) \\cdot \\frac{\\sqrt{2}}{2}\\right]$

$= A\\sqrt{2} \\cdot \\frac{\\sqrt{2}}{2}[\\sin(Bx) + \\cos(Bx)]$

$= A \\cdot 1 \\cdot [\\sin(Bx) + \\cos(Bx)]$

$= A\\sin(Bx) + A\\cos(Bx)$

Dermed er likheten vist. ✓`,
        hints: ['Bruk at $\\cos\\left(\\frac{\\pi}{4}\\right) = \\sin\\left(\\frac{\\pi}{4}\\right) = \\frac{\\sqrt{2}}{2}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 9 ==========
    {
      id: 'r2-4-7-ex-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-9',
        number: '4.7.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Løs ulikheten $\\sin x + \\cos x > 1$ for $x \\in [0, 2\\pi)$.`,
        solution: `Omskriv: $\\sqrt{2}\\sin\\left(x + \\frac{\\pi}{4}\\right) > 1$

$\\sin\\left(x + \\frac{\\pi}{4}\\right) > \\frac{1}{\\sqrt{2}} = \\frac{\\sqrt{2}}{2}$

$\\sin\\theta > \\frac{\\sqrt{2}}{2}$ for $\\theta \\in \\left(\\frac{\\pi}{4}, \\frac{3\\pi}{4}\\right)$

Med $\\theta = x + \\frac{\\pi}{4}$:
$x + \\frac{\\pi}{4} \\in \\left(\\frac{\\pi}{4}, \\frac{3\\pi}{4}\\right)$

$x \\in \\left(0, \\frac{\\pi}{2}\\right)$

**Svar:** $x \\in \\left(0, \\frac{\\pi}{2}\\right)$`,
        hints: ['Omskriv til ren sinusform først.', 'Tegn enhetssirkelen for å se når sinus er større enn $\\frac{\\sqrt{2}}{2}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 10 ==========
    {
      id: 'r2-4-7-ex-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-10',
        number: '4.7.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En funksjon er gitt ved $f(x) = \\sin x + \\sqrt{3}\\cos x$.

a) Skriv $f(x)$ på formen $R\\sin(x + \\alpha)$.
b) Tegn grafen til $f$ for $x \\in [0, 2\\pi]$.
c) Løs likningen $f(x) = \\sqrt{3}$ for $x \\in [0, 2\\pi)$.`,
        subTasks: [
          {
            label: 'a',
            task: 'Omskriv til ren sinusform',
            solution: '$R = 2$, $\\alpha = \\frac{\\pi}{3}$, så $f(x) = 2\\sin\\left(x + \\frac{\\pi}{3}\\right)$',
          },
          {
            label: 'b',
            task: 'Tegn grafen',
            solution: 'Sinuskurve med amplitude 2, periode $2\\pi$, faseforskjøvet $\\frac{\\pi}{3}$ til venstre. Maksimum ved $x = \\frac{\\pi}{6}$, minimum ved $x = \\frac{7\\pi}{6}$.',
          },
          {
            label: 'c',
            task: 'Løs $f(x) = \\sqrt{3}$',
            solution: '$2\\sin\\left(x + \\frac{\\pi}{3}\\right) = \\sqrt{3}$, $\\sin\\left(x + \\frac{\\pi}{3}\\right) = \\frac{\\sqrt{3}}{2}$. $x + \\frac{\\pi}{3} = \\frac{\\pi}{3}$ eller $\\frac{2\\pi}{3}$, så $x = 0$ eller $x = \\frac{\\pi}{3}$.',
          },
        ],
        solution: 'a) $f(x) = 2\\sin\\left(x + \\frac{\\pi}{3}\\right)$, b) Se beskrivelse, c) $x = 0$ eller $x = \\frac{\\pi}{3}$',
        hints: ['Husk standardvinklene: $\\sin\\frac{\\pi}{3} = \\frac{\\sqrt{3}}{2}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-4-7-summary',
      type: 'text',
      content: `## Oppsummering

**Hovedformel:**
$$a\\sin x + b\\cos x = R\\sin(x + \\alpha)$$

der $R = \\sqrt{a^2 + b^2}$ og $\\alpha$ finnes fra $\\cos\\alpha = \\frac{a}{R}$, $\\sin\\alpha = \\frac{b}{R}$.

**Viktige anvendelser:**
1. **Ekstremverdier:** Maks = $R$, min = $-R$
2. **Løse likninger:** Omskriv, løs enkel sinuslikning
3. **Bølger/fysikk:** Superposisjon av bølger
4. **Grafer:** Én sinuskurve er enklere å analysere enn en sum

**Spesialtilfelle:**
$$A\\sin x + A\\cos x = A\\sqrt{2}\\sin\\left(x + \\frac{\\pi}{4}\\right)$$`,
    },
  ],

  // Exercises collection
  exercises: [],

  // Navigation
  nextChapter: 'r2-4-8',
  prevChapter: 'r2-4-6',
};

// ============================================================================
// KAPITTEL 4.8: TRIGONOMETRISKE FUNKSJONER OG GRAFER
// ============================================================================
export const CHAPTER_R2_4_8: TextbookChapter = {
  id: 'r2-4-8',
  courseId: 'r2',
  chapterNumber: '4.8',
  title: 'Trigonometriske funksjoner og grafer',
  description: 'Grafer til sin, cos og tan, transformasjoner og modellering av periodiske fenomener.',
  estimatedMinutes: 55,
  competenceGoals: [
    'utforske eigenskapar ved trigonometriske funksjonar',
    'bruke trigonometriske funksjonar til å modellere periodiske fenomen',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-7-intro',
      type: 'text',
      content: `## Introduksjon til trigonometriske funksjoner

Trigonometriske funksjoner er sentrale i matematikk og har mange anvendelser i fysikk, teknikk og andre fagfelt. De er spesielt nyttige for å beskrive **periodiske fenomener** - altså fenomener som gjentar seg med jevne mellomrom.

Eksempler på periodiske fenomener:
- Tidevann (flo og fjære)
- Temperatursvingninger gjennom året
- Lydbølger og musikalske toner
- Vekselstrøm i elektriske kretser
- Pendelbevegelse

I dette kapitlet skal vi studere grafene til sinusfunksjonen, cosinusfunksjonen og tangensfunksjonen, og lære hvordan vi kan transformere disse for å modellere virkelige fenomener.`,
    },

    // ========== GRAFEN TIL sin(x) ==========
    {
      id: 'r2-4-7-sin-intro',
      type: 'text',
      content: `## Grafen til $\\sin(x)$

Sinusfunksjonen $f(x) = \\sin(x)$ er definert for alle reelle tall $x$. Når vi tegner grafen, måler vi $x$ i **radianer**.

### Viktige egenskaper ved $\\sin(x)$:

- **Definisjonsmengde:** $D_f = \\mathbb{R}$ (alle reelle tall)
- **Verdimengde:** $V_f = [-1, 1]$
- **Periode:** $2\\pi$ (grafen gjentar seg for hver $2\\pi$)
- **Nullpunkter:** $x = n\\pi$ der $n \\in \\mathbb{Z}$
- **Maksimum:** $\\sin(x) = 1$ når $x = \\frac{\\pi}{2} + 2\\pi n$
- **Minimum:** $\\sin(x) = -1$ når $x = \\frac{3\\pi}{2} + 2\\pi n$ eller $x = -\\frac{\\pi}{2} + 2\\pi n$
- **Symmetri:** Odde funksjon, $\\sin(-x) = -\\sin(x)$`,
    },
    {
      id: 'r2-4-7-sinuskurve-bilde',
      type: 'image',
      src: '/images/trigonometry/sinuskurve.svg',
      alt: 'Grafen til sinusfunksjonen med periode, amplitude og nullpunkter markert',
      caption: 'Sinuskurven viser periodisk oppforsel med periode 2pi',
    },

    {
      id: 'r2-4-7-sin-geogebra',
      type: 'geogebra',
      title: 'Grafen til sin(x)',
      description: 'Utforsk hvordan sinusfunksjonen ser ut. Legg merke til perioden og verdimengden.',
      appType: 'graphing',
      commands: ['f(x) = sin(x)'],
    },

    // Eksempel 1: Avlesning fra sinusgrafen
    {
      id: 'r2-4-7-example-1',
      type: 'example',
      title: 'Eksempel 1: Avlesning fra sinusgrafen',
      problem: `Bruk grafen til $f(x) = \\sin(x)$ til å bestemme:

a) $\\sin(0)$
b) $\\sin\\left(\\frac{\\pi}{2}\\right)$
c) $\\sin(\\pi)$
d) $\\sin\\left(\\frac{3\\pi}{2}\\right)$
e) $\\sin(2\\pi)$`,
      solution: `**Løsning:**

Vi leser av verdiene fra enhetssirkelen eller grafen:

a) $\\sin(0) = 0$

b) $\\sin\\left(\\frac{\\pi}{2}\\right) = 1$ (maksimumspunkt)

c) $\\sin(\\pi) = 0$ (nullpunkt)

d) $\\sin\\left(\\frac{3\\pi}{2}\\right) = -1$ (minimumspunkt)

e) $\\sin(2\\pi) = 0$ (vi er tilbake der vi startet)

Merk at $\\sin(2\\pi) = \\sin(0)$ fordi sinusfunksjonen har periode $2\\pi$.`,
    },

    // ========== GRAFEN TIL cos(x) ==========
    {
      id: 'r2-4-7-cos-intro',
      type: 'text',
      content: `## Grafen til $\\cos(x)$

Cosinusfunksjonen $f(x) = \\cos(x)$ har mange av de samme egenskapene som sinusfunksjonen.

### Viktige egenskaper ved $\\cos(x)$:

- **Definisjonsmengde:** $D_f = \\mathbb{R}$
- **Verdimengde:** $V_f = [-1, 1]$
- **Periode:** $2\\pi$
- **Nullpunkter:** $x = \\frac{\\pi}{2} + n\\pi$ der $n \\in \\mathbb{Z}$
- **Maksimum:** $\\cos(x) = 1$ når $x = 2\\pi n$
- **Minimum:** $\\cos(x) = -1$ når $x = \\pi + 2\\pi n$
- **Symmetri:** Like funksjon, $\\cos(-x) = \\cos(x)$

### Sammenhengen mellom sinus og cosinus:

$$\\cos(x) = \\sin\\left(x + \\frac{\\pi}{2}\\right)$$

Dette betyr at cosinusgrafen er sinusgrafen forskjøvet $\\frac{\\pi}{2}$ til venstre.`,
    },
    {
      id: 'r2-4-7-cosinuskurve-bilde',
      type: 'image',
      src: '/images/trigonometry/cosinuskurve.svg',
      alt: 'Grafen til cosinusfunksjonen med periode, amplitude og nullpunkter markert',
      caption: 'Cosinuskurven er sinuskurven forskjøvet pi/2 til venstre',
    },

    {
      id: 'r2-4-7-cos-geogebra',
      type: 'geogebra',
      title: 'Sammenligning av sin(x) og cos(x)',
      description: 'Se hvordan sinus- og cosinusgrafene forholder seg til hverandre.',
      appType: 'graphing',
      commands: ['f(x) = sin(x)', 'g(x) = cos(x)'],
    },

    // Eksempel 2: Sammenligning av sinus og cosinus
    {
      id: 'r2-4-7-example-2',
      type: 'example',
      title: 'Eksempel 2: Sammenligning av sinus og cosinus',
      problem: `Vis at $\\cos(x) = \\sin\\left(x + \\frac{\\pi}{2}\\right)$ ved å sammenligne verdier for:

a) $x = 0$
b) $x = \\frac{\\pi}{2}$
c) $x = \\pi$`,
      solution: `**Løsning:**

Vi beregner begge sider og sammenligner:

a) For $x = 0$:
- $\\cos(0) = 1$
- $\\sin\\left(0 + \\frac{\\pi}{2}\\right) = \\sin\\left(\\frac{\\pi}{2}\\right) = 1$ ✓

b) For $x = \\frac{\\pi}{2}$:
- $\\cos\\left(\\frac{\\pi}{2}\\right) = 0$
- $\\sin\\left(\\frac{\\pi}{2} + \\frac{\\pi}{2}\\right) = \\sin(\\pi) = 0$ ✓

c) For $x = \\pi$:
- $\\cos(\\pi) = -1$
- $\\sin\\left(\\pi + \\frac{\\pi}{2}\\right) = \\sin\\left(\\frac{3\\pi}{2}\\right) = -1$ ✓

Verdiene stemmer overens, noe som bekrefter sammenhengen.`,
    },

    // ========== GRAFEN TIL tan(x) ==========
    {
      id: 'r2-4-7-tan-intro',
      type: 'text',
      content: `## Grafen til $\\tan(x)$

Tangensfunksjonen er definert som:

$$\\tan(x) = \\frac{\\sin(x)}{\\cos(x)}$$

### Viktige egenskaper ved $\\tan(x)$:

- **Definisjonsmengde:** $D_f = \\mathbb{R} \\setminus \\left\\{\\frac{\\pi}{2} + n\\pi : n \\in \\mathbb{Z}\\right\\}$

  (Alle $x$ unntatt der $\\cos(x) = 0$)

- **Verdimengde:** $V_f = \\mathbb{R}$ (alle reelle tall)
- **Periode:** $\\pi$ (halv periode sammenlignet med sinus og cosinus)
- **Nullpunkter:** $x = n\\pi$ der $n \\in \\mathbb{Z}$
- **Vertikale asymptoter:** $x = \\frac{\\pi}{2} + n\\pi$
- **Symmetri:** Odde funksjon, $\\tan(-x) = -\\tan(x)$`,
    },
    {
      id: 'r2-4-7-tangenskurve-bilde',
      type: 'image',
      src: '/images/trigonometry/tangenskurve.svg',
      alt: 'Grafen til tangensfunksjonen med vertikale asymptoter og periode markert',
      caption: 'Tangensfunksjonen har periode pi og vertikale asymptoter',
    },

    {
      id: 'r2-4-7-tan-geogebra',
      type: 'geogebra',
      title: 'Grafen til tan(x)',
      description: 'Se hvordan tangensfunksjonen oppfører seg, spesielt ved asymptotene.',
      appType: 'graphing',
      commands: ['f(x) = tan(x)'],
    },

    // Eksempel 3: Egenskaper ved tangensfunksjonen
    {
      id: 'r2-4-7-example-3',
      type: 'example',
      title: 'Eksempel 3: Egenskaper ved tangensfunksjonen',
      problem: `a) Forklar hvorfor $\\tan(x)$ ikke er definert for $x = \\frac{\\pi}{2}$.

b) Beregn $\\tan(0)$, $\\tan\\left(\\frac{\\pi}{4}\\right)$ og $\\tan\\left(\\frac{\\pi}{3}\\right)$.

c) Hva skjer med $\\tan(x)$ når $x \\to \\frac{\\pi}{2}^-$?`,
      solution: `**Løsning:**

a) $\\tan\\left(\\frac{\\pi}{2}\\right) = \\frac{\\sin\\left(\\frac{\\pi}{2}\\right)}{\\cos\\left(\\frac{\\pi}{2}\\right)} = \\frac{1}{0}$

Divisjon med null er ikke definert, så $\\tan(x)$ har en vertikal asymptote ved $x = \\frac{\\pi}{2}$.

b) Beregninger:
- $\\tan(0) = \\frac{\\sin(0)}{\\cos(0)} = \\frac{0}{1} = 0$

- $\\tan\\left(\\frac{\\pi}{4}\\right) = \\frac{\\sin\\left(\\frac{\\pi}{4}\\right)}{\\cos\\left(\\frac{\\pi}{4}\\right)} = \\frac{\\frac{\\sqrt{2}}{2}}{\\frac{\\sqrt{2}}{2}} = 1$

- $\\tan\\left(\\frac{\\pi}{3}\\right) = \\frac{\\sin\\left(\\frac{\\pi}{3}\\right)}{\\cos\\left(\\frac{\\pi}{3}\\right)} = \\frac{\\frac{\\sqrt{3}}{2}}{\\frac{1}{2}} = \\sqrt{3}$

c) Når $x \\to \\frac{\\pi}{2}^-$ (fra venstre):
- $\\sin(x) \\to 1$
- $\\cos(x) \\to 0^+$ (nærmer seg 0 fra positive verdier)
- Derfor $\\tan(x) = \\frac{\\sin(x)}{\\cos(x)} \\to +\\infty$

Grafen går mot uendelig når vi nærmer oss asymptoten fra venstre.`,
    },

    // ========== AMPLITUDE OG PERIODE ==========
    {
      id: 'r2-4-7-amplitude-intro',
      type: 'text',
      content: `## Amplitude, periode og den generelle formen

For å modellere periodiske fenomener bruker vi ofte funksjoner på formen:

$$f(x) = A\\sin(Bx + C) + D$$

eller tilsvarende med cosinus.

### Parametrenes betydning:

| Parameter | Navn | Effekt |
|-----------|------|--------|
| $A$ | Amplitude | Bestemmer høyden på svingningene |
| $B$ | Frekvensparameter | Påvirker perioden: $T = \\frac{2\\pi}{|B|}$ |
| $C$ | Faseforskyvning | Horisontalt skift: $-\\frac{C}{B}$ enheter |
| $D$ | Vertikalt skift | Flytter hele grafen opp/ned |`,
    },

    {
      id: 'r2-4-7-amplitude-def',
      type: 'definition',
      title: 'Amplitude',
      content: `**Amplituden** til funksjonen $f(x) = A\\sin(Bx + C) + D$ er $|A|$.

Amplituden angir avstanden fra likevektslinjen ($y = D$) til maksimums- eller minimumsverdiene.

- Maksverdi: $D + |A|$
- Minverdi: $D - |A|$`,
    },

    {
      id: 'r2-4-7-periode-def',
      type: 'definition',
      title: 'Periode',
      content: `**Perioden** til funksjonen $f(x) = A\\sin(Bx + C) + D$ er:

$$T = \\frac{2\\pi}{|B|}$$

Perioden er den minste positive verdien $T$ slik at $f(x + T) = f(x)$ for alle $x$.`,
    },
    {
      id: 'r2-4-7-amplitude-periode-bilde',
      type: 'image',
      src: '/images/trigonometry/amplitude-periode.svg',
      alt: 'Sinuskurve med amplitude, periode og likevektslinje markert',
      caption: 'Amplitude og periode bestemmer formen pa trigonometriske funksjoner',
    },

    // Eksempel 4: Bestemme amplitude og periode
    {
      id: 'r2-4-7-example-4',
      type: 'example',
      title: 'Eksempel 4: Bestemme amplitude og periode',
      problem: `Bestem amplitude og periode for følgende funksjoner:

a) $f(x) = 3\\sin(2x)$
b) $g(x) = 2\\cos\\left(\\frac{x}{3}\\right)$
c) $h(x) = -4\\sin(\\pi x)$`,
      solution: `**Løsning:**

a) $f(x) = 3\\sin(2x)$
- Amplitude: $|A| = |3| = 3$
- Periode: $T = \\frac{2\\pi}{|B|} = \\frac{2\\pi}{2} = \\pi$

b) $g(x) = 2\\cos\\left(\\frac{x}{3}\\right)$
- Amplitude: $|A| = |2| = 2$
- Periode: $T = \\frac{2\\pi}{|B|} = \\frac{2\\pi}{\\frac{1}{3}} = 6\\pi$

c) $h(x) = -4\\sin(\\pi x)$
- Amplitude: $|A| = |-4| = 4$
- Periode: $T = \\frac{2\\pi}{|B|} = \\frac{2\\pi}{\\pi} = 2$

Merk: Det negative fortegnet i c) speiler grafen om $x$-aksen, men påvirker ikke amplituden.`,
    },

    // ========== FASEFORSKYVNING ==========
    {
      id: 'r2-4-7-fase-intro',
      type: 'text',
      content: `## Faseforskyvning

Faseforskyvningen beskriver hvor mye grafen er forskjøvet horisontalt.

For $f(x) = A\\sin(Bx + C) + D$ kan vi skrive:

$$f(x) = A\\sin\\left(B\\left(x + \\frac{C}{B}\\right)\\right) + D$$

Grafen er forskjøvet $-\\frac{C}{B}$ enheter langs $x$-aksen:
- Hvis $C > 0$ og $B > 0$: Forskyves til **venstre**
- Hvis $C < 0$ og $B > 0$: Forskyves til **høyre**`,
    },

    // Eksempel 5: Faseforskyvning
    {
      id: 'r2-4-7-example-5',
      type: 'example',
      title: 'Eksempel 5: Faseforskyvning',
      problem: `Bestem faseforskyvningen for:

a) $f(x) = \\sin\\left(x - \\frac{\\pi}{4}\\right)$
b) $g(x) = \\cos(2x + \\pi)$
c) $h(x) = 3\\sin\\left(4x - \\frac{\\pi}{2}\\right)$`,
      solution: `**Løsning:**

a) $f(x) = \\sin\\left(x - \\frac{\\pi}{4}\\right)$

Her er $B = 1$ og $C = -\\frac{\\pi}{4}$.

Faseforskyvning: $-\\frac{C}{B} = -\\frac{-\\frac{\\pi}{4}}{1} = \\frac{\\pi}{4}$

Grafen er forskjøvet $\\frac{\\pi}{4}$ til **høyre**.

b) $g(x) = \\cos(2x + \\pi)$

Her er $B = 2$ og $C = \\pi$.

Faseforskyvning: $-\\frac{C}{B} = -\\frac{\\pi}{2}$

Grafen er forskjøvet $\\frac{\\pi}{2}$ til **venstre**.

c) $h(x) = 3\\sin\\left(4x - \\frac{\\pi}{2}\\right)$

Her er $B = 4$ og $C = -\\frac{\\pi}{2}$.

Faseforskyvning: $-\\frac{C}{B} = -\\frac{-\\frac{\\pi}{2}}{4} = \\frac{\\pi}{8}$

Grafen er forskjøvet $\\frac{\\pi}{8}$ til **høyre**.`,
    },

    // ========== VERTIKALT SKIFT ==========
    {
      id: 'r2-4-7-vertikalt-intro',
      type: 'text',
      content: `## Vertikalt skift

Parameteren $D$ i $f(x) = A\\sin(Bx + C) + D$ bestemmer det vertikale skiftet.

- Hvis $D > 0$: Grafen flyttes **opp** $D$ enheter
- Hvis $D < 0$: Grafen flyttes **ned** $|D|$ enheter

Linjen $y = D$ kalles **likevektslinjen** eller **nullinjen** for funksjonen.`,
    },

    // Eksempel 6: Komplett transformasjon
    {
      id: 'r2-4-7-example-6',
      type: 'example',
      title: 'Eksempel 6: Komplett transformasjon',
      problem: `Gitt funksjonen $f(x) = 2\\sin\\left(3x - \\frac{\\pi}{2}\\right) + 1$.

Bestem:
a) Amplitude
b) Periode
c) Faseforskyvning
d) Vertikalt skift
e) Maksimums- og minimumsverdier`,
      solution: `**Løsning:**

Vi identifiserer parametrene: $A = 2$, $B = 3$, $C = -\\frac{\\pi}{2}$, $D = 1$.

a) **Amplitude:** $|A| = |2| = 2$

b) **Periode:** $T = \\frac{2\\pi}{|B|} = \\frac{2\\pi}{3}$

c) **Faseforskyvning:** $-\\frac{C}{B} = -\\frac{-\\frac{\\pi}{2}}{3} = \\frac{\\pi}{6}$

Grafen er forskjøvet $\\frac{\\pi}{6}$ til høyre.

d) **Vertikalt skift:** $D = 1$

Grafen er forskjøvet 1 enhet opp.

e) **Maksimum og minimum:**
- Maksverdi: $D + |A| = 1 + 2 = 3$
- Minverdi: $D - |A| = 1 - 2 = -1$`,
    },

    {
      id: 'r2-4-7-transform-geogebra',
      type: 'geogebra',
      title: 'Utforsk transformasjoner',
      description: 'Endre parametrene A, B, C og D og observer hvordan grafen endrer seg.',
      appType: 'graphing',
      commands: [
        'A = 1',
        'B = 1',
        'C = 0',
        'D = 0',
        'f(x) = A * sin(B * x + C) + D',
      ],
    },

    // ========== Å LESE AV FRA EN GRAF ==========
    {
      id: 'r2-4-7-avlesning-intro',
      type: 'text',
      content: `## Å bestemme funksjonsuttrykket fra en graf

Når vi skal finne funksjonsuttrykket til en sinuslignende graf, følger vi disse stegene:

1. **Finn amplitude $|A|$:** Mål avstanden fra likevektslinjen til toppen
2. **Finn vertikal forskyvning $D$:** Finn likevektslinjen (midten mellom maks og min)
3. **Finn perioden $T$:** Mål avstanden mellom to påfølgende topp- eller bunnpunkter
4. **Beregn $B$:** Bruk $B = \\frac{2\\pi}{T}$
5. **Finn faseforskyvning:** Se hvor grafen krysser likevektslinjen med positiv stigning`,
    },

    // Eksempel 7: Fra graf til funksjonsuttrykk
    {
      id: 'r2-4-7-example-7',
      type: 'example',
      title: 'Eksempel 7: Fra graf til funksjonsuttrykk',
      problem: `En sinuslignende graf har følgende egenskaper:
- Maksimumsverdi: 5
- Minimumsverdi: 1
- Periode: 4
- Grafen har et maksimum i $x = 1$

Finn et funksjonsuttrykk på formen $f(x) = A\\sin(Bx + C) + D$.`,
      solution: `**Løsning:**

**Steg 1: Finn amplitude og vertikalt skift**

Amplitude: $|A| = \\frac{\\text{maks} - \\text{min}}{2} = \\frac{5 - 1}{2} = 2$

Vertikalt skift: $D = \\frac{\\text{maks} + \\text{min}}{2} = \\frac{5 + 1}{2} = 3$

**Steg 2: Finn $B$ fra perioden**

$T = \\frac{2\\pi}{|B|} = 4 \\Rightarrow |B| = \\frac{2\\pi}{4} = \\frac{\\pi}{2}$

Vi velger $B = \\frac{\\pi}{2}$.

**Steg 3: Finn faseforskyvning**

Sinusfunksjonen har normalt maksimum ved $x = \\frac{\\pi}{2B} = \\frac{\\pi}{2 \\cdot \\frac{\\pi}{2}} = 1$.

Vår graf har maksimum ved $x = 1$, som stemmer!

Dette betyr $C = 0$ (ingen ekstra faseforskyvning).

**Steg 4: Bestem fortegnet til $A$**

Siden grafen har et maksimum (ikke minimum) ved $x = 1$, bruker vi $A = 2$ (positiv).

**Svar:** $f(x) = 2\\sin\\left(\\frac{\\pi}{2}x\\right) + 3$`,
    },

    // Eksempel 8: Mer kompleks avlesning
    {
      id: 'r2-4-7-example-8',
      type: 'example',
      title: 'Eksempel 8: Avlesning med faseforskyvning',
      problem: `En periodisk funksjon har:
- Maksimumsverdi: 10
- Minimumsverdi: 2
- Periode: $\\pi$
- Et nullpunktskryss med positiv stigning ved $x = \\frac{\\pi}{6}$

Finn funksjonsuttrykket.`,
      solution: `**Løsning:**

**Steg 1: Amplitude og vertikalt skift**

$|A| = \\frac{10 - 2}{2} = 4$

$D = \\frac{10 + 2}{2} = 6$

**Steg 2: Finn $B$**

$T = \\frac{2\\pi}{|B|} = \\pi \\Rightarrow |B| = 2$

**Steg 3: Finn faseforskyvning**

For $A\\sin(Bx + C) + D$ med $A > 0$, krysser grafen likevektslinjen med positiv stigning når $Bx + C = 0$, altså når $x = -\\frac{C}{B}$.

Vi har at dette skjer ved $x = \\frac{\\pi}{6}$:

$-\\frac{C}{B} = \\frac{\\pi}{6} \\Rightarrow -\\frac{C}{2} = \\frac{\\pi}{6} \\Rightarrow C = -\\frac{\\pi}{3}$

**Svar:** $f(x) = 4\\sin\\left(2x - \\frac{\\pi}{3}\\right) + 6$

**Verifisering:** Maksimum oppstår når $2x - \\frac{\\pi}{3} = \\frac{\\pi}{2}$, dvs. $x = \\frac{5\\pi}{12}$.
Da er $f\\left(\\frac{5\\pi}{12}\\right) = 4 \\cdot 1 + 6 = 10$ ✓`,
    },

    // ========== MODELLERING ==========
    {
      id: 'r2-4-7-modellering-intro',
      type: 'text',
      content: `## Modellering med trigonometriske funksjoner

Trigonometriske funksjoner er ideelle for å modellere fenomener som svinger mellom en maksimums- og minimumsverdi på en jevn, periodisk måte.

### Fremgangsmåte for modellering:

1. Identifiser maksimums- og minimumsverdiene
2. Beregn amplitude og likevektsverdi
3. Finn perioden (hvor lang tid tar én full syklus?)
4. Bestem starttidspunktet (når oppnås maksimum/minimum/nullkrysning?)
5. Velg sinus eller cosinus basert på hva som passer best`,
    },

    {
      id: 'r2-4-7-modellering-tip',
      type: 'tip',
      content: `**Tips for valg mellom sinus og cosinus:**

- Bruk **cosinus** når du vet når maksimum (eller minimum) oppnås
- Bruk **sinus** når du vet når grafen krysser likevektslinjen

For eksempel: Hvis temperaturen er på sitt høyeste ved $t = 0$, er det naturlig å bruke cosinus.`,
    },

    // Eksempel 9: Tidevann
    {
      id: 'r2-4-7-example-9',
      type: 'example',
      title: 'Eksempel 9: Modellering av tidevann',
      problem: `I en havn varierer vanndybden mellom 2 meter (lavvann) og 10 meter (høyvann). Tiden mellom to påfølgende høyvann er 12 timer. Kl. 06:00 er det høyvann.

a) Sett opp en funksjon $h(t)$ som gir vanndybden $t$ timer etter midnatt.
b) Finn vanndybden kl. 09:00.
c) Når er vanndybden 8 meter for første gang etter midnatt?`,
      solution: `**Løsning:**

a) **Sett opp funksjonen:**

Amplitude: $|A| = \\frac{10 - 2}{2} = 4$ meter

Likevektslinje: $D = \\frac{10 + 2}{2} = 6$ meter

Periode: $T = 12$ timer, så $B = \\frac{2\\pi}{12} = \\frac{\\pi}{6}$

Høyvann ved $t = 6$ (kl. 06:00). Cosinus har maksimum ved 0, så vi bruker:

$$h(t) = 4\\cos\\left(\\frac{\\pi}{6}(t - 6)\\right) + 6$$

eller:

$$h(t) = 4\\cos\\left(\\frac{\\pi}{6}t - \\pi\\right) + 6$$

b) **Vanndybden kl. 09:00** ($t = 9$):

$h(9) = 4\\cos\\left(\\frac{\\pi}{6}(9 - 6)\\right) + 6 = 4\\cos\\left(\\frac{\\pi}{2}\\right) + 6 = 4 \\cdot 0 + 6 = 6$ meter

c) **Når er $h(t) = 8$?**

$4\\cos\\left(\\frac{\\pi}{6}(t - 6)\\right) + 6 = 8$

$\\cos\\left(\\frac{\\pi}{6}(t - 6)\\right) = \\frac{1}{2}$

$\\frac{\\pi}{6}(t - 6) = \\pm\\frac{\\pi}{3} + 2\\pi n$

$t - 6 = \\pm 2 + 12n$

$t = 4$ eller $t = 8$ (for $n = 0$)

Første gang etter midnatt: $t = 4$, altså **kl. 04:00**.`,
    },

    // Eksempel 10: Temperatursvingninger
    {
      id: 'r2-4-7-example-10',
      type: 'example',
      title: 'Eksempel 10: Temperatursvingninger gjennom året',
      problem: `Gjennomsnittstemperaturen i en by varierer gjennom året. Den laveste månedlige gjennomsnittstemperaturen er $-5°C$ i januar, og den høyeste er $19°C$ i juli.

a) Sett opp en modell $T(t)$ der $t$ er antall måneder etter 1. januar.
b) Hva er gjennomsnittstemperaturen i april?
c) I hvilke måneder er gjennomsnittstemperaturen over $15°C$?`,
      solution: `**Løsning:**

a) **Sett opp modellen:**

Amplitude: $|A| = \\frac{19 - (-5)}{2} = 12$

Likevekt: $D = \\frac{19 + (-5)}{2} = 7$

Periode: 12 måneder, så $B = \\frac{2\\pi}{12} = \\frac{\\pi}{6}$

Minimum i januar ($t = 0$) og maksimum i juli ($t = 6$).

Med cosinus og negativt $A$ (starter i minimum):

$$T(t) = -12\\cos\\left(\\frac{\\pi}{6}t\\right) + 7$$

b) **April** ($t = 3$):

$T(3) = -12\\cos\\left(\\frac{\\pi}{6} \\cdot 3\\right) + 7 = -12\\cos\\left(\\frac{\\pi}{2}\\right) + 7 = -12 \\cdot 0 + 7 = 7°C$

c) **Når er $T(t) > 15°C$?**

$-12\\cos\\left(\\frac{\\pi}{6}t\\right) + 7 > 15$

$-12\\cos\\left(\\frac{\\pi}{6}t\\right) > 8$

$\\cos\\left(\\frac{\\pi}{6}t\\right) < -\\frac{2}{3}$

$\\cos^{-1}\\left(-\\frac{2}{3}\\right) \\approx 2{,}30$ radianer

$\\frac{\\pi}{6}t > 2{,}30$ eller $\\frac{\\pi}{6}t < -2{,}30 + 2\\pi$

$t > 4{,}4$ eller $t < 7{,}6$

Altså er temperaturen over $15°C$ fra midten av mai til midten av august (ca. $t = 4{,}4$ til $t = 7{,}6$).`,
    },

    // Eksempel 11: Lydbølger
    {
      id: 'r2-4-7-example-11',
      type: 'example',
      title: 'Eksempel 11: Lydbølger og frekvens',
      problem: `Kammertonen A4 har frekvens 440 Hz (svingninger per sekund). En lydbølge kan beskrives ved trykkvariasjonen:

$$p(t) = A\\sin(2\\pi f t)$$

der $f$ er frekvensen og $t$ er tiden i sekunder.

a) Skriv opp funksjonsuttrykket for kammertonen.
b) Hva er perioden til denne lydbølgen?
c) En oktav høyere (A5) har dobbelt så høy frekvens. Hvordan endrer dette perioden?`,
      solution: `**Løsning:**

a) **Funksjonsuttrykket:**

Med $f = 440$ Hz får vi:

$$p(t) = A\\sin(2\\pi \\cdot 440 \\cdot t) = A\\sin(880\\pi t)$$

(der $A$ er amplituden som avhenger av lydstyrken)

b) **Perioden:**

$T = \\frac{1}{f} = \\frac{1}{440}$ sekunder $\\approx 2{,}27$ millisekunder

Alternativt: $T = \\frac{2\\pi}{B} = \\frac{2\\pi}{880\\pi} = \\frac{1}{440}$ s

c) **A5 med $f = 880$ Hz:**

Ny periode: $T = \\frac{1}{880}$ s $\\approx 1{,}14$ ms

Perioden halveres når frekvensen dobles. Dette stemmer med formelen $T = \\frac{1}{f}$.`,
    },

    // Eksempel 12: Pendelbevegelse
    {
      id: 'r2-4-7-example-12',
      type: 'example',
      title: 'Eksempel 12: Pendelbevegelse',
      problem: `En pendel svinger slik at utslaget (i cm) fra likevektsposisjonen er gitt ved:

$$x(t) = 15\\cos(2t)$$

der $t$ er tiden i sekunder.

a) Hva er amplitude og periode?
b) Hva er det maksimale utslaget?
c) Finn farten $v(t) = x'(t)$ og den maksimale farten.`,
      solution: `**Løsning:**

a) **Amplitude og periode:**

Amplitude: $|A| = 15$ cm

Periode: $T = \\frac{2\\pi}{2} = \\pi$ sekunder $\\approx 3{,}14$ s

b) **Maksimalt utslag:**

Maksimalt utslag er amplituden: $15$ cm (oppnås når $\\cos(2t) = 1$)

c) **Farten:**

$v(t) = x'(t) = \\frac{d}{dt}[15\\cos(2t)] = 15 \\cdot (-\\sin(2t)) \\cdot 2 = -30\\sin(2t)$

Den maksimale farten oppnås når $|\\sin(2t)| = 1$:

$$|v|_{\\text{maks}} = 30 \\text{ cm/s}$$

Merk: Maksimal fart oppnås når $x = 0$ (i likevektsposisjonen), og farten er null når utslaget er maksimalt.`,
    },

    // Eksempel 13: Ferrishjul
    {
      id: 'r2-4-7-example-13',
      type: 'example',
      title: 'Eksempel 13: Pariserhjul',
      problem: `Et pariserhjul har radius 20 meter og roterer med konstant fart. Laveste punkt er 2 meter over bakken, og det tar 3 minutter for en full omdreining. En passasjer starter på laveste punkt ved $t = 0$.

a) Sett opp en funksjon $h(t)$ som gir høyden over bakken etter $t$ minutter.
b) Hvor høyt er passasjeren etter 1 minutt?
c) Når er passasjeren 30 meter over bakken for første gang?`,
      solution: `**Løsning:**

a) **Sett opp funksjonen:**

- Laveste punkt: 2 m (minimumsverdi)
- Høyeste punkt: $2 + 2 \\cdot 20 = 42$ m (maksimumsverdi)
- Amplitude: $|A| = 20$ m
- Likevektshøyde: $D = \\frac{42 + 2}{2} = 22$ m
- Periode: $T = 3$ min, så $B = \\frac{2\\pi}{3}$

Siden passasjeren starter i laveste punkt, bruker vi cosinus med negativt fortegn:

$$h(t) = -20\\cos\\left(\\frac{2\\pi}{3}t\\right) + 22$$

b) **Høyde etter 1 minutt:**

$h(1) = -20\\cos\\left(\\frac{2\\pi}{3}\\right) + 22 = -20 \\cdot \\left(-\\frac{1}{2}\\right) + 22 = 10 + 22 = 32$ m

c) **Når er $h(t) = 30$ m?**

$-20\\cos\\left(\\frac{2\\pi}{3}t\\right) + 22 = 30$

$\\cos\\left(\\frac{2\\pi}{3}t\\right) = -\\frac{8}{20} = -0{,}4$

$\\frac{2\\pi}{3}t = \\cos^{-1}(-0{,}4) \\approx 1{,}982$

$t = \\frac{3 \\cdot 1{,}982}{2\\pi} \\approx 0{,}95$ minutter $\\approx 57$ sekunder`,
    },

    // Eksempel 14: Vekselstrøm
    {
      id: 'r2-4-7-example-14',
      type: 'example',
      title: 'Eksempel 14: Vekselstrøm',
      problem: `I Norge har vekselstrømmen i stikkontakter en frekvens på 50 Hz og en effektivspenning på 230 V. Toppverdien (amplituden) til spenningen er $230\\sqrt{2}$ V.

a) Skriv opp et uttrykk for spenningen $U(t)$ som funksjon av tiden $t$ (i sekunder).
b) Hva er perioden?
c) Hvor mange ganger per sekund er spenningen null?`,
      solution: `**Løsning:**

a) **Spenningen:**

$U(t) = 230\\sqrt{2} \\sin(2\\pi \\cdot 50 \\cdot t) = 230\\sqrt{2} \\sin(100\\pi t)$

b) **Perioden:**

$T = \\frac{1}{f} = \\frac{1}{50} = 0{,}02$ sekunder = 20 millisekunder

c) **Antall nullpunkter per sekund:**

I løpet av én periode ($T = 0{,}02$ s) passerer sinusfunksjonen gjennom null to ganger (én gang på vei opp, én gang på vei ned).

På ett sekund har vi $\\frac{1}{0{,}02} = 50$ perioder.

Antall nullpunkter per sekund: $50 \\cdot 2 = 100$`,
    },

    // Eksempel 15: Daglengde
    {
      id: 'r2-4-7-example-15',
      type: 'example',
      title: 'Eksempel 15: Daglengde gjennom året',
      problem: `I Oslo varierer daglengden gjennom året. Den lengste dagen er ca. 19 timer (sommersolverv, ca. 21. juni) og den korteste er ca. 6 timer (vintersolverv, ca. 21. desember).

a) Sett opp en modell $L(d)$ for daglengden der $d$ er dagnummer (1. januar = dag 1).
b) Hvor lang er dagen 1. mai (dag 121)?
c) I hvilken periode av året er daglengden over 16 timer?`,
      solution: `**Løsning:**

a) **Sett opp modellen:**

Amplitude: $|A| = \\frac{19 - 6}{2} = 6{,}5$ timer

Likevekt: $D = \\frac{19 + 6}{2} = 12{,}5$ timer

Periode: 365 dager, så $B = \\frac{2\\pi}{365}$

Maksimum ved sommersolverv, ca. dag 172 (21. juni).

$$L(d) = 6{,}5\\cos\\left(\\frac{2\\pi}{365}(d - 172)\\right) + 12{,}5$$

b) **1. mai (dag 121):**

$L(121) = 6{,}5\\cos\\left(\\frac{2\\pi}{365}(121 - 172)\\right) + 12{,}5$

$= 6{,}5\\cos\\left(\\frac{2\\pi \\cdot (-51)}{365}\\right) + 12{,}5$

$= 6{,}5\\cos(-0{,}878) + 12{,}5$

$= 6{,}5 \\cdot 0{,}639 + 12{,}5 \\approx 16{,}7$ timer

c) **Når er $L(d) > 16$?**

$6{,}5\\cos\\left(\\frac{2\\pi}{365}(d - 172)\\right) + 12{,}5 > 16$

$\\cos\\left(\\frac{2\\pi}{365}(d - 172)\\right) > \\frac{3{,}5}{6{,}5} \\approx 0{,}538$

$\\frac{2\\pi}{365}(d - 172) < \\cos^{-1}(0{,}538) \\approx 1{,}00$

$|d - 172| < \\frac{365 \\cdot 1{,}00}{2\\pi} \\approx 58$

Altså $114 < d < 230$, som tilsvarer ca. **24. april til 18. august**.`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-4-7-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver

Nedenfor finner du oppgaver som dekker hele kapitlet. Start med de lettere oppgavene og jobb deg oppover i vanskelighetsgrad.`,
    },

    // Oppgave 1: Grunnleggende om sinus og cosinus
    {
      id: 'r2-4-7-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-1',
        number: '4.7.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Bestem eksakte verdier uten kalkulator.',
        subTasks: [
          { label: 'a', task: '$\\sin(0)$', solution: '$\\sin(0) = 0$' },
          { label: 'b', task: '$\\cos(\\pi)$', solution: '$\\cos(\\pi) = -1$' },
          { label: 'c', task: '$\\sin\\left(\\frac{\\pi}{6}\\right)$', solution: '$\\sin\\left(\\frac{\\pi}{6}\\right) = \\frac{1}{2}$' },
          { label: 'd', task: '$\\cos\\left(\\frac{\\pi}{3}\\right)$', solution: '$\\cos\\left(\\frac{\\pi}{3}\\right) = \\frac{1}{2}$' },
          { label: 'e', task: '$\\tan\\left(\\frac{\\pi}{4}\\right)$', solution: '$\\tan\\left(\\frac{\\pi}{4}\\right) = 1$' },
          { label: 'f', task: '$\\sin\\left(\\frac{3\\pi}{2}\\right)$', solution: '$\\sin\\left(\\frac{3\\pi}{2}\\right) = -1$' },
        ],
        hints: ['Bruk enhetssirkelen eller kjente verdier for standardvinkler.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2: Amplitude og periode
    {
      id: 'r2-4-7-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-2',
        number: '4.7.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Bestem amplitude og periode for hver funksjon.',
        subTasks: [
          {
            label: 'a',
            task: '$f(x) = 5\\sin(x)$',
            solution: 'Amplitude: $5$, Periode: $2\\pi$',
          },
          {
            label: 'b',
            task: '$g(x) = \\cos(3x)$',
            solution: 'Amplitude: $1$, Periode: $\\frac{2\\pi}{3}$',
          },
          {
            label: 'c',
            task: '$h(x) = 2\\sin(4x)$',
            solution: 'Amplitude: $2$, Periode: $\\frac{\\pi}{2}$',
          },
          {
            label: 'd',
            task: '$p(x) = -3\\cos\\left(\\frac{x}{2}\\right)$',
            solution: 'Amplitude: $3$, Periode: $4\\pi$',
          },
        ],
        hints: ['Amplitude er $|A|$. Periode er $\\frac{2\\pi}{|B|}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3: Faseforskyvning
    {
      id: 'r2-4-7-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-3',
        number: '4.7.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Bestem faseforskyvningen og beskriv hvilken retning grafen er forskjøvet.',
        subTasks: [
          {
            label: 'a',
            task: '$f(x) = \\sin\\left(x + \\frac{\\pi}{3}\\right)$',
            solution: 'Faseforskyvning: $-\\frac{\\pi}{3}$, grafen er forskjøvet $\\frac{\\pi}{3}$ til venstre.',
          },
          {
            label: 'b',
            task: '$g(x) = \\cos(x - \\pi)$',
            solution: 'Faseforskyvning: $\\pi$, grafen er forskjøvet $\\pi$ til høyre.',
          },
          {
            label: 'c',
            task: '$h(x) = \\sin(2x + \\pi)$',
            solution: 'Faseforskyvning: $-\\frac{\\pi}{2}$, grafen er forskjøvet $\\frac{\\pi}{2}$ til venstre.',
          },
        ],
        hints: ['Faseforskyvning er $-\\frac{C}{B}$ der funksjonen er på formen $A\\sin(Bx + C) + D$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4: Komplett analyse
    {
      id: 'r2-4-7-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-4',
        number: '4.7.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'For funksjonen $f(x) = 3\\sin\\left(2x - \\frac{\\pi}{3}\\right) + 1$, bestem:',
        subTasks: [
          { label: 'a', task: 'Amplitude', solution: 'Amplitude: $|A| = 3$' },
          { label: 'b', task: 'Periode', solution: 'Periode: $T = \\frac{2\\pi}{2} = \\pi$' },
          { label: 'c', task: 'Faseforskyvning', solution: 'Faseforskyvning: $-\\frac{-\\frac{\\pi}{3}}{2} = \\frac{\\pi}{6}$ til høyre' },
          { label: 'd', task: 'Vertikalt skift', solution: 'Vertikalt skift: $D = 1$ oppover' },
          { label: 'e', task: 'Maksimums- og minimumsverdier', solution: 'Maks: $1 + 3 = 4$, Min: $1 - 3 = -2$' },
        ],
        hints: ['Identifiser først verdiene av $A$, $B$, $C$ og $D$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5: Tegne grafer
    {
      id: 'r2-4-7-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-5',
        number: '4.7.5',
        type: 'interactive',
        tool: 'geogebra-graph',
        difficulty: 'medium',
        task: `Bruk GeoGebra til å tegne grafene til følgende funksjoner i samme koordinatsystem for $x \\in [0, 2\\pi]$:

- $f(x) = \\sin(x)$
- $g(x) = 2\\sin(x)$
- $h(x) = \\sin(2x)$

Beskriv hvordan grafene til $g$ og $h$ skiller seg fra grafen til $f$.`,
        solution: `$g(x) = 2\\sin(x)$ har dobbelt så stor amplitude som $f(x)$, men samme periode.

$h(x) = \\sin(2x)$ har samme amplitude som $f(x)$, men halv periode (den svinger dobbelt så raskt).`,
        initialCommands: ['f(x) = sin(x)'],
      },
    },

    // Oppgave 6: Fra graf til funksjonsuttrykk
    {
      id: 'r2-4-7-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-6',
        number: '4.7.6',
        type: 'classic',
        difficulty: 'medium',
        task: `En sinuslignende graf har maksimumsverdi 7, minimumsverdi 1, og periode 8. Grafen har et maksimum ved $x = 2$.

Finn et funksjonsuttrykk på formen $f(x) = A\\sin(Bx + C) + D$ eller $f(x) = A\\cos(Bx + C) + D$.`,
        solution: `**Løsning:**

Amplitude: $|A| = \\frac{7 - 1}{2} = 3$

Vertikalt skift: $D = \\frac{7 + 1}{2} = 4$

Periode: $T = 8$, så $B = \\frac{2\\pi}{8} = \\frac{\\pi}{4}$

Med cosinus (maks ved $x = 2$):

$f(x) = 3\\cos\\left(\\frac{\\pi}{4}(x - 2)\\right) + 4 = 3\\cos\\left(\\frac{\\pi}{4}x - \\frac{\\pi}{2}\\right) + 4$`,
        hints: ['Start med å finne amplitude og vertikalt skift. Velg cosinus siden du vet når maksimum oppnås.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7: Tangensfunksjonen
    {
      id: 'r2-4-7-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-7',
        number: '4.7.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Betrakt funksjonen $f(x) = \\tan(x)$.',
        subTasks: [
          {
            label: 'a',
            task: 'Hva er perioden til $\\tan(x)$?',
            solution: 'Perioden er $\\pi$.',
          },
          {
            label: 'b',
            task: 'For hvilke $x$-verdier i intervallet $[0, 2\\pi]$ er $\\tan(x)$ ikke definert?',
            solution: '$\\tan(x)$ er ikke definert for $x = \\frac{\\pi}{2}$ og $x = \\frac{3\\pi}{2}$.',
          },
          {
            label: 'c',
            task: 'Beregn $\\tan\\left(\\frac{\\pi}{6}\\right)$ eksakt.',
            solution: '$\\tan\\left(\\frac{\\pi}{6}\\right) = \\frac{\\sin\\left(\\frac{\\pi}{6}\\right)}{\\cos\\left(\\frac{\\pi}{6}\\right)} = \\frac{\\frac{1}{2}}{\\frac{\\sqrt{3}}{2}} = \\frac{1}{\\sqrt{3}} = \\frac{\\sqrt{3}}{3}$',
          },
        ],
        hints: ['$\\tan(x) = \\frac{\\sin(x)}{\\cos(x)}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8: Tidevann
    {
      id: 'r2-4-7-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-8',
        number: '4.7.8',
        type: 'classic',
        difficulty: 'medium',
        task: `I en fjord varierer vanndybden med tidevannet. Den minste dybden er 4 meter og den største er 12 meter. Tiden mellom to høyvann er 12,4 timer. Høyvann inntreffer kl. 02:00.

a) Sett opp en modell $h(t)$ for vanndybden $t$ timer etter midnatt.
b) Hva er vanndybden kl. 08:00?
c) En båt trenger minst 7 meter dybde. I hvilke tidsperioder kan båten seile?`,
        solution: `**Løsning:**

a) Amplitude: $|A| = \\frac{12 - 4}{2} = 4$ m

Likevekt: $D = \\frac{12 + 4}{2} = 8$ m

Periode: $T = 12{,}4$ timer, så $B = \\frac{2\\pi}{12{,}4}$

Maks ved $t = 2$:

$h(t) = 4\\cos\\left(\\frac{2\\pi}{12{,}4}(t - 2)\\right) + 8$

b) $h(8) = 4\\cos\\left(\\frac{2\\pi}{12{,}4} \\cdot 6\\right) + 8 = 4\\cos(3{,}04) + 8 \\approx 4 \\cdot (-0{,}998) + 8 \\appro 4{,}0$ m

c) Løs $h(t) \\geq 7$:

$4\\cos\\left(\\frac{2\\pi}{12{,}4}(t - 2)\\right) + 8 \\geq 7$

$\\cos\\left(\\frac{2\\pi}{12{,}4}(t - 2)\\right) \\geq -0{,}25$

Båten kan seile i omtrent 9 timer rundt hvert høyvann.`,
        hints: ['Bruk cosinus siden du vet når maksimum (høyvann) inntreffer.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9: Temperatur
    {
      id: 'r2-4-7-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-9',
        number: '4.7.9',
        type: 'classic',
        difficulty: 'medium',
        task: `Temperaturen i et drivhus varierer i løpet av døgnet. Modellen

$$T(t) = 8\\sin\\left(\\frac{\\pi}{12}t - \\frac{\\pi}{2}\\right) + 22$$

gir temperaturen $T$ i grader Celsius $t$ timer etter midnatt.

a) Hva er maksimums- og minimumstemperaturen?
b) Når på døgnet er temperaturen høyest?
c) Hvor mange timer er temperaturen over 26°C?`,
        solution: `**Løsning:**

a) Amplitude er 8, likevekt er 22.
- Maks: $22 + 8 = 30$°C
- Min: $22 - 8 = 14$°C

b) Maks når $\\sin\\left(\\frac{\\pi}{12}t - \\frac{\\pi}{2}\\right) = 1$

$\\frac{\\pi}{12}t - \\frac{\\pi}{2} = \\frac{\\pi}{2}$

$t = 12$

Høyest temperatur kl. 12:00 (midt på dagen).

c) Løs $T(t) > 26$:

$8\\sin\\left(\\frac{\\pi}{12}t - \\frac{\\pi}{2}\\right) > 4$

$\\sin\\left(\\frac{\\pi}{12}t - \\frac{\\pi}{2}\\right) > 0{,}5$

$\\frac{\\pi}{6} < \\frac{\\pi}{12}t - \\frac{\\pi}{2} < \\frac{5\\pi}{6}$

$8 < t < 16$

Temperaturen er over 26°C i **8 timer** (fra kl. 08:00 til kl. 16:00).`,
        hints: ['Perioden er $\\frac{2\\pi}{\\frac{\\pi}{12}} = 24$ timer (ett døgn).'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10: Svingninger
    {
      id: 'r2-4-7-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-10',
        number: '4.7.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En fjær med en kule svinger slik at posisjonen er gitt ved

$$x(t) = 0{,}1\\cos(5t)$$

der $x$ er i meter og $t$ er i sekunder.

a) Hva er amplitude og periode?
b) Finn et uttrykk for farten $v(t) = x'(t)$.
c) Finn et uttrykk for akselerasjonen $a(t) = v'(t)$.
d) Vis at $a(t) = -25x(t)$. Hva forteller dette oss?`,
        solution: `**Løsning:**

a) Amplitude: $0{,}1$ m = 10 cm

Periode: $T = \\frac{2\\pi}{5} \\approx 1{,}26$ s

b) $v(t) = x'(t) = 0{,}1 \\cdot (-\\sin(5t)) \\cdot 5 = -0{,}5\\sin(5t)$ m/s

c) $a(t) = v'(t) = -0{,}5 \\cdot \\cos(5t) \\cdot 5 = -2{,}5\\cos(5t)$ m/s²

d) Vi har $x(t) = 0{,}1\\cos(5t)$, så:

$-25x(t) = -25 \\cdot 0{,}1\\cos(5t) = -2{,}5\\cos(5t) = a(t)$ ✓

Dette er karakteristisk for **harmonisk svingning**: akselerasjonen er proporsjonal med og motsatt rettet av posisjonen. Det betyr at systemet opplever en gjenopprettende kraft som alltid trekker mot likevektspunktet.`,
        hints: ['Deriver posisjonen for å finne farten, og deriver farten for å finne akselerasjonen.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 11: Sammensatte svingninger
    {
      id: 'r2-4-7-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-11',
        number: '4.7.11',
        type: 'interactive',
        tool: 'geogebra-graph',
        difficulty: 'vanskelig',
        task: `Bruk GeoGebra til å utforske funksjonen

$$f(x) = \\sin(x) + \\frac{1}{3}\\sin(3x)$$

a) Tegn grafen og beskriv formen.
b) Hva er perioden til $f(x)$?
c) Sammenlign med $g(x) = \\sin(x)$. Hvordan endrer tilleggsleden grafen?`,
        solution: `a) Grafen ligner en sinuskurve, men med en mer "kantet" eller "skarp" topp/bunn.

b) Perioden er $2\\pi$ (den minste perioden som begge leddene deler).

c) Tillegget $\\frac{1}{3}\\sin(3x)$ legger til en raskere oscillasjon oppå grunnsvingningen. Dette gjør bølgeformen mer kompleks, lik en forenklet firkantbølge. Dette er grunnlaget for Fourier-analyse.`,
        initialCommands: ['f(x) = sin(x) + (1/3)*sin(3*x)', 'g(x) = sin(x)'],
      },
    },

    // Oppgave 12: Modellering med data
    {
      id: 'r2-4-7-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-12',
        number: '4.7.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Månedstemperaturen i en by er gitt i tabellen:

| Måned | Jan | Feb | Mar | Apr | Mai | Jun | Jul | Aug | Sep | Okt | Nov | Des |
|-------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| °C    | -8  | -6  | 0   | 6   | 12  | 16  | 18  | 16  | 11  | 5   | -1  | -6  |

a) Finn en sinusmodell $T(m) = A\\cos(Bm + C) + D$ som passer dataene, der $m$ er månedsnummer (januar = 1).
b) Bruk modellen til å anslå temperaturen i slutten av mai ($m = 5{,}5$).`,
        solution: `**Løsning:**

a) Fra dataene:
- Maks: 18°C (juli, $m = 7$)
- Min: -8°C (januar, $m = 1$)
- Amplitude: $|A| = \\frac{18 - (-8)}{2} = 13$
- Likevekt: $D = \\frac{18 + (-8)}{2} = 5$
- Periode: 12 måneder, $B = \\frac{2\\pi}{12} = \\frac{\\pi}{6}$
- Maks ved $m = 7$

$T(m) = 13\\cos\\left(\\frac{\\pi}{6}(m - 7)\\right) + 5$

b) $T(5{,}5) = 13\\cos\\left(\\frac{\\pi}{6}(5{,}5 - 7)\\right) + 5$

$= 13\\cos\\left(-\\frac{\\pi}{4}\\right) + 5$

$= 13 \\cdot \\frac{\\sqrt{2}}{2} + 5 \\approx 9{,}2 + 5 = 14{,}2$°C`,
        hints: ['Finn maks og min fra tabellen, beregn amplitude og likevekt.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 13: Likninger med trigonometriske funksjoner
    {
      id: 'r2-4-7-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-13',
        number: '4.7.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Løs likningene for $x \\in [0, 2\\pi]$.',
        subTasks: [
          {
            label: 'a',
            task: '$2\\sin(x) = 1$',
            solution: '$\\sin(x) = \\frac{1}{2} \\Rightarrow x = \\frac{\\pi}{6}$ eller $x = \\frac{5\\pi}{6}$',
          },
          {
            label: 'b',
            task: '$\\cos(2x) = 0$',
            solution: '$2x = \\frac{\\pi}{2}, \\frac{3\\pi}{2}, \\frac{5\\pi}{2}, \\frac{7\\pi}{2} \\Rightarrow x = \\frac{\\pi}{4}, \\frac{3\\pi}{4}, \\frac{5\\pi}{4}, \\frac{7\\pi}{4}$',
          },
          {
            label: 'c',
            task: '$\\tan(x) = \\sqrt{3}$',
            solution: '$x = \\frac{\\pi}{3}$ eller $x = \\frac{\\pi}{3} + \\pi = \\frac{4\\pi}{3}$',
          },
        ],
        hints: ['Husk at sinus og cosinus gir to løsninger per periode, mens tangens gir én.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 14: Nullpunkter og ekstremalpunkter
    {
      id: 'r2-4-7-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-14',
        number: '4.7.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Gitt $f(x) = 4\\sin\\left(\\frac{\\pi}{3}x\\right) - 2$

a) Finn alle nullpunkter i intervallet $[0, 6]$.
b) Finn alle ekstremalpunkter (maks og min) i intervallet $[0, 6]$.
c) Tegn en skisse av grafen.`,
        solution: `**Løsning:**

a) Nullpunkter: $4\\sin\\left(\\frac{\\pi}{3}x\\right) - 2 = 0$

$\\sin\\left(\\frac{\\pi}{3}x\\right) = \\frac{1}{2}$

$\\frac{\\pi}{3}x = \\frac{\\pi}{6} + 2\\pi n$ eller $\\frac{\\pi}{3}x = \\frac{5\\pi}{6} + 2\\pi n$

$x = \\frac{1}{2} + 6n$ eller $x = \\frac{5}{2} + 6n$

I $[0, 6]$: $x = 0{,}5$ og $x = 2{,}5$

b) Perioden er $T = 6$.

Maks når $\\sin = 1$: $\\frac{\\pi}{3}x = \\frac{\\pi}{2} \\Rightarrow x = 1{,}5$
Maks-verdi: $4 \\cdot 1 - 2 = 2$

Min når $\\sin = -1$: $\\frac{\\pi}{3}x = \\frac{3\\pi}{2} \\Rightarrow x = 4{,}5$
Min-verdi: $4 \\cdot (-1) - 2 = -6$

c) Skissen viser én full periode fra $x = 0$ til $x = 6$, med likevektslinje ved $y = -2$.`,
        hints: ['Perioden er $\\frac{2\\pi}{\\frac{\\pi}{3}} = 6$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 15: Praktisk modellering
    {
      id: 'r2-4-7-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-15',
        number: '4.7.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Et hjerte slår med en puls på 72 slag per minutt. Blodtrykket kan modelleres som

$$P(t) = 20\\sin(2{,}4\\pi t) + 100$$

der $P$ er trykket i mmHg og $t$ er tiden i sekunder.

a) Hva er systolisk trykk (maksimum) og diastolisk trykk (minimum)?
b) Hva er pulsen i slag per minutt ifølge modellen?
c) Hvor lenge varer ett hjerteslag?`,
        solution: `**Løsning:**

a) Systolisk trykk (maks): $100 + 20 = 120$ mmHg

Diastolisk trykk (min): $100 - 20 = 80$ mmHg

(Normal blodtrykksavlesning: 120/80)

b) Frekvens: $B = 2{,}4\\pi$

Periode: $T = \\frac{2\\pi}{2{,}4\\pi} = \\frac{1}{1{,}2} \\approx 0{,}833$ sekunder

Slag per minutt: $\\frac{60}{0{,}833} = 72$ slag/min ✓

c) Ett hjerteslag varer $T \\approx 0{,}833$ sekunder, eller ca. $\\frac{5}{6}$ sekund.`,
        hints: ['Frekvens og periode henger sammen ved $f = \\frac{1}{T}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 16: Soloppgang og solnedgang
    {
      id: 'r2-4-7-ex-block-16',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-16',
        number: '4.7.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `I Bergen er klokkeslettet for soloppgang gjennom året tilnærmet gitt ved

$$S(d) = 2\\cos\\left(\\frac{2\\pi}{365}(d - 172)\\right) + 6$$

der $S$ er klokkeslettet (i timer etter midnatt) og $d$ er dagnummer.

a) Når på året er soloppgangen tidligst, og hva er klokkeslettet?
b) Når er soloppgangen senest?
c) Hva er gjennomsnittlig soloppgangstid?
d) Når går solen opp 1. mai (dag 121)?`,
        solution: `**Løsning:**

a) Tidligst soloppgang når $\\cos = -1$ (lavest verdi av $S$):
$(d - 172) = \\pi \\cdot \\frac{365}{2\\pi} = 182{,}5$, så $d \\approx 355$ eller ca. dag 172 - noe stemmer ikke.

Vent - la oss tenke igjen. $\\cos$ har minimum $-1$ og maksimum $1$.
$S_{\\min} = 2(-1) + 6 = 4$ (kl. 04:00)
$S_{\\max} = 2(1) + 6 = 8$ (kl. 08:00)

Minimum (tidligst) når $\\cos\\left(\\frac{2\\pi}{365}(d-172)\\right) = -1$, dvs. $d - 172 = \\pm 182{,}5$
$d = 172 - 182{,}5 = -10{,}5 \\approx 355$ (20. desember) eller $d = 354{,}5$

Hmm, dette gir vintersolverv som tidligste soloppgang, som ikke stemmer. Modellen bør ha negativt fortegn. La oss anta modellen er:

$S(d) = -2\\cos\\left(\\frac{2\\pi}{365}(d - 172)\\right) + 6$

Da: Tidligst ved $d = 172$ (21. juni), kl. 04:00
Senest ved $d = 355$ (21. desember), kl. 08:00

b) Senest: 21. desember, kl. 08:00

c) Gjennomsnitt: $D = 6$, altså kl. 06:00

d) $S(121) = -2\\cos\\left(\\frac{2\\pi}{365}(121-172)\\right) + 6 = -2\\cos(-0{,}878) + 6 = -2(0{,}639) + 6 \\approx 4{,}7$

Ca. kl. 04:45`,
        hints: ['Tenk over hva maks og min av modellen representerer fysisk.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 17: Interferens
    {
      id: 'r2-4-7-ex-block-17',
      type: 'exercise',
      exercise: {
        id: 'r2-4-7-ex-17',
        number: '4.7.17',
        type: 'interactive',
        tool: 'geogebra-graph',
        difficulty: 'vanskelig',
        task: `To lydbølger med samme frekvens men ulik fase kombineres:

$$y_1(t) = \\sin(2\\pi t)$$
$$y_2(t) = \\sin(2\\pi t + \\phi)$$

der $\\phi$ er faseforskjellen.

a) Bruk GeoGebra til å utforske $y_1 + y_2$ for ulike verdier av $\\phi$.
b) Hva skjer når $\\phi = 0$? Hva kalles dette?
c) Hva skjer når $\\phi = \\pi$? Hva kalles dette?`,
        solution: `a) Bruk glider for $\\phi$ fra 0 til $2\\pi$.

b) Når $\\phi = 0$: $y_1 + y_2 = 2\\sin(2\\pi t)$

Bølgene forsterker hverandre. Dette kalles **konstruktiv interferens**.

c) Når $\\phi = \\pi$: $y_1 + y_2 = \\sin(2\\pi t) + \\sin(2\\pi t + \\pi) = \\sin(2\\pi t) - \\sin(2\\pi t) = 0$

Bølgene utsletter hverandre. Dette kalles **destruktiv interferens**.`,
        initialCommands: [
          'phi = 0',
          'y1(t) = sin(2*pi*t)',
          'y2(t) = sin(2*pi*t + phi)',
          'sum(t) = y1(t) + y2(t)',
        ],
      },
    },

  ],

  // Collect all exercises for the chapter
  exercises: [],

  // Navigation
  nextChapter: 'r2-4-9',
  prevChapter: 'r2-4-7',
};

// ============================================================================
// KAPITTEL 4.9: DERIVASJON AV TRIGONOMETRISKE FUNKSJONER
// ============================================================================
export const CHAPTER_R2_4_9: TextbookChapter = {
  id: 'r2-4-9',
  courseId: 'r2',
  chapterNumber: '4.9',
  title: 'Derivasjon av trigonometriske funksjoner',
  description: 'Derivere sin, cos og tan, og bruke kjerneregelen på sammensatte trigonometriske funksjoner.',
  estimatedMinutes: 55,
  competenceGoals: [
    'analysere og tolke ulike funksjonar ved å bruke derivasjon',
    'derivere trigonometriske funksjoner',
    'bruke kjerneregelen på sammensatte trigonometriske funksjoner',
    'drøfte funksjoner med trigonometriske uttrykk',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-4-8-intro',
      type: 'text',
      content: `## Innledning

Trigonometriske funksjoner som $\\sin x$, $\\cos x$ og $\\tan x$ er sentrale i mange anvendelser - fra bølgebevegelser og svingninger til rotasjon og periodiske fenomener. For å kunne analysere slike funksjoner trenger vi å vite hvordan vi deriverer dem.

I dette kapitlet skal vi:
- Utlede derivasjonsreglene for $\\sin x$, $\\cos x$ og $\\tan x$
- Bruke kjerneregelen på sammensatte trigonometriske funksjoner
- Drøfte trigonometriske funksjoner og finne ekstremalpunkter og vendepunkter

**Viktig:** I dette kapitlet bruker vi alltid **radianer** for vinkler. Derivasjonsreglene gjelder kun når argumentet er i radianer.`,
    },

    // ========== GRENSEVERDIER SOM GRUNNLAG ==========
    {
      id: 'r2-4-8-grenseverdier',
      type: 'text',
      content: `## Viktige grenseverdier

For å bevise derivasjonsreglene trenger vi to fundamentale grenseverdier:

$$\\lim_{x \\to 0} \\frac{\\sin x}{x} = 1$$

$$\\lim_{x \\to 0} \\frac{1 - \\cos x}{x} = 0$$

Disse grenseverdiene kan vises geometrisk ved å studere enhetssirkelen. Den første sier at når $x$ er liten (i radianer), så er $\\sin x \\approx x$.`,
    },

    {
      id: 'r2-4-8-grense-note',
      type: 'note',
      content: `Grenseverdien $\\lim_{x \\to 0} \\frac{\\sin x}{x} = 1$ er grunnen til at vi må bruke radianer. I grader ville vi fått et annet resultat, og derivasjonsreglene ville blitt mer kompliserte.`,
    },

    // ========== DERIVASJON AV SIN X ==========
    {
      id: 'r2-4-8-sin-intro',
      type: 'text',
      content: `## Derivasjon av $\\sin x$

Vi starter med å utlede den deriverte av $f(x) = \\sin x$ fra definisjonen av den deriverte.`,
    },

    {
      id: 'r2-4-8-sin-bevis',
      type: 'proof',
      title: 'Bevis: Den deriverte av sin x',
      content: `Vi bruker definisjonen av den deriverte:

$$f'(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h} = \\lim_{h \\to 0} \\frac{\\sin(x+h) - \\sin x}{h}$$

Bruker addisjonsformelen $\\sin(x+h) = \\sin x \\cos h + \\cos x \\sin h$:

$$= \\lim_{h \\to 0} \\frac{\\sin x \\cos h + \\cos x \\sin h - \\sin x}{h}$$

$$= \\lim_{h \\to 0} \\frac{\\sin x (\\cos h - 1) + \\cos x \\sin h}{h}$$

$$= \\lim_{h \\to 0} \\left( \\sin x \\cdot \\frac{\\cos h - 1}{h} + \\cos x \\cdot \\frac{\\sin h}{h} \\right)$$

$$= \\sin x \\cdot \\lim_{h \\to 0} \\frac{\\cos h - 1}{h} + \\cos x \\cdot \\lim_{h \\to 0} \\frac{\\sin h}{h}$$

Siden $\\lim_{h \\to 0} \\frac{\\cos h - 1}{h} = 0$ og $\\lim_{h \\to 0} \\frac{\\sin h}{h} = 1$:

$$= \\sin x \\cdot 0 + \\cos x \\cdot 1 = \\cos x$$

Altså er $(\\sin x)' = \\cos x$. $\\square$`,
    },

    {
      id: 'r2-4-8-sin-formel',
      type: 'formula',
      title: 'Den deriverte av sinus',
      latex: '(\\sin x)\' = \\cos x',
      description: 'Den deriverte av sinus er cosinus.',
    },

    // ========== DERIVASJON AV COS X ==========
    {
      id: 'r2-4-8-cos-intro',
      type: 'text',
      content: `## Derivasjon av $\\cos x$

Vi kan utlede den deriverte av $\\cos x$ på tilsvarende måte, eller bruke at $\\cos x = \\sin\\left(\\frac{\\pi}{2} - x\\right)$.`,
    },

    {
      id: 'r2-4-8-cos-bevis',
      type: 'proof',
      title: 'Bevis: Den deriverte av cos x',
      content: `**Metode 1: Fra definisjonen**

$$f'(x) = \\lim_{h \\to 0} \\frac{\\cos(x+h) - \\cos x}{h}$$

Bruker addisjonsformelen $\\cos(x+h) = \\cos x \\cos h - \\sin x \\sin h$:

$$= \\lim_{h \\to 0} \\frac{\\cos x \\cos h - \\sin x \\sin h - \\cos x}{h}$$

$$= \\lim_{h \\to 0} \\frac{\\cos x (\\cos h - 1) - \\sin x \\sin h}{h}$$

$$= \\cos x \\cdot \\lim_{h \\to 0} \\frac{\\cos h - 1}{h} - \\sin x \\cdot \\lim_{h \\to 0} \\frac{\\sin h}{h}$$

$$= \\cos x \\cdot 0 - \\sin x \\cdot 1 = -\\sin x$$

**Metode 2: Bruke sammenhengen med sinus**

Vi vet at $\\cos x = \\sin\\left(\\frac{\\pi}{2} - x\\right)$.

Med kjerneregelen og $(\\sin u)' = \\cos u$:

$$(\\cos x)' = \\cos\\left(\\frac{\\pi}{2} - x\\right) \\cdot (-1) = -\\cos\\left(\\frac{\\pi}{2} - x\\right) = -\\sin x$$

Altså er $(\\cos x)' = -\\sin x$. $\\square$`,
    },

    {
      id: 'r2-4-8-cos-formel',
      type: 'formula',
      title: 'Den deriverte av cosinus',
      latex: '(\\cos x)\' = -\\sin x',
      description: 'Den deriverte av cosinus er minus sinus. Legg merke til minustegnet!',
    },

    {
      id: 'r2-4-8-warning-minus',
      type: 'warning',
      title: 'Husk minustegnet!',
      content: `En vanlig feil er å glemme minustegnet når man deriverer $\\cos x$:

$(\\cos x)' = -\\sin x$ (med minus!)

Husk: Sinus gir pluss cosinus, cosinus gir minus sinus.`,
    },

    // ========== DERIVASJON AV TAN X ==========
    {
      id: 'r2-4-8-tan-intro',
      type: 'text',
      content: `## Derivasjon av $\\tan x$

For å derivere $\\tan x = \\frac{\\sin x}{\\cos x}$ bruker vi brøkregelen for derivasjon.`,
    },

    {
      id: 'r2-4-8-tan-bevis',
      type: 'proof',
      title: 'Bevis: Den deriverte av tan x',
      content: `Vi har $\\tan x = \\frac{\\sin x}{\\cos x}$.

Bruker brøkregelen $\\left(\\frac{u}{v}\\right)' = \\frac{u'v - uv'}{v^2}$:

$$(\\tan x)' = \\frac{(\\sin x)' \\cdot \\cos x - \\sin x \\cdot (\\cos x)'}{(\\cos x)^2}$$

$$= \\frac{\\cos x \\cdot \\cos x - \\sin x \\cdot (-\\sin x)}{\\cos^2 x}$$

$$= \\frac{\\cos^2 x + \\sin^2 x}{\\cos^2 x}$$

Siden $\\cos^2 x + \\sin^2 x = 1$:

$$= \\frac{1}{\\cos^2 x}$$

Dette kan også skrives som $\\sec^2 x$ eller $1 + \\tan^2 x$. $\\square$`,
    },

    {
      id: 'r2-4-8-tan-formel',
      type: 'formula',
      title: 'Den deriverte av tangens',
      latex: '(\\tan x)\' = \\frac{1}{\\cos^2 x} = 1 + \\tan^2 x',
      description: 'Den deriverte av tangens er 1 over cosinus i annen.',
    },

    // ========== OPPSUMMERING AV REGLENE ==========
    {
      id: 'r2-4-8-oppsummering-regler',
      type: 'theorem',
      title: 'Derivasjonsregler for trigonometriske funksjoner',
      content: `De grunnleggende derivasjonsreglene for trigonometriske funksjoner er:

$$\\begin{aligned}
(\\sin x)' &= \\cos x \\\\[6pt]
(\\cos x)' &= -\\sin x \\\\[6pt]
(\\tan x)' &= \\frac{1}{\\cos^2 x}
\\end{aligned}$$

Merk at disse reglene kun gjelder når $x$ er i **radianer**.`,
    },

    // ========== EKSEMPEL 1 ==========
    {
      id: 'r2-4-8-example-1',
      type: 'example',
      title: 'Eksempel 1: Grunnleggende derivasjon',
      problem: `Deriver funksjonene:

a) $f(x) = 3\\sin x$

b) $g(x) = -2\\cos x + 5$

c) $h(x) = \\sin x + \\cos x$`,
      solution: `**Løsning:**

a) $f(x) = 3\\sin x$

Konstanten 3 beholdes:
$$f'(x) = 3 \\cdot (\\sin x)' = 3\\cos x$$

b) $g(x) = -2\\cos x + 5$

$$g'(x) = -2 \\cdot (\\cos x)' + 0 = -2 \\cdot (-\\sin x) = 2\\sin x$$

c) $h(x) = \\sin x + \\cos x$

$$h'(x) = (\\sin x)' + (\\cos x)' = \\cos x + (-\\sin x) = \\cos x - \\sin x$$`,
    },

    // ========== EKSEMPEL 2 ==========
    {
      id: 'r2-4-8-example-2',
      type: 'example',
      title: 'Eksempel 2: Produkter og brøker',
      problem: `Deriver funksjonene:

a) $f(x) = x \\sin x$

b) $g(x) = \\frac{\\sin x}{x}$`,
      solution: `**Løsning:**

a) $f(x) = x \\sin x$

Vi bruker produktregelen $(uv)' = u'v + uv'$:

$$f'(x) = 1 \\cdot \\sin x + x \\cdot \\cos x = \\sin x + x\\cos x$$

b) $g(x) = \\frac{\\sin x}{x}$

Vi bruker brøkregelen $\\left(\\frac{u}{v}\\right)' = \\frac{u'v - uv'}{v^2}$:

$$g'(x) = \\frac{\\cos x \\cdot x - \\sin x \\cdot 1}{x^2} = \\frac{x\\cos x - \\sin x}{x^2}$$`,
    },

    // ========== KJERNEREGELEN ==========
    {
      id: 'r2-4-8-kjerne-intro',
      type: 'text',
      content: `## Kjerneregelen med trigonometriske funksjoner

Når vi har sammensatte funksjoner som $\\sin(2x)$, $\\cos(x^2)$ eller $\\tan(3x+1)$, må vi bruke **kjerneregelen** (chain rule).

Husk kjerneregelen: Hvis $y = f(u)$ og $u = g(x)$, så er

$$\\frac{dy}{dx} = \\frac{dy}{du} \\cdot \\frac{du}{dx} = f'(u) \\cdot g'(x)$$`,
    },

    {
      id: 'r2-4-8-kjerne-formler',
      type: 'theorem',
      title: 'Kjerneregelen for trigonometriske funksjoner',
      content: `La $u = u(x)$ være en deriverbar funksjon av $x$. Da har vi:

$$\\begin{aligned}
(\\sin u)' &= \\cos u \\cdot u' \\\\[6pt]
(\\cos u)' &= -\\sin u \\cdot u' \\\\[6pt]
(\\tan u)' &= \\frac{1}{\\cos^2 u} \\cdot u'
\\end{aligned}$$

Med andre ord: Deriver den ytre funksjonen og multipliser med den deriverte av den indre funksjonen.`,
    },

    {
      id: 'r2-4-8-tip-kjerne',
      type: 'tip',
      content: `**Huskeregel for kjerneregelen:**

1. Identifiser den indre funksjonen $u$
2. Deriver den ytre funksjonen (behold $u$ som den er)
3. Multipliser med $u'$ (den deriverte av den indre funksjonen)`,
    },

    // ========== EKSEMPEL 3 ==========
    {
      id: 'r2-4-8-example-3',
      type: 'example',
      title: 'Eksempel 3: Kjerneregelen - enkle tilfeller',
      problem: `Deriver funksjonene:

a) $f(x) = \\sin(2x)$

b) $g(x) = \\cos(3x)$

c) $h(x) = \\tan(5x)$`,
      solution: `**Løsning:**

a) $f(x) = \\sin(2x)$

Her er $u = 2x$, så $u' = 2$.

$$f'(x) = \\cos(2x) \\cdot 2 = 2\\cos(2x)$$

b) $g(x) = \\cos(3x)$

Her er $u = 3x$, så $u' = 3$.

$$g'(x) = -\\sin(3x) \\cdot 3 = -3\\sin(3x)$$

c) $h(x) = \\tan(5x)$

Her er $u = 5x$, så $u' = 5$.

$$h'(x) = \\frac{1}{\\cos^2(5x)} \\cdot 5 = \\frac{5}{\\cos^2(5x)}$$`,
    },

    // ========== EKSEMPEL 4 ==========
    {
      id: 'r2-4-8-example-4',
      type: 'example',
      title: 'Eksempel 4: Kjerneregelen - mer komplekse indre funksjoner',
      problem: `Deriver funksjonene:

a) $f(x) = \\sin(x^2)$

b) $g(x) = \\cos(2x + 3)$

c) $h(x) = \\sin^2 x$ (det vil si $(\\sin x)^2$)`,
      solution: `**Løsning:**

a) $f(x) = \\sin(x^2)$

Her er $u = x^2$, så $u' = 2x$.

$$f'(x) = \\cos(x^2) \\cdot 2x = 2x\\cos(x^2)$$

b) $g(x) = \\cos(2x + 3)$

Her er $u = 2x + 3$, så $u' = 2$.

$$g'(x) = -\\sin(2x + 3) \\cdot 2 = -2\\sin(2x + 3)$$

c) $h(x) = \\sin^2 x = (\\sin x)^2$

Her har vi to lag: Den ytre funksjonen er $u^2$ og den indre er $u = \\sin x$.

$$h'(x) = 2(\\sin x) \\cdot (\\sin x)' = 2\\sin x \\cdot \\cos x$$

Dette kan også skrives som $\\sin(2x)$ ved hjelp av dobbeltvinkelformelen.`,
    },

    // ========== EKSEMPEL 5 ==========
    {
      id: 'r2-4-8-example-5',
      type: 'example',
      title: 'Eksempel 5: Kombinasjon av regler',
      problem: `Deriver funksjonen $f(x) = e^x \\sin x$.`,
      solution: `**Løsning:**

Vi bruker produktregelen $(uv)' = u'v + uv'$:

La $u = e^x$ og $v = \\sin x$.

Da er $u' = e^x$ og $v' = \\cos x$.

$$f'(x) = e^x \\cdot \\sin x + e^x \\cdot \\cos x = e^x(\\sin x + \\cos x)$$`,
    },

    // ========== EKSEMPEL 6 ==========
    {
      id: 'r2-4-8-example-6',
      type: 'example',
      title: 'Eksempel 6: Dobbel bruk av kjerneregelen',
      problem: `Deriver funksjonen $f(x) = \\sin(\\cos x)$.`,
      solution: `**Løsning:**

Her har vi en sammensatt funksjon der den ytre funksjonen er sinus og den indre er $\\cos x$.

La $u = \\cos x$, så $u' = -\\sin x$.

$$f'(x) = \\cos(\\cos x) \\cdot (-\\sin x) = -\\sin x \\cdot \\cos(\\cos x)$$`,
    },

    // ========== EKSEMPEL 7 ==========
    {
      id: 'r2-4-8-example-7',
      type: 'example',
      title: 'Eksempel 7: Trigonometrisk funksjon i eksponenten',
      problem: `Deriver funksjonen $f(x) = e^{\\sin x}$.`,
      solution: `**Løsning:**

Den ytre funksjonen er eksponentialfunksjonen $e^u$ og den indre er $u = \\sin x$.

Vi vet at $(e^u)' = e^u \\cdot u'$.

$$f'(x) = e^{\\sin x} \\cdot (\\sin x)' = e^{\\sin x} \\cdot \\cos x = \\cos x \\cdot e^{\\sin x}$$`,
    },

    // ========== EKSEMPEL 8 ==========
    {
      id: 'r2-4-8-example-8',
      type: 'example',
      title: 'Eksempel 8: Naturlig logaritme av trigonometrisk funksjon',
      problem: `Deriver funksjonen $f(x) = \\ln(\\sin x)$ for $x \\in (0, \\pi)$.`,
      solution: `**Løsning:**

Den ytre funksjonen er $\\ln u$ og den indre er $u = \\sin x$.

Vi vet at $(\\ln u)' = \\frac{1}{u} \\cdot u'$.

$$f'(x) = \\frac{1}{\\sin x} \\cdot (\\sin x)' = \\frac{1}{\\sin x} \\cdot \\cos x = \\frac{\\cos x}{\\sin x} = \\cot x$$

Vi krever $x \\in (0, \\pi)$ for at $\\sin x > 0$, slik at logaritmen er definert.`,
    },

    // ========== FUNKSJONSDRØFTING ==========
    {
      id: 'r2-4-8-drofting-intro',
      type: 'text',
      content: `## Funksjonsdrøfting med trigonometriske funksjoner

Når vi skal drøfte trigonometriske funksjoner, følger vi samme fremgangsmåte som for andre funksjoner:

1. Finn definisjonsmengden
2. Finn $f'(x)$ og løs $f'(x) = 0$ for å finne stasjonære punkter
3. Avgjør om de stasjonære punktene er maksimums- eller minimumspunkter
4. Finn $f''(x)$ og løs $f''(x) = 0$ for å finne mulige vendepunkter
5. Undersøk funksjonens oppførsel (periodicitet, asymptotisk oppførsel)

For trigonometriske funksjoner er det ofte nyttig å begrense seg til én periode først.`,
    },

    // ========== EKSEMPEL 9 ==========
    {
      id: 'r2-4-8-example-9',
      type: 'example',
      title: 'Eksempel 9: Drøfting av sin x + cos x',
      problem: `La $f(x) = \\sin x + \\cos x$.

a) Finn $f'(x)$.

b) Finn de stasjonære punktene i intervallet $[0, 2\\pi]$.

c) Klassifiser de stasjonære punktene (maks/min).`,
      solution: `**Løsning:**

a) $f'(x) = \\cos x - \\sin x$

b) Vi løser $f'(x) = 0$:
$$\\cos x - \\sin x = 0$$
$$\\cos x = \\sin x$$
$$\\tan x = 1$$
$$x = \\frac{\\pi}{4} + n\\pi, \\quad n \\in \\mathbb{Z}$$

I intervallet $[0, 2\\pi]$:
- $x_1 = \\frac{\\pi}{4}$
- $x_2 = \\frac{5\\pi}{4}$

c) Vi finner $f''(x)$:
$$f''(x) = -\\sin x - \\cos x$$

For $x_1 = \\frac{\\pi}{4}$:
$$f''\\left(\\frac{\\pi}{4}\\right) = -\\sin\\frac{\\pi}{4} - \\cos\\frac{\\pi}{4} = -\\frac{\\sqrt{2}}{2} - \\frac{\\sqrt{2}}{2} = -\\sqrt{2} < 0$$

Siden $f''(x_1) < 0$, har vi et **maksimumspunkt** i $x = \\frac{\\pi}{4}$.

For $x_2 = \\frac{5\\pi}{4}$:
$$f''\\left(\\frac{5\\pi}{4}\\right) = -\\sin\\frac{5\\pi}{4} - \\cos\\frac{5\\pi}{4} = \\frac{\\sqrt{2}}{2} + \\frac{\\sqrt{2}}{2} = \\sqrt{2} > 0$$

Siden $f''(x_2) > 0$, har vi et **minimumspunkt** i $x = \\frac{5\\pi}{4}$.

Funksjonsverider:
- $f\\left(\\frac{\\pi}{4}\\right) = \\sin\\frac{\\pi}{4} + \\cos\\frac{\\pi}{4} = \\frac{\\sqrt{2}}{2} + \\frac{\\sqrt{2}}{2} = \\sqrt{2}$ (maks)
- $f\\left(\\frac{5\\pi}{4}\\right) = \\sin\\frac{5\\pi}{4} + \\cos\\frac{5\\pi}{4} = -\\frac{\\sqrt{2}}{2} - \\frac{\\sqrt{2}}{2} = -\\sqrt{2}$ (min)`,
    },

    // ========== EKSEMPEL 10 ==========
    {
      id: 'r2-4-8-example-10',
      type: 'example',
      title: 'Eksempel 10: Vendepunkter',
      problem: `La $f(x) = \\sin x$ for $x \\in [0, 2\\pi]$.

a) Finn $f''(x)$.

b) Finn vendepunktene.`,
      solution: `**Løsning:**

a) Vi starter med $f(x) = \\sin x$.

$f'(x) = \\cos x$

$f''(x) = -\\sin x$

b) Vi løser $f''(x) = 0$:
$$-\\sin x = 0$$
$$\\sin x = 0$$
$$x = n\\pi, \\quad n \\in \\mathbb{Z}$$

I intervallet $[0, 2\\pi]$ får vi $x = 0$, $x = \\pi$ og $x = 2\\pi$.

Vi sjekker fortegnsskifte i $f''(x)$:
- For $x$ litt mindre enn $\\pi$: $f''(x) = -\\sin x < 0$
- For $x$ litt større enn $\\pi$: $f''(x) = -\\sin x > 0$

Det er fortegnsskifte i $x = \\pi$, så dette er et vendepunkt.

Vendepunktet er $(\\pi, f(\\pi)) = (\\pi, 0)$.

Punktene $x = 0$ og $x = 2\\pi$ er randpunkter og regnes vanligvis ikke som vendepunkter.`,
    },

    // ========== EKSEMPEL 11 ==========
    {
      id: 'r2-4-8-example-11',
      type: 'example',
      title: 'Eksempel 11: Fullstendig funksjonsdrøfting',
      problem: `Drøft funksjonen $f(x) = 2\\sin x - \\sin(2x)$ for $x \\in [0, 2\\pi]$.

Finn nullpunkter, stasjonære punkter og vendepunkter.`,
      solution: `**Løsning:**

**Nullpunkter:**
$f(x) = 0$ gir $2\\sin x - \\sin(2x) = 0$.

Bruker $\\sin(2x) = 2\\sin x \\cos x$:
$$2\\sin x - 2\\sin x \\cos x = 0$$
$$2\\sin x(1 - \\cos x) = 0$$

Enten $\\sin x = 0$ eller $\\cos x = 1$.

$\\sin x = 0 \\Rightarrow x = 0, \\pi, 2\\pi$

$\\cos x = 1 \\Rightarrow x = 0, 2\\pi$ (allerede funnet)

**Nullpunkter:** $x = 0, \\pi, 2\\pi$

**Den deriverte:**
$$f'(x) = 2\\cos x - 2\\cos(2x)$$

Bruker $\\cos(2x) = 2\\cos^2 x - 1$:
$$f'(x) = 2\\cos x - 2(2\\cos^2 x - 1) = 2\\cos x - 4\\cos^2 x + 2$$

La $u = \\cos x$:
$$f'(x) = -4u^2 + 2u + 2 = -2(2u^2 - u - 1) = -2(2u + 1)(u - 1)$$

$f'(x) = 0$ når $\\cos x = -\\frac{1}{2}$ eller $\\cos x = 1$.

$\\cos x = -\\frac{1}{2} \\Rightarrow x = \\frac{2\\pi}{3}, \\frac{4\\pi}{3}$

$\\cos x = 1 \\Rightarrow x = 0, 2\\pi$

**Stasjonære punkter:** $x = 0, \\frac{2\\pi}{3}, \\frac{4\\pi}{3}, 2\\pi$

**Funksjonsverider:**
- $f(0) = 0$
- $f\\left(\\frac{2\\pi}{3}\\right) = 2 \\cdot \\frac{\\sqrt{3}}{2} - \\sin\\frac{4\\pi}{3} = \\sqrt{3} + \\frac{\\sqrt{3}}{2} = \\frac{3\\sqrt{3}}{2}$ (maks)
- $f\\left(\\frac{4\\pi}{3}\\right) = 2 \\cdot \\left(-\\frac{\\sqrt{3}}{2}\\right) - \\sin\\frac{8\\pi}{3} = -\\sqrt{3} - \\frac{\\sqrt{3}}{2} = -\\frac{3\\sqrt{3}}{2}$ (min)
- $f(2\\pi) = 0$`,
    },

    // ========== EKSEMPEL 12 ==========
    {
      id: 'r2-4-8-example-12',
      type: 'example',
      title: 'Eksempel 12: Tangentligning',
      problem: `La $f(x) = \\cos(2x)$.

a) Finn likningen for tangenten til grafen i punktet der $x = \\frac{\\pi}{6}$.`,
      solution: `**Løsning:**

a) Vi trenger et punkt og et stigningstall.

**Punktet:**
$$f\\left(\\frac{\\pi}{6}\\right) = \\cos\\left(\\frac{2\\pi}{6}\\right) = \\cos\\left(\\frac{\\pi}{3}\\right) = \\frac{1}{2}$$

Punktet er $\\left(\\frac{\\pi}{6}, \\frac{1}{2}\\right)$.

**Stigningstallet:**
$$f'(x) = -\\sin(2x) \\cdot 2 = -2\\sin(2x)$$

$$f'\\left(\\frac{\\pi}{6}\\right) = -2\\sin\\left(\\frac{\\pi}{3}\\right) = -2 \\cdot \\frac{\\sqrt{3}}{2} = -\\sqrt{3}$$

**Tangentlikningen:**
$$y - \\frac{1}{2} = -\\sqrt{3}\\left(x - \\frac{\\pi}{6}\\right)$$

$$y = -\\sqrt{3}x + \\frac{\\sqrt{3}\\pi}{6} + \\frac{1}{2}$$`,
    },

    // ========== EKSEMPEL 13 ==========
    {
      id: 'r2-4-8-example-13',
      type: 'example',
      title: 'Eksempel 13: Andrederiverte og konveksitet',
      problem: `La $f(x) = x + \\sin x$ for $x \\in [0, 2\\pi]$.

a) Finn $f''(x)$.

b) Bestem hvor grafen er konkav/konveks.`,
      solution: `**Løsning:**

a) $f(x) = x + \\sin x$

$f'(x) = 1 + \\cos x$

$f''(x) = -\\sin x$

b) Grafen er konveks der $f''(x) > 0$ og konkav der $f''(x) < 0$.

$f''(x) = -\\sin x > 0$ når $\\sin x < 0$, altså for $x \\in (\\pi, 2\\pi)$.

$f''(x) = -\\sin x < 0$ når $\\sin x > 0$, altså for $x \\in (0, \\pi)$.

**Konklusjon:**
- Grafen er **konkav** for $x \\in (0, \\pi)$
- Grafen er **konveks** for $x \\in (\\pi, 2\\pi)$
- Vendepunkt i $x = \\pi$: $(\\pi, \\pi)$`,
    },

    // ========== EKSEMPEL 14 ==========
    {
      id: 'r2-4-8-example-14',
      type: 'example',
      title: 'Eksempel 14: Anvendelse - harmonisk bevegelse',
      problem: `Posisjonen til en pendel er gitt ved $s(t) = 3\\cos(2t)$ cm, der $t$ er tid i sekunder.

a) Finn farten $v(t) = s'(t)$.

b) Finn akselerasjonen $a(t) = s''(t)$.

c) Når er pendelen i ro? (Farten er null)`,
      solution: `**Løsning:**

a) Farten er den deriverte av posisjonen:
$$v(t) = s'(t) = 3 \\cdot (-\\sin(2t)) \\cdot 2 = -6\\sin(2t) \\text{ cm/s}$$

b) Akselerasjonen er den deriverte av farten:
$$a(t) = v'(t) = -6 \\cdot \\cos(2t) \\cdot 2 = -12\\cos(2t) \\text{ cm/s}^2$$

Merk: Vi kan også skrive $a(t) = -4s(t)$, noe som er typisk for harmonisk bevegelse.

c) Pendelen er i ro når $v(t) = 0$:
$$-6\\sin(2t) = 0$$
$$\\sin(2t) = 0$$
$$2t = n\\pi, \\quad n = 0, 1, 2, \\ldots$$
$$t = \\frac{n\\pi}{2}, \\quad n = 0, 1, 2, \\ldots$$

Pendelen er i ro ved $t = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}, \\ldots$ sekunder.

Dette skjer når pendelen er i ytterstillingene ($s = \\pm 3$ cm).`,
    },

    // ========== EKSEMPEL 15 ==========
    {
      id: 'r2-4-8-example-15',
      type: 'example',
      title: 'Eksempel 15: Sammensatt funksjon med flere ledd',
      problem: `Deriver funksjonen $f(x) = \\sin^3(2x)$.`,
      solution: `**Løsning:**

Vi har tre lag her:
- Ytterst: $u^3$
- I midten: $u = \\sin v$
- Innerst: $v = 2x$

Vi bruker kjerneregelen i flere steg:

$$f(x) = (\\sin(2x))^3$$

La $u = \\sin(2x)$, så $f(x) = u^3$.

$$f'(x) = 3u^2 \\cdot u' = 3(\\sin(2x))^2 \\cdot (\\sin(2x))'$$

Nå trenger vi $(\\sin(2x))' = \\cos(2x) \\cdot 2 = 2\\cos(2x)$.

$$f'(x) = 3\\sin^2(2x) \\cdot 2\\cos(2x) = 6\\sin^2(2x)\\cos(2x)$$`,
    },

    // ========== EKSEMPEL 16 ==========
    {
      id: 'r2-4-8-example-16',
      type: 'example',
      title: 'Eksempel 16: Implisitt definert kurve',
      problem: `Finn $\\frac{dy}{dx}$ når $y = \\tan(xy)$.

(Dette er en implisitt definert kurve der $y$ avhenger av $x$.)`,
      solution: `**Løsning:**

Vi deriverer begge sider med hensyn på $x$:

$$\\frac{dy}{dx} = \\frac{1}{\\cos^2(xy)} \\cdot \\frac{d}{dx}(xy)$$

For $\\frac{d}{dx}(xy)$ bruker vi produktregelen:
$$\\frac{d}{dx}(xy) = 1 \\cdot y + x \\cdot \\frac{dy}{dx} = y + x\\frac{dy}{dx}$$

Setter inn:
$$\\frac{dy}{dx} = \\frac{y + x\\frac{dy}{dx}}{\\cos^2(xy)}$$

Løser for $\\frac{dy}{dx}$:
$$\\frac{dy}{dx} \\cdot \\cos^2(xy) = y + x\\frac{dy}{dx}$$
$$\\frac{dy}{dx} \\cdot \\cos^2(xy) - x\\frac{dy}{dx} = y$$
$$\\frac{dy}{dx}(\\cos^2(xy) - x) = y$$
$$\\frac{dy}{dx} = \\frac{y}{\\cos^2(xy) - x}$$`,
    },

    // ========== OPPGAVER SEKSJON ==========
    {
      id: 'r2-4-8-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // ========== OPPGAVE 1 ==========
    {
      id: 'r2-4-8-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-1',
        number: '4.8.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Deriver funksjonene:',
        subTasks: [
          { label: 'a', task: '$f(x) = 5\\sin x$', solution: '$f\'(x) = 5\\cos x$' },
          { label: 'b', task: '$f(x) = -3\\cos x$', solution: '$f\'(x) = -3 \\cdot (-\\sin x) = 3\\sin x$' },
          { label: 'c', task: '$f(x) = 2\\sin x + 4\\cos x$', solution: '$f\'(x) = 2\\cos x - 4\\sin x$' },
          { label: 'd', task: '$f(x) = \\sin x - \\cos x + 1$', solution: '$f\'(x) = \\cos x + \\sin x$' },
        ],
        solution: 'a) $5\\cos x$, b) $3\\sin x$, c) $2\\cos x - 4\\sin x$, d) $\\cos x + \\sin x$',
        hints: ['Husk at $(\\sin x)\' = \\cos x$ og $(\\cos x)\' = -\\sin x$', 'Konstanter forsvinner ved derivasjon'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 2 ==========
    {
      id: 'r2-4-8-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-2',
        number: '4.8.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Bruk kjerneregelen til å derivere:',
        subTasks: [
          { label: 'a', task: '$f(x) = \\sin(3x)$', solution: '$f\'(x) = \\cos(3x) \\cdot 3 = 3\\cos(3x)$' },
          { label: 'b', task: '$f(x) = \\cos(4x)$', solution: '$f\'(x) = -\\sin(4x) \\cdot 4 = -4\\sin(4x)$' },
          { label: 'c', task: '$f(x) = \\sin\\left(\\frac{x}{2}\\right)$', solution: '$f\'(x) = \\cos\\left(\\frac{x}{2}\\right) \\cdot \\frac{1}{2} = \\frac{1}{2}\\cos\\left(\\frac{x}{2}\\right)$' },
          { label: 'd', task: '$f(x) = \\cos(\\pi x)$', solution: '$f\'(x) = -\\sin(\\pi x) \\cdot \\pi = -\\pi\\sin(\\pi x)$' },
        ],
        solution: 'a) $3\\cos(3x)$, b) $-4\\sin(4x)$, c) $\\frac{1}{2}\\cos\\left(\\frac{x}{2}\\right)$, d) $-\\pi\\sin(\\pi x)$',
        hints: ['Identifiser den indre funksjonen $u$', 'Multipliser med $u\'$ (den deriverte av den indre)'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 3 ==========
    {
      id: 'r2-4-8-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-3',
        number: '4.8.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Deriver funksjonene:',
        subTasks: [
          { label: 'a', task: '$f(x) = \\sin(x^2)$', solution: '$f\'(x) = \\cos(x^2) \\cdot 2x = 2x\\cos(x^2)$' },
          { label: 'b', task: '$f(x) = \\cos(x^3)$', solution: '$f\'(x) = -\\sin(x^3) \\cdot 3x^2 = -3x^2\\sin(x^3)$' },
          { label: 'c', task: '$f(x) = \\sin(2x+1)$', solution: '$f\'(x) = \\cos(2x+1) \\cdot 2 = 2\\cos(2x+1)$' },
          { label: 'd', task: '$f(x) = \\cos(3x-\\pi)$', solution: '$f\'(x) = -\\sin(3x-\\pi) \\cdot 3 = -3\\sin(3x-\\pi)$' },
        ],
        solution: 'a) $2x\\cos(x^2)$, b) $-3x^2\\sin(x^3)$, c) $2\\cos(2x+1)$, d) $-3\\sin(3x-\\pi)$',
        hints: ['Finn den indre funksjonen først', 'Husk å derivere den indre funksjonen'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 4 ==========
    {
      id: 'r2-4-8-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-4',
        number: '4.8.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk produktregelen til å derivere:',
        subTasks: [
          { label: 'a', task: '$f(x) = x\\cos x$', solution: '$f\'(x) = 1 \\cdot \\cos x + x \\cdot (-\\sin x) = \\cos x - x\\sin x$' },
          { label: 'b', task: '$f(x) = x^2\\sin x$', solution: '$f\'(x) = 2x\\sin x + x^2\\cos x$' },
          { label: 'c', task: '$f(x) = e^x\\cos x$', solution: '$f\'(x) = e^x\\cos x + e^x(-\\sin x) = e^x(\\cos x - \\sin x)$' },
          { label: 'd', task: '$f(x) = \\sin x \\cos x$', solution: '$f\'(x) = \\cos x \\cdot \\cos x + \\sin x \\cdot (-\\sin x) = \\cos^2 x - \\sin^2 x = \\cos(2x)$' },
        ],
        solution: 'a) $\\cos x - x\\sin x$, b) $2x\\sin x + x^2\\cos x$, c) $e^x(\\cos x - \\sin x)$, d) $\\cos^2 x - \\sin^2 x$',
        hints: ['Produktregelen: $(uv)\' = u\'v + uv\'$', 'For d): Kan også bruke at $\\sin x \\cos x = \\frac{1}{2}\\sin(2x)$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 5 ==========
    {
      id: 'r2-4-8-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-5',
        number: '4.8.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Deriver funksjonene:',
        subTasks: [
          { label: 'a', task: '$f(x) = \\sin^2 x$', solution: '$f\'(x) = 2\\sin x \\cdot \\cos x = \\sin(2x)$' },
          { label: 'b', task: '$f(x) = \\cos^3 x$', solution: '$f\'(x) = 3\\cos^2 x \\cdot (-\\sin x) = -3\\cos^2 x \\sin x$' },
          { label: 'c', task: '$f(x) = \\sin^2(2x)$', solution: '$f\'(x) = 2\\sin(2x) \\cdot \\cos(2x) \\cdot 2 = 4\\sin(2x)\\cos(2x) = 2\\sin(4x)$' },
          { label: 'd', task: '$f(x) = \\sqrt{\\sin x}$', solution: '$f\'(x) = \\frac{1}{2\\sqrt{\\sin x}} \\cdot \\cos x = \\frac{\\cos x}{2\\sqrt{\\sin x}}$' },
        ],
        solution: 'a) $\\sin(2x)$, b) $-3\\cos^2 x \\sin x$, c) $2\\sin(4x)$, d) $\\frac{\\cos x}{2\\sqrt{\\sin x}}$',
        hints: ['$\\sin^2 x = (\\sin x)^2$, bruk kjerneregelen', 'Dobbeltvinkelformel: $2\\sin x \\cos x = \\sin(2x)$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 6 ==========
    {
      id: 'r2-4-8-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-6',
        number: '4.8.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Deriver funksjonene:',
        subTasks: [
          { label: 'a', task: '$f(x) = \\tan(2x)$', solution: '$f\'(x) = \\frac{1}{\\cos^2(2x)} \\cdot 2 = \\frac{2}{\\cos^2(2x)}$' },
          { label: 'b', task: '$f(x) = \\tan(x^2)$', solution: '$f\'(x) = \\frac{1}{\\cos^2(x^2)} \\cdot 2x = \\frac{2x}{\\cos^2(x^2)}$' },
          { label: 'c', task: '$f(x) = \\frac{\\sin x}{\\cos x}$', solution: 'Dette er $\\tan x$, så $f\'(x) = \\frac{1}{\\cos^2 x}$' },
        ],
        solution: 'a) $\\frac{2}{\\cos^2(2x)}$, b) $\\frac{2x}{\\cos^2(x^2)}$, c) $\\frac{1}{\\cos^2 x}$',
        hints: ['$(\\tan u)\' = \\frac{1}{\\cos^2 u} \\cdot u\'$', 'Del c) kan enten løses med brøkregelen eller ved å gjenkjenne tangens'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 7 ==========
    {
      id: 'r2-4-8-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-7',
        number: '4.8.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Deriver funksjonene:',
        subTasks: [
          { label: 'a', task: '$f(x) = e^{\\cos x}$', solution: '$f\'(x) = e^{\\cos x} \\cdot (-\\sin x) = -\\sin x \\cdot e^{\\cos x}$' },
          { label: 'b', task: '$f(x) = \\ln(\\cos x)$', solution: '$f\'(x) = \\frac{1}{\\cos x} \\cdot (-\\sin x) = -\\frac{\\sin x}{\\cos x} = -\\tan x$' },
          { label: 'c', task: '$f(x) = \\cos(e^x)$', solution: '$f\'(x) = -\\sin(e^x) \\cdot e^x = -e^x\\sin(e^x)$' },
          { label: 'd', task: '$f(x) = e^{\\sin(2x)}$', solution: '$f\'(x) = e^{\\sin(2x)} \\cdot \\cos(2x) \\cdot 2 = 2\\cos(2x) \\cdot e^{\\sin(2x)}$' },
        ],
        solution: 'a) $-\\sin x \\cdot e^{\\cos x}$, b) $-\\tan x$, c) $-e^x\\sin(e^x)$, d) $2\\cos(2x) \\cdot e^{\\sin(2x)}$',
        hints: ['Kjerneregelen: ytre funksjon deriveres, multipliseres med indre funksjonens deriverte', '$(e^u)\' = e^u \\cdot u\'$ og $(\\ln u)\' = \\frac{u\'}{u}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 8 ==========
    {
      id: 'r2-4-8-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-8',
        number: '4.8.8',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn $f'(x)$ og beregn $f'(0)$:`,
        subTasks: [
          { label: 'a', task: '$f(x) = \\sin(3x)$', solution: '$f\'(x) = 3\\cos(3x)$, $f\'(0) = 3\\cos(0) = 3$' },
          { label: 'b', task: '$f(x) = \\cos(2x) + \\sin x$', solution: '$f\'(x) = -2\\sin(2x) + \\cos x$, $f\'(0) = 0 + 1 = 1$' },
          { label: 'c', task: '$f(x) = x\\sin x$', solution: '$f\'(x) = \\sin x + x\\cos x$, $f\'(0) = 0 + 0 = 0$' },
        ],
        solution: 'a) $f\'(0) = 3$, b) $f\'(0) = 1$, c) $f\'(0) = 0$',
        hints: ['Finn $f\'(x)$ først, deretter sett inn $x = 0$', 'Husk at $\\sin(0) = 0$ og $\\cos(0) = 1$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 9 ==========
    {
      id: 'r2-4-8-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-9',
        number: '4.8.9',
        type: 'classic',
        difficulty: 'medium',
        task: `La $f(x) = \\sin x$.

a) Finn $f'(x)$, $f''(x)$, $f'''(x)$ og $f^{(4)}(x)$.

b) Hva blir $f^{(100)}(x)$?`,
        solution: `**a)**
$f(x) = \\sin x$
$f'(x) = \\cos x$
$f''(x) = -\\sin x$
$f'''(x) = -\\cos x$
$f^{(4)}(x) = \\sin x$

**b)** Vi ser at den deriverte gjentar seg med periode 4:
$f^{(n+4)}(x) = f^{(n)}(x)$

$100 = 4 \\cdot 25$, så $f^{(100)}(x) = f^{(0)}(x) = \\sin x$`,
        hints: ['Deriver steg for steg', 'Se etter et mønster som gjentar seg'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 10 ==========
    {
      id: 'r2-4-8-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-10',
        number: '4.8.10',
        type: 'classic',
        difficulty: 'medium',
        task: `Finn likningen for tangenten til grafen til $f(x) = \\sin(2x)$ i punktet der $x = \\frac{\\pi}{4}$.`,
        solution: `**Punkt:**
$f\\left(\\frac{\\pi}{4}\\right) = \\sin\\left(\\frac{\\pi}{2}\\right) = 1$

Punktet er $\\left(\\frac{\\pi}{4}, 1\\right)$.

**Stigningstall:**
$f'(x) = 2\\cos(2x)$
$f'\\left(\\frac{\\pi}{4}\\right) = 2\\cos\\left(\\frac{\\pi}{2}\\right) = 2 \\cdot 0 = 0$

**Tangent:**
Tangenten er horisontal med stigningstall 0:
$$y = 1$$`,
        hints: ['Finn punktet $(x_0, f(x_0))$', 'Finn stigningstallet $f\'(x_0)$', 'Bruk ettpunktsformelen: $y - y_0 = a(x - x_0)$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 11 ==========
    {
      id: 'r2-4-8-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-11',
        number: '4.8.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `La $f(x) = \\cos x - \\frac{1}{2}\\cos(2x)$ for $x \\in [0, 2\\pi]$.

a) Finn $f'(x)$.

b) Finn de stasjonære punktene.

c) Klassifiser de stasjonære punktene.`,
        solution: `**a)** $f'(x) = -\\sin x - \\frac{1}{2} \\cdot (-\\sin(2x)) \\cdot 2 = -\\sin x + \\sin(2x)$

Bruker $\\sin(2x) = 2\\sin x \\cos x$:
$f'(x) = -\\sin x + 2\\sin x \\cos x = \\sin x(2\\cos x - 1)$

**b)** $f'(x) = 0$ når $\\sin x = 0$ eller $\\cos x = \\frac{1}{2}$.

$\\sin x = 0 \\Rightarrow x = 0, \\pi, 2\\pi$
$\\cos x = \\frac{1}{2} \\Rightarrow x = \\frac{\\pi}{3}, \\frac{5\\pi}{3}$

**c)** $f''(x) = -\\cos x + 2\\cos(2x)$

- $f''(0) = -1 + 2 = 1 > 0$ (min)
- $f''\\left(\\frac{\\pi}{3}\\right) = -\\frac{1}{2} + 2 \\cdot (-\\frac{1}{2}) = -\\frac{3}{2} < 0$ (maks)
- $f''(\\pi) = 1 + 2 = 3 > 0$ (min)
- $f''\\left(\\frac{5\\pi}{3}\\right) = -\\frac{1}{2} + 2 \\cdot (-\\frac{1}{2}) = -\\frac{3}{2} < 0$ (maks)
- $f''(2\\pi) = -1 + 2 = 1 > 0$ (min)`,
        hints: ['Bruk identiteten $\\sin(2x) = 2\\sin x \\cos x$ for å faktorisere', 'Bruk andrederiverten for å klassifisere'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 12 ==========
    {
      id: 'r2-4-8-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-12',
        number: '4.8.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Finn vendepunktene til $f(x) = \\sin x + \\frac{1}{3}\\sin(3x)$ for $x \\in [0, 2\\pi]$.`,
        solution: `**Første deriverte:**
$f'(x) = \\cos x + \\frac{1}{3} \\cdot 3\\cos(3x) = \\cos x + \\cos(3x)$

**Andre deriverte:**
$f''(x) = -\\sin x - 3\\sin(3x)$

**Løser $f''(x) = 0$:**
$-\\sin x - 3\\sin(3x) = 0$
$\\sin x + 3\\sin(3x) = 0$

Bruker $\\sin(3x) = 3\\sin x - 4\\sin^3 x$:
$\\sin x + 3(3\\sin x - 4\\sin^3 x) = 0$
$\\sin x + 9\\sin x - 12\\sin^3 x = 0$
$10\\sin x - 12\\sin^3 x = 0$
$2\\sin x(5 - 6\\sin^2 x) = 0$

$\\sin x = 0 \\Rightarrow x = 0, \\pi, 2\\pi$
$\\sin^2 x = \\frac{5}{6} \\Rightarrow \\sin x = \\pm\\sqrt{\\frac{5}{6}}$

For $\\sin x = \\sqrt{\\frac{5}{6}} \\approx 0.913$: $x \\approx 1.15$ og $x \\approx 1.99$ (i $[0, \\pi]$)
For $\\sin x = -\\sqrt{\\frac{5}{6}}$: $x \\approx 4.29$ og $x \\approx 5.14$ (i $[\\pi, 2\\pi]$)

Vendepunktene er i $x = \\pi$ (sjekk fortegnsskifte i $f''$) og de fire verdiene fra $\\sin^2 x = \\frac{5}{6}$.`,
        hints: ['Bruk triplevinkelformelen for $\\sin(3x)$', 'Faktoriser uttrykket for å finne løsningene'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 13 ==========
    {
      id: 'r2-4-8-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-13',
        number: '4.8.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En partikkel beveger seg langs en linje slik at posisjonen ved tid $t$ (i sekunder) er gitt av
$$s(t) = 2\\sin(t) + \\cos(2t) \\text{ meter}$$

a) Finn farten $v(t)$.

b) Finn akselerasjonen $a(t)$.

c) Når er partikkelen i ro i intervallet $[0, 2\\pi]$?

d) Hva er maksimal fart?`,
        solution: `**a)** $v(t) = s'(t) = 2\\cos(t) - 2\\sin(2t) = 2\\cos t - 4\\sin t \\cos t$
$= 2\\cos t(1 - 2\\sin t)$

**b)** $a(t) = v'(t) = -2\\sin t - 4\\cos(2t)$

**c)** $v(t) = 0$ når $\\cos t = 0$ eller $\\sin t = \\frac{1}{2}$.

$\\cos t = 0 \\Rightarrow t = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$
$\\sin t = \\frac{1}{2} \\Rightarrow t = \\frac{\\pi}{6}, \\frac{5\\pi}{6}$

Partikkelen er i ro ved $t = \\frac{\\pi}{6}, \\frac{\\pi}{2}, \\frac{5\\pi}{6}, \\frac{3\\pi}{2}$.

**d)** For å finne maksimal fart må vi finne ekstremalpunktene til $v(t)$ eller $|v(t)|$.

$v'(t) = a(t) = 0$:
$-2\\sin t - 4\\cos(2t) = 0$
$\\sin t + 2\\cos(2t) = 0$
$\\sin t + 2(1 - 2\\sin^2 t) = 0$
$-4\\sin^2 t + \\sin t + 2 = 0$
$\\sin t = \\frac{-1 \\pm \\sqrt{33}}{-8}$

Numerisk: $|v(t)|_{\\max} \\approx 3.12$ m/s`,
        hints: ['Farten er den deriverte av posisjonen', 'Bruk faktorisering for å løse $v(t) = 0$', 'For maksimal fart, finn hvor $a(t) = 0$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 14 ==========
    {
      id: 'r2-4-8-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-14',
        number: '4.8.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Vis at funksjonen $f(x) = e^x\\sin x$ oppfyller differensiallikningen
$$f''(x) - 2f'(x) + 2f(x) = 0$$`,
        solution: `Vi beregner $f'(x)$ og $f''(x)$:

$f(x) = e^x\\sin x$

$f'(x) = e^x\\sin x + e^x\\cos x = e^x(\\sin x + \\cos x)$

$f''(x) = e^x(\\sin x + \\cos x) + e^x(\\cos x - \\sin x)$
$= e^x(\\sin x + \\cos x + \\cos x - \\sin x)$
$= 2e^x\\cos x$

Setter inn i differensiallikningen:
$f''(x) - 2f'(x) + 2f(x)$
$= 2e^x\\cos x - 2e^x(\\sin x + \\cos x) + 2e^x\\sin x$
$= 2e^x\\cos x - 2e^x\\sin x - 2e^x\\cos x + 2e^x\\sin x$
$= 0$

Altså er differensiallikningen oppfylt. $\\square$`,
        hints: ['Bruk produktregelen for å finne $f\'(x)$ og $f\'\'(x)$', 'Sett inn og forenkle'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 15 ==========
    {
      id: 'r2-4-8-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-15',
        number: '4.8.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En funksjon er gitt ved $f(x) = A\\sin(\\omega x + \\varphi)$ der $A$, $\\omega$ og $\\varphi$ er konstanter.

a) Finn $f'(x)$.

b) Vis at $f(x)$ oppfyller $f''(x) + \\omega^2 f(x) = 0$.`,
        solution: `**a)** $f(x) = A\\sin(\\omega x + \\varphi)$

$f'(x) = A\\cos(\\omega x + \\varphi) \\cdot \\omega = A\\omega\\cos(\\omega x + \\varphi)$

**b)** Vi finner $f''(x)$:
$f''(x) = A\\omega \\cdot (-\\sin(\\omega x + \\varphi)) \\cdot \\omega = -A\\omega^2\\sin(\\omega x + \\varphi)$

$f''(x) = -\\omega^2 \\cdot A\\sin(\\omega x + \\varphi) = -\\omega^2 f(x)$

Dermed:
$f''(x) + \\omega^2 f(x) = -\\omega^2 f(x) + \\omega^2 f(x) = 0$

Dette er likningen for enkel harmonisk bevegelse. $\\square$`,
        hints: ['Bruk kjerneregelen med $u = \\omega x + \\varphi$', 'Den andrederivert inneholder $-\\omega^2$ som faktor'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 16 ==========
    {
      id: 'r2-4-8-ex-block-16',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-16',
        number: '4.8.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Et rektangel er innskrevet i en halvsirkel med radius $r = 2$. Halvsirkelen er gitt ved $y = \\sqrt{4 - x^2}$ for $x \\in [-2, 2]$.

a) Vis at arealet av rektangelet kan skrives som $A(\\theta) = 4\\sin\\theta\\cos\\theta = 2\\sin(2\\theta)$ der $\\theta$ er vinkelen fra $x$-aksen til hjørnet på sirkelen.

b) Finn den verdien av $\\theta$ som gir maksimalt areal.

c) Hva er det maksimale arealet?`,
        solution: `**a)** La hjørnet av rektangelet på sirkelen ha koordinater $(2\\cos\\theta, 2\\sin\\theta)$.

Bredden av rektangelet er $2 \\cdot 2\\cos\\theta = 4\\cos\\theta$.
Høyden er $2\\sin\\theta$.

Arealet blir:
$A(\\theta) = 4\\cos\\theta \\cdot 2\\sin\\theta = 8\\sin\\theta\\cos\\theta = 4\\sin(2\\theta)$

(Merk: Oppgaveteksten hadde en liten feil; med $r = 2$ blir arealet $4\\sin(2\\theta)$.)

**b)** $A'(\\theta) = 4\\cos(2\\theta) \\cdot 2 = 8\\cos(2\\theta)$

$A'(\\theta) = 0$ når $\\cos(2\\theta) = 0$, altså $2\\theta = \\frac{\\pi}{2}$, som gir $\\theta = \\frac{\\pi}{4}$.

**c)** $A\\left(\\frac{\\pi}{4}\\right) = 4\\sin\\left(\\frac{\\pi}{2}\\right) = 4$

Maksimalt areal er **4 kvadratenheter**.`,
        hints: ['Parametriser hjørnet med $\\theta$: $(r\\cos\\theta, r\\sin\\theta)$', 'Bruk dobbeltvinkelformelen $2\\sin\\theta\\cos\\theta = \\sin(2\\theta)$', 'Deriver og sett lik null for å finne maksimum'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 17 ==========
    {
      id: 'r2-4-8-ex-block-17',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-17',
        number: '4.8.17',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Bruk definisjonen av den deriverte til å vise at $(\\cos x)' = -\\sin x$.

Hint: Du kan bruke at $\\lim_{h \\to 0}\\frac{\\cos h - 1}{h} = 0$ og $\\lim_{h \\to 0}\\frac{\\sin h}{h} = 1$.`,
        solution: `Vi bruker definisjonen av den deriverte:

$$f'(x) = \\lim_{h \\to 0}\\frac{\\cos(x+h) - \\cos x}{h}$$

Bruker addisjonsformelen $\\cos(x+h) = \\cos x \\cos h - \\sin x \\sin h$:

$$= \\lim_{h \\to 0}\\frac{\\cos x \\cos h - \\sin x \\sin h - \\cos x}{h}$$

$$= \\lim_{h \\to 0}\\frac{\\cos x(\\cos h - 1) - \\sin x \\sin h}{h}$$

$$= \\lim_{h \\to 0}\\left(\\cos x \\cdot \\frac{\\cos h - 1}{h} - \\sin x \\cdot \\frac{\\sin h}{h}\\right)$$

$$= \\cos x \\cdot 0 - \\sin x \\cdot 1 = -\\sin x$$

Altså er $(\\cos x)' = -\\sin x$. $\\square$`,
        hints: ['Bruk addisjonsformelen for $\\cos(x+h)$', 'Splitt brøken i to deler', 'Bruk de gitte grenseverdiene'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPGAVE 18 ==========
    {
      id: 'r2-4-8-ex-block-18',
      type: 'exercise',
      exercise: {
        id: 'r2-4-8-ex-18',
        number: '4.8.18',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Deriver funksjonen $f(x) = \\arctan(\\sin x)$.

Hint: $\\frac{d}{dx}\\arctan(u) = \\frac{u'}{1 + u^2}$`,
        solution: `Vi har $f(x) = \\arctan(\\sin x)$.

La $u = \\sin x$, så $u' = \\cos x$.

Bruker formelen for den deriverte av $\\arctan$:

$$f'(x) = \\frac{(\\sin x)'}{1 + (\\sin x)^2} = \\frac{\\cos x}{1 + \\sin^2 x}$$

Dette kan også skrives som:
$$f'(x) = \\frac{\\cos x}{1 + \\sin^2 x}$$`,
        hints: ['Bruk kjerneregelen sammen med derivasjonsregelen for $\\arctan$', 'Den indre funksjonen er $\\sin x$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],

  // ========== OPPGAVELISTE ==========
  exercises: [
    {
      id: 'r2-4-8-ex-1',
      number: '4.8.1',
      type: 'classic',
      difficulty: 'lett',
      task: 'Deriver funksjonene: a) $f(x) = 5\\sin x$ b) $f(x) = -3\\cos x$ c) $f(x) = 2\\sin x + 4\\cos x$ d) $f(x) = \\sin x - \\cos x + 1$',
      solution: 'a) $5\\cos x$, b) $3\\sin x$, c) $2\\cos x - 4\\sin x$, d) $\\cos x + \\sin x$',
      hints: ['Husk derivasjonsreglene for sinus og cosinus'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-2',
      number: '4.8.2',
      type: 'classic',
      difficulty: 'lett',
      task: 'Bruk kjerneregelen til å derivere: a) $f(x) = \\sin(3x)$ b) $f(x) = \\cos(4x)$ c) $f(x) = \\sin(x/2)$ d) $f(x) = \\cos(\\pi x)$',
      solution: 'a) $3\\cos(3x)$, b) $-4\\sin(4x)$, c) $\\frac{1}{2}\\cos(x/2)$, d) $-\\pi\\sin(\\pi x)$',
      hints: ['Kjerneregelen: multipliser med den deriverte av det indre'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-3',
      number: '4.8.3',
      type: 'classic',
      difficulty: 'medium',
      task: 'Deriver: a) $f(x) = \\sin(x^2)$ b) $f(x) = \\cos(x^3)$ c) $f(x) = \\sin(2x+1)$ d) $f(x) = \\cos(3x-\\pi)$',
      solution: 'a) $2x\\cos(x^2)$, b) $-3x^2\\sin(x^3)$, c) $2\\cos(2x+1)$, d) $-3\\sin(3x-\\pi)$',
      hints: ['Finn den indre funksjonen og dens deriverte'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-4',
      number: '4.8.4',
      type: 'classic',
      difficulty: 'medium',
      task: 'Bruk produktregelen: a) $f(x) = x\\cos x$ b) $f(x) = x^2\\sin x$ c) $f(x) = e^x\\cos x$ d) $f(x) = \\sin x \\cos x$',
      solution: 'a) $\\cos x - x\\sin x$, b) $2x\\sin x + x^2\\cos x$, c) $e^x(\\cos x - \\sin x)$, d) $\\cos(2x)$',
      hints: ['$(uv)\' = u\'v + uv\'$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-5',
      number: '4.8.5',
      type: 'classic',
      difficulty: 'medium',
      task: 'Deriver: a) $\\sin^2 x$ b) $\\cos^3 x$ c) $\\sin^2(2x)$ d) $\\sqrt{\\sin x}$',
      solution: 'a) $\\sin(2x)$, b) $-3\\cos^2 x \\sin x$, c) $2\\sin(4x)$, d) $\\frac{\\cos x}{2\\sqrt{\\sin x}}$',
      hints: ['Potenser av trigonometriske funksjoner krever kjerneregelen'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-6',
      number: '4.8.6',
      type: 'classic',
      difficulty: 'medium',
      task: 'Deriver: a) $\\tan(2x)$ b) $\\tan(x^2)$ c) $\\sin x / \\cos x$',
      solution: 'a) $\\frac{2}{\\cos^2(2x)}$, b) $\\frac{2x}{\\cos^2(x^2)}$, c) $\\frac{1}{\\cos^2 x}$',
      hints: ['$(\\tan u)\' = \\frac{u\'}{\\cos^2 u}$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-7',
      number: '4.8.7',
      type: 'classic',
      difficulty: 'medium',
      task: 'Deriver: a) $e^{\\cos x}$ b) $\\ln(\\cos x)$ c) $\\cos(e^x)$ d) $e^{\\sin(2x)}$',
      solution: 'a) $-\\sin x \\cdot e^{\\cos x}$, b) $-\\tan x$, c) $-e^x\\sin(e^x)$, d) $2\\cos(2x) \\cdot e^{\\sin(2x)}$',
      hints: ['Kombiner regler for eksponential/logaritme med trigonometriske'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-8',
      number: '4.8.8',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn $f\'(x)$ og beregn $f\'(0)$: a) $f(x) = \\sin(3x)$ b) $f(x) = \\cos(2x) + \\sin x$ c) $f(x) = x\\sin x$',
      solution: 'a) $f\'(0) = 3$, b) $f\'(0) = 1$, c) $f\'(0) = 0$',
      hints: ['Husk at $\\sin(0) = 0$ og $\\cos(0) = 1$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-9',
      number: '4.8.9',
      type: 'classic',
      difficulty: 'medium',
      task: 'La $f(x) = \\sin x$. a) Finn de fire første deriverte. b) Hva blir $f^{(100)}(x)$?',
      solution: 'Den deriverte gjentar seg med periode 4. $f^{(100)}(x) = \\sin x$',
      hints: ['Se etter et mønster'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-10',
      number: '4.8.10',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn likningen for tangenten til $f(x) = \\sin(2x)$ i punktet der $x = \\pi/4$.',
      solution: 'Tangenten er $y = 1$ (horisontal)',
      hints: ['Finn punktet og stigningstallet'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-11',
      number: '4.8.11',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Drøft $f(x) = \\cos x - \\frac{1}{2}\\cos(2x)$ for $x \\in [0, 2\\pi]$. Finn stasjonære punkter og klassifiser dem.',
      solution: 'Stasjonære punkter ved $x = 0, \\pi/3, \\pi, 5\\pi/3, 2\\pi$',
      hints: ['Bruk identiteten $\\sin(2x) = 2\\sin x \\cos x$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-12',
      number: '4.8.12',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Finn vendepunktene til $f(x) = \\sin x + \\frac{1}{3}\\sin(3x)$ for $x \\in [0, 2\\pi]$.',
      solution: 'Løs $f\'\'(x) = 0$ og sjekk fortegnsskifte',
      hints: ['Bruk triplevinkelformelen'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-13',
      number: '4.8.13',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'En partikkel har posisjon $s(t) = 2\\sin(t) + \\cos(2t)$ m. Finn fart, akselerasjon, og når partikkelen er i ro.',
      solution: 'Partikkelen er i ro ved $t = \\pi/6, \\pi/2, 5\\pi/6, 3\\pi/2$',
      hints: ['Fart er $s\'(t)$, akselerasjon er $s\'\'(t)$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-14',
      number: '4.8.14',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Vis at $f(x) = e^x\\sin x$ oppfyller $f\'\'(x) - 2f\'(x) + 2f(x) = 0$.',
      solution: 'Beregn $f\'$ og $f\'\'$ med produktregelen og sett inn',
      hints: ['Bruk produktregelen to ganger'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-15',
      number: '4.8.15',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'La $f(x) = A\\sin(\\omega x + \\varphi)$. a) Finn $f\'(x)$. b) Vis at $f\'\'(x) + \\omega^2 f(x) = 0$.',
      solution: 'Dette er likningen for harmonisk bevegelse',
      hints: ['Kjerneregelen gir en faktor $\\omega$ hver gang'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-16',
      number: '4.8.16',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Et rektangel er innskrevet i en halvsirkel med radius 2. Finn det maksimale arealet.',
      solution: 'Maksimalt areal er 4',
      hints: ['Parametriser med vinkel $\\theta$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-17',
      number: '4.8.17',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Bevis fra definisjonen at $(\\cos x)\' = -\\sin x$.',
      solution: 'Bruk definisjonen og addisjonsformelen',
      hints: ['Start med $\\lim_{h \\to 0} \\frac{\\cos(x+h) - \\cos x}{h}$'],
      allowsUpload: true,
    },
    {
      id: 'r2-4-8-ex-18',
      number: '4.8.18',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Deriver $f(x) = \\arctan(\\sin x)$.',
      solution: '$f\'(x) = \\frac{\\cos x}{1 + \\sin^2 x}$',
      hints: ['$(\\arctan u)\' = \\frac{u\'}{1 + u^2}$'],
      allowsUpload: true,
    },
  ],

  // Navigation
  nextChapter: 'r2-6-1',
  prevChapter: 'r2-4-8',
};

export const CHAPTER_R2_6_1: TextbookChapter = {
  id: 'r2-6-1',
  courseId: 'r2',
  chapterNumber: '6.1',
  title: 'Parameterframstilling av kurver',
  description: 'Beskrive kurver med parameterfunksjoner.',
  estimatedMinutes: 55,
  competenceGoals: [
    'bruke parameterframstilling til å beskrive kurver i planet',
    'eliminere parameteren for å finne kartesisk likning',
    'finne retning og hastighet langs parameterkurver',
    'tegne parameterkurver ved hånd og med digitale verktøy',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-6-1-intro',
      type: 'text',
      content: `## Hva er parameterframstilling?

Tidligere har vi beskrevet kurver i planet med likninger som $y = f(x)$ eller $x^2 + y^2 = r^2$. Men noen kurver er vanskelige eller umulige å beskrive på denne måten. Tenk på en kurve som krysser seg selv, eller en kurve der $y$ ikke er entydig bestemt av $x$.

**Parameterframstilling** gir oss en mer fleksibel måte å beskrive kurver på. I stedet for å uttrykke $y$ som funksjon av $x$, lar vi både $x$ og $y$ avhenge av en tredje variabel - **parameteren** $t$.

Tenk på det som å beskrive bevegelsen til et punkt som beveger seg langs kurven. For hver verdi av $t$ (som kan tenkes som tid), får vi en posisjon $(x(t), y(t))$ i planet.`,
    },

    {
      id: 'r2-6-1-polar-form-bilde',
      type: 'image',
      src: '/images/r2/polar-form.svg',
      alt: 'Illustrasjon av polarkoordinater og parameterframstilling',
      caption: 'Polarkoordinater - en annen mate a beskrive punkter i planet',
    },

    // Definisjon: Parameterframstilling
    {
      id: 'r2-6-1-def-param',
      type: 'definition',
      title: 'Parameterframstilling av en kurve',
      content: `En **parameterframstilling** av en kurve i planet er gitt ved:

$$\\begin{cases} x = x(t) \\\\ y = y(t) \\end{cases}, \\quad t \\in I$$

der $x(t)$ og $y(t)$ er funksjoner av parameteren $t$, og $I$ er et intervall (parameterintervallet).

For hver verdi av $t$ i intervallet $I$ får vi et punkt $(x(t), y(t))$ på kurven.`,
    },

    {
      id: 'r2-6-1-intuisjon',
      type: 'text',
      content: `### Intuisjon: Parameteren som tid

Den vanligste tolkningen av parameteren $t$ er **tid**. Tenk deg at et punkt beveger seg i planet:

- Ved tid $t = 0$ er punktet i posisjonen $(x(0), y(0))$
- Ved tid $t = 1$ er punktet i posisjonen $(x(1), y(1))$
- Og så videre...

Kurven er da **banen** som punktet tegner opp mens det beveger seg.

Parameterframstilling gir oss ikke bare formen på kurven, men også:
- **Retningen** punktet beveger seg i
- **Hvor fort** punktet beveger seg (hvis vi tolker $t$ som tid)
- **Startpunkt** og **sluttpunkt** (hvis parameterintervallet er begrenset)`,
    },

    // ========== GRUNNLEGGENDE EKSEMPLER ==========
    {
      id: 'r2-6-1-section-basic',
      type: 'text',
      content: `## Enkle parameterkurver`,
    },

    // Eksempel 1: Rett linje
    {
      id: 'r2-6-1-example-1',
      type: 'example',
      title: 'Eksempel 1: Rett linje',
      problem: `Beskriv kurven gitt ved parameterframstillingen:
$$\\begin{cases} x = 1 + 2t \\\\ y = 3 - t \\end{cases}, \\quad t \\in \\mathbb{R}$$`,
      solution: `**Løsning:**

Vi setter inn noen verdier av $t$:

| $t$ | $x = 1 + 2t$ | $y = 3 - t$ | Punkt |
|-----|--------------|-------------|-------|
| $-1$ | $-1$ | $4$ | $(-1, 4)$ |
| $0$ | $1$ | $3$ | $(1, 3)$ |
| $1$ | $3$ | $2$ | $(3, 2)$ |
| $2$ | $5$ | $1$ | $(5, 1)$ |

Punktene ligger på en rett linje. Dette gir mening fordi:
- $x$ øker lineært med $t$ (stigningstall 2)
- $y$ avtar lineært med $t$ (stigningstall $-1$)

**Retningsvektor:** Når $t$ øker med 1, øker $x$ med 2 og $y$ avtar med 1. Retningsvektoren er altså $\\vec{r} = [2, -1]$.

**Punkt på linjen:** Ved $t = 0$ har vi punktet $(1, 3)$.

Kurven er en rett linje gjennom $(1, 3)$ med retningsvektor $[2, -1]$.`,
    },

    // Note: Generell linje
    {
      id: 'r2-6-1-note-linje',
      type: 'note',
      content: `**Generell parameterframstilling av en linje:**

En linje gjennom punktet $(x_0, y_0)$ med retningsvektor $[a, b]$ har parameterframstilling:

$$\\begin{cases} x = x_0 + at \\\\ y = y_0 + bt \\end{cases}$$`,
    },

    // Eksempel 2: Parabel
    {
      id: 'r2-6-1-example-2',
      type: 'example',
      title: 'Eksempel 2: Parabel',
      problem: `Beskriv kurven gitt ved:
$$\\begin{cases} x = t \\\\ y = t^2 \\end{cases}, \\quad t \\in \\mathbb{R}$$`,
      solution: `**Løsning:**

Siden $x = t$, kan vi skrive $t = x$ og sette inn i den andre likningen:
$$y = t^2 = x^2$$

Kurven er parabelen $y = x^2$.

| $t$ | $x$ | $y$ | Punkt |
|-----|-----|-----|-------|
| $-2$ | $-2$ | $4$ | $(-2, 4)$ |
| $-1$ | $-1$ | $1$ | $(-1, 1)$ |
| $0$ | $0$ | $0$ | $(0, 0)$ |
| $1$ | $1$ | $1$ | $(1, 1)$ |
| $2$ | $2$ | $4$ | $(2, 4)$ |

**Retning:** Når $t$ øker, beveger punktet seg langs parabelen fra venstre mot høyre (fordi $x = t$ øker med $t$).`,
    },

    // Eksempel 3: Halv parabel
    {
      id: 'r2-6-1-example-3',
      type: 'example',
      title: 'Eksempel 3: Begrenset parameterintervall',
      problem: `Beskriv kurven gitt ved:
$$\\begin{cases} x = t \\\\ y = t^2 \\end{cases}, \\quad t \\in [0, 2]$$`,
      solution: `**Løsning:**

Dette er samme parametrisering som i forrige eksempel, men nå er $t$ begrenset til intervallet $[0, 2]$.

- **Startpunkt** ($t = 0$): $(0, 0)$
- **Sluttpunkt** ($t = 2$): $(2, 4)$

Kurven er den delen av parabelen $y = x^2$ som går fra $(0, 0)$ til $(2, 4)$.

**Merk:** Parameterintervallet bestemmer hvilken del av kurven vi får.`,
    },

    // ========== SIRKEL OG ELLIPSE ==========
    {
      id: 'r2-6-1-section-sirkel',
      type: 'text',
      content: `## Sirkel som parameterkurve

En av de viktigste anvendelsene av parameterframstilling er å beskrive sirkler og ellipser.

For en sirkel med radius $r$ og sentrum i origo, tenker vi oss at et punkt beveger seg rundt sirkelen. Posisjonen kan beskrives ved hjelp av vinkelen $t$ målt fra positiv $x$-akse.`,
    },

    // Definisjon: Sirkel
    {
      id: 'r2-6-1-def-sirkel',
      type: 'definition',
      title: 'Parameterframstilling av sirkel',
      content: `En sirkel med sentrum i origo og radius $r$ har parameterframstilling:

$$\\begin{cases} x = r\\cos t \\\\ y = r\\sin t \\end{cases}, \\quad t \\in [0, 2\\pi]$$

Her er $t$ vinkelen (i radianer) målt fra positiv $x$-akse mot klokka.

**Generelt:** Sirkel med sentrum $(a, b)$ og radius $r$:
$$\\begin{cases} x = a + r\\cos t \\\\ y = b + r\\sin t \\end{cases}$$`,
    },

    // Eksempel 4: Sirkel
    {
      id: 'r2-6-1-example-4',
      type: 'example',
      title: 'Eksempel 4: Enhetssirkelen',
      problem: `Vis at parameterframstillingen
$$\\begin{cases} x = \\cos t \\\\ y = \\sin t \\end{cases}, \\quad t \\in [0, 2\\pi]$$
beskriver enhetssirkelen.`,
      solution: `**Løsning:**

Vi bruker den trigonometriske identiteten $\\cos^2 t + \\sin^2 t = 1$:

$$x^2 + y^2 = \\cos^2 t + \\sin^2 t = 1$$

Dette er likningen for enhetssirkelen (sirkel med sentrum i origo og radius 1).

**Retning rundt sirkelen:**
| $t$ | $x = \\cos t$ | $y = \\sin t$ | Punkt |
|-----|---------------|---------------|-------|
| $0$ | $1$ | $0$ | $(1, 0)$ |
| $\\frac{\\pi}{2}$ | $0$ | $1$ | $(0, 1)$ |
| $\\pi$ | $-1$ | $0$ | $(-1, 0)$ |
| $\\frac{3\\pi}{2}$ | $0$ | $-1$ | $(0, -1)$ |
| $2\\pi$ | $1$ | $0$ | $(1, 0)$ |

Punktet starter i $(1, 0)$ og beveger seg **mot klokka** rundt sirkelen.`,
    },

    // Tip: Retning på sirkel
    {
      id: 'r2-6-1-tip-retning',
      type: 'tip',
      content: `**Retning rundt sirkelen:**
- $x = r\\cos t$, $y = r\\sin t$: Bevegelse **mot klokka** (positiv retning)
- $x = r\\cos t$, $y = -r\\sin t$: Bevegelse **med klokka**
- $x = r\\sin t$, $y = r\\cos t$: Start i $(0, r)$, bevegelse med klokka`,
    },

    // Eksempel 5: Forskjøvet sirkel
    {
      id: 'r2-6-1-example-5',
      type: 'example',
      title: 'Eksempel 5: Sirkel med sentrum utenfor origo',
      problem: `Finn en parameterframstilling for sirkelen med sentrum $(2, -1)$ og radius $3$.`,
      solution: `**Løsning:**

Vi bruker formelen for sirkel med sentrum $(a, b)$ og radius $r$:

$$\\begin{cases} x = a + r\\cos t \\\\ y = b + r\\sin t \\end{cases}$$

Med $a = 2$, $b = -1$ og $r = 3$ får vi:

$$\\begin{cases} x = 2 + 3\\cos t \\\\ y = -1 + 3\\sin t \\end{cases}, \\quad t \\in [0, 2\\pi]$$

**Kontroll:** Startpunktet ($t = 0$) er $(2 + 3, -1 + 0) = (5, -1)$, som ligger på sirkelen (3 enheter til høyre for sentrum).`,
    },

    // ========== ELLIPSE ==========
    {
      id: 'r2-6-1-section-ellipse',
      type: 'text',
      content: `## Ellipse som parameterkurve

En ellipse er en "strukket" sirkel. Hvis vi strekker enhetssirkelen med faktor $a$ i $x$-retning og faktor $b$ i $y$-retning, får vi en ellipse.`,
    },

    // Definisjon: Ellipse
    {
      id: 'r2-6-1-def-ellipse',
      type: 'definition',
      title: 'Parameterframstilling av ellipse',
      content: `En ellipse med sentrum i origo, halvakse $a$ langs $x$-aksen og halvakse $b$ langs $y$-aksen har parameterframstilling:

$$\\begin{cases} x = a\\cos t \\\\ y = b\\sin t \\end{cases}, \\quad t \\in [0, 2\\pi]$$

Den kartesiske likningen for denne ellipsen er:
$$\\frac{x^2}{a^2} + \\frac{y^2}{b^2} = 1$$`,
    },

    // Eksempel 6: Ellipse
    {
      id: 'r2-6-1-example-6',
      type: 'example',
      title: 'Eksempel 6: Parametrisering av ellipse',
      problem: `a) Finn en parameterframstilling for ellipsen $\\frac{x^2}{9} + \\frac{y^2}{4} = 1$.

b) Beskriv ellipsens form.`,
      solution: `**Løsning:**

a) Fra likningen ser vi at $a^2 = 9$ og $b^2 = 4$, altså $a = 3$ og $b = 2$.

Parameterframstillingen blir:
$$\\begin{cases} x = 3\\cos t \\\\ y = 2\\sin t \\end{cases}, \\quad t \\in [0, 2\\pi]$$

b) **Ellipsens form:**
- Halvaksen langs $x$-aksen er $a = 3$
- Halvaksen langs $y$-aksen er $b = 2$
- Ellipsen krysser $x$-aksen i $(-3, 0)$ og $(3, 0)$
- Ellipsen krysser $y$-aksen i $(0, -2)$ og $(0, 2)$

Siden $a > b$, er ellipsen "liggende" (bredere enn den er høy).

**Kontroll:**
$$\\frac{(3\\cos t)^2}{9} + \\frac{(2\\sin t)^2}{4} = \\frac{9\\cos^2 t}{9} + \\frac{4\\sin^2 t}{4} = \\cos^2 t + \\sin^2 t = 1 \\checkmark$$`,
    },

    // ========== ELIMINERE PARAMETEREN ==========
    {
      id: 'r2-6-1-section-eliminere',
      type: 'text',
      content: `## Eliminere parameteren

Å **eliminere parameteren** betyr å finne den kartesiske likningen for kurven - altså en likning som bare inneholder $x$ og $y$, uten $t$.

**Fremgangsmåte:**
1. Løs én av likningene med hensyn på $t$
2. Sett inn i den andre likningen
3. Forenkle

Alternativt: Bruk kjente identiteter (som $\\cos^2 t + \\sin^2 t = 1$) til å eliminere $t$.`,
    },

    // Eksempel 7: Eliminere parameter - linje
    {
      id: 'r2-6-1-example-7',
      type: 'example',
      title: 'Eksempel 7: Eliminere parameteren (linje)',
      problem: `Finn den kartesiske likningen for kurven gitt ved:
$$\\begin{cases} x = 1 + 2t \\\\ y = 3 - t \\end{cases}$$`,
      solution: `**Løsning:**

**Metode 1: Løs for $t$**

Fra den første likningen:
$$x = 1 + 2t \\implies t = \\frac{x - 1}{2}$$

Setter inn i den andre:
$$y = 3 - t = 3 - \\frac{x - 1}{2} = 3 - \\frac{x}{2} + \\frac{1}{2} = \\frac{7}{2} - \\frac{x}{2}$$

Ganger med 2:
$$2y = 7 - x$$
$$x + 2y = 7$$

**Metode 2: Kombinere likningene**

Fra $y = 3 - t$ har vi $t = 3 - y$.
Fra $x = 1 + 2t$ har vi $x = 1 + 2(3 - y) = 7 - 2y$.
Altså $x + 2y = 7$.

Den kartesiske likningen er $x + 2y = 7$ (en rett linje).`,
    },

    // Eksempel 8: Eliminere parameter - sirkel
    {
      id: 'r2-6-1-example-8',
      type: 'example',
      title: 'Eksempel 8: Eliminere parameteren (sirkel)',
      problem: `Finn den kartesiske likningen for kurven gitt ved:
$$\\begin{cases} x = 2 + 3\\cos t \\\\ y = -1 + 3\\sin t \\end{cases}$$`,
      solution: `**Løsning:**

Vi isolerer $\\cos t$ og $\\sin t$:
$$\\cos t = \\frac{x - 2}{3}, \\quad \\sin t = \\frac{y + 1}{3}$$

Bruker identiteten $\\cos^2 t + \\sin^2 t = 1$:
$$\\left(\\frac{x - 2}{3}\\right)^2 + \\left(\\frac{y + 1}{3}\\right)^2 = 1$$

$$\\frac{(x - 2)^2}{9} + \\frac{(y + 1)^2}{9} = 1$$

$$(x - 2)^2 + (y + 1)^2 = 9$$

Dette er likningen for en sirkel med sentrum $(2, -1)$ og radius $3$.`,
    },

    // Eksempel 9: Eliminere - mer komplisert
    {
      id: 'r2-6-1-example-9',
      type: 'example',
      title: 'Eksempel 9: Eliminere parameteren (hyperbelgren)',
      problem: `Finn den kartesiske likningen for kurven gitt ved:
$$\\begin{cases} x = \\frac{1}{t} \\\\ y = t \\end{cases}, \\quad t > 0$$`,
      solution: `**Løsning:**

Fra den andre likningen har vi $t = y$.

Setter inn i den første:
$$x = \\frac{1}{t} = \\frac{1}{y}$$

Altså:
$$xy = 1 \\quad \\text{eller} \\quad y = \\frac{1}{x}$$

Siden $t > 0$ og $y = t$, har vi $y > 0$, og dermed også $x = \\frac{1}{y} > 0$.

Kurven er grenen av hyperbelen $xy = 1$ i første kvadrant.`,
    },

    // Warning: Parameterframstilling gir mer info
    {
      id: 'r2-6-1-warning-info',
      type: 'warning',
      title: 'Viktig om eliminering',
      content: `Når vi eliminerer parameteren, mister vi informasjon!

Parameterframstillingen gir oss:
- Retningen langs kurven
- Parameterintervallet (hvilken del av kurven)
- Startpunkt og sluttpunkt

Den kartesiske likningen gir oss bare formen på kurven.

**Eksempel:** Både $\\begin{cases} x = \\cos t \\\\ y = \\sin t \\end{cases}$ og $\\begin{cases} x = \\cos t \\\\ y = -\\sin t \\end{cases}$ gir sirkelen $x^2 + y^2 = 1$, men bevegelsen går i motsatt retning!`,
    },

    // ========== TEGNE PARAMETERKURVER ==========
    {
      id: 'r2-6-1-section-tegne',
      type: 'text',
      content: `## Tegne parameterkurver

For å tegne en parameterkurve for hånd:

1. **Lag en verditabell** med verdier av $t$, og beregn $(x(t), y(t))$ for hver $t$
2. **Plott punktene** i koordinatsystemet
3. **Forbind punktene** i rekkefølgen de kommer (når $t$ øker)
4. **Merk retningen** med en pil

**Tips for valg av $t$-verdier:**
- For linjer: 2-3 punkter er nok
- For sirkler/ellipser: Bruk $t = 0, \\frac{\\pi}{4}, \\frac{\\pi}{2}, \\frac{3\\pi}{4}, \\pi, ...$
- For andre kurver: Flere punkter gir bedre bilde av formen`,
    },

    // Eksempel 10: Tegne kurve
    {
      id: 'r2-6-1-example-10',
      type: 'example',
      title: 'Eksempel 10: Tegne en parameterkurve',
      problem: `Tegn kurven gitt ved:
$$\\begin{cases} x = t^2 - 1 \\\\ y = t^3 - t \\end{cases}, \\quad t \\in [-1.5, 1.5]$$`,
      solution: `**Løsning:**

Vi lager en verditabell:

| $t$ | $x = t^2 - 1$ | $y = t^3 - t$ | Punkt |
|-----|---------------|---------------|-------|
| $-1.5$ | $1.25$ | $-1.875$ | $(1.25, -1.875)$ |
| $-1$ | $0$ | $0$ | $(0, 0)$ |
| $-0.5$ | $-0.75$ | $0.375$ | $(-0.75, 0.375)$ |
| $0$ | $-1$ | $0$ | $(-1, 0)$ |
| $0.5$ | $-0.75$ | $-0.375$ | $(-0.75, -0.375)$ |
| $1$ | $0$ | $0$ | $(0, 0)$ |
| $1.5$ | $1.25$ | $1.875$ | $(1.25, 1.875)$ |

**Observasjoner:**
- Kurven går gjennom origo $(0, 0)$ to ganger (ved $t = -1$ og $t = 1$)
- Ved $t = 0$ er vi i $(-1, 0)$, som er lengst til venstre
- Kurven krysser seg selv i origo!

Kurven danner en figur som ligner på et liggende "8" eller sløyfe.`,
    },

    // Eksempel 11: Sykloid
    {
      id: 'r2-6-1-example-11',
      type: 'example',
      title: 'Eksempel 11: Sykloiden',
      problem: `En **sykloid** er kurven som et punkt på kanten av et hjul tegner opp når hjulet ruller langs bakken.

Hvis hjulet har radius $r$, vis at parameterframstillingen blir:
$$\\begin{cases} x = r(t - \\sin t) \\\\ y = r(1 - \\cos t) \\end{cases}$$

Tegn kurven for $r = 1$ og $t \\in [0, 4\\pi]$.`,
      solution: `**Løsning:**

Når hjulet har rullet vinkelen $t$ (i radianer), har sentrum flyttet seg en avstand $rt$ langs $x$-aksen. Sentrum er da i punktet $(rt, r)$.

Punktet på kanten av hjulet er forskjøvet fra sentrum med:
- $-r\\sin t$ i $x$-retning
- $-r\\cos t$ i $y$-retning

(Merk: Minus fordi vi starter med punktet i bunn av hjulet.)

Dette gir:
$$x = rt - r\\sin t = r(t - \\sin t)$$
$$y = r - r\\cos t = r(1 - \\cos t)$$

**Noen punkter for $r = 1$:**

| $t$ | $x$ | $y$ | Merknad |
|-----|-----|-----|---------|
| $0$ | $0$ | $0$ | Start, punktet berører bakken |
| $\\pi$ | $\\pi \\approx 3.14$ | $2$ | Toppen av buen |
| $2\\pi$ | $2\\pi \\approx 6.28$ | $0$ | Tilbake på bakken |
| $3\\pi$ | $3\\pi \\approx 9.42$ | $2$ | Neste topp |
| $4\\pi$ | $4\\pi \\approx 12.57$ | $0$ | Tilbake på bakken |

Kurven består av en serie buer der punktet periodisk berører bakken.`,
    },

    // ========== RETNING LANGS KURVEN ==========
    {
      id: 'r2-6-1-section-retning',
      type: 'text',
      content: `## Retning og hastighet langs kurven

Parameterframstillingen gir oss mer enn bare formen på kurven - den forteller oss også hvordan et punkt beveger seg langs kurven.

### Tangentvektor

**Tangentvektoren** i et punkt på kurven peker i den retningen punktet beveger seg. Den finner vi ved å derivere $x(t)$ og $y(t)$ med hensyn på $t$:

$$\\vec{v}(t) = [x'(t), y'(t)]$$

Denne vektoren kalles også **hastighetsvektoren** hvis vi tolker $t$ som tid.`,
    },

    // Definisjon: Tangentvektor
    {
      id: 'r2-6-1-def-tangent',
      type: 'definition',
      title: 'Tangentvektor',
      content: `For en kurve gitt ved $\\begin{cases} x = x(t) \\\\ y = y(t) \\end{cases}$ er **tangentvektoren** i punktet $(x(t_0), y(t_0))$:

$$\\vec{v}(t_0) = [x'(t_0), y'(t_0)]$$

Tangentvektoren peker i bevegelsesretningen når $t$ øker.

**Fart** (lengden av hastighetsvektoren):
$$|\\vec{v}(t)| = \\sqrt{(x'(t))^2 + (y'(t))^2}$$`,
    },

    // Eksempel 12: Tangentvektor på sirkel
    {
      id: 'r2-6-1-example-12',
      type: 'example',
      title: 'Eksempel 12: Tangentvektor på sirkel',
      problem: `For sirkelen $\\begin{cases} x = 2\\cos t \\\\ y = 2\\sin t \\end{cases}$:

a) Finn tangentvektoren $\\vec{v}(t)$
b) Finn tangentvektoren i punktet der $t = \\frac{\\pi}{4}$
c) Vis at tangentvektoren alltid står vinkelrett på posisjonsvektoren`,
      solution: `**Løsning:**

a) Vi deriverer:
$$x'(t) = -2\\sin t, \\quad y'(t) = 2\\cos t$$
$$\\vec{v}(t) = [-2\\sin t, 2\\cos t]$$

b) Ved $t = \\frac{\\pi}{4}$:
$$\\vec{v}\\left(\\frac{\\pi}{4}\\right) = \\left[-2\\sin\\frac{\\pi}{4}, 2\\cos\\frac{\\pi}{4}\\right] = \\left[-2 \\cdot \\frac{\\sqrt{2}}{2}, 2 \\cdot \\frac{\\sqrt{2}}{2}\\right] = [-\\sqrt{2}, \\sqrt{2}]$$

Punktet er $(2\\cos\\frac{\\pi}{4}, 2\\sin\\frac{\\pi}{4}) = (\\sqrt{2}, \\sqrt{2})$.

c) Posisjonsvektoren er $\\vec{r}(t) = [2\\cos t, 2\\sin t]$.

Skalarproduktet:
$$\\vec{r}(t) \\cdot \\vec{v}(t) = (2\\cos t)(-2\\sin t) + (2\\sin t)(2\\cos t)$$
$$= -4\\cos t \\sin t + 4\\sin t \\cos t = 0$$

Siden skalarproduktet er 0 for alle $t$, står tangentvektoren alltid vinkelrett på posisjonsvektoren. Dette gir mening geometrisk - tangenten til en sirkel står alltid vinkelrett på radiusen!`,
    },

    // Eksempel 13: Tangentlinje
    {
      id: 'r2-6-1-example-13',
      type: 'example',
      title: 'Eksempel 13: Likning for tangentlinje',
      problem: `Finn likningen for tangentlinjen til kurven
$$\\begin{cases} x = t^2 \\\\ y = t^3 \\end{cases}$$
i punktet der $t = 2$.`,
      solution: `**Løsning:**

**Punktet:** Ved $t = 2$ har vi $(x, y) = (4, 8)$.

**Tangentvektoren:**
$$x'(t) = 2t, \\quad y'(t) = 3t^2$$
$$\\vec{v}(2) = [2 \\cdot 2, 3 \\cdot 4] = [4, 12]$$

**Stigningstall:**
$$a = \\frac{y'(2)}{x'(2)} = \\frac{12}{4} = 3$$

**Tangentlinje gjennom $(4, 8)$ med stigningstall $3$:**
$$y - 8 = 3(x - 4)$$
$$y = 3x - 12 + 8$$
$$y = 3x - 4$$

**Alternativ metode:** Tangentlinjen har parameterframstilling:
$$\\begin{cases} x = 4 + 4s \\\\ y = 8 + 12s \\end{cases}$$
(der $s$ er en ny parameter).`,
    },

    // Eksempel 14: Hvor er kurven horisontal/vertikal
    {
      id: 'r2-6-1-example-14',
      type: 'example',
      title: 'Eksempel 14: Horisontale og vertikale tangenter',
      problem: `For kurven $\\begin{cases} x = t^2 - 4t \\\\ y = t^2 - 2t \\end{cases}$, finn alle punkter der tangenten er:
a) Horisontal
b) Vertikal`,
      solution: `**Løsning:**

Først finner vi de deriverte:
$$x'(t) = 2t - 4, \\quad y'(t) = 2t - 2$$

a) **Horisontal tangent:** Tangenten er horisontal når $y'(t) = 0$ (og $x'(t) \\neq 0$).
$$y'(t) = 2t - 2 = 0 \\implies t = 1$$

Sjekker at $x'(1) = 2(1) - 4 = -2 \\neq 0$ ✓

Ved $t = 1$: $(x, y) = (1 - 4, 1 - 2) = (-3, -1)$

**Horisontal tangent i $(-3, -1)$.**

b) **Vertikal tangent:** Tangenten er vertikal når $x'(t) = 0$ (og $y'(t) \\neq 0$).
$$x'(t) = 2t - 4 = 0 \\implies t = 2$$

Sjekker at $y'(2) = 2(2) - 2 = 2 \\neq 0$ ✓

Ved $t = 2$: $(x, y) = (4 - 8, 4 - 4) = (-4, 0)$

**Vertikal tangent i $(-4, 0)$.**`,
    },

    // ========== FLERE PARAMETRISERINGER ==========
    {
      id: 'r2-6-1-section-flere',
      type: 'text',
      content: `## Samme kurve - forskjellige parametriseringer

Den samme kurven kan ha mange ulike parameterframstillinger. De kan gi:
- Ulik retning langs kurven
- Ulik hastighet langs kurven
- Ulikt parameterintervall`,
    },

    // Eksempel 15: Flere parametriseringer
    {
      id: 'r2-6-1-example-15',
      type: 'example',
      title: 'Eksempel 15: Alternative parametriseringer',
      problem: `Vis at følgende tre parameterframstillinger alle beskriver enhetssirkelen:

a) $\\begin{cases} x = \\cos t \\\\ y = \\sin t \\end{cases}, t \\in [0, 2\\pi]$

b) $\\begin{cases} x = \\cos 2t \\\\ y = \\sin 2t \\end{cases}, t \\in [0, \\pi]$

c) $\\begin{cases} x = \\sin t \\\\ y = \\cos t \\end{cases}, t \\in [0, 2\\pi]$

Hva er forskjellene?`,
      solution: `**Løsning:**

Alle tre gir $x^2 + y^2 = 1$, som er enhetssirkelen.

**Forskjeller:**

a) Standard parametrisering:
- Start: $(1, 0)$ ved $t = 0$
- Retning: Mot klokka
- Hastighet: Punktet går rundt én gang når $t$ øker fra $0$ til $2\\pi$

b) Dobbel hastighet:
- Start: $(1, 0)$ ved $t = 0$
- Retning: Mot klokka
- Hastighet: Punktet går rundt én gang når $t$ øker fra $0$ til $\\pi$ (dobbel hastighet!)

c) Forskjøvet startpunkt og motsatt retning:
- Start: $(0, 1)$ ved $t = 0$ (på toppen av sirkelen)
- Retning: Med klokka!
- Ved $t = \\frac{\\pi}{2}$: $(1, 0)$ (punktet har gått ned og til høyre)

**Konklusjon:** Samme kurve, men ulik bevegelse langs kurven.`,
    },

    // Eksempel 16: Lissajous-kurve
    {
      id: 'r2-6-1-example-16',
      type: 'example',
      title: 'Eksempel 16: Lissajous-kurve',
      problem: `En **Lissajous-kurve** er gitt ved:
$$\\begin{cases} x = A\\sin(at + \\delta) \\\\ y = B\\sin(bt) \\end{cases}$$

Beskriv kurven for $A = B = 1$, $a = 3$, $b = 2$, $\\delta = 0$, $t \\in [0, 2\\pi]$.`,
      solution: `**Løsning:**

Vi har:
$$\\begin{cases} x = \\sin(3t) \\\\ y = \\sin(2t) \\end{cases}$$

Noen punkter:
| $t$ | $x = \\sin(3t)$ | $y = \\sin(2t)$ |
|-----|----------------|----------------|
| $0$ | $0$ | $0$ |
| $\\frac{\\pi}{6}$ | $1$ | $\\frac{\\sqrt{3}}{2}$ |
| $\\frac{\\pi}{3}$ | $0$ | $\\frac{\\sqrt{3}}{2}$ |
| $\\frac{\\pi}{2}$ | $-1$ | $0$ |
| $\\frac{2\\pi}{3}$ | $0$ | $-\\frac{\\sqrt{3}}{2}$ |
| $\\pi$ | $0$ | $0$ |

Kurven danner et komplekst mønster som ligner på et liggende 8-tall med ekstra løkker. Forholdet mellom frekvensene $a/b = 3/2$ bestemmer hvor mange ganger kurven krysser seg selv og formen på mønsteret.

Lissajous-kurver brukes i fysikk for å studere svingninger og i oscilloskoper for å sammenligne signalfrekvenser.`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-6-1-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-6-1-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-1',
        number: '6.1.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn punktene på kurven for de oppgitte verdiene av $t$.',
        subTasks: [
          { label: 'a', task: '$\\begin{cases} x = 2t + 1 \\\\ y = t - 3 \\end{cases}$ for $t = 0, 1, 2$', solution: '$t = 0$: $(1, -3)$, $t = 1$: $(3, -2)$, $t = 2$: $(5, -1)$' },
          { label: 'b', task: '$\\begin{cases} x = t^2 \\\\ y = 2t \\end{cases}$ for $t = -2, -1, 0, 1, 2$', solution: '$t = -2$: $(4, -4)$, $t = -1$: $(1, -2)$, $t = 0$: $(0, 0)$, $t = 1$: $(1, 2)$, $t = 2$: $(4, 4)$' },
          { label: 'c', task: '$\\begin{cases} x = 3\\cos t \\\\ y = 3\\sin t \\end{cases}$ for $t = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}$', solution: '$t = 0$: $(3, 0)$, $t = \\frac{\\pi}{2}$: $(0, 3)$, $t = \\pi$: $(-3, 0)$, $t = \\frac{3\\pi}{2}$: $(0, -3)$' },
        ],
        solution: 'Se deloppgavene.',
        hints: ['Sett inn verdien av $t$ i begge likningene.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-6-1-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-2',
        number: '6.1.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Eliminer parameteren og finn den kartesiske likningen for kurven.',
        subTasks: [
          { label: 'a', task: '$\\begin{cases} x = t \\\\ y = 2t + 5 \\end{cases}$', solution: 'Siden $t = x$, får vi $y = 2x + 5$ (rett linje).' },
          { label: 'b', task: '$\\begin{cases} x = t + 2 \\\\ y = t^2 \\end{cases}$', solution: '$t = x - 2$, så $y = (x - 2)^2$ (parabel med toppunkt i $(2, 0)$).' },
          { label: 'c', task: '$\\begin{cases} x = 2\\cos t \\\\ y = 2\\sin t \\end{cases}$', solution: '$\\cos t = \\frac{x}{2}$, $\\sin t = \\frac{y}{2}$. Bruker $\\cos^2 t + \\sin^2 t = 1$: $\\frac{x^2}{4} + \\frac{y^2}{4} = 1$, altså $x^2 + y^2 = 4$ (sirkel med radius 2).' },
          { label: 'd', task: '$\\begin{cases} x = 4\\cos t \\\\ y = 2\\sin t \\end{cases}$', solution: '$\\cos t = \\frac{x}{4}$, $\\sin t = \\frac{y}{2}$. Bruker identiteten: $\\frac{x^2}{16} + \\frac{y^2}{4} = 1$ (ellipse).' },
        ],
        solution: 'a) $y = 2x + 5$, b) $y = (x-2)^2$, c) $x^2 + y^2 = 4$, d) $\\frac{x^2}{16} + \\frac{y^2}{4} = 1$',
        hints: ['Løs én likning for $t$ og sett inn i den andre.', 'For trigonometriske funksjoner: bruk $\\cos^2 t + \\sin^2 t = 1$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-6-1-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-3',
        number: '6.1.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn en parameterframstilling for:',
        subTasks: [
          { label: 'a', task: 'Linjen gjennom $(1, 2)$ med retningsvektor $[3, -1]$', solution: '$\\begin{cases} x = 1 + 3t \\\\ y = 2 - t \\end{cases}, t \\in \\mathbb{R}$' },
          { label: 'b', task: 'Sirkelen med sentrum $(0, 0)$ og radius $5$', solution: '$\\begin{cases} x = 5\\cos t \\\\ y = 5\\sin t \\end{cases}, t \\in [0, 2\\pi]$' },
          { label: 'c', task: 'Sirkelen med sentrum $(-2, 3)$ og radius $4$', solution: '$\\begin{cases} x = -2 + 4\\cos t \\\\ y = 3 + 4\\sin t \\end{cases}, t \\in [0, 2\\pi]$' },
          { label: 'd', task: 'Ellipsen $\\frac{x^2}{25} + \\frac{y^2}{9} = 1$', solution: '$\\begin{cases} x = 5\\cos t \\\\ y = 3\\sin t \\end{cases}, t \\in [0, 2\\pi]$' },
        ],
        solution: 'Se deloppgavene.',
        hints: ['Linje: $x = x_0 + at$, $y = y_0 + bt$ der $(x_0, y_0)$ er et punkt og $[a, b]$ er retningsvektoren.', 'Sirkel/ellipse: $x = a\\cos t$, $y = b\\sin t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-6-1-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-4',
        number: '6.1.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Tegn kurven gitt ved parameterframstillingen. Marker retningen med pil.',
        subTasks: [
          { label: 'a', task: '$\\begin{cases} x = t \\\\ y = t^2 \\end{cases}, t \\in [-2, 2]$', solution: 'Parabel $y = x^2$ fra $(-2, 4)$ til $(2, 4)$, med bevegelse fra venstre mot høyre.' },
          { label: 'b', task: '$\\begin{cases} x = \\cos t \\\\ y = \\sin t \\end{cases}, t \\in [0, \\pi]$', solution: 'Øvre halvdel av enhetssirkelen, fra $(1, 0)$ til $(-1, 0)$, bevegelse mot klokka.' },
          { label: 'c', task: '$\\begin{cases} x = 2 + \\cos t \\\\ y = 1 + \\sin t \\end{cases}, t \\in [0, 2\\pi]$', solution: 'Sirkel med sentrum $(2, 1)$ og radius $1$, startpunkt $(3, 1)$, bevegelse mot klokka.' },
        ],
        solution: 'Se deloppgavene for beskrivelser.',
        hints: ['Lag en verditabell med noen verdier av $t$.', 'Plot punktene og forbind dem i riktig rekkefølge.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-6-1-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-5',
        number: '6.1.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn tangentvektoren $\\vec{v}(t) = [x\'(t), y\'(t)]$ for kurven.',
        subTasks: [
          { label: 'a', task: '$\\begin{cases} x = t^2 \\\\ y = t^3 \\end{cases}$', solution: '$x\'(t) = 2t$, $y\'(t) = 3t^2$, så $\\vec{v}(t) = [2t, 3t^2]$' },
          { label: 'b', task: '$\\begin{cases} x = 3\\cos t \\\\ y = 3\\sin t \\end{cases}$', solution: '$x\'(t) = -3\\sin t$, $y\'(t) = 3\\cos t$, så $\\vec{v}(t) = [-3\\sin t, 3\\cos t]$' },
          { label: 'c', task: '$\\begin{cases} x = e^t \\\\ y = e^{-t} \\end{cases}$', solution: '$x\'(t) = e^t$, $y\'(t) = -e^{-t}$, så $\\vec{v}(t) = [e^t, -e^{-t}]$' },
        ],
        solution: 'a) $[2t, 3t^2]$, b) $[-3\\sin t, 3\\cos t]$, c) $[e^t, -e^{-t}]$',
        hints: ['Deriver $x(t)$ og $y(t)$ med hensyn på $t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-6-1-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-6',
        number: '6.1.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'En partikkel beveger seg langs kurven $\\begin{cases} x = t^2 - 4t \\\\ y = t^2 + 2t \\end{cases}$, der $t$ er tid i sekunder.',
        subTasks: [
          { label: 'a', task: 'Finn posisjonen til partikkelen ved $t = 0$, $t = 1$ og $t = 2$.', solution: '$t = 0$: $(0, 0)$, $t = 1$: $(-3, 3)$, $t = 2$: $(-4, 8)$' },
          { label: 'b', task: 'Finn hastighetsvektoren $\\vec{v}(t)$.', solution: '$\\vec{v}(t) = [2t - 4, 2t + 2]$' },
          { label: 'c', task: 'Finn farten $|\\vec{v}(t)|$ ved $t = 0$ og $t = 2$.', solution: '$|\\vec{v}(0)| = |[-4, 2]| = \\sqrt{16 + 4} = \\sqrt{20} = 2\\sqrt{5}$\n$|\\vec{v}(2)| = |[0, 6]| = 6$' },
          { label: 'd', task: 'Når er farten minst?', solution: '$|\\vec{v}(t)|^2 = (2t-4)^2 + (2t+2)^2 = 4t^2 - 16t + 16 + 4t^2 + 8t + 4 = 8t^2 - 8t + 20$.\nDeriverer: $16t - 8 = 0 \\Rightarrow t = \\frac{1}{2}$.\nMinste fart ved $t = \\frac{1}{2}$: $|\\vec{v}(\\frac{1}{2})| = \\sqrt{8 \\cdot \\frac{1}{4} - 8 \\cdot \\frac{1}{2} + 20} = \\sqrt{2 - 4 + 20} = \\sqrt{18} = 3\\sqrt{2}$.' },
        ],
        solution: 'a) $(0,0)$, $(-3,3)$, $(-4,8)$, b) $[2t-4, 2t+2]$, c) $2\\sqrt{5}$ og $6$, d) Ved $t = \\frac{1}{2}$, fart $3\\sqrt{2}$',
        hints: ['Fart er lengden av hastighetsvektoren.', 'For å finne minimum fart, minimer $|\\vec{v}(t)|^2$ (enklere enn å derivere røtter).'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-6-1-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-7',
        number: '6.1.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn stigningstallet til tangenten og likningen for tangentlinjen i det oppgitte punktet.',
        subTasks: [
          { label: 'a', task: '$\\begin{cases} x = t^2 \\\\ y = t^3 \\end{cases}$ ved $t = 1$', solution: 'Ved $t = 1$: punkt $(1, 1)$.\n$x\'(1) = 2$, $y\'(1) = 3$, stigningstall $= \\frac{3}{2}$.\nTangent: $y - 1 = \\frac{3}{2}(x - 1)$, altså $y = \\frac{3}{2}x - \\frac{1}{2}$.' },
          { label: 'b', task: '$\\begin{cases} x = \\cos t \\\\ y = \\sin t \\end{cases}$ ved $t = \\frac{\\pi}{4}$', solution: 'Ved $t = \\frac{\\pi}{4}$: punkt $(\\frac{\\sqrt{2}}{2}, \\frac{\\sqrt{2}}{2})$.\n$x\'(\\frac{\\pi}{4}) = -\\frac{\\sqrt{2}}{2}$, $y\'(\\frac{\\pi}{4}) = \\frac{\\sqrt{2}}{2}$, stigningstall $= -1$.\nTangent: $y - \\frac{\\sqrt{2}}{2} = -1(x - \\frac{\\sqrt{2}}{2})$, altså $y = -x + \\sqrt{2}$.' },
          { label: 'c', task: '$\\begin{cases} x = e^t \\\\ y = e^{2t} \\end{cases}$ ved $t = 0$', solution: 'Ved $t = 0$: punkt $(1, 1)$.\n$x\'(0) = 1$, $y\'(0) = 2$, stigningstall $= 2$.\nTangent: $y - 1 = 2(x - 1)$, altså $y = 2x - 1$.' },
        ],
        solution: 'a) $y = \\frac{3}{2}x - \\frac{1}{2}$, b) $y = -x + \\sqrt{2}$, c) $y = 2x - 1$',
        hints: ['Stigningstall $= \\frac{y\'(t)}{x\'(t)}$.', 'Tangentlinje: $y - y_0 = a(x - x_0)$ der $a$ er stigningstallet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-6-1-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-8',
        number: '6.1.8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn alle verdier av $t$ der kurven har horisontal eller vertikal tangent.',
        subTasks: [
          { label: 'a', task: '$\\begin{cases} x = t^3 - 3t \\\\ y = t^2 - 4 \\end{cases}$', solution: '$x\'(t) = 3t^2 - 3 = 3(t^2 - 1)$, $y\'(t) = 2t$.\nHorisontal tangent ($y\' = 0$): $t = 0$, punkt $(0, -4)$.\nVertikal tangent ($x\' = 0$): $t = \\pm 1$, punkter $(-2, -3)$ og $(2, -3)$.' },
          { label: 'b', task: '$\\begin{cases} x = \\sin t \\\\ y = \\cos 2t \\end{cases}$, $t \\in [0, 2\\pi]$', solution: '$x\'(t) = \\cos t$, $y\'(t) = -2\\sin 2t = -4\\sin t \\cos t$.\nHorisontal ($y\' = 0$): $\\sin t = 0$ eller $\\cos t = 0$, dvs. $t = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}, 2\\pi$.\nVertikal ($x\' = 0$): $\\cos t = 0$, dvs. $t = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$.\nMerk: Ved $t = \\frac{\\pi}{2}$ og $t = \\frac{3\\pi}{2}$ er både $x\' = 0$ og $y\' = 0$ (singulære punkter).' },
        ],
        solution: 'a) Horisontal ved $t = 0$, vertikal ved $t = \\pm 1$. b) Se løsning for singulære punkter.',
        hints: ['Horisontal tangent: $y\'(t) = 0$ og $x\'(t) \\neq 0$.', 'Vertikal tangent: $x\'(t) = 0$ og $y\'(t) \\neq 0$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-6-1-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-9',
        number: '6.1.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Kurven $\\begin{cases} x = a\\cos^3 t \\\\ y = a\\sin^3 t \\end{cases}$ kalles en **astroide**.',
        subTasks: [
          { label: 'a', task: 'Vis at den kartesiske likningen kan skrives $x^{2/3} + y^{2/3} = a^{2/3}$.', solution: 'Vi har $\\cos t = \\left(\\frac{x}{a}\\right)^{1/3}$ og $\\sin t = \\left(\\frac{y}{a}\\right)^{1/3}$.\nBruker $\\cos^2 t + \\sin^2 t = 1$:\n$\\left(\\frac{x}{a}\\right)^{2/3} + \\left(\\frac{y}{a}\\right)^{2/3} = 1$\n$\\frac{x^{2/3}}{a^{2/3}} + \\frac{y^{2/3}}{a^{2/3}} = 1$\n$x^{2/3} + y^{2/3} = a^{2/3}$' },
          { label: 'b', task: 'Finn tangentvektoren og bestem hvor kurven har horisontale og vertikale tangenter.', solution: '$x\'(t) = -3a\\cos^2 t \\sin t$, $y\'(t) = 3a\\sin^2 t \\cos t$.\nHorisontal ($y\' = 0$): $\\sin^2 t \\cos t = 0$, dvs. $t = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}$.\nVertikal ($x\' = 0$): $\\cos^2 t \\sin t = 0$, samme verdier.\nDisse er hjørnepunktene på astroiden: $(a, 0), (0, a), (-a, 0), (0, -a)$.' },
          { label: 'c', task: 'Beskriv formen på kurven for $a = 1$.', solution: 'Astroiden er en stjernelignende kurve med fire "spisser" (cusps) i punktene $(\\pm 1, 0)$ og $(0, \\pm 1)$. Kurven buer innover mellom spissene.' },
        ],
        solution: 'Se deloppgavene.',
        hints: ['For a): Opphøy $\\cos t$ og $\\sin t$ i $\\frac{2}{3}$ og bruk den grunnleggende trigonometriske identiteten.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-6-1-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-10',
        number: '6.1.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En kurve er gitt ved $\\begin{cases} x = t - \\sin t \\\\ y = 1 - \\cos t \\end{cases}$, $t \\in [0, 2\\pi]$ (en sykloid-bue).',
        subTasks: [
          { label: 'a', task: 'Finn startpunkt og sluttpunkt.', solution: 'Start ($t = 0$): $(0 - 0, 1 - 1) = (0, 0)$.\nSlutt ($t = 2\\pi$): $(2\\pi - 0, 1 - 1) = (2\\pi, 0)$.' },
          { label: 'b', task: 'Finn tangentvektoren og bestem hvor kurven har horisontal tangent.', solution: '$x\'(t) = 1 - \\cos t$, $y\'(t) = \\sin t$.\nHorisontal ($y\' = 0$): $\\sin t = 0$, dvs. $t = 0, \\pi, 2\\pi$.\nVed $t = 0$ og $t = 2\\pi$ er også $x\' = 0$ (singulære punkter/cusps).\nVed $t = \\pi$: punkt $(\\pi, 2)$, $x\'(\\pi) = 2 \\neq 0$. Horisontal tangent i $(\\pi, 2)$.' },
          { label: 'c', task: 'Hva skjer i punktene $t = 0$ og $t = 2\\pi$?', solution: 'Her er $x\'(t) = y\'(t) = 0$, så tangentvektoren er nullvektoren. Dette er **spisse punkter** (cusps) der kurven berører grunnlinjen $y = 0$. Kurven har en skarp spiss oppover i disse punktene.' },
        ],
        solution: 'Start/slutt: $(0,0)$ og $(2\\pi, 0)$. Horisontal tangent i $(\\pi, 2)$. Cusps i endepunktene.',
        hints: ['Et cusp (spisst punkt) oppstår når tangentvektoren er null.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 11
    {
      id: 'r2-6-1-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-11',
        number: '6.1.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Vis at kurven $\\begin{cases} x = t^2 \\\\ y = t^3 - 3t \\end{cases}$ krysser seg selv, og finn krysningspunktet.',
        solution: `Vi søker to ulike parameterverdier $t_1$ og $t_2$ som gir samme punkt.

$x$: $t_1^2 = t_2^2 \\Rightarrow t_2 = \\pm t_1$

Siden vi vil ha $t_1 \\neq t_2$, må $t_2 = -t_1$.

$y$: $t_1^3 - 3t_1 = t_2^3 - 3t_2$

Med $t_2 = -t_1$:
$t_1^3 - 3t_1 = (-t_1)^3 - 3(-t_1) = -t_1^3 + 3t_1$

$2t_1^3 - 6t_1 = 0$
$2t_1(t_1^2 - 3) = 0$
$t_1 = 0$ eller $t_1 = \\pm\\sqrt{3}$

For $t_1 = 0$ får vi $t_2 = 0$, som ikke er ulikt.

For $t_1 = \\sqrt{3}$ og $t_2 = -\\sqrt{3}$:
$x = (\\sqrt{3})^2 = 3$
$y = (\\sqrt{3})^3 - 3\\sqrt{3} = 3\\sqrt{3} - 3\\sqrt{3} = 0$

**Krysningspunktet er $(3, 0)$**, der kurven passerer ved $t = \\sqrt{3}$ og $t = -\\sqrt{3}$.`,
        hints: ['Kurven krysser seg selv når $(x(t_1), y(t_1)) = (x(t_2), y(t_2))$ for $t_1 \\neq t_2$.', 'Start med å løse $x(t_1) = x(t_2)$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 12
    {
      id: 'r2-6-1-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-12',
        number: '6.1.12',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn en parameterframstilling for hver av kurvene. (Flere svar er mulige.)',
        subTasks: [
          { label: 'a', task: 'Linjestykket fra $(1, 2)$ til $(4, 5)$', solution: '$\\begin{cases} x = 1 + 3t \\\\ y = 2 + 3t \\end{cases}, t \\in [0, 1]$\n(Ved $t=0$: $(1,2)$, ved $t=1$: $(4,5)$.)' },
          { label: 'b', task: 'Øvre halvdel av sirkelen $x^2 + y^2 = 16$', solution: '$\\begin{cases} x = 4\\cos t \\\\ y = 4\\sin t \\end{cases}, t \\in [0, \\pi]$' },
          { label: 'c', task: 'Den delen av parabelen $y = x^2$ fra $(−2, 4)$ til $(3, 9)$', solution: '$\\begin{cases} x = t \\\\ y = t^2 \\end{cases}, t \\in [-2, 3]$' },
        ],
        solution: 'Se deloppgavene.',
        hints: ['For linjestykket: bruk retningsvektor og begrens $t$ slik at endepunktene stemmer.', 'For sirkelbue: velg parameterintervall for riktig del av sirkelen.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 13
    {
      id: 'r2-6-1-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-13',
        number: '6.1.13',
        type: 'classic',
        difficulty: 'medium',
        task: 'En ellipse har halvakser $a = 4$ og $b = 3$, og sentrum i $(1, -2)$.',
        subTasks: [
          { label: 'a', task: 'Finn en parameterframstilling for ellipsen.', solution: '$\\begin{cases} x = 1 + 4\\cos t \\\\ y = -2 + 3\\sin t \\end{cases}, t \\in [0, 2\\pi]$' },
          { label: 'b', task: 'Finn den kartesiske likningen.', solution: '$\\frac{(x-1)^2}{16} + \\frac{(y+2)^2}{9} = 1$' },
          { label: 'c', task: 'Finn de fire punktene der ellipsen krysser aksene (parallelle med koordinataksene gjennom sentrum).', solution: '$(5, -2)$, $(-3, -2)$, $(1, 1)$, $(1, -5)$' },
        ],
        solution: 'a) Se løsning. b) $\\frac{(x-1)^2}{16} + \\frac{(y+2)^2}{9} = 1$. c) $(5,-2), (-3,-2), (1,1), (1,-5)$',
        hints: ['Sentrum forskjøvet ellipse: $x = h + a\\cos t$, $y = k + b\\sin t$ der $(h, k)$ er sentrum.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 14
    {
      id: 'r2-6-1-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-14',
        number: '6.1.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Kurven $\\begin{cases} x = 3t^2 \\\\ y = t^3 - 3t \\end{cases}$ kalles en **Neilsk parabel** (eller semikubisk parabel).',
        subTasks: [
          { label: 'a', task: 'Vis at kurven er symmetrisk om $x$-aksen.', solution: 'Hvis $(x(t), y(t))$ er på kurven, er også $(x(-t), y(-t))$ på kurven.\n$x(-t) = 3(-t)^2 = 3t^2 = x(t)$\n$y(-t) = (-t)^3 - 3(-t) = -t^3 + 3t = -(t^3 - 3t) = -y(t)$\nAltså: $(x(t), -y(t))$ er også på kurven, som betyr symmetri om $x$-aksen.' },
          { label: 'b', task: 'Finn hvor kurven krysser $x$-aksen og beskriv tangentvektoren i disse punktene.', solution: '$y = 0$ når $t^3 - 3t = t(t^2 - 3) = 0$, dvs. $t = 0, \\pm\\sqrt{3}$.\n$t = 0$: $(0, 0)$, tangent $[0, -3]$ (peker nedover, vertikal).\n$t = \\sqrt{3}$: $(9, 0)$, tangent $[6\\sqrt{3}, 6]$.\n$t = -\\sqrt{3}$: $(9, 0)$, tangent $[-6\\sqrt{3}, -6]$.\nKurven har et cusp i origo og to greiner som møtes i $(9, 0)$ fra ulike retninger.' },
          { label: 'c', task: 'Eliminer parameteren og finn den kartesiske likningen.', solution: 'Fra $x = 3t^2$ får vi $t^2 = \\frac{x}{3}$.\n$y^2 = (t^3 - 3t)^2 = t^2(t^2 - 3)^2 = \\frac{x}{3}\\left(\\frac{x}{3} - 3\\right)^2 = \\frac{x}{3} \\cdot \\frac{(x-9)^2}{9} = \\frac{x(x-9)^2}{27}$\nAltså: $27y^2 = x(x-9)^2$ eller $y^2 = \\frac{x^3 - 18x^2 + 81x}{27}$.' },
        ],
        solution: 'Se deloppgavene. Kartesisk likning: $27y^2 = x(x-9)^2$.',
        hints: ['For symmetri: vis at $(x, y)$ på kurven betyr at $(x, -y)$ også er på kurven.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 15
    {
      id: 'r2-6-1-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-15',
        number: '6.1.15',
        type: 'interactive',
        difficulty: 'medium',
        tool: 'geogebra-graph',
        geogebraAppType: 'graphing',
        task: 'Bruk GeoGebra til å utforske parameterkurver.',
        subTasks: [
          { label: 'a', task: 'Skriv inn `Curve(2cos(t), 2sin(t), t, 0, 2pi)` og beskriv hva du ser.', solution: 'En sirkel med radius 2 og sentrum i origo.' },
          { label: 'b', task: 'Endre til `Curve(3cos(t), 2sin(t), t, 0, 2pi)` og beskriv forskjellen.', solution: 'En ellipse med halvakse 3 i $x$-retning og halvakse 2 i $y$-retning.' },
          { label: 'c', task: 'Prøv `Curve(cos(3t), sin(2t), t, 0, 2pi)` og beskriv mønsteret.', solution: 'En Lissajous-kurve med et komplekst mønster. Kurven danner en figur som ligner på en bretzel eller sammenvevde løkker.' },
        ],
        solution: 'Utforsk og beskriv mønstrene.',
        hints: ['I GeoGebra brukes Curve(x(t), y(t), t, start, slutt) for parameterkurver.'],
        initialCommands: [''],
      },
    },

    // Oppgave 16
    {
      id: 'r2-6-1-ex-block-16',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-16',
        number: '6.1.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En **kardioide** (hjerteformet kurve) har parameterframstillingen:\n$$\\begin{cases} x = a(2\\cos t - \\cos 2t) \\\\ y = a(2\\sin t - \\sin 2t) \\end{cases}, \\quad t \\in [0, 2\\pi]$$',
        subTasks: [
          { label: 'a', task: 'Finn punktet der $t = 0$, $t = \\frac{\\pi}{2}$, $t = \\pi$, og $t = \\frac{3\\pi}{2}$.', solution: '$t = 0$: $(2a - a, 0) = (a, 0)$\n$t = \\frac{\\pi}{2}$: $(0 - 0, 2a - 0) = (0, 2a)$\n$t = \\pi$: $(-2a - a, 0) = (-3a, 0)$\n$t = \\frac{3\\pi}{2}$: $(0 - 0, -2a - 0) = (0, -2a)$' },
          { label: 'b', task: 'Finn tangentvektoren og bestem hvor kurven har horisontal tangent.', solution: '$x\'(t) = a(-2\\sin t + 2\\sin 2t) = 2a(\\sin 2t - \\sin t)$\n$y\'(t) = a(2\\cos t - 2\\cos 2t) = 2a(\\cos t - \\cos 2t)$\n\nHorisontal tangent når $y\'(t) = 0$:\n$\\cos t - \\cos 2t = 0$\n$\\cos t - (2\\cos^2 t - 1) = 0$\n$2\\cos^2 t - \\cos t - 1 = 0$\n$(2\\cos t + 1)(\\cos t - 1) = 0$\n$\\cos t = -\\frac{1}{2}$ eller $\\cos t = 1$\n$t = \\frac{2\\pi}{3}, \\frac{4\\pi}{3}$ eller $t = 0$\n\nVed $t = 0$ er også $x\' = 0$ (cusp).\nHorisontale tangenter ved $t = \\frac{2\\pi}{3}$ og $t = \\frac{4\\pi}{3}$.' },
          { label: 'c', task: 'Beskriv kurven med egne ord.', solution: 'Kardioiden er en hjerteformet kurve med en spiss (cusp) i $(a, 0)$. Den strekker seg fra $(-3a, 0)$ til $(a, 0)$ og har maksimal bredde på $4a$.' },
        ],
        solution: 'Se deloppgavene.',
        hints: ['Bruk formelen $\\cos 2t = 2\\cos^2 t - 1$ for å løse likningen i b).'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 17
    {
      id: 'r2-6-1-ex-block-17',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-17',
        number: '6.1.17',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn en parameterframstilling for sirkelen som går med klokka, starter i punktet $(0, 3)$, og går én gang rundt.',
        solution: `Vi trenger en sirkel med radius 3 og sentrum i origo, som:
1. Starter i $(0, 3)$ ved $t = 0$
2. Går med klokka

Standard parametrisering $x = 3\\cos t$, $y = 3\\sin t$ starter i $(3, 0)$ og går mot klokka.

For å starte i $(0, 3)$, kan vi bruke $x = 3\\sin t$, $y = 3\\cos t$.
Ved $t = 0$: $(0, 3)$ ✓

La oss sjekke retningen ved $t = \\frac{\\pi}{2}$: $(3, 0)$.
Fra $(0, 3)$ til $(3, 0)$ er bevegelse nedover og til høyre - altså med klokka ✓

**Svar:**
$$\\begin{cases} x = 3\\sin t \\\\ y = 3\\cos t \\end{cases}, \\quad t \\in [0, 2\\pi]$$

Alternativt: $x = 3\\cos(-t + \\frac{\\pi}{2})$, $y = 3\\sin(-t + \\frac{\\pi}{2})$ som forenkles til det samme.`,
        hints: ['Standard parametrisering går mot klokka. Hvordan kan du endre retningen?', 'Bytte $\\sin$ og $\\cos$ endrer startpunkt og retning.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 18
    {
      id: 'r2-6-1-ex-block-18',
      type: 'exercise',
      exercise: {
        id: 'r2-6-1-ex-18',
        number: '6.1.18',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'To partikler beveger seg i planet. Partikkel A følger banen $\\begin{cases} x = t \\\\ y = t^2 \\end{cases}$ og partikkel B følger banen $\\begin{cases} x = 2 - t \\\\ y = 4 - 4t + t^2 \\end{cases}$, der $t$ er tid i sekunder.',
        subTasks: [
          { label: 'a', task: 'Vis at begge partiklene beveger seg langs samme parabel.', solution: 'Partikkel A: $y = x^2$ (sett $t = x$).\nPartikkel B: $y = 4 - 4t + t^2 = (2-t)^2 = x^2$ (sett $x = 2-t$).\nBegge følger parabelen $y = x^2$.' },
          { label: 'b', task: 'Beskriv hvordan partiklene beveger seg.', solution: 'A: Ved $t = 0$ er den i $(0, 0)$. Beveger seg mot høyre langs parabelen (positive $x$-retning).\nB: Ved $t = 0$ er den i $(2, 4)$. Beveger seg mot venstre (negative $x$-retning) fordi $x = 2 - t$ avtar.' },
          { label: 'c', task: 'Finn når og hvor partiklene kolliderer (er på samme sted til samme tid).', solution: 'Kollisjon krever at posisjonene er like:\n$t = 2 - t \\Rightarrow 2t = 2 \\Rightarrow t = 1$\n\nVed $t = 1$:\nA: $(1, 1)$\nB: $(1, 1)$ ✓\n\n**Partiklene kolliderer ved $t = 1$ i punktet $(1, 1)$.**' },
        ],
        solution: 'Begge følger $y = x^2$. A går mot høyre, B mot venstre. Kollisjon ved $t = 1$ i $(1, 1)$.',
        hints: ['For kollisjon må begge koordinatene være like til samme tid.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [
    {
      id: 'r2-6-1-ex-1',
      number: '6.1.1',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn punktene på kurven for de oppgitte verdiene av $t$.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-2',
      number: '6.1.2',
      type: 'classic',
      difficulty: 'lett',
      task: 'Eliminer parameteren og finn den kartesiske likningen for kurven.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-3',
      number: '6.1.3',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn en parameterframstilling for ulike kurver.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-4',
      number: '6.1.4',
      type: 'classic',
      difficulty: 'medium',
      task: 'Tegn kurven gitt ved parameterframstillingen.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-5',
      number: '6.1.5',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn tangentvektoren for kurven.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-6',
      number: '6.1.6',
      type: 'classic',
      difficulty: 'medium',
      task: 'Analyser bevegelsen til en partikkel.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-7',
      number: '6.1.7',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn stigningstallet og likning for tangentlinjen.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-8',
      number: '6.1.8',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn horisontale og vertikale tangenter.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-9',
      number: '6.1.9',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser en astroide.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-10',
      number: '6.1.10',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser en sykloid-bue.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-11',
      number: '6.1.11',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Finn krysningspunktet for en selvkryssende kurve.',
      solution: 'Krysningspunktet er $(3, 0)$.',
    },
    {
      id: 'r2-6-1-ex-12',
      number: '6.1.12',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn parameterframstilling for gitte kurver.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-13',
      number: '6.1.13',
      type: 'classic',
      difficulty: 'medium',
      task: 'Analyser en forskjøvet ellipse.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-14',
      number: '6.1.14',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser en Neilsk parabel.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-15',
      number: '6.1.15',
      type: 'interactive',
      difficulty: 'medium',
      tool: 'geogebra-graph',
      task: 'Utforsk parameterkurver i GeoGebra.',
      solution: 'Utforsk og beskriv mønstrene.',
    },
    {
      id: 'r2-6-1-ex-16',
      number: '6.1.16',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser en kardioide.',
      solution: 'Se deloppgavene.',
    },
    {
      id: 'r2-6-1-ex-17',
      number: '6.1.17',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn parameterframstilling for sirkel med gitt startpunkt og retning.',
      solution: 'Se løsning.',
    },
    {
      id: 'r2-6-1-ex-18',
      number: '6.1.18',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser kollisjonen mellom to partikler.',
      solution: 'Kollisjon ved $t = 1$ i $(1, 1)$.',
    },
  ],
};

export const CHAPTER_R2_6_2: TextbookChapter = {
  id: 'r2-6-2',
  courseId: 'r2',
  chapterNumber: '6.2',
  title: 'Derivasjon av vektorfunksjoner',
  description: 'Derivere kurver gitt ved parameterframstilling, finne tangent- og normalvektorer, hastighet, fart og buelengde.',
  estimatedMinutes: 55,
  competenceGoals: [
    'bruke parameterframstilling til kurver',
    'derivere vektorfunksjoner',
    'finne tangentvektor og normalvektor til en kurve',
    'beregne hastighet og fart langs en kurve',
    'beregne buelengde',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-6-2-intro',
      type: 'text',
      content: `## Fra statiske kurver til bevegelse

I forrige kapittel larte vi om parameterframstilling av kurver. Na skal vi se på hvordan vi kan **derivere** vektorfunksjoner for a beskrive bevegelse langs en kurve.

Nar vi deriverer en vektorfunksjon, far vi informasjon om:
- **Retningen** kurven beveger seg i (tangentvektor)
- **Hastigheten** til et objekt som beveger seg langs kurven
- **Farten** (hvor raskt objektet beveger seg)
- **Buelengden** (hvor langt kurven strekker seg)

Dette har mange praktiske anvendelser:
- Beregne banen til en ball kastet gjennom luften
- Finne hastigheten til en bil i en sving
- Bestemme lengden av en sti eller vei
- Animasjon og bevegelse i dataspill`,
    },

    // ========== VEKTORFUNKSJONER ==========
    {
      id: 'r2-6-2-vektorfunksjoner',
      type: 'text',
      content: `## Vektorfunksjoner

En **vektorfunksjon** (eller **banekurve**) beskriver en kurve i planet ved hjelp av en parameter $t$.`,
    },

    {
      id: 'r2-6-2-def-vektorfunksjon',
      type: 'definition',
      title: 'Vektorfunksjon',
      content: `En **vektorfunksjon** i planet er en funksjon

$$\\vec{r}(t) = \\begin{pmatrix} x(t) \\\\ y(t) \\end{pmatrix}$$

der $x(t)$ og $y(t)$ er reelle funksjoner av parameteren $t$.

Vi kan ogsa skrive dette som $\\vec{r}(t) = (x(t), y(t))$ eller $\\vec{r}(t) = x(t)\\vec{i} + y(t)\\vec{j}$.

Parameteren $t$ representerer ofte **tid**, men kan ogsa vare en hvilken som helst annen variabel.`,
    },

    {
      id: 'r2-6-2-example-1',
      type: 'example',
      title: 'Eksempel 1: Sirkel som vektorfunksjon',
      problem: `Beskriv sirkelen med radius 3 og sentrum i origo som en vektorfunksjon.`,
      solution: `**Løsning:**

Vi bruker parameterframstillingen for en sirkel:

$$\\vec{r}(t) = \\begin{pmatrix} 3\\cos t \\\\ 3\\sin t \\end{pmatrix}, \\quad t \\in [0, 2\\pi]$$

Her er:
- $x(t) = 3\\cos t$
- $y(t) = 3\\sin t$

Nar $t$ gar fra $0$ til $2\\pi$, beveger vi oss en gang rundt sirkelen mot klokken.

**Kontroll:** $x^2 + y^2 = 9\\cos^2 t + 9\\sin^2 t = 9(\\cos^2 t + \\sin^2 t) = 9$ \\checkmark`,
    },

    {
      id: 'r2-6-2-example-2',
      type: 'example',
      title: 'Eksempel 2: Rettlinjet bevegelse',
      problem: `En partikkel starter i punktet $(1, 2)$ og beveger seg med konstant hastighet i retning $\\vec{v} = (3, 4)$. Skriv opp vektorfunksjonen for partikkelens bane.`,
      solution: `**Løsning:**

Startpunktet er $(1, 2)$, og partikkelen beveger seg langs retningsvektoren $(3, 4)$.

Vektorfunksjonen blir:

$$\\vec{r}(t) = \\begin{pmatrix} 1 \\\\ 2 \\end{pmatrix} + t \\begin{pmatrix} 3 \\\\ 4 \\end{pmatrix} = \\begin{pmatrix} 1 + 3t \\\\ 2 + 4t \\end{pmatrix}$$

Her er:
- $x(t) = 1 + 3t$
- $y(t) = 2 + 4t$

Nar $t = 0$, er partikkelen i $(1, 2)$.
Nar $t = 1$, er partikkelen i $(4, 6)$.
Nar $t = 2$, er partikkelen i $(7, 10)$.

Partikkelen beveger seg langs en rett linje.`,
    },

    // ========== DERIVASJON AV VEKTORFUNKSJONER ==========
    {
      id: 'r2-6-2-derivasjon-intro',
      type: 'text',
      content: `## Derivasjon av vektorfunksjoner

For a derivere en vektorfunksjon, deriverer vi ganske enkelt hver komponent for seg.`,
    },

    {
      id: 'r2-6-2-def-derivasjon',
      type: 'definition',
      title: 'Den deriverte av en vektorfunksjon',
      content: `La $\\vec{r}(t) = (x(t), y(t))$ vare en vektorfunksjon der $x(t)$ og $y(t)$ er deriverbare.

Den **deriverte** av $\\vec{r}(t)$ er:

$$\\vec{r}'(t) = \\begin{pmatrix} x'(t) \\\\ y'(t) \\end{pmatrix}$$

Vi deriverer altsa hver komponent for seg med hensyn på $t$.`,
    },

    {
      id: 'r2-6-2-example-3',
      type: 'example',
      title: 'Eksempel 3: Derivere en vektorfunksjon',
      problem: `Finn $\\vec{r}'(t)$ nar $\\vec{r}(t) = (t^2, t^3 - 2t)$.`,
      solution: `**Løsning:**

Vi deriverer hver komponent for seg:

$$x(t) = t^2 \\quad \\Rightarrow \\quad x'(t) = 2t$$

$$y(t) = t^3 - 2t \\quad \\Rightarrow \\quad y'(t) = 3t^2 - 2$$

Dermed er:

$$\\vec{r}'(t) = \\begin{pmatrix} 2t \\\\ 3t^2 - 2 \\end{pmatrix}$$`,
    },

    {
      id: 'r2-6-2-example-4',
      type: 'example',
      title: 'Eksempel 4: Derivere trigonometrisk vektorfunksjon',
      problem: `La $\\vec{r}(t) = (3\\cos t, 3\\sin t)$ vare parameterframstillingen for en sirkel. Finn $\\vec{r}'(t)$.`,
      solution: `**Løsning:**

Vi deriverer hver komponent:

$$x(t) = 3\\cos t \\quad \\Rightarrow \\quad x'(t) = -3\\sin t$$

$$y(t) = 3\\sin t \\quad \\Rightarrow \\quad y'(t) = 3\\cos t$$

Dermed er:

$$\\vec{r}'(t) = \\begin{pmatrix} -3\\sin t \\\\ 3\\cos t \\end{pmatrix}$$`,
    },

    // ========== TANGENTVEKTOREN ==========
    {
      id: 'r2-6-2-tangent-intro',
      type: 'text',
      content: `## Tangentvektoren

Den deriverte $\\vec{r}'(t)$ har en viktig geometrisk betydning: den er en **tangentvektor** til kurven.`,
    },

    {
      id: 'r2-6-2-def-tangent',
      type: 'definition',
      title: 'Tangentvektor',
      content: `La $\\vec{r}(t)$ vare en vektorfunksjon. Den deriverte $\\vec{r}'(t)$ er en **tangentvektor** til kurven i punktet $\\vec{r}(t)$.

Tangentvektoren peker i den retningen kurven beveger seg nar $t$ oker.

Hvis $\\vec{r}'(t) \\neq \\vec{0}$, kan vi finne **enhetstangentvektoren**:

$$\\hat{T}(t) = \\frac{\\vec{r}'(t)}{|\\vec{r}'(t)|}$$`,
    },

    {
      id: 'r2-6-2-example-5',
      type: 'example',
      title: 'Eksempel 5: Tangentvektor til sirkel',
      problem: `For sirkelen $\\vec{r}(t) = (3\\cos t, 3\\sin t)$, finn tangentvektoren for $t = \\frac{\\pi}{2}$ og vis at den star vinkelrett på posisjonsvektoren.`,
      solution: `**Løsning:**

Fra eksempel 4 har vi $\\vec{r}'(t) = (-3\\sin t, 3\\cos t)$.

For $t = \\frac{\\pi}{2}$:

$$\\vec{r}\\left(\\frac{\\pi}{2}\\right) = \\left(3\\cos\\frac{\\pi}{2}, 3\\sin\\frac{\\pi}{2}\\right) = (0, 3)$$

$$\\vec{r}'\\left(\\frac{\\pi}{2}\\right) = \\left(-3\\sin\\frac{\\pi}{2}, 3\\cos\\frac{\\pi}{2}\\right) = (-3, 0)$$

Tangentvektoren i punktet $(0, 3)$ er $(-3, 0)$, som peker i negativ $x$-retning.

**Sjekk ortogonalitet:**

$$\\vec{r}\\left(\\frac{\\pi}{2}\\right) \\cdot \\vec{r}'\\left(\\frac{\\pi}{2}\\right) = (0, 3) \\cdot (-3, 0) = 0 \\cdot (-3) + 3 \\cdot 0 = 0$$

Siden skalarproduktet er null, star vektorene vinkelrett på hverandre. Dette gir mening fordi tangentvektoren til en sirkel alltid er vinkelrett på radiusvektoren.`,
    },

    {
      id: 'r2-6-2-example-6',
      type: 'example',
      title: 'Eksempel 6: Tangentlinje til parabel',
      problem: `En kurve er gitt ved $\\vec{r}(t) = (t, t^2)$. Finn likningen for tangentlinjen i punktet der $t = 2$.`,
      solution: `**Løsning:**

**Punktet på kurven:**
$$\\vec{r}(2) = (2, 4)$$

**Tangentvektoren:**
$$\\vec{r}'(t) = (1, 2t)$$
$$\\vec{r}'(2) = (1, 4)$$

**Tangentlinjen** gar gjennom $(2, 4)$ med retningsvektor $(1, 4)$:

$$\\vec{\\ell}(s) = (2, 4) + s(1, 4) = (2 + s, 4 + 4s)$$

Pa kartesisk form: Stigningstallet er $\\frac{4}{1} = 4$.

$$y - 4 = 4(x - 2)$$
$$y = 4x - 4$$`,
    },

    // ========== NORMALVEKTOREN ==========
    {
      id: 'r2-6-2-normal-intro',
      type: 'text',
      content: `## Normalvektoren

Normalvektoren star vinkelrett på tangentvektoren og peker mot "innsiden" av kurven.`,
    },

    {
      id: 'r2-6-2-def-normal',
      type: 'definition',
      title: 'Normalvektor',
      content: `Hvis tangentvektoren er $\\vec{r}'(t) = (a, b)$, er **normalvektoren**:

$$\\vec{n}(t) = (-b, a) \\quad \\text{eller} \\quad \\vec{n}(t) = (b, -a)$$

Begge disse star vinkelrett på tangentvektoren. Den forste er rotert $90°$ mot klokken, den andre $90°$ med klokken.

**Enhetsnormalvektoren** er:

$$\\hat{N}(t) = \\frac{\\vec{n}(t)}{|\\vec{n}(t)|}$$`,
    },

    {
      id: 'r2-6-2-note-normal',
      type: 'note',
      content: `For a sjekke at normalvektoren star vinkelrett på tangentvektoren, beregn skalarproduktet:

$$(a, b) \\cdot (-b, a) = -ab + ab = 0 \\quad \\checkmark$$

Skalarproduktet er null, sa vektorene er ortogonale.`,
    },

    {
      id: 'r2-6-2-example-7',
      type: 'example',
      title: 'Eksempel 7: Tangent- og normalvektor',
      problem: `For kurven $\\vec{r}(t) = (t^2, t^3)$, finn tangent- og normalvektoren i punktet der $t = 1$.`,
      solution: `**Løsning:**

**Punktet:**
$$\\vec{r}(1) = (1, 1)$$

**Tangentvektoren:**
$$\\vec{r}'(t) = (2t, 3t^2)$$
$$\\vec{r}'(1) = (2, 3)$$

**Normalvektoren** (rotert $90°$ mot klokken):
$$\\vec{n}(1) = (-3, 2)$$

**Kontroll:** $(2, 3) \\cdot (-3, 2) = -6 + 6 = 0$ \\checkmark`,
    },

    // ========== HASTIGHETSVEKTOREN ==========
    {
      id: 'r2-6-2-hastighet-intro',
      type: 'text',
      content: `## Hastighetsvektoren

Nar parameteren $t$ representerer tid, far tangentvektoren en fysisk tolkning som **hastighetsvektor**.`,
    },

    {
      id: 'r2-6-2-def-hastighet',
      type: 'definition',
      title: 'Hastighetsvektor',
      content: `La $\\vec{r}(t)$ beskrive posisjonen til en partikkel ved tid $t$.

**Hastighetsvektoren** er den deriverte av posisjonsvektoren:

$$\\vec{v}(t) = \\vec{r}'(t) = \\begin{pmatrix} x'(t) \\\\ y'(t) \\end{pmatrix}$$

Hastighetsvektoren angir:
- **Retningen** partikkelen beveger seg
- **Farten** (via lengden $|\\vec{v}(t)|$)`,
    },

    {
      id: 'r2-6-2-example-8',
      type: 'example',
      title: 'Eksempel 8: Hastighetsvektor for kast',
      problem: `En ball kastes fra bakken med starthastighet $20$ m/s i en vinkel på $60°$ med horisontalplanet. Finn hastighetsvektoren som funksjon av tid. (Bruk $g = 10$ m/s².)`,
      solution: `**Løsning:**

**Starthastighet:**
- Horisontal komponent: $v_{0x} = 20 \\cos 60° = 10$ m/s
- Vertikal komponent: $v_{0y} = 20 \\sin 60° = 10\\sqrt{3}$ m/s

**Posisjonsvektoren:**
$$\\vec{r}(t) = \\begin{pmatrix} 10t \\\\ 10\\sqrt{3}t - 5t^2 \\end{pmatrix}$$

**Hastighetsvektoren:**
$$\\vec{v}(t) = \\vec{r}'(t) = \\begin{pmatrix} 10 \\\\ 10\\sqrt{3} - 10t \\end{pmatrix}$$

For $t = 0$: $\\vec{v}(0) = (10, 10\\sqrt{3})$ (starthastigheten)

For $t = \\sqrt{3}$: $\\vec{v}(\\sqrt{3}) = (10, 0)$ (toppunktet, kun horisontal bevegelse)`,
    },

    // ========== FART ==========
    {
      id: 'r2-6-2-fart-intro',
      type: 'text',
      content: `## Fart

**Fart** er lengden av hastighetsvektoren. Mens hastighet er en vektor med retning, er fart et tall som bare angir hvor raskt objektet beveger seg.`,
    },

    {
      id: 'r2-6-2-def-fart',
      type: 'definition',
      title: 'Fart',
      content: `**Farten** $v(t)$ til en partikkel med posisjon $\\vec{r}(t)$ er lengden av hastighetsvektoren:

$$v(t) = |\\vec{r}'(t)| = \\sqrt{(x'(t))^2 + (y'(t))^2}$$

Farten er alltid positiv (eller null).`,
    },

    {
      id: 'r2-6-2-example-9',
      type: 'example',
      title: 'Eksempel 9: Fart langs en sirkel',
      problem: `En partikkel beveger seg langs sirkelen $\\vec{r}(t) = (3\\cos t, 3\\sin t)$. Finn farten.`,
      solution: `**Løsning:**

**Hastighetsvektoren:**
$$\\vec{r}'(t) = (-3\\sin t, 3\\cos t)$$

**Farten:**
$$v(t) = |\\vec{r}'(t)| = \\sqrt{(-3\\sin t)^2 + (3\\cos t)^2}$$
$$= \\sqrt{9\\sin^2 t + 9\\cos^2 t}$$
$$= \\sqrt{9(\\sin^2 t + \\cos^2 t)}$$
$$= \\sqrt{9} = 3$$

Farten er **konstant lik 3** for alle $t$. Dette er typisk for bevegelse langs en sirkel med konstant vinkelhastighet.`,
    },

    {
      id: 'r2-6-2-example-10',
      type: 'example',
      title: 'Eksempel 10: Fart langs en parabel',
      problem: `En partikkel beveger seg langs kurven $\\vec{r}(t) = (t, t^2)$ for $t \\geq 0$. Finn farten som funksjon av $t$ og bestem farten nar $t = 2$.`,
      solution: `**Løsning:**

**Hastighetsvektoren:**
$$\\vec{r}'(t) = (1, 2t)$$

**Farten:**
$$v(t) = |\\vec{r}'(t)| = \\sqrt{1^2 + (2t)^2} = \\sqrt{1 + 4t^2}$$

**For $t = 2$:**
$$v(2) = \\sqrt{1 + 4 \\cdot 4} = \\sqrt{17} \\approx 4{,}12$$

Merk at farten oker med $t$. Nar $t = 0$ er farten $v(0) = 1$, og nar $t$ oker, oker ogsa farten.`,
    },

    // ========== BUELENGDE ==========
    {
      id: 'r2-6-2-buelengde-intro',
      type: 'text',
      content: `## Buelengde

**Buelengden** er den totale lengden av en kurve mellom to punkter. For å finne buelengden integrerer vi farten.`,
    },

    {
      id: 'r2-6-2-def-buelengde',
      type: 'definition',
      title: 'Buelengde',
      content: `La $\\vec{r}(t) = (x(t), y(t))$ vare en kurve for $t \\in [a, b]$.

**Buelengden** $L$ av kurven fra $t = a$ til $t = b$ er:

$$L = \\int_a^b |\\vec{r}'(t)|\\, dt = \\int_a^b \\sqrt{(x'(t))^2 + (y'(t))^2}\\, dt$$

Dette er det samme som a integrere farten over tid.`,
    },

    {
      id: 'r2-6-2-note-buelengde',
      type: 'note',
      content: `Intuitivt gir dette mening: Hvis du gar med konstant fart $v$ i tid $T$, tilbakelegger du en strekning $L = v \\cdot T$. Nar farten varierer, ma vi integrere.`,
    },

    {
      id: 'r2-6-2-example-11',
      type: 'example',
      title: 'Eksempel 11: Buelengde av sirkel',
      problem: `Finn omkretsen av sirkelen $\\vec{r}(t) = (3\\cos t, 3\\sin t)$ for $t \\in [0, 2\\pi]$.`,
      solution: `**Løsning:**

Fra eksempel 9 vet vi at farten er konstant lik 3.

**Buelengden:**
$$L = \\int_0^{2\\pi} |\\vec{r}'(t)|\\, dt = \\int_0^{2\\pi} 3\\, dt = 3t \\Big|_0^{2\\pi} = 3 \\cdot 2\\pi - 0 = 6\\pi$$

Omkretsen er $6\\pi$, som stemmer med formelen $2\\pi r = 2\\pi \\cdot 3 = 6\\pi$. \\checkmark`,
    },

    {
      id: 'r2-6-2-example-12',
      type: 'example',
      title: 'Eksempel 12: Buelengde av linjestykke',
      problem: `Finn lengden av linjestykket fra $(1, 2)$ til $(4, 6)$ ved hjelp av parameterframstilling og integrasjon.`,
      solution: `**Løsning:**

**Parameterframstilling:** Vi kan skrive linjestykket som
$$\\vec{r}(t) = (1 + 3t, 2 + 4t), \\quad t \\in [0, 1]$$

Nar $t = 0$: $(1, 2)$
Nar $t = 1$: $(4, 6)$

**Hastighetsvektor:**
$$\\vec{r}'(t) = (3, 4)$$

**Fart:**
$$|\\vec{r}'(t)| = \\sqrt{3^2 + 4^2} = \\sqrt{25} = 5$$

**Buelengde:**
$$L = \\int_0^1 5\\, dt = 5t \\Big|_0^1 = 5$$

**Kontroll med avstandsformelen:**
$$L = \\sqrt{(4-1)^2 + (6-2)^2} = \\sqrt{9 + 16} = 5 \\quad \\checkmark$$`,
    },

    {
      id: 'r2-6-2-example-13',
      type: 'example',
      title: 'Eksempel 13: Buelengde av kurve',
      problem: `Finn buelengden av kurven $\\vec{r}(t) = (t, \\frac{2}{3}t^{3/2})$ for $t \\in [0, 3]$.`,
      solution: `**Løsning:**

**Hastighetsvektor:**
$$x'(t) = 1$$
$$y'(t) = \\frac{2}{3} \\cdot \\frac{3}{2}t^{1/2} = t^{1/2} = \\sqrt{t}$$

$$\\vec{r}'(t) = (1, \\sqrt{t})$$

**Fart:**
$$|\\vec{r}'(t)| = \\sqrt{1 + t}$$

**Buelengde:**
$$L = \\int_0^3 \\sqrt{1 + t}\\, dt$$

La $u = 1 + t$, da er $du = dt$.
Nar $t = 0$: $u = 1$
Nar $t = 3$: $u = 4$

$$L = \\int_1^4 \\sqrt{u}\\, du = \\int_1^4 u^{1/2}\\, du = \\frac{2}{3}u^{3/2}\\Big|_1^4$$
$$= \\frac{2}{3}(4^{3/2} - 1^{3/2}) = \\frac{2}{3}(8 - 1) = \\frac{14}{3}$$

Buelengden er $\\frac{14}{3} \\approx 4{,}67$.`,
    },

    {
      id: 'r2-6-2-example-14',
      type: 'example',
      title: 'Eksempel 14: Akselerasjonsvektor',
      problem: `En partikkel har posisjon $\\vec{r}(t) = (t^2, t^3)$. Finn hastighetsvektoren, farten og akselerasjonsvektoren nar $t = 1$.`,
      solution: `**Løsning:**

**Posisjon:**
$$\\vec{r}(t) = (t^2, t^3)$$

**Hastighetsvektor (forste deriverte):**
$$\\vec{v}(t) = \\vec{r}'(t) = (2t, 3t^2)$$
$$\\vec{v}(1) = (2, 3)$$

**Fart:**
$$v(1) = |\\vec{v}(1)| = \\sqrt{2^2 + 3^2} = \\sqrt{13}$$

**Akselerasjonsvektor (andre deriverte):**
$$\\vec{a}(t) = \\vec{r}''(t) = (2, 6t)$$
$$\\vec{a}(1) = (2, 6)$$

Akselerasjonsvektoren viser hvordan hastigheten endrer seg.`,
    },

    {
      id: 'r2-6-2-example-15',
      type: 'example',
      title: 'Eksempel 15: Ellipse',
      problem: `En ellipse er gitt ved $\\vec{r}(t) = (4\\cos t, 2\\sin t)$ for $t \\in [0, 2\\pi]$.

a) Finn tangentvektoren nar $t = \\frac{\\pi}{4}$.
b) Finn farten nar $t = \\frac{\\pi}{4}$.`,
      solution: `**Løsning:**

**a) Tangentvektoren:**

$$\\vec{r}'(t) = (-4\\sin t, 2\\cos t)$$

For $t = \\frac{\\pi}{4}$:
$$\\vec{r}'\\left(\\frac{\\pi}{4}\\right) = \\left(-4 \\cdot \\frac{\\sqrt{2}}{2}, 2 \\cdot \\frac{\\sqrt{2}}{2}\\right) = (-2\\sqrt{2}, \\sqrt{2})$$

**b) Farten:**

$$v\\left(\\frac{\\pi}{4}\\right) = \\sqrt{(-2\\sqrt{2})^2 + (\\sqrt{2})^2} = \\sqrt{8 + 2} = \\sqrt{10}$$`,
    },

    {
      id: 'r2-6-2-example-16',
      type: 'example',
      title: 'Eksempel 16: Tilbakelagt strekning',
      problem: `En bil kjorer langs en vei beskrevet av $\\vec{r}(t) = (t^2, 2t)$ for $t \\in [0, 2]$ (posisjon i km, tid i timer). Hvor langt kjorer bilen?`,
      solution: `**Løsning:**

**Hastighetsvektor:**
$$\\vec{r}'(t) = (2t, 2)$$

**Fart:**
$$v(t) = |\\vec{r}'(t)| = \\sqrt{4t^2 + 4} = 2\\sqrt{t^2 + 1}$$

**Buelengde (tilbakelagt strekning):**
$$L = \\int_0^2 2\\sqrt{t^2 + 1}\\, dt$$

For å løse dette integralet bruker vi substitusjon $t = \\sinh u$ eller tabelloppslag.

Med formelen $\\int \\sqrt{t^2 + 1}\\, dt = \\frac{t}{2}\\sqrt{t^2 + 1} + \\frac{1}{2}\\ln|t + \\sqrt{t^2 + 1}| + C$:

$$L = 2 \\left[ \\frac{t}{2}\\sqrt{t^2 + 1} + \\frac{1}{2}\\ln|t + \\sqrt{t^2 + 1}| \\right]_0^2$$
$$= \\left[ t\\sqrt{t^2 + 1} + \\ln|t + \\sqrt{t^2 + 1}| \\right]_0^2$$
$$= 2\\sqrt{5} + \\ln(2 + \\sqrt{5}) - (0 + \\ln 1)$$
$$= 2\\sqrt{5} + \\ln(2 + \\sqrt{5})$$
$$\\approx 4{,}47 + 1{,}44 \\approx 5{,}92 \\text{ km}$$`,
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-6-2-oppsummering',
      type: 'theorem',
      title: 'Oppsummering av viktige formler',
      content: `La $\\vec{r}(t) = (x(t), y(t))$ vare en vektorfunksjon.

**Tangentvektor (hastighetsvektor):**
$$\\vec{r}'(t) = (x'(t), y'(t))$$

**Normalvektor:**
$$\\vec{n}(t) = (-y'(t), x'(t))$$

**Fart:**
$$v(t) = |\\vec{r}'(t)| = \\sqrt{(x'(t))^2 + (y'(t))^2}$$

**Buelengde:**
$$L = \\int_a^b |\\vec{r}'(t)|\\, dt = \\int_a^b \\sqrt{(x'(t))^2 + (y'(t))^2}\\, dt$$

**Akselerasjonsvektor:**
$$\\vec{a}(t) = \\vec{r}''(t) = (x''(t), y''(t))$$`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-6-2-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-6-2-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-1',
        number: '6.2.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\vec{r}\'(t)$ for folgende vektorfunksjoner:',
        subTasks: [
          { label: 'a', task: '$\\vec{r}(t) = (2t, 3t^2)$', solution: '$\\vec{r}\'(t) = (2, 6t)$' },
          { label: 'b', task: '$\\vec{r}(t) = (t^3, t^2 - 1)$', solution: '$\\vec{r}\'(t) = (3t^2, 2t)$' },
          { label: 'c', task: '$\\vec{r}(t) = (\\sin t, \\cos t)$', solution: '$\\vec{r}\'(t) = (\\cos t, -\\sin t)$' },
          { label: 'd', task: '$\\vec{r}(t) = (e^t, e^{-t})$', solution: '$\\vec{r}\'(t) = (e^t, -e^{-t})$' },
        ],
        solution: 'Deriver hver komponent for seg.',
        hints: ['Bruk vanlige derivasjonsregler på hver komponent.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-6-2-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-2',
        number: '6.2.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Finn $\\vec{r}\'(t)$ og $\\vec{r}\'\'(t)$ for:',
        subTasks: [
          { label: 'a', task: '$\\vec{r}(t) = (4t - 1, t^2 + 2t)$', solution: '$\\vec{r}\'(t) = (4, 2t + 2)$, $\\vec{r}\'\'(t) = (0, 2)$' },
          { label: 'b', task: '$\\vec{r}(t) = (t^3, t^4)$', solution: '$\\vec{r}\'(t) = (3t^2, 4t^3)$, $\\vec{r}\'\'(t) = (6t, 12t^2)$' },
          { label: 'c', task: '$\\vec{r}(t) = (2\\cos t, 2\\sin t)$', solution: '$\\vec{r}\'(t) = (-2\\sin t, 2\\cos t)$, $\\vec{r}\'\'(t) = (-2\\cos t, -2\\sin t)$' },
        ],
        solution: 'Deriver to ganger.',
        hints: ['Den andre deriverte er den deriverte av den forste deriverte.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-6-2-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-3',
        number: '6.2.3',
        type: 'classic',
        difficulty: 'lett',
        task: 'En partikkel beveger seg langs kurven $\\vec{r}(t) = (t^2, 2t)$.',
        subTasks: [
          { label: 'a', task: 'Finn posisjonen nar $t = 2$.', solution: '$\\vec{r}(2) = (4, 4)$' },
          { label: 'b', task: 'Finn hastighetsvektoren nar $t = 2$.', solution: '$\\vec{v}(2) = \\vec{r}\'(2) = (4, 2)$' },
          { label: 'c', task: 'Finn farten nar $t = 2$.', solution: '$v(2) = \\sqrt{16 + 4} = \\sqrt{20} = 2\\sqrt{5}$' },
        ],
        solution: 'a) $(4, 4)$, b) $(4, 2)$, c) $2\\sqrt{5}$',
        hints: ['Farten er lengden av hastighetsvektoren.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-6-2-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-4',
        number: '6.2.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'For kurven $\\vec{r}(t) = (t, t^2)$, finn tangentvektoren og normalvektoren i punktet der $t = 1$.',
        solution: `**Tangentvektor:** $\\vec{r}'(1) = (1, 2)$

**Normalvektor:** $\\vec{n}(1) = (-2, 1)$ (eller $(2, -1)$)`,
        hints: ['Normalvektoren far du ved a bytte om komponentene og endre fortegn på en av dem.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-6-2-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-5',
        number: '6.2.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'En sirkel har parameterframstillingen $\\vec{r}(t) = (5\\cos t, 5\\sin t)$.',
        subTasks: [
          { label: 'a', task: 'Finn tangentvektoren.', solution: '$\\vec{r}\'(t) = (-5\\sin t, 5\\cos t)$' },
          { label: 'b', task: 'Finn farten.', solution: '$v(t) = \\sqrt{25\\sin^2 t + 25\\cos^2 t} = 5$' },
          { label: 'c', task: 'Finn omkretsen ved å beregne buelengden for $t \\in [0, 2\\pi]$.', solution: '$L = \\int_0^{2\\pi} 5\\, dt = 10\\pi$' },
        ],
        solution: 'a) $(-5\\sin t, 5\\cos t)$, b) 5, c) $10\\pi$',
        hints: ['Farten langs en sirkel med konstant vinkelhastighet er konstant.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-6-2-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-6',
        number: '6.2.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn likningen for tangentlinjen til kurven $\\vec{r}(t) = (t^2 - 1, t^3)$ i punktet der $t = 1$.',
        solution: `**Punkt:** $\\vec{r}(1) = (0, 1)$

**Tangentvektor:** $\\vec{r}'(1) = (2, 3)$

**Tangentlinje:** $\\vec{\\ell}(s) = (0, 1) + s(2, 3) = (2s, 1 + 3s)$

Pa kartesisk form: Stigningstall $= \\frac{3}{2}$, sa $y - 1 = \\frac{3}{2}(x - 0)$, dvs. $y = \\frac{3}{2}x + 1$`,
        hints: ['Tangentlinjen gar gjennom punktet på kurven og har retning lik tangentvektoren.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-6-2-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-7',
        number: '6.2.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'En partikkel beveger seg slik at $\\vec{r}(t) = (3t, 4t)$ for $t \\geq 0$ (posisjon i meter, tid i sekunder).',
        subTasks: [
          { label: 'a', task: 'Vis at partikkelen beveger seg langs en rett linje.', solution: 'Vi har $x = 3t$ og $y = 4t$. Dermed $y = \\frac{4}{3}x$, som er en rett linje gjennom origo.' },
          { label: 'b', task: 'Finn farten.', solution: '$\\vec{r}\'(t) = (3, 4)$, sa $v = \\sqrt{9 + 16} = 5$ m/s' },
          { label: 'c', task: 'Hvor lang strekning har partikkelen tilbakelagt etter 10 sekunder?', solution: '$L = v \\cdot t = 5 \\cdot 10 = 50$ meter' },
        ],
        solution: 'a) Linjen $y = \\frac{4}{3}x$, b) 5 m/s, c) 50 m',
        hints: ['Nar farten er konstant, er strekning = fart ganger tid.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-6-2-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-8',
        number: '6.2.8',
        type: 'classic',
        difficulty: 'medium',
        task: 'Finn buelengden av kurven $\\vec{r}(t) = (2t, t^2)$ for $t \\in [0, 1]$.',
        solution: `**Hastighetsvektor:** $\\vec{r}'(t) = (2, 2t)$

**Fart:** $v(t) = \\sqrt{4 + 4t^2} = 2\\sqrt{1 + t^2}$

**Buelengde:**
$L = \\int_0^1 2\\sqrt{1 + t^2}\\, dt = \\left[ t\\sqrt{1+t^2} + \\ln(t + \\sqrt{1+t^2}) \\right]_0^1$
$= \\sqrt{2} + \\ln(1 + \\sqrt{2}) - 0 - \\ln 1$
$= \\sqrt{2} + \\ln(1 + \\sqrt{2}) \\approx 2{,}30$`,
        hints: ['Du ma bruke integrasjonsteknikker eller oppslag for $\\int \\sqrt{1 + t^2}\\, dt$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-6-2-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-9',
        number: '6.2.9',
        type: 'classic',
        difficulty: 'medium',
        task: 'En ball kastes horisontalt fra 80 m høyde med starthastighet 20 m/s. Posisjonsvektoren er $\\vec{r}(t) = (20t, 80 - 5t^2)$ (bruk $g = 10$ m/s²).',
        subTasks: [
          { label: 'a', task: 'Finn hastighetsvektoren.', solution: '$\\vec{v}(t) = (20, -10t)$' },
          { label: 'b', task: 'Finn farten som funksjon av tid.', solution: '$v(t) = \\sqrt{400 + 100t^2} = 10\\sqrt{4 + t^2}$' },
          { label: 'c', task: 'Hvor lang tid tar det for ballen treffer bakken?', solution: '$80 - 5t^2 = 0 \\Rightarrow t^2 = 16 \\Rightarrow t = 4$ s' },
          { label: 'd', task: 'Finn farten i det ballen treffer bakken.', solution: '$v(4) = 10\\sqrt{4 + 16} = 10\\sqrt{20} = 20\\sqrt{5} \\approx 44{,}7$ m/s' },
        ],
        solution: 'a) $(20, -10t)$, b) $10\\sqrt{4 + t^2}$, c) 4 s, d) $20\\sqrt{5}$ m/s',
        hints: ['Ballen treffer bakken nar $y = 0$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-6-2-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-10',
        number: '6.2.10',
        type: 'classic',
        difficulty: 'medium',
        task: 'Vis at tangentvektoren til sirkelen $\\vec{r}(t) = (R\\cos t, R\\sin t)$ alltid star vinkelrett på posisjonsvektoren.',
        solution: `**Posisjonsvektor:** $\\vec{r}(t) = (R\\cos t, R\\sin t)$

**Tangentvektor:** $\\vec{r}'(t) = (-R\\sin t, R\\cos t)$

**Skalarprodukt:**
$\\vec{r}(t) \\cdot \\vec{r}'(t) = R\\cos t \\cdot (-R\\sin t) + R\\sin t \\cdot R\\cos t$
$= -R^2\\sin t\\cos t + R^2\\sin t\\cos t = 0$

Siden skalarproduktet er null for alle $t$, star vektorene alltid vinkelrett på hverandre.`,
        hints: ['To vektorer er ortogonale nar skalarproduktet er null.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 11
    {
      id: 'r2-6-2-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-11',
        number: '6.2.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En ellipse er gitt ved $\\vec{r}(t) = (3\\cos t, 2\\sin t)$ for $t \\in [0, 2\\pi]$.',
        subTasks: [
          { label: 'a', task: 'Finn tangentvektoren.', solution: '$\\vec{r}\'(t) = (-3\\sin t, 2\\cos t)$' },
          { label: 'b', task: 'Finn farten som funksjon av $t$.', solution: '$v(t) = \\sqrt{9\\sin^2 t + 4\\cos^2 t}$' },
          { label: 'c', task: 'Ved hvilke verdier av $t$ er farten størst og minst?', solution: 'Storst nar $\\sin^2 t = 1$ (dvs. $t = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$), da er $v = 3$. Minst nar $\\cos^2 t = 1$ (dvs. $t = 0, \\pi$), da er $v = 2$.' },
        ],
        solution: 'a) $(-3\\sin t, 2\\cos t)$, b) $\\sqrt{9\\sin^2 t + 4\\cos^2 t}$, c) Storst ($v=3$) nar $t = \\frac{\\pi}{2}, \\frac{3\\pi}{2}$; minst ($v=2$) nar $t = 0, \\pi$',
        hints: ['For å finne maks/min av farten, analyser $v(t)^2 = 9\\sin^2 t + 4\\cos^2 t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 12
    {
      id: 'r2-6-2-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-12',
        number: '6.2.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn buelengden av kurven $\\vec{r}(t) = (\\cos^3 t, \\sin^3 t)$ for $t \\in [0, \\frac{\\pi}{2}]$. (Denne kurven kalles en astroide.)',
        solution: `**Hastighetsvektor:**
$x'(t) = -3\\cos^2 t \\sin t$
$y'(t) = 3\\sin^2 t \\cos t$

**Fart:**
$v(t) = \\sqrt{9\\cos^4 t \\sin^2 t + 9\\sin^4 t \\cos^2 t}$
$= 3|\\sin t \\cos t|\\sqrt{\\cos^2 t + \\sin^2 t}$
$= 3\\sin t \\cos t$ (for $t \\in [0, \\frac{\\pi}{2}]$)
$= \\frac{3}{2}\\sin 2t$

**Buelengde:**
$L = \\int_0^{\\pi/2} \\frac{3}{2}\\sin 2t\\, dt = \\frac{3}{2} \\cdot \\left[-\\frac{1}{2}\\cos 2t\\right]_0^{\\pi/2}$
$= \\frac{3}{4}(-\\cos\\pi + \\cos 0) = \\frac{3}{4}(1 + 1) = \\frac{3}{2}$`,
        hints: ['Bruk kjerneregelen ved derivasjon.', 'Skriv om $\\sin t \\cos t = \\frac{1}{2}\\sin 2t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 13
    {
      id: 'r2-6-2-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-13',
        number: '6.2.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En sykloid er kurven som et punkt på kanten av et rullende hjul beskriver. Hvis hjulet har radius $R$ og ruller langs $x$-aksen, er parameterframstillingen:\n\n$\\vec{r}(t) = (R(t - \\sin t), R(1 - \\cos t))$',
        subTasks: [
          { label: 'a', task: 'Finn hastighetsvektoren.', solution: '$\\vec{r}\'(t) = (R(1 - \\cos t), R\\sin t)$' },
          { label: 'b', task: 'Finn farten som funksjon av $t$.', solution: '$v(t) = R\\sqrt{(1-\\cos t)^2 + \\sin^2 t} = R\\sqrt{2 - 2\\cos t} = 2R\\sin\\frac{t}{2}$' },
          { label: 'c', task: 'Nar er farten null? Hva betyr dette fysisk?', solution: 'Farten er null nar $t = 0, 2\\pi, 4\\pi, \\ldots$ Dette er nar punktet er i kontakt med bakken - det star stille i det oyeblikket.' },
        ],
        solution: 'Se deloppgavene.',
        hints: ['Bruk identiteten $1 - \\cos t = 2\\sin^2\\frac{t}{2}$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 14
    {
      id: 'r2-6-2-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-14',
        number: '6.2.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En partikkel beveger seg slik at posisjonsvektoren er $\\vec{r}(t) = (e^t\\cos t, e^t\\sin t)$ for $t \\geq 0$.',
        subTasks: [
          { label: 'a', task: 'Finn hastighetsvektoren.', solution: '$\\vec{v}(t) = (e^t\\cos t - e^t\\sin t, e^t\\sin t + e^t\\cos t) = e^t(\\cos t - \\sin t, \\sin t + \\cos t)$' },
          { label: 'b', task: 'Finn farten som funksjon av $t$.', solution: '$v(t) = e^t\\sqrt{(\\cos t - \\sin t)^2 + (\\sin t + \\cos t)^2} = e^t\\sqrt{2}$' },
          { label: 'c', task: 'Vis at farten vokser eksponentielt.', solution: 'Vi har $v(t) = \\sqrt{2}e^t$, som er en eksponentialfunksjon med grunntal $e$. Farten dobles nar $t$ oker med $\\ln 2 \\approx 0{,}69$.' },
        ],
        solution: 'a) $e^t(\\cos t - \\sin t, \\sin t + \\cos t)$, b) $\\sqrt{2}e^t$, c) Farten vokser eksponentielt',
        hints: ['Bruk produktregelen: $(e^t\\cos t)\' = e^t\\cos t - e^t\\sin t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 15
    {
      id: 'r2-6-2-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-15',
        number: '6.2.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En kurve har enhetstangentvektor $\\hat{T}(t) = \\frac{\\vec{r}\'(t)}{|\\vec{r}\'(t)|}$. For kurven $\\vec{r}(t) = (t, \\ln(\\cos t))$ for $t \\in (-\\frac{\\pi}{2}, \\frac{\\pi}{2})$:',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{r}\'(t)$.', solution: '$\\vec{r}\'(t) = (1, -\\tan t)$' },
          { label: 'b', task: 'Finn farten $|\\vec{r}\'(t)|$.', solution: '$|\\vec{r}\'(t)| = \\sqrt{1 + \\tan^2 t} = \\sqrt{\\sec^2 t} = |\\sec t| = \\sec t$ (for $t \\in (-\\frac{\\pi}{2}, \\frac{\\pi}{2})$)' },
          { label: 'c', task: 'Finn enhetstangentvektoren $\\hat{T}(t)$.', solution: '$\\hat{T}(t) = \\frac{1}{\\sec t}(1, -\\tan t) = (\\cos t, -\\sin t)$' },
        ],
        solution: 'a) $(1, -\\tan t)$, b) $\\sec t$, c) $(\\cos t, -\\sin t)$',
        hints: ['Husk at $(\\ln f(t))\' = \\frac{f\'(t)}{f(t)}$ og at $1 + \\tan^2 t = \\sec^2 t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 16
    {
      id: 'r2-6-2-ex-block-16',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-16',
        number: '6.2.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Finn buelengden av spiralen $\\vec{r}(t) = (t\\cos t, t\\sin t)$ for $t \\in [0, 2\\pi]$.',
        solution: `**Hastighetsvektor:**
$x'(t) = \\cos t - t\\sin t$
$y'(t) = \\sin t + t\\cos t$

**Fart:**
$v(t)^2 = (\\cos t - t\\sin t)^2 + (\\sin t + t\\cos t)^2$
$= \\cos^2 t - 2t\\sin t\\cos t + t^2\\sin^2 t + \\sin^2 t + 2t\\sin t\\cos t + t^2\\cos^2 t$
$= 1 + t^2$

Sa $v(t) = \\sqrt{1 + t^2}$

**Buelengde:**
$L = \\int_0^{2\\pi} \\sqrt{1 + t^2}\\, dt$
$= \\left[\\frac{t}{2}\\sqrt{1+t^2} + \\frac{1}{2}\\ln(t + \\sqrt{1+t^2})\\right]_0^{2\\pi}$
$= \\pi\\sqrt{1+4\\pi^2} + \\frac{1}{2}\\ln(2\\pi + \\sqrt{1+4\\pi^2})$
$\\approx 21{,}26$`,
        hints: ['Forkort uttrykket for $v(t)^2$ ved a bruke $\\sin^2 t + \\cos^2 t = 1$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 17
    {
      id: 'r2-6-2-ex-block-17',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-17',
        number: '6.2.17',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'La $\\vec{r}(t) = (a\\cos t, b\\sin t)$ vare en ellipse med halvakser $a$ og $b$ der $a > b > 0$.',
        subTasks: [
          { label: 'a', task: 'Finn farten $v(t)$ som funksjon av $t$.', solution: '$v(t) = \\sqrt{a^2\\sin^2 t + b^2\\cos^2 t}$' },
          { label: 'b', task: 'I hvilke punkter er farten størst?', solution: 'Farten er størst nar $\\sin^2 t = 1$, dvs. ved $(0, b)$ og $(0, -b)$ (endepunktene av den lille halvaksen). Da er $v = a$.' },
          { label: 'c', task: 'I hvilke punkter er farten minst?', solution: 'Farten er minst nar $\\cos^2 t = 1$, dvs. ved $(a, 0)$ og $(-a, 0)$ (endepunktene av den store halvaksen). Da er $v = b$.' },
        ],
        solution: 'a) $\\sqrt{a^2\\sin^2 t + b^2\\cos^2 t}$, b) Ved $(0, \\pm b)$, $v = a$, c) Ved $(\\pm a, 0)$, $v = b$',
        hints: ['Skriv $v^2 = a^2\\sin^2 t + b^2\\cos^2 t = b^2 + (a^2 - b^2)\\sin^2 t$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 18
    {
      id: 'r2-6-2-ex-block-18',
      type: 'exercise',
      exercise: {
        id: 'r2-6-2-ex-18',
        number: '6.2.18',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En partikkel beveger seg langs kurven $\\vec{r}(t) = (t^2, \\frac{2}{3}t^3)$ for $t \\geq 0$.',
        subTasks: [
          { label: 'a', task: 'Finn hastighetsvektoren og farten.', solution: '$\\vec{v}(t) = (2t, 2t^2)$, $v(t) = 2t\\sqrt{1 + t^2}$' },
          { label: 'b', task: 'Finn akselerasjonsvektoren.', solution: '$\\vec{a}(t) = (2, 4t)$' },
          { label: 'c', task: 'Finn buelengden fra $t = 0$ til $t = 2$.', solution: '$L = \\int_0^2 2t\\sqrt{1+t^2}\\, dt$. La $u = 1 + t^2$, $du = 2t\\, dt$. Nar $t=0$: $u=1$, nar $t=2$: $u=5$.\n$L = \\int_1^5 \\sqrt{u}\\, du = \\frac{2}{3}u^{3/2}\\big|_1^5 = \\frac{2}{3}(5\\sqrt{5} - 1) \\approx 6{,}79$' },
        ],
        solution: 'a) $(2t, 2t^2)$, $2t\\sqrt{1+t^2}$, b) $(2, 4t)$, c) $\\frac{2}{3}(5\\sqrt{5} - 1)$',
        hints: ['For buelengden, bruk substitusjon $u = 1 + t^2$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],

  exercises: [
    {
      id: 'r2-6-2-ex-1',
      number: '6.2.1',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn $\\vec{r}\'(t)$ for folgende vektorfunksjoner:',
      subTasks: [
        { label: 'a', task: '$\\vec{r}(t) = (2t, 3t^2)$', solution: '$\\vec{r}\'(t) = (2, 6t)$' },
        { label: 'b', task: '$\\vec{r}(t) = (t^3, t^2 - 1)$', solution: '$\\vec{r}\'(t) = (3t^2, 2t)$' },
        { label: 'c', task: '$\\vec{r}(t) = (\\sin t, \\cos t)$', solution: '$\\vec{r}\'(t) = (\\cos t, -\\sin t)$' },
        { label: 'd', task: '$\\vec{r}(t) = (e^t, e^{-t})$', solution: '$\\vec{r}\'(t) = (e^t, -e^{-t})$' },
      ],
      solution: 'Deriver hver komponent for seg.',
      hints: ['Bruk vanlige derivasjonsregler på hver komponent.'],
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-2',
      number: '6.2.2',
      type: 'classic',
      difficulty: 'lett',
      task: 'Finn $\\vec{r}\'(t)$ og $\\vec{r}\'\'(t)$ for vektorfunksjoner.',
      solution: 'Deriver to ganger.',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-3',
      number: '6.2.3',
      type: 'classic',
      difficulty: 'lett',
      task: 'En partikkel beveger seg langs kurven $\\vec{r}(t) = (t^2, 2t)$.',
      solution: 'a) $(4, 4)$, b) $(4, 2)$, c) $2\\sqrt{5}$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-4',
      number: '6.2.4',
      type: 'classic',
      difficulty: 'medium',
      task: 'For kurven $\\vec{r}(t) = (t, t^2)$, finn tangentvektoren og normalvektoren i punktet der $t = 1$.',
      solution: 'Tangent: $(1, 2)$, Normal: $(-2, 1)$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-5',
      number: '6.2.5',
      type: 'classic',
      difficulty: 'medium',
      task: 'En sirkel har parameterframstillingen $\\vec{r}(t) = (5\\cos t, 5\\sin t)$.',
      solution: 'a) $(-5\\sin t, 5\\cos t)$, b) 5, c) $10\\pi$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-6',
      number: '6.2.6',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn likningen for tangentlinjen til kurven $\\vec{r}(t) = (t^2 - 1, t^3)$ i punktet der $t = 1$.',
      solution: '$y = \\frac{3}{2}x + 1$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-7',
      number: '6.2.7',
      type: 'classic',
      difficulty: 'medium',
      task: 'En partikkel beveger seg slik at $\\vec{r}(t) = (3t, 4t)$ for $t \\geq 0$.',
      solution: 'a) Linjen $y = \\frac{4}{3}x$, b) 5 m/s, c) 50 m',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-8',
      number: '6.2.8',
      type: 'classic',
      difficulty: 'medium',
      task: 'Finn buelengden av kurven $\\vec{r}(t) = (2t, t^2)$ for $t \\in [0, 1]$.',
      solution: '$\\sqrt{2} + \\ln(1 + \\sqrt{2})$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-9',
      number: '6.2.9',
      type: 'classic',
      difficulty: 'medium',
      task: 'En ball kastes horisontalt fra 80 m høyde.',
      solution: 'a) $(20, -10t)$, b) $10\\sqrt{4 + t^2}$, c) 4 s, d) $20\\sqrt{5}$ m/s',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-10',
      number: '6.2.10',
      type: 'classic',
      difficulty: 'medium',
      task: 'Vis at tangentvektoren til en sirkel alltid star vinkelrett på posisjonsvektoren.',
      solution: 'Skalarproduktet er alltid null.',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-11',
      number: '6.2.11',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'En ellipse er gitt ved $\\vec{r}(t) = (3\\cos t, 2\\sin t)$.',
      solution: 'Storst fart ved $(0, \\pm 2)$, minst ved $(\\pm 3, 0)$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-12',
      number: '6.2.12',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Finn buelengden av astroiden.',
      solution: '$\\frac{3}{2}$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-13',
      number: '6.2.13',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser sykloiden.',
      solution: 'Farten er null nar punktet er i kontakt med bakken.',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-14',
      number: '6.2.14',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser den logaritmiske spiralen.',
      solution: 'Farten vokser eksponentielt: $v(t) = \\sqrt{2}e^t$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-15',
      number: '6.2.15',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Finn enhetstangentvektoren for en gitt kurve.',
      solution: '$\\hat{T}(t) = (\\cos t, -\\sin t)$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-16',
      number: '6.2.16',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Finn buelengden av spiralen.',
      solution: '$\\approx 21{,}26$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-17',
      number: '6.2.17',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Analyser farten langs en generell ellipse.',
      solution: 'Storst ved endepunktene av lille halvakse, minst ved store halvakse.',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
    {
      id: 'r2-6-2-ex-18',
      number: '6.2.18',
      type: 'classic',
      difficulty: 'vanskelig',
      task: 'Komplett analyse av en kurve.',
      solution: 'Buelengde: $\\frac{2}{3}(5\\sqrt{5} - 1)$',
      allowsUpload: true,
      allowsCanvasDrawing: true,
    },
  ],
};

export const CHAPTER_R2_6_3: TextbookChapter = {
  id: 'r2-6-3',
  courseId: 'r2',
  chapterNumber: '6.3',
  title: 'Hastighet og akselerasjon',
  description: 'Bruke vektorfunksjoner til a analysere bevegelse, fart og akselerasjon i fysiske situasjoner.',
  estimatedMinutes: 60,
  competenceGoals: [
    'bruke derivasjon til a analysere og tolke vektorfunksjoner som beskriver baner i rommet',
    'lose realfaglige problem som involverer fart og akselerasjon',
  ],
  prerequisites: ['r2-6-1', 'r2-6-2'],
  exercises: [],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-6-3-intro',
      type: 'text',
      content: `## Fra matematikk til fysikk

I forrige kapittel larte vi a derivere vektorfunksjoner. Na skal vi se hvordan dette brukes i fysikk til a beskrive bevegelse.

Nar et objekt beveger seg - enten det er en ball i luften, en planet rundt solen, eller en bil på en vei - kan vi beskrive posisjonen som en funksjon av tid. Denne funksjonen er en **vektorfunksjon**, og ved a derivere den far vi informasjon om hastighet og akselerasjon.

Dette er en av de viktigste anvendelsene av kalkulus i naturvitenskapen. Isaac Newton utviklet kalkulus nettopp for a kunne beskrive bevegelse matematisk.`,
    },

    // ========== POSISJON SOM VEKTORFUNKSJON ==========
    {
      id: 'r2-6-3-posisjon',
      type: 'text',
      content: `## Posisjon som vektorfunksjon

Nar et objekt beveger seg i planet, kan posisjonen til enhver tid $t$ beskrives med en **posisjonsvektor** $\\vec{r}(t)$.

I to dimensjoner skriver vi:

$$\\vec{r}(t) = [x(t), y(t)]$$

der $x(t)$ og $y(t)$ er koordinatene til objektet ved tid $t$.

I tre dimensjoner:

$$\\vec{r}(t) = [x(t), y(t), z(t)]$$

Posisjonsvektoren peker fra origo til objektets posisjon ved tid $t$. Nar tiden endrer seg, "tegner" spissen av $\\vec{r}(t)$ opp objektets **bane** eller **trajektorie**.`,
    },

    // Definisjon: Posisjonsvektor
    {
      id: 'r2-6-3-def-posisjon',
      type: 'definition',
      title: 'Posisjonsvektor',
      content: `**Posisjonsvektoren** $\\vec{r}(t)$ til et objekt er en vektorfunksjon som angir objektets posisjon i forhold til origo ved tidspunkt $t$.

I planet: $\\vec{r}(t) = [x(t), y(t)]$

I rommet: $\\vec{r}(t) = [x(t), y(t), z(t)]$`,
    },

    // Eksempel 1: Enkel posisjonsvektor
    {
      id: 'r2-6-3-example-1',
      type: 'example',
      title: 'Eksempel 1: Rettlinjet bevegelse',
      problem: `Et objekt beveger seg langs en rett linje. Posisjonsvektoren er gitt ved:

$$\\vec{r}(t) = [2t + 1, 3t - 2]$$

der $t$ er tiden i sekunder og koordinatene er i meter.

a) Finn posisjonen ved $t = 0$, $t = 1$ og $t = 2$.
b) Beskriv bevegelsen.`,
      solution: `**Løsning:**

a) Vi setter inn verdiene for $t$:

Ved $t = 0$: $\\vec{r}(0) = [2 \\cdot 0 + 1, 3 \\cdot 0 - 2] = [1, -2]$

Ved $t = 1$: $\\vec{r}(1) = [2 \\cdot 1 + 1, 3 \\cdot 1 - 2] = [3, 1]$

Ved $t = 2$: $\\vec{r}(2) = [2 \\cdot 2 + 1, 3 \\cdot 2 - 2] = [5, 4]$

b) Objektet starter i punktet $(1, -2)$ og beveger seg langs en rett linje. For hvert sekund flytter det seg 2 meter i $x$-retning og 3 meter i $y$-retning.

Dette er rettlinjet bevegelse med konstant hastighet.`,
    },

    // Eksempel 2: Sirkelbevegelse
    {
      id: 'r2-6-3-example-2',
      type: 'example',
      title: 'Eksempel 2: Sirkelbevegelse',
      problem: `En partikkel beveger seg i en sirkel med radius 3 meter. Posisjonsvektoren er:

$$\\vec{r}(t) = [3\\cos t, 3\\sin t]$$

der $t$ er tiden i sekunder.

a) Verifiser at partikkelen beveger seg på en sirkel med radius 3.
b) Finn posisjonen ved $t = 0$, $t = \\frac{\\pi}{2}$ og $t = \\pi$.`,
      solution: `**Løsning:**

a) Vi beregner avstanden fra origo:

$$|\\vec{r}(t)| = \\sqrt{(3\\cos t)^2 + (3\\sin t)^2}$$
$$= \\sqrt{9\\cos^2 t + 9\\sin^2 t}$$
$$= \\sqrt{9(\\cos^2 t + \\sin^2 t)}$$
$$= \\sqrt{9 \\cdot 1} = 3$$

Avstanden fra origo er alltid 3, sa partikkelen beveger seg på en sirkel med radius 3.

b) Posisjonene:

Ved $t = 0$: $\\vec{r}(0) = [3\\cos 0, 3\\sin 0] = [3, 0]$

Ved $t = \\frac{\\pi}{2}$: $\\vec{r}\\left(\\frac{\\pi}{2}\\right) = \\left[3\\cos \\frac{\\pi}{2}, 3\\sin \\frac{\\pi}{2}\\right] = [0, 3]$

Ved $t = \\pi$: $\\vec{r}(\\pi) = [3\\cos \\pi, 3\\sin \\pi] = [-3, 0]$

Partikkelen starter i $(3, 0)$ og beveger seg mot klokken rundt sirkelen.`,
    },

    // ========== HASTIGHETSVEKTOR ==========
    {
      id: 'r2-6-3-hastighet',
      type: 'text',
      content: `## Hastighetsvektor

**Hastighet** beskriver hvor raskt og i hvilken retning et objekt beveger seg. Matematisk defineres hastigheten som den deriverte av posisjonen med hensyn på tid.`,
    },

    // Definisjon: Hastighetsvektor
    {
      id: 'r2-6-3-def-hastighet',
      type: 'definition',
      title: 'Hastighetsvektor',
      content: `**Hastighetsvektoren** $\\vec{v}(t)$ er den deriverte av posisjonsvektoren:

$$\\vec{v}(t) = \\vec{r}'(t) = \\frac{d\\vec{r}}{dt}$$

I komponentform:
$$\\vec{v}(t) = [x'(t), y'(t)]$$

Hastighetsvektoren peker alltid i bevegelsesretningen og er **tangent** til banen.`,
    },

    // Teorem: Hastighet og tangent
    {
      id: 'r2-6-3-theorem-tangent',
      type: 'theorem',
      title: 'Hastighetsvektor og tangent',
      content: `Hastighetsvektoren $\\vec{v}(t) = \\vec{r}'(t)$ er tangent til banen i punktet $\\vec{r}(t)$.

Dette betyr at $\\vec{v}(t)$:
1. Peker i objektets momentane bevegelsesretning
2. Star vinkelrett på eventuelle normaler til banen
3. Har lengde lik objektets **fart**`,
    },

    // Eksempel 3: Hastighet ved rettlinjet bevegelse
    {
      id: 'r2-6-3-example-3',
      type: 'example',
      title: 'Eksempel 3: Hastighet ved rettlinjet bevegelse',
      problem: `Et objekt har posisjonsvektor $\\vec{r}(t) = [2t + 1, 3t - 2]$.

Finn hastighetsvektoren $\\vec{v}(t)$.`,
      solution: `**Løsning:**

Vi deriverer komponent for komponent:

$$\\vec{v}(t) = \\vec{r}'(t) = [\\frac{d}{dt}(2t + 1), \\frac{d}{dt}(3t - 2)]$$
$$= [2, 3]$$

Hastighetsvektoren er konstant: $\\vec{v}(t) = [2, 3]$.

Dette bekrefter at objektet har konstant hastighet - det beveger seg med 2 m/s i $x$-retning og 3 m/s i $y$-retning.`,
    },

    // Eksempel 4: Hastighet ved sirkelbevegelse
    {
      id: 'r2-6-3-example-4',
      type: 'example',
      title: 'Eksempel 4: Hastighet ved sirkelbevegelse',
      problem: `En partikkel beveger seg i en sirkel med posisjonsvektor $\\vec{r}(t) = [3\\cos t, 3\\sin t]$.

a) Finn hastighetsvektoren $\\vec{v}(t)$.
b) Vis at hastighetsvektoren alltid star vinkelrett på posisjonsvektoren.`,
      solution: `**Løsning:**

a) Vi deriverer:

$$\\vec{v}(t) = \\vec{r}'(t) = [\\frac{d}{dt}(3\\cos t), \\frac{d}{dt}(3\\sin t)]$$
$$= [-3\\sin t, 3\\cos t]$$

b) To vektorer star vinkelrett på hverandre hvis skalarproduktet er null:

$$\\vec{r}(t) \\cdot \\vec{v}(t) = [3\\cos t, 3\\sin t] \\cdot [-3\\sin t, 3\\cos t]$$
$$= 3\\cos t \\cdot (-3\\sin t) + 3\\sin t \\cdot 3\\cos t$$
$$= -9\\cos t \\sin t + 9\\sin t \\cos t$$
$$= 0$$

Skalarproduktet er alltid null, sa $\\vec{v}(t) \\perp \\vec{r}(t)$ for alle $t$.

Dette gir fysisk mening: ved sirkelbevegelse peker hastigheten langs tangenten, som er vinkelrett på radiusvektoren.`,
    },

    // ========== FART ==========
    {
      id: 'r2-6-3-fart',
      type: 'text',
      content: `## Fart

**Fart** er et skalar tall som angir hvor raskt objektet beveger seg, uavhengig av retning. Farten er lengden av hastighetsvektoren.`,
    },

    // Definisjon: Fart
    {
      id: 'r2-6-3-def-fart',
      type: 'definition',
      title: 'Fart',
      content: `**Farten** $v(t)$ til et objekt er lengden av hastighetsvektoren:

$$v(t) = |\\vec{v}(t)| = |\\vec{r}'(t)|$$

I to dimensjoner:
$$v(t) = \\sqrt{(x'(t))^2 + (y'(t))^2}$$

Fart er alltid et ikke-negativt tall og angis i enheter som m/s, km/h, osv.`,
    },

    // Note om hastighet vs fart
    {
      id: 'r2-6-3-note-fart',
      type: 'note',
      content: `**Hastighet vs. fart:**
- **Hastighet** er en vektor med bade storrelse og retning: $\\vec{v}(t)$
- **Fart** er et tall (skalar) som kun angir storrelsen: $v(t) = |\\vec{v}(t)|$

Pa engelsk:
- Hastighet = velocity (vector)
- Fart = speed (scalar)`,
    },

    // Eksempel 5: Beregne fart
    {
      id: 'r2-6-3-example-5',
      type: 'example',
      title: 'Eksempel 5: Beregne fart',
      problem: `En bil kjorer langs en kurve beskrevet av $\\vec{r}(t) = [t^2, 2t]$, der $t$ er i sekunder og posisjonen i meter.

a) Finn hastighetsvektoren $\\vec{v}(t)$.
b) Finn farten $v(t)$.
c) Hva er farten ved $t = 2$ sekunder?`,
      solution: `**Løsning:**

a) Hastighetsvektoren:
$$\\vec{v}(t) = \\vec{r}'(t) = [2t, 2]$$

b) Farten:
$$v(t) = |\\vec{v}(t)| = \\sqrt{(2t)^2 + 2^2} = \\sqrt{4t^2 + 4} = 2\\sqrt{t^2 + 1}$$

c) Ved $t = 2$:
$$v(2) = 2\\sqrt{2^2 + 1} = 2\\sqrt{5} \\approx 4{,}47 \\text{ m/s}$$

Farten ved $t = 2$ sekunder er $2\\sqrt{5} \\approx 4{,}47$ m/s.`,
    },

    // Eksempel 6: Fart ved sirkelbevegelse
    {
      id: 'r2-6-3-example-6',
      type: 'example',
      title: 'Eksempel 6: Fart ved sirkelbevegelse',
      problem: `En partikkel beveger seg i en sirkel med $\\vec{r}(t) = [3\\cos t, 3\\sin t]$.

Finn farten og vis at den er konstant.`,
      solution: `**Løsning:**

Fra Eksempel 4 har vi hastighetsvektoren:
$$\\vec{v}(t) = [-3\\sin t, 3\\cos t]$$

Farten blir:
$$v(t) = |\\vec{v}(t)| = \\sqrt{(-3\\sin t)^2 + (3\\cos t)^2}$$
$$= \\sqrt{9\\sin^2 t + 9\\cos^2 t}$$
$$= \\sqrt{9(\\sin^2 t + \\cos^2 t)}$$
$$= \\sqrt{9} = 3$$

Farten er konstant lik 3 m/s for alle $t$.

Dette er karakteristisk for **uniform sirkelbevegelse**: farten er konstant selv om hastigheten (retningen) endrer seg kontinuerlig.`,
    },

    // ========== AKSELERASJON ==========
    {
      id: 'r2-6-3-akselerasjon',
      type: 'text',
      content: `## Akselerasjon

**Akselerasjon** beskriver endringen i hastighet over tid. Matematisk er akselerasjonen den deriverte av hastigheten, eller den andrederiverte av posisjonen.`,
    },

    // Definisjon: Akselerasjonsvektor
    {
      id: 'r2-6-3-def-akselerasjon',
      type: 'definition',
      title: 'Akselerasjonsvektor',
      content: `**Akselerasjonsvektoren** $\\vec{a}(t)$ er den deriverte av hastighetsvektoren:

$$\\vec{a}(t) = \\vec{v}'(t) = \\vec{r}''(t)$$

I komponentform:
$$\\vec{a}(t) = [x''(t), y''(t)]$$

Akselerasjon males i $\\text{m/s}^2$ (meter per sekund i andre).`,
    },

    // Teorem: Sammenheng mellom r, v og a
    {
      id: 'r2-6-3-theorem-sammenheng',
      type: 'theorem',
      title: 'Sammenheng mellom posisjon, hastighet og akselerasjon',
      content: `For et objekt med posisjonsvektor $\\vec{r}(t)$ gjelder:

$$\\vec{v}(t) = \\vec{r}'(t) \\quad \\text{(hastighet = forstederiverte av posisjon)}$$

$$\\vec{a}(t) = \\vec{v}'(t) = \\vec{r}''(t) \\quad \\text{(akselerasjon = andrederiverte av posisjon)}$$

Omvendt, ved integrasjon:
$$\\vec{v}(t) = \\int \\vec{a}(t) \\, dt$$
$$\\vec{r}(t) = \\int \\vec{v}(t) \\, dt$$`,
    },

    // Eksempel 7: Akselerasjon ved sirkelbevegelse
    {
      id: 'r2-6-3-example-7',
      type: 'example',
      title: 'Eksempel 7: Akselerasjon ved sirkelbevegelse',
      problem: `En partikkel beveger seg i en sirkel med $\\vec{r}(t) = [3\\cos t, 3\\sin t]$.

a) Finn akselerasjonsvektoren $\\vec{a}(t)$.
b) Vis at akselerasjonen alltid peker mot sentrum.
c) Finn storrelsen på akselerasjonen.`,
      solution: `**Løsning:**

a) Vi deriverer hastighetsvektoren $\\vec{v}(t) = [-3\\sin t, 3\\cos t]$:

$$\\vec{a}(t) = \\vec{v}'(t) = [-3\\cos t, -3\\sin t]$$

b) Vi ser at:
$$\\vec{a}(t) = [-3\\cos t, -3\\sin t] = -[3\\cos t, 3\\sin t] = -\\vec{r}(t)$$

Akselerasjonen peker i motsatt retning av posisjonsvektoren, altsai **mot origo** (sentrum av sirkelen).

Dette kalles **sentripetalakselerasjon** - akselerasjonen som holder objektet i sirkelbanen.

c) Storrelsen:
$$|\\vec{a}(t)| = |-\\vec{r}(t)| = |\\vec{r}(t)| = 3$$

Akselerasjonen har konstant storrelse 3 m/s$^2$.`,
    },

    // Note om sentripetalakselerasjon
    {
      id: 'r2-6-3-note-sentripetal',
      type: 'note',
      content: `**Sentripetalakselerasjon:**

Ved uniform sirkelbevegelse (konstant fart $v$, radius $r$) gjelder:

$$|\\vec{a}| = \\frac{v^2}{r}$$

I vart eksempel: $v = 3$, $r = 3$, sa $|\\vec{a}| = \\frac{9}{3} = 3$ m/s$^2$. Dette stemmer med det vi beregnet!`,
    },

    // Eksempel 8: Akselerasjon som funksjon av tid
    {
      id: 'r2-6-3-example-8',
      type: 'example',
      title: 'Eksempel 8: Varierende akselerasjon',
      problem: `Et objekt har posisjonsvektor $\\vec{r}(t) = [t^3 - 3t, t^2]$.

a) Finn $\\vec{v}(t)$ og $\\vec{a}(t)$.
b) Finn akselerasjonen ved $t = 1$.
c) Nar er akselerasjonen lik null?`,
      solution: `**Løsning:**

a) Hastigheten:
$$\\vec{v}(t) = \\vec{r}'(t) = [3t^2 - 3, 2t]$$

Akselerasjonen:
$$\\vec{a}(t) = \\vec{v}'(t) = [6t, 2]$$

b) Ved $t = 1$:
$$\\vec{a}(1) = [6 \\cdot 1, 2] = [6, 2]$$

Storrelsen: $|\\vec{a}(1)| = \\sqrt{36 + 4} = \\sqrt{40} = 2\\sqrt{10}$ m/s$^2$.

c) Akselerasjonen er null nar $\\vec{a}(t) = [0, 0]$:
- $6t = 0 \\Rightarrow t = 0$
- $2 = 0$ (umulig)

Det finnes ingen $t$ der begge komponentene er null. Akselerasjonen er aldri null fordi $y$-komponenten alltid er 2.`,
    },

    // ========== SKRATT KAST ==========
    {
      id: 'r2-6-3-skratt-kast',
      type: 'text',
      content: `## Skratt kast (ballistisk bevegelse)

Et klassisk eksempel på bevegelse i planet er **skratt kast** - bevegelsen til et objekt som kastes med en viss utgangshastighet og pavirkes kun av tyngdekraften.

Vi antar:
- Ingen luftmotstand
- Konstant tyngdeakselerasjon $g \\approx 9{,}81 \\text{ m/s}^2$ nedover
- Objektet starter i origo ved $t = 0$

La utgangshastigheten vare $v_0$ med vinkel $\\alpha$ over horisontalplanet.`,
    },

    // Teorem: Bevegelseslikninger for skratt kast
    {
      id: 'r2-6-3-theorem-skratt-kast',
      type: 'theorem',
      title: 'Bevegelseslikninger for skratt kast',
      content: `For et objekt kastet fra origo med utgangshastighet $v_0$ i vinkel $\\alpha$ med horisontalplanet:

**Akselerasjon:**
$$\\vec{a}(t) = [0, -g]$$

**Hastighet:**
$$\\vec{v}(t) = [v_0 \\cos \\alpha, v_0 \\sin \\alpha - gt]$$

**Posisjon:**
$$\\vec{r}(t) = [v_0 t \\cos \\alpha, v_0 t \\sin \\alpha - \\frac{1}{2}gt^2]$$

Merk: $x$-komponenten er rettlinjet bevegelse med konstant hastighet, mens $y$-komponenten har konstant akselerasjon (fritt fall).`,
    },

    // Eksempel 9: Skratt kast beregning
    {
      id: 'r2-6-3-example-9',
      type: 'example',
      title: 'Eksempel 9: Skratt kast - fotball',
      problem: `En fotball sparkes fra bakken med utgangshastighet $20$ m/s i en vinkel på $30°$ med bakken. Bruk $g = 10$ m/s$^2$.

a) Skriv opp posisjonsvektoren $\\vec{r}(t)$.
b) Finn maksimal høyde.
c) Finn hvor langt ballen flyr (skuddlengden).`,
      solution: `**Løsning:**

Vi har $v_0 = 20$ m/s, $\\alpha = 30°$, $g = 10$ m/s$^2$.

Forst beregner vi:
- $\\cos 30° = \\frac{\\sqrt{3}}{2} \\approx 0{,}866$
- $\\sin 30° = \\frac{1}{2} = 0{,}5$

a) Posisjonsvektoren:
$$\\vec{r}(t) = [20t \\cdot \\cos 30°, 20t \\cdot \\sin 30° - \\frac{1}{2} \\cdot 10 \\cdot t^2]$$
$$= [20t \\cdot 0{,}866, 20t \\cdot 0{,}5 - 5t^2]$$
$$= [17{,}32t, 10t - 5t^2]$$

b) Maksimal høyde nas nar $v_y(t) = 0$:
$$v_y(t) = 20 \\sin 30° - 10t = 10 - 10t = 0$$
$$t = 1 \\text{ s}$$

Maksimal høyde:
$$y(1) = 10 \\cdot 1 - 5 \\cdot 1^2 = 10 - 5 = 5 \\text{ m}$$

c) Ballen lander nar $y(t) = 0$:
$$10t - 5t^2 = 0$$
$$5t(2 - t) = 0$$
$$t = 0 \\text{ eller } t = 2 \\text{ s}$$

Ved $t = 2$ s:
$$x(2) = 17{,}32 \\cdot 2 = 34{,}64 \\text{ m}$$

Skuddlengden er ca. $34{,}6$ m.`,
    },

    // Eksempel 10: Skratt kast med starhøyde
    {
      id: 'r2-6-3-example-10',
      type: 'example',
      title: 'Eksempel 10: Kast fra en høyde',
      problem: `En ball kastes horisontalt fra en klippe 80 meter over bakken med hastighet 15 m/s. Bruk $g = 10$ m/s$^2$.

a) Skriv opp $\\vec{r}(t)$ med origo på toppen av klippen.
b) Hvor lang tid tar det for ballen lander?
c) Hvor langt fra klippen lander ballen?
d) Hva er farten nar ballen treffer bakken?`,
      solution: `**Løsning:**

Horisontalt kast betyr $\\alpha = 0°$, sa $\\cos 0° = 1$ og $\\sin 0° = 0$.

a) Posisjonsvektoren:
$$\\vec{r}(t) = [15t, 0 - \\frac{1}{2} \\cdot 10 \\cdot t^2] = [15t, -5t^2]$$

(Negativ $y$ betyr nedover fra startpunktet.)

b) Ballen lander nar $y = -80$:
$$-5t^2 = -80$$
$$t^2 = 16$$
$$t = 4 \\text{ s}$$

c) Horisontal avstand:
$$x(4) = 15 \\cdot 4 = 60 \\text{ m}$$

d) Hastigheten ved landing:
$$\\vec{v}(t) = [15, -10t]$$
$$\\vec{v}(4) = [15, -40]$$

Farten:
$$v(4) = |\\vec{v}(4)| = \\sqrt{15^2 + (-40)^2} = \\sqrt{225 + 1600} = \\sqrt{1825} \\approx 42{,}7 \\text{ m/s}$$`,
    },

    // ========== GENERELL SIRKELBEVEGELSE ==========
    {
      id: 'r2-6-3-sirkel',
      type: 'text',
      content: `## Sirkelbevegelse

Vi har allerede sett på uniform sirkelbevegelse. Na skal vi utforske dette mer systematisk og se på tilfellet der farten varierer.`,
    },

    // Teorem: Uniform sirkelbevegelse
    {
      id: 'r2-6-3-theorem-uniform-sirkel',
      type: 'theorem',
      title: 'Uniform sirkelbevegelse',
      content: `For et objekt som beveger seg med konstant fart $v$ i en sirkel med radius $r$:

**Posisjonsvektor:**
$$\\vec{r}(t) = [r\\cos(\\omega t), r\\sin(\\omega t)]$$

der $\\omega = \\frac{v}{r}$ er **vinkelhastigheten** (rad/s).

**Hastighetsvektor:**
$$\\vec{v}(t) = [-r\\omega\\sin(\\omega t), r\\omega\\cos(\\omega t)]$$

**Fart:** $|\\vec{v}| = r\\omega = v$ (konstant)

**Akselerasjonsvektor:**
$$\\vec{a}(t) = [-r\\omega^2\\cos(\\omega t), -r\\omega^2\\sin(\\omega t)] = -\\omega^2 \\vec{r}(t)$$

**Sentripetalakselerasjon:** $|\\vec{a}| = r\\omega^2 = \\frac{v^2}{r}$`,
    },

    // Eksempel 11: Karusell
    {
      id: 'r2-6-3-example-11',
      type: 'example',
      title: 'Eksempel 11: Karusell',
      problem: `En karusell har radius 4 meter og gjor ett omdreiing på 8 sekunder.

a) Finn vinkelhastigheten $\\omega$.
b) Skriv opp posisjonsvektoren $\\vec{r}(t)$ for et barn som sitter ytterst.
c) Finn farten til barnet.
d) Finn sentripetalakselerasjonen.`,
      solution: `**Løsning:**

a) Vinkelhastigheten:

Ett omdreiing = $2\\pi$ radianer på 8 sekunder:
$$\\omega = \\frac{2\\pi}{8} = \\frac{\\pi}{4} \\text{ rad/s}$$

b) Posisjonsvektoren med $r = 4$:
$$\\vec{r}(t) = \\left[4\\cos\\left(\\frac{\\pi t}{4}\\right), 4\\sin\\left(\\frac{\\pi t}{4}\\right)\\right]$$

c) Farten:
$$v = r\\omega = 4 \\cdot \\frac{\\pi}{4} = \\pi \\approx 3{,}14 \\text{ m/s}$$

d) Sentripetalakselerasjonen:
$$|\\vec{a}| = r\\omega^2 = 4 \\cdot \\left(\\frac{\\pi}{4}\\right)^2 = 4 \\cdot \\frac{\\pi^2}{16} = \\frac{\\pi^2}{4} \\approx 2{,}47 \\text{ m/s}^2$$

Alternativt: $|\\vec{a}| = \\frac{v^2}{r} = \\frac{\\pi^2}{4}$ m/s$^2$.`,
    },

    // Eksempel 12: Planet i bane
    {
      id: 'r2-6-3-example-12',
      type: 'example',
      title: 'Eksempel 12: Satellitt i bane',
      problem: `En satellitt gar i en sirkulaer bane rundt Jorden med radius $r = 7000$ km og bruker $T = 90$ minutter på ett omdreiing.

a) Finn vinkelhastigheten.
b) Finn farten til satellitten.
c) Finn akselerasjonen mot Jorden.`,
      solution: `**Løsning:**

Gjor om til SI-enheter:
- $r = 7000 \\text{ km} = 7{,}0 \\times 10^6$ m
- $T = 90 \\text{ min} = 5400$ s

a) Vinkelhastigheten:
$$\\omega = \\frac{2\\pi}{T} = \\frac{2\\pi}{5400} \\approx 1{,}16 \\times 10^{-3} \\text{ rad/s}$$

b) Farten:
$$v = r\\omega = 7{,}0 \\times 10^6 \\cdot 1{,}16 \\times 10^{-3} \\approx 8140 \\text{ m/s} \\approx 8{,}1 \\text{ km/s}$$

c) Akselerasjonen:
$$|\\vec{a}| = \\frac{v^2}{r} = \\frac{(8140)^2}{7{,}0 \\times 10^6} \\approx 9{,}5 \\text{ m/s}^2$$

Dette er nesten lik tyngdeakselerasjonen på jordoverflaten ($g \\approx 9{,}8$ m/s$^2$), noe som gir mening fysisk.`,
    },

    // ========== BEVEGELSE MED VARIERENDE FART ==========
    {
      id: 'r2-6-3-varierende',
      type: 'text',
      content: `## Bevegelse med varierende fart

Ikke all bevegelse har konstant fart. La oss se på noen eksempler der farten endrer seg over tid.`,
    },

    // Eksempel 13: Spiral bevegelse
    {
      id: 'r2-6-3-example-13',
      type: 'example',
      title: 'Eksempel 13: Spiralbevegelse',
      problem: `En partikkel beveger seg i en spiral gitt ved:
$$\\vec{r}(t) = [t\\cos t, t\\sin t]$$

a) Beskriv banen.
b) Finn hastighetsvektoren.
c) Finn farten som funksjon av $t$.`,
      solution: `**Løsning:**

a) Avstanden fra origo er $|\\vec{r}(t)| = \\sqrt{t^2\\cos^2 t + t^2\\sin^2 t} = |t|$.

For $t > 0$ oker avstanden lineært med tiden mens partikkelen roterer rundt origo. Dette er en **archimedisk spiral** som utvider seg utover.

b) Hastighetsvektoren (produktregelen):
$$\\vec{v}(t) = \\vec{r}'(t) = [\\cos t - t\\sin t, \\sin t + t\\cos t]$$

c) Farten:
$$v(t) = |\\vec{v}(t)| = \\sqrt{(\\cos t - t\\sin t)^2 + (\\sin t + t\\cos t)^2}$$

Utvider vi og forenkler:
$$= \\sqrt{\\cos^2 t - 2t\\cos t\\sin t + t^2\\sin^2 t + \\sin^2 t + 2t\\sin t\\cos t + t^2\\cos^2 t}$$
$$= \\sqrt{\\cos^2 t + \\sin^2 t + t^2(\\sin^2 t + \\cos^2 t)}$$
$$= \\sqrt{1 + t^2}$$

Farten oker med tiden: $v(t) = \\sqrt{1 + t^2}$.`,
    },

    // Eksempel 14: Finn posisjonen fra akselerasjon
    {
      id: 'r2-6-3-example-14',
      type: 'example',
      title: 'Eksempel 14: Fra akselerasjon til posisjon',
      problem: `Et objekt har akselerasjon $\\vec{a}(t) = [2, 6t]$, utgangshastighet $\\vec{v}(0) = [1, 0]$ og startposisjon $\\vec{r}(0) = [0, 0]$.

Finn $\\vec{r}(t)$.`,
      solution: `**Løsning:**

**Steg 1: Finn hastigheten ved integrasjon**

$$\\vec{v}(t) = \\int \\vec{a}(t) \\, dt = \\int [2, 6t] \\, dt = [2t + C_1, 3t^2 + C_2]$$

Bruker initialbetingelsen $\\vec{v}(0) = [1, 0]$:
$$[C_1, C_2] = [1, 0]$$

Altsai: $\\vec{v}(t) = [2t + 1, 3t^2]$

**Steg 2: Finn posisjonen ved integrasjon**

$$\\vec{r}(t) = \\int \\vec{v}(t) \\, dt = \\int [2t + 1, 3t^2] \\, dt = [t^2 + t + D_1, t^3 + D_2]$$

Bruker initialbetingelsen $\\vec{r}(0) = [0, 0]$:
$$[D_1, D_2] = [0, 0]$$

**Svar:**
$$\\vec{r}(t) = [t^2 + t, t^3]$$`,
    },

    // Eksempel 15: Praktisk anvendelse - prosjektil
    {
      id: 'r2-6-3-example-15',
      type: 'example',
      title: 'Eksempel 15: Prosjektil med luftmotstand',
      problem: `I virkeligheten pavirkes prosjektiler av luftmotstand. En forenklet modell gir akselerasjonen:
$$\\vec{a}(t) = [-0{,}1v_x, -10 - 0{,}1v_y]$$

der $v_x$ og $v_y$ er hastighetskomponentene.

Forklar fysisk hva de ulike leddene representerer.`,
      solution: `**Løsning:**

**Horisontal komponent:** $a_x = -0{,}1v_x$
- Negativ akselerasjon proporsjonal med $v_x$
- Dette representerer luftmotstand som bremser horisontal bevegelse
- Jo raskere objektet gar, desto storre er motstanden

**Vertikal komponent:** $a_y = -10 - 0{,}1v_y$
- Leddet $-10$ er tyngdeakselerasjonen (ned)
- Leddet $-0{,}1v_y$ er vertikal luftmotstand
- Nar objektet gar oppover ($v_y > 0$): bade tyngdekraft og luftmotstand virker nedover
- Nar objektet faller ($v_y < 0$): tyngdekraften virker ned, men luftmotstanden virker oppover (bremser fallet)

**Konsekvenser:**
- Objektet nar ikke sa hoyt som uten luftmotstand
- Rekkevidden blir kortere
- Objektet nar til slutt en **terminal hastighet** der luftmotstanden balanserer tyngdekraften`,
    },

    // Eksempel 16: Analyse av kompleks bane
    {
      id: 'r2-6-3-example-16',
      type: 'example',
      title: 'Eksempel 16: Sykloide',
      problem: `En sykloide er banen til et punkt på kanten av et hjul som ruller langs bakken. Posisjonsvektoren er:
$$\\vec{r}(t) = [t - \\sin t, 1 - \\cos t]$$

a) Finn $\\vec{v}(t)$ og $\\vec{a}(t)$.
b) Finn farten $v(t)$.
c) Ved hvilke tidspunkter er farten null?`,
      solution: `**Løsning:**

a) Hastigheten:
$$\\vec{v}(t) = \\vec{r}'(t) = [1 - \\cos t, \\sin t]$$

Akselerasjonen:
$$\\vec{a}(t) = \\vec{v}'(t) = [\\sin t, \\cos t]$$

b) Farten:
$$v(t) = |\\vec{v}(t)| = \\sqrt{(1 - \\cos t)^2 + \\sin^2 t}$$

Utvider:
$$= \\sqrt{1 - 2\\cos t + \\cos^2 t + \\sin^2 t}$$
$$= \\sqrt{1 - 2\\cos t + 1}$$
$$= \\sqrt{2 - 2\\cos t}$$
$$= \\sqrt{2(1 - \\cos t)}$$

Bruker identiteten $1 - \\cos t = 2\\sin^2\\frac{t}{2}$:
$$= \\sqrt{4\\sin^2\\frac{t}{2}} = 2\\left|\\sin\\frac{t}{2}\\right|$$

c) Farten er null nar $\\sin\\frac{t}{2} = 0$:
$$\\frac{t}{2} = n\\pi, \\quad n = 0, 1, 2, ...$$
$$t = 0, 2\\pi, 4\\pi, ...$$

Dette er tidspunktene der punktet på hjulet er i kontakt med bakken - da star det midlertidig stille!`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-6-3-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1: Grunnleggende posisjon og hastighet
    {
      id: 'r2-6-3-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-1',
        number: '6.3.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Et objekt har posisjonsvektor $\\vec{r}(t) = [3t - 1, 2t + 4]$ der $t$ er i sekunder og koordinatene i meter.',
        subTasks: [
          { label: 'a', task: 'Finn posisjonen ved $t = 0$ og $t = 2$.', solution: 'Ved $t = 0$: $\\vec{r}(0) = [-1, 4]$. Ved $t = 2$: $\\vec{r}(2) = [5, 8]$.' },
          { label: 'b', task: 'Finn hastighetsvektoren $\\vec{v}(t)$.', solution: '$\\vec{v}(t) = \\vec{r}\'(t) = [3, 2]$' },
          { label: 'c', task: 'Finn farten.', solution: '$v = |\\vec{v}| = \\sqrt{3^2 + 2^2} = \\sqrt{13}$ m/s' },
          { label: 'd', task: 'Beskriv bevegelsen.', solution: 'Rettlinjet bevegelse med konstant hastighet $[3, 2]$ m/s og konstant fart $\\sqrt{13}$ m/s.' },
        ],
        solution: 'a) $[-1, 4]$ og $[5, 8]$, b) $[3, 2]$, c) $\\sqrt{13}$ m/s, d) Rettlinjet bevegelse med konstant hastighet.',
        hints: ['Sett inn verdier for $t$ i a)', 'Deriver komponent for komponent i b)', 'Farten er lengden av hastighetsvektoren'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2: Hastighet og akselerasjon
    {
      id: 'r2-6-3-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-2',
        number: '6.3.2',
        type: 'classic',
        difficulty: 'lett',
        task: 'Et objekt har posisjonsvektor $\\vec{r}(t) = [t^2, t^3]$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}(t)$.', solution: '$\\vec{v}(t) = [2t, 3t^2]$' },
          { label: 'b', task: 'Finn $\\vec{a}(t)$.', solution: '$\\vec{a}(t) = [2, 6t]$' },
          { label: 'c', task: 'Finn hastigheten og akselerasjonen ved $t = 1$.', solution: '$\\vec{v}(1) = [2, 3]$ og $\\vec{a}(1) = [2, 6]$' },
          { label: 'd', task: 'Finn farten ved $t = 1$.', solution: '$v(1) = \\sqrt{4 + 9} = \\sqrt{13}$ m/s' },
        ],
        solution: 'a) $[2t, 3t^2]$, b) $[2, 6t]$, c) $[2, 3]$ og $[2, 6]$, d) $\\sqrt{13}$ m/s',
        hints: ['Hastigheten er forstederiverte av posisjonen', 'Akselerasjonen er den deriverte av hastigheten'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3: Sirkelbevegelse
    {
      id: 'r2-6-3-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-3',
        number: '6.3.3',
        type: 'classic',
        difficulty: 'medium',
        task: 'En partikkel beveger seg langs en sirkel med posisjonsvektor $\\vec{r}(t) = [5\\cos(2t), 5\\sin(2t)]$.',
        subTasks: [
          { label: 'a', task: 'Finn radius og vinkelhastighet.', solution: 'Radius: $r = 5$, vinkelhastighet: $\\omega = 2$ rad/s' },
          { label: 'b', task: 'Finn $\\vec{v}(t)$ og vis at $\\vec{v} \\perp \\vec{r}$.', solution: '$\\vec{v}(t) = [-10\\sin(2t), 10\\cos(2t)]$. $\\vec{r} \\cdot \\vec{v} = -50\\cos(2t)\\sin(2t) + 50\\sin(2t)\\cos(2t) = 0$.' },
          { label: 'c', task: 'Finn farten.', solution: '$v = |\\vec{v}| = \\sqrt{100\\sin^2(2t) + 100\\cos^2(2t)} = 10$ m/s' },
          { label: 'd', task: 'Finn $\\vec{a}(t)$ og vis at $\\vec{a} = -\\omega^2\\vec{r}$.', solution: '$\\vec{a}(t) = [-20\\cos(2t), -20\\sin(2t)] = -4[5\\cos(2t), 5\\sin(2t)] = -4\\vec{r}$. Siden $\\omega = 2$, er $\\omega^2 = 4$, sa $\\vec{a} = -\\omega^2\\vec{r}$.' },
        ],
        solution: 'a) $r = 5$, $\\omega = 2$ rad/s, b) Se utregning, c) $v = 10$ m/s, d) Se utregning',
        hints: ['Sammenlign med standardformen $[r\\cos(\\omega t), r\\sin(\\omega t)]$', 'To vektorer er vinkelrette hvis skalarproduktet er null'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4: Fart som funksjon av tid
    {
      id: 'r2-6-3-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-4',
        number: '6.3.4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Et objekt har posisjonsvektor $\\vec{r}(t) = [e^t, e^{-t}]$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}(t)$.', solution: '$\\vec{v}(t) = [e^t, -e^{-t}]$' },
          { label: 'b', task: 'Finn farten $v(t)$.', solution: '$v(t) = \\sqrt{e^{2t} + e^{-2t}}$' },
          { label: 'c', task: 'Vis at farten har et minimum ved $t = 0$.', solution: 'La $f(t) = e^{2t} + e^{-2t}$. $f\'(t) = 2e^{2t} - 2e^{-2t} = 0$ gir $e^{4t} = 1$, sa $t = 0$. $f\'\'(0) = 4 + 4 = 8 > 0$, sa minimum. Ved $t = 0$: $v(0) = \\sqrt{2}$.' },
          { label: 'd', task: 'Hva er minimumsfarten?', solution: '$v_{min} = v(0) = \\sqrt{2}$ m/s' },
        ],
        solution: 'a) $[e^t, -e^{-t}]$, b) $\\sqrt{e^{2t} + e^{-2t}}$, c) Se utregning, d) $\\sqrt{2}$ m/s',
        hints: ['Husk at $(e^t)\' = e^t$ og $(e^{-t})\' = -e^{-t}$', 'For å finne minimum av farten, kan du derivere $v(t)^2$ og sette lik null'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5: Skratt kast
    {
      id: 'r2-6-3-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-5',
        number: '6.3.5',
        type: 'classic',
        difficulty: 'medium',
        task: 'En basketball kastes med utgangshastighet 12 m/s i en vinkel på 45 grader. Bruk $g = 10$ m/s$^2$.',
        subTasks: [
          { label: 'a', task: 'Finn komponentene av utgangshastigheten.', solution: '$v_{0x} = 12\\cos 45° = 12 \\cdot \\frac{\\sqrt{2}}{2} = 6\\sqrt{2}$ m/s, $v_{0y} = 12\\sin 45° = 6\\sqrt{2}$ m/s' },
          { label: 'b', task: 'Skriv opp $\\vec{r}(t)$.', solution: '$\\vec{r}(t) = [6\\sqrt{2}t, 6\\sqrt{2}t - 5t^2]$' },
          { label: 'c', task: 'Finn maksimal høyde.', solution: '$v_y = 0$ nar $6\\sqrt{2} - 10t = 0$, sa $t = 0{,}6\\sqrt{2}$ s. $y_{max} = 6\\sqrt{2} \\cdot 0{,}6\\sqrt{2} - 5(0{,}6\\sqrt{2})^2 = 7{,}2 - 3{,}6 = 3{,}6$ m' },
          { label: 'd', task: 'Finn skuddlengden.', solution: '$y = 0$ nar $6\\sqrt{2}t - 5t^2 = 0$, sa $t = 0$ eller $t = 1{,}2\\sqrt{2}$ s. $x = 6\\sqrt{2} \\cdot 1{,}2\\sqrt{2} = 14{,}4$ m' },
        ],
        solution: 'a) $6\\sqrt{2}$ m/s i begge retninger, b) $[6\\sqrt{2}t, 6\\sqrt{2}t - 5t^2]$, c) 3,6 m, d) 14,4 m',
        hints: ['$\\cos 45° = \\sin 45° = \\frac{\\sqrt{2}}{2}$', 'Maksimal høyde nas nar $v_y = 0$', 'Ballen lander nar $y = 0$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6: Kast fra høyde
    {
      id: 'r2-6-3-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-6',
        number: '6.3.6',
        type: 'classic',
        difficulty: 'medium',
        task: 'En stein kastes horisontalt fra en bro 45 meter over vannet med hastighet 20 m/s. Bruk $g = 10$ m/s$^2$.',
        subTasks: [
          { label: 'a', task: 'Skriv opp $\\vec{r}(t)$, $\\vec{v}(t)$ og $\\vec{a}(t)$.', solution: '$\\vec{r}(t) = [20t, 45 - 5t^2]$, $\\vec{v}(t) = [20, -10t]$, $\\vec{a}(t) = [0, -10]$' },
          { label: 'b', task: 'Hvor lang tid tar det for steinen treffer vannet?', solution: '$45 - 5t^2 = 0 \\Rightarrow t^2 = 9 \\Rightarrow t = 3$ s' },
          { label: 'c', task: 'Hvor langt fra broen lander steinen?', solution: '$x(3) = 20 \\cdot 3 = 60$ m' },
          { label: 'd', task: 'Hva er farten nar steinen treffer vannet?', solution: '$\\vec{v}(3) = [20, -30]$, $v = \\sqrt{400 + 900} = \\sqrt{1300} \\approx 36{,}1$ m/s' },
        ],
        solution: 'a) Se utregning, b) 3 s, c) 60 m, d) $\\sqrt{1300} \\approx 36{,}1$ m/s',
        hints: ['Horisontalt kast betyr at $v_{0y} = 0$', 'Steinen treffer vannet nar $y = 0$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7: Karuselloppgave
    {
      id: 'r2-6-3-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-7',
        number: '6.3.7',
        type: 'classic',
        difficulty: 'medium',
        task: 'En karusell har radius 3 meter og roterer med vinkelhastighet $\\omega = \\frac{\\pi}{3}$ rad/s.',
        subTasks: [
          { label: 'a', task: 'Skriv opp posisjonsvektoren for et barn ytterst på karusellen.', solution: '$\\vec{r}(t) = [3\\cos(\\frac{\\pi t}{3}), 3\\sin(\\frac{\\pi t}{3})]$' },
          { label: 'b', task: 'Finn farten til barnet.', solution: '$v = r\\omega = 3 \\cdot \\frac{\\pi}{3} = \\pi$ m/s' },
          { label: 'c', task: 'Finn sentripetalakselerasjonen.', solution: '$|\\vec{a}| = r\\omega^2 = 3 \\cdot \\frac{\\pi^2}{9} = \\frac{\\pi^2}{3}$ m/s$^2$' },
          { label: 'd', task: 'Hvor lang tid tar ett omdreiing?', solution: '$T = \\frac{2\\pi}{\\omega} = \\frac{2\\pi}{\\frac{\\pi}{3}} = 6$ s' },
        ],
        solution: 'a) $[3\\cos(\\frac{\\pi t}{3}), 3\\sin(\\frac{\\pi t}{3})]$, b) $\\pi$ m/s, c) $\\frac{\\pi^2}{3}$ m/s$^2$, d) 6 s',
        hints: ['Bruk standardformen for uniform sirkelbevegelse', 'Perioden er $T = \\frac{2\\pi}{\\omega}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8: Integrasjon fra akselerasjon
    {
      id: 'r2-6-3-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-8',
        number: '6.3.8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et objekt har akselerasjon $\\vec{a}(t) = [0, -10]$, utgangshastighet $\\vec{v}(0) = [15, 20]$ og startposisjon $\\vec{r}(0) = [0, 0]$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}(t)$ ved integrasjon.', solution: '$\\vec{v}(t) = [15, 20 - 10t]$' },
          { label: 'b', task: 'Finn $\\vec{r}(t)$ ved integrasjon.', solution: '$\\vec{r}(t) = [15t, 20t - 5t^2]$' },
          { label: 'c', task: 'Hva slags bevegelse er dette?', solution: 'Skratt kast med $v_0 = \\sqrt{15^2 + 20^2} = 25$ m/s og $\\tan\\alpha = \\frac{20}{15} = \\frac{4}{3}$.' },
          { label: 'd', task: 'Finn maksimal høyde og skuddlengde.', solution: 'Max høyde nar $v_y = 0$: $t = 2$ s, $y_{max} = 20$ m. Lander nar $y = 0$: $t = 4$ s, $x = 60$ m.' },
        ],
        solution: 'a) $[15, 20 - 10t]$, b) $[15t, 20t - 5t^2]$, c) Skratt kast, d) Max høyde 20 m, skuddlengde 60 m',
        hints: ['Integrer $\\vec{a}(t)$ og bruk initialbetingelser', 'Husk konstantledd ved integrasjon'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9: Ellipsebane
    {
      id: 'r2-6-3-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-9',
        number: '6.3.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En partikkel beveger seg langs en ellipse med posisjonsvektor $\\vec{r}(t) = [4\\cos t, 2\\sin t]$.',
        subTasks: [
          { label: 'a', task: 'Verifiser at partikkelen beveger seg på ellipsen $\\frac{x^2}{16} + \\frac{y^2}{4} = 1$.', solution: '$\\frac{(4\\cos t)^2}{16} + \\frac{(2\\sin t)^2}{4} = \\frac{16\\cos^2 t}{16} + \\frac{4\\sin^2 t}{4} = \\cos^2 t + \\sin^2 t = 1$ \\checkmark' },
          { label: 'b', task: 'Finn $\\vec{v}(t)$ og $\\vec{a}(t)$.', solution: '$\\vec{v}(t) = [-4\\sin t, 2\\cos t]$, $\\vec{a}(t) = [-4\\cos t, -2\\sin t]$' },
          { label: 'c', task: 'Finn farten $v(t)$ og bestem nar farten er størst og minst.', solution: '$v(t) = \\sqrt{16\\sin^2 t + 4\\cos^2 t} = \\sqrt{4 + 12\\sin^2 t}$. Max nar $\\sin^2 t = 1$: $v_{max} = 4$. Min nar $\\sin^2 t = 0$: $v_{min} = 2$.' },
          { label: 'd', task: 'Hvor på ellipsen er farten størst og minst?', solution: 'Storst fart ved $(0, \\pm 2)$ (endene av lille akse). Minst fart ved $(\\pm 4, 0)$ (endene av store akse).' },
        ],
        solution: 'a) Se utregning, b) $[-4\\sin t, 2\\cos t]$ og $[-4\\cos t, -2\\sin t]$, c) Max 4 m/s, min 2 m/s, d) Se losning',
        hints: ['Bruk identiteten $\\sin^2 t + \\cos^2 t = 1$', 'Farten varierer fordi halvaksene er forskjellige'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10: Kompleks bane
    {
      id: 'r2-6-3-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-10',
        number: '6.3.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et objekt følger banen $\\vec{r}(t) = [\\cos^3 t, \\sin^3 t]$ for $0 \\leq t \\leq 2\\pi$ (en astroide).',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}(t)$.', solution: '$\\vec{v}(t) = [-3\\cos^2 t \\sin t, 3\\sin^2 t \\cos t]$' },
          { label: 'b', task: 'Finn farten $v(t)$.', solution: '$v(t) = 3|\\sin t \\cos t|\\sqrt{\\cos^2 t + \\sin^2 t} = 3|\\sin t \\cos t| = \\frac{3}{2}|\\sin 2t|$' },
          { label: 'c', task: 'Ved hvilke $t$ er farten null?', solution: 'Nar $\\sin 2t = 0$: $t = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}, 2\\pi$' },
          { label: 'd', task: 'Hva er maksimal fart?', solution: 'Maks nar $|\\sin 2t| = 1$: $v_{max} = \\frac{3}{2}$ m/s' },
        ],
        solution: 'a) $[-3\\cos^2 t \\sin t, 3\\sin^2 t \\cos t]$, b) $\\frac{3}{2}|\\sin 2t|$, c) $t = 0, \\frac{\\pi}{2}, \\pi, \\frac{3\\pi}{2}, 2\\pi$, d) $\\frac{3}{2}$ m/s',
        hints: ['Bruk kjerneregelen: $(\\cos^3 t)\' = 3\\cos^2 t \\cdot (-\\sin t)$', 'Bruk at $2\\sin t \\cos t = \\sin 2t$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 11: Vinkel mellom hastighet og akselerasjon
    {
      id: 'r2-6-3-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-11',
        number: '6.3.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et objekt har posisjonsvektor $\\vec{r}(t) = [t, t^2]$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}(t)$ og $\\vec{a}(t)$.', solution: '$\\vec{v}(t) = [1, 2t]$, $\\vec{a}(t) = [0, 2]$' },
          { label: 'b', task: 'Finn vinkelen $\\theta$ mellom $\\vec{v}$ og $\\vec{a}$ ved $t = 1$.', solution: 'Ved $t = 1$: $\\vec{v} = [1, 2]$, $\\vec{a} = [0, 2]$. $\\cos\\theta = \\frac{\\vec{v} \\cdot \\vec{a}}{|\\vec{v}||\\vec{a}|} = \\frac{4}{\\sqrt{5} \\cdot 2} = \\frac{2}{\\sqrt{5}}$. $\\theta = \\arccos\\frac{2}{\\sqrt{5}} \\approx 26{,}6°$' },
          { label: 'c', task: 'Finn $\\theta$ ved $t = 0$.', solution: 'Ved $t = 0$: $\\vec{v} = [1, 0]$, $\\vec{a} = [0, 2]$. $\\cos\\theta = 0$, sa $\\theta = 90°$.' },
          { label: 'd', task: 'Hva skjer med $\\theta$ nar $t \\to \\infty$?', solution: '$\\cos\\theta = \\frac{4t}{\\sqrt{1 + 4t^2} \\cdot 2} = \\frac{2t}{\\sqrt{1 + 4t^2}} \\to 1$ nar $t \\to \\infty$. $\\theta \\to 0°$.' },
        ],
        solution: 'a) $[1, 2t]$ og $[0, 2]$, b) Ca. 26,6 grader, c) 90 grader, d) $\\theta \\to 0°$',
        hints: ['Bruk formelen $\\cos\\theta = \\frac{\\vec{v} \\cdot \\vec{a}}{|\\vec{v}||\\vec{a}|}$', 'Nar hastigheten og akselerasjonen er parallelle, oker farten mest effektivt'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 12: Praktisk anvendelse
    {
      id: 'r2-6-3-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-12',
        number: '6.3.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En romsonde beveger seg på en spiralbane ut fra en planet. Posisjonsvektoren er $\\vec{r}(t) = [(10 + t)\\cos t, (10 + t)\\sin t]$ der $t$ er i timer og avstander i tusen kilometer.',
        subTasks: [
          { label: 'a', task: 'Finn avstanden fra planeten ved $t = 0$ og $t = 2\\pi$.', solution: 'Ved $t = 0$: $|\\vec{r}(0)| = 10$ tusen km. Ved $t = 2\\pi$: $|\\vec{r}(2\\pi)| = 10 + 2\\pi \\approx 16{,}3$ tusen km.' },
          { label: 'b', task: 'Finn $\\vec{v}(t)$.', solution: '$\\vec{v}(t) = [\\cos t - (10+t)\\sin t, \\sin t + (10+t)\\cos t]$' },
          { label: 'c', task: 'Finn farten ved $t = 0$.', solution: '$\\vec{v}(0) = [1, 10]$, $v(0) = \\sqrt{1 + 100} = \\sqrt{101} \\approx 10{,}05$ tusen km/time' },
          { label: 'd', task: 'Vis at farten oker over tid.', solution: '$v(t)^2 = (\\cos t - (10+t)\\sin t)^2 + (\\sin t + (10+t)\\cos t)^2 = 1 + (10+t)^2$. Siden $(10+t)^2$ oker med $t$, oker ogsa farten.' },
        ],
        solution: 'a) 10 og ca. 16,3 tusen km, b) Se utregning, c) $\\sqrt{101} \\approx 10{,}05$ tusen km/time, d) Se utregning',
        hints: ['Bruk produktregelen for derivasjon', 'Forenkle $v(t)^2$ for enklere analyse'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 13: Bil i kurve
    {
      id: 'r2-6-3-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-13',
        number: '6.3.13',
        type: 'classic',
        difficulty: 'medium',
        task: 'En bil kjorer gjennom en 90-graders sving som kan modelleres som en kvart sirkel med radius 50 meter. Bilen holder konstant fart 20 m/s.',
        subTasks: [
          { label: 'a', task: 'Finn vinkelhastigheten $\\omega$.', solution: '$\\omega = \\frac{v}{r} = \\frac{20}{50} = 0{,}4$ rad/s' },
          { label: 'b', task: 'Hvor lang tid tar svingen?', solution: 'En kvart sirkel = $\\frac{\\pi}{2}$ radianer. $t = \\frac{\\pi/2}{0{,}4} = \\frac{5\\pi}{4} \\approx 3{,}93$ s' },
          { label: 'c', task: 'Finn sentripetalakselerasjonen.', solution: '$|\\vec{a}| = \\frac{v^2}{r} = \\frac{400}{50} = 8$ m/s$^2$' },
          { label: 'd', task: 'Sammenlign med $g$. Ville passasjerene merke svingen?', solution: '$\\frac{|\\vec{a}|}{g} = \\frac{8}{10} = 0{,}8$. Akselerasjonen er 80% av tyngdeakselerasjonen - passasjerene ville definitivt merke svingen!' },
        ],
        solution: 'a) 0,4 rad/s, b) Ca. 3,93 s, c) 8 m/s$^2$, d) 0,8g - merkbar',
        hints: ['I en sving med konstant fart har vi uniform sirkelbevegelse', 'Sentripetalakselerasjon kan sammenlignes med g for a fa en fysisk forstaeelse'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 14: Golf
    {
      id: 'r2-6-3-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-14',
        number: '6.3.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En golfball slas fra bakken med hastighet 50 m/s. For a oppna maksimal skuddlengde, hvilken vinkel bor brukes? Bruk $g = 10$ m/s$^2$.',
        subTasks: [
          { label: 'a', task: 'Skriv opp skuddlengden $R$ som funksjon av vinkelen $\\alpha$.', solution: 'Tid i luften: $t = \\frac{2v_0\\sin\\alpha}{g}$. Skuddlengde: $R = v_0\\cos\\alpha \\cdot t = \\frac{2v_0^2\\sin\\alpha\\cos\\alpha}{g} = \\frac{v_0^2\\sin 2\\alpha}{g}$' },
          { label: 'b', task: 'Finn vinkelen som gir maksimal skuddlengde.', solution: '$R$ er maksimal nar $\\sin 2\\alpha = 1$, dvs. $2\\alpha = 90°$, sa $\\alpha = 45°$' },
          { label: 'c', task: 'Beregn den maksimale skuddlengden.', solution: '$R_{max} = \\frac{50^2 \\cdot 1}{10} = \\frac{2500}{10} = 250$ m' },
          { label: 'd', task: 'Hva er maksimal høyde ved optimal vinkel?', solution: 'Ved $\\alpha = 45°$: $H = \\frac{v_0^2\\sin^2\\alpha}{2g} = \\frac{2500 \\cdot 0{,}5}{20} = 62{,}5$ m' },
        ],
        solution: 'a) $R = \\frac{v_0^2\\sin 2\\alpha}{g}$, b) 45 grader, c) 250 m, d) 62,5 m',
        hints: ['Bruk at $2\\sin\\alpha\\cos\\alpha = \\sin 2\\alpha$', '$\\sin 2\\alpha$ er maksimal nar $2\\alpha = 90°$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 15: Tre dimensjoner
    {
      id: 'r2-6-3-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-15',
        number: '6.3.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En partikkel beveger seg i rommet med posisjonsvektor $\\vec{r}(t) = [\\cos t, \\sin t, t]$ (en skruelinje/heliks).',
        subTasks: [
          { label: 'a', task: 'Vis at partikkelen beveger seg på en sylinder med radius 1.', solution: 'Avstanden fra $z$-aksen er $\\sqrt{\\cos^2 t + \\sin^2 t} = 1$ for alle $t$.' },
          { label: 'b', task: 'Finn $\\vec{v}(t)$ og $\\vec{a}(t)$.', solution: '$\\vec{v}(t) = [-\\sin t, \\cos t, 1]$, $\\vec{a}(t) = [-\\cos t, -\\sin t, 0]$' },
          { label: 'c', task: 'Finn farten og vis at den er konstant.', solution: '$v = \\sqrt{\\sin^2 t + \\cos^2 t + 1} = \\sqrt{2}$ (konstant)' },
          { label: 'd', task: 'Finn storrelsen på akselerasjonen.', solution: '$|\\vec{a}| = \\sqrt{\\cos^2 t + \\sin^2 t + 0} = 1$ (konstant)' },
        ],
        solution: 'a) Se utregning, b) $[-\\sin t, \\cos t, 1]$ og $[-\\cos t, -\\sin t, 0]$, c) $\\sqrt{2}$ (konstant), d) 1 (konstant)',
        hints: ['En heliks kombinerer sirkelbevegelse i $xy$-planet med lineær bevegelse langs $z$-aksen', 'Legg merke til at akselerasjonen kun har komponenter i $xy$-planet'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 16: Sammensatt bevegelse
    {
      id: 'r2-6-3-ex-block-16',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-16',
        number: '6.3.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'En partikkel beveger seg med $\\vec{r}(t) = [2t, t^2, t^3]$ for $t \\geq 0$.',
        subTasks: [
          { label: 'a', task: 'Finn $\\vec{v}(t)$, $\\vec{a}(t)$ og farten $v(t)$.', solution: '$\\vec{v}(t) = [2, 2t, 3t^2]$, $\\vec{a}(t) = [0, 2, 6t]$, $v(t) = \\sqrt{4 + 4t^2 + 9t^4}$' },
          { label: 'b', task: 'Hva er minimumsfarten og nar oppnas den?', solution: 'Ved $t = 0$: $v(0) = 2$. $v\'(t) > 0$ for $t > 0$, sa minimum er ved $t = 0$.' },
          { label: 'c', task: 'Finn akselerasjonens storrelse ved $t = 1$.', solution: '$\\vec{a}(1) = [0, 2, 6]$, $|\\vec{a}(1)| = \\sqrt{0 + 4 + 36} = \\sqrt{40} = 2\\sqrt{10}$' },
          { label: 'd', task: 'Hva er begrensningen på farten nar $t \\to \\infty$?', solution: 'Nar $t$ er stor, dominerer $9t^4$-leddet: $v(t) \\approx 3t^2 \\to \\infty$. Farten oker uten grense.' },
        ],
        solution: 'a) $[2, 2t, 3t^2]$, $[0, 2, 6t]$, $\\sqrt{4 + 4t^2 + 9t^4}$. b) $v_{min} = 2$ ved $t = 0$. c) $2\\sqrt{10}$. d) Farten gar mot uendelig.',
        hints: ['Derivasjon komponent for komponent', 'Sjekk om $v(t)$ har et minimum ved a derivere'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 17: Analyse av bevegelse
    {
      id: 'r2-6-3-ex-block-17',
      type: 'exercise',
      exercise: {
        id: 'r2-6-3-ex-17',
        number: '6.3.17',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Et prosjektil skytes med hastighet $v_0$ i vinkel $\\alpha$ fra høyde $h$ over bakken. Bruk $g$ for tyngdeakselerasjonen.',
        subTasks: [
          { label: 'a', task: 'Skriv opp $\\vec{r}(t)$ med origo på bakken rett under utskytningspunktet.', solution: '$\\vec{r}(t) = [v_0 t \\cos\\alpha, h + v_0 t \\sin\\alpha - \\frac{1}{2}gt^2]$' },
          { label: 'b', task: 'Finn tiden $t_L$ nar prosjektilet lander ($y = 0$).', solution: 'Los $h + v_0 t \\sin\\alpha - \\frac{1}{2}gt^2 = 0$: $t_L = \\frac{v_0\\sin\\alpha + \\sqrt{v_0^2\\sin^2\\alpha + 2gh}}{g}$' },
          { label: 'c', task: 'Finn skuddlengden $R = x(t_L)$.', solution: '$R = v_0 \\cos\\alpha \\cdot t_L = \\frac{v_0\\cos\\alpha(v_0\\sin\\alpha + \\sqrt{v_0^2\\sin^2\\alpha + 2gh})}{g}$' },
          { label: 'd', task: 'Sjekk at formelen gir $R = \\frac{v_0^2\\sin 2\\alpha}{g}$ nar $h = 0$.', solution: 'Nar $h = 0$: $t_L = \\frac{2v_0\\sin\\alpha}{g}$, sa $R = \\frac{2v_0^2\\sin\\alpha\\cos\\alpha}{g} = \\frac{v_0^2\\sin 2\\alpha}{g}$ \\checkmark' },
        ],
        solution: 'a) Se utregning, b) $t_L = \\frac{v_0\\sin\\alpha + \\sqrt{v_0^2\\sin^2\\alpha + 2gh}}{g}$, c) Se utregning, d) Se verifikasjon',
        hints: ['Startposisjonen er $(0, h)$', 'Bruk abc-formelen for andregradslikningen', 'Velg den positive losningen for $t_L$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-6-3-oppsummering',
      type: 'text',
      content: `## Oppsummering

I dette kapitlet har vi lart a bruke vektorfunksjoner til a analysere bevegelse:

**Grunnleggende sammenhenger:**
- **Posisjonsvektor:** $\\vec{r}(t) = [x(t), y(t)]$ (eller $[x(t), y(t), z(t)]$ i 3D)
- **Hastighetsvektor:** $\\vec{v}(t) = \\vec{r}'(t)$ - tangent til banen
- **Fart:** $v(t) = |\\vec{v}(t)|$ - hvor raskt objektet beveger seg
- **Akselerasjonsvektor:** $\\vec{a}(t) = \\vec{v}'(t) = \\vec{r}''(t)$

**Skratt kast:**
$$\\vec{r}(t) = [v_0 t \\cos\\alpha, v_0 t \\sin\\alpha - \\frac{1}{2}gt^2]$$

**Uniform sirkelbevegelse:**
- $\\vec{r}(t) = [r\\cos(\\omega t), r\\sin(\\omega t)]$
- Fart: $v = r\\omega$ (konstant)
- Sentripetalakselerasjon: $|\\vec{a}| = \\frac{v^2}{r} = r\\omega^2$
- Akselerasjonen peker mot sentrum

**Viktige poenger:**
- Hastighetsvektoren er alltid tangent til banen
- Ved sirkelbevegelse star hastigheten vinkelrett på radien
- Akselerasjon endrer hastigheten - enten storrelsen, retningen, eller begge`,
    },
  ],
};

export const CHAPTER_R2_6_4: TextbookChapter = {
  id: 'r2-6-4',
  courseId: 'r2',
  chapterNumber: '6.4',
  title: 'Matematisk modellering',
  description: 'Modellere reelle situasjoner med funksjoner.',
  estimatedMinutes: 55,
  competenceGoals: [
    'gi døme på ulike situasjonar som kan modellerast med ulike matematiske funksjonar',
    'tolke og validere matematiske modellar',
    'vurdere begrensningar ved matematiske modellar',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-6-4-intro',
      type: 'text',
      content: `## Matematisk modellering

Matematisk modellering handler om å bruke matematikk til å beskrive, analysere og forutsi fenomener i den virkelige verden. En **matematisk modell** er en forenklet representasjon av virkeligheten uttrykt gjennom matematiske uttrykk, ligninger eller funksjoner.

Modellering er sentralt i mange fagfelt:
- **Fysikk:** Bevegelse, elektrisitet, bølger
- **Biologi:** Populasjonsvekst, spredning av sykdommer
- **Økonomi:** Renter, markedsutvikling, kostnader
- **Miljø:** Klimaendringer, forurensning
- **Medisin:** Nedbrytning av medisiner, tumorvekst`,
    },

    // ========== MODELLERINGSPROSESSEN ==========
    {
      id: 'r2-6-4-prosess-intro',
      type: 'text',
      content: `## Modelleringsprosessen

Matematisk modellering følger en systematisk prosess med flere steg:`,
    },

    {
      id: 'r2-6-4-def-prosess',
      type: 'definition',
      title: 'De fem stegene i modelleringsprosessen',
      content: `**1. Identifisere problemet**
- Forstå situasjonen og hva vi vil undersøke
- Identifisere relevante variabler og sammenhenger

**2. Velge modelltype**
- Bestemme hvilken type funksjon som passer best
- Basert på hvordan variablene endrer seg

**3. Bestemme parametere**
- Bruke data til å finne konstanter i modellen
- Tilpasse modellen til observasjoner

**4. Validere modellen**
- Sjekke om modellen gir fornuftige resultater
- Sammenligne med eksisterende data

**5. Tolke og anvende**
- Bruke modellen til prediksjon
- Vurdere begrensninger`,
    },

    // ========== VELGE FUNKSJONSTYPE ==========
    {
      id: 'r2-6-4-funksjonstyper-intro',
      type: 'text',
      content: `## Velge riktig funksjonstype

Valget av funksjonstype avhenger av hvordan den avhengige variabelen endrer seg med den uavhengige. Her er de viktigste typene:`,
    },

    // Lineær modell
    {
      id: 'r2-6-4-linear-def',
      type: 'definition',
      title: 'Lineær modell',
      content: `$$f(x) = ax + b$$

**Kjennetegn:**
- Konstant endringsrate (stigningstall $a$)
- Rett linje i grafisk framstilling
- $\\Delta y$ er proporsjonal med $\\Delta x$

**Brukes når:**
- Jevn vekst eller nedgang
- Kostnad med fast sats og variabel del
- Avstand ved konstant fart`,
    },

    // Eksponentiell modell
    {
      id: 'r2-6-4-exp-def',
      type: 'definition',
      title: 'Eksponentiell modell',
      content: `$$f(x) = a \\cdot b^x \\quad \\text{eller} \\quad f(x) = a \\cdot e^{kx}$$

**Kjennetegn:**
- Prosentvis vekst eller nedgang per tidsenhet
- Vekstfaktoren $b = 1 + r$ der $r$ er vekstraten
- Derivert proporsjonal med funksjonen selv: $f'(x) = k \\cdot f(x)$

**Brukes når:**
- Befolkningsvekst
- Radioaktiv nedbrytning
- Renters rente
- Temperaturendring (Newtons avkjølingslov)`,
    },

    // Polynommodell
    {
      id: 'r2-6-4-poly-def',
      type: 'definition',
      title: 'Polynommodell',
      content: `$$f(x) = a_n x^n + a_{n-1} x^{n-1} + \\cdots + a_1 x + a_0$$

**Kjennetegn:**
- Kan ha vendepunkter og ekstremalpunkter
- Andregradspolynomer gir parabelform
- Høyere grader gir mer komplekse kurver

**Brukes når:**
- Kastet bevegelse (andregradsfunksjon)
- Optimering av areal/volum
- Tilnærming av komplekse sammenhenger`,
    },

    // Trigonometrisk modell
    {
      id: 'r2-6-4-trig-def',
      type: 'definition',
      title: 'Trigonometrisk modell',
      content: `$$f(t) = A \\sin(\\omega t + \\varphi) + D$$

**Parametere:**
- $A$ = amplitude (halvparten av variasjonsbredden)
- $\\omega = \\frac{2\\pi}{T}$ der $T$ er perioden
- $\\varphi$ = faseforskyvning
- $D$ = vertikal forskyvning (middelverdi)

**Brukes når:**
- Periodiske fenomener
- Temperaturer gjennom året
- Tidevann
- Vekselsstrøm`,
    },

    // Potensmodell
    {
      id: 'r2-6-4-potens-def',
      type: 'definition',
      title: 'Potensmodell',
      content: `$$f(x) = a \\cdot x^n$$

**Kjennetegn:**
- Skaleres med potenser av $x$
- Dobbelt-logaritmisk plott gir rett linje

**Brukes når:**
- Geometriske størrelser (areal, volum)
- Allometriske sammenhenger i biologi
- Fysiske lover (gravitasjon, intensitet)`,
    },

    // Logistisk modell
    {
      id: 'r2-6-4-logistisk-def',
      type: 'definition',
      title: 'Logistisk modell',
      content: `$$f(t) = \\frac{K}{1 + Ce^{-rt}}$$

**Parametere:**
- $K$ = bæreevne (øvre grense)
- $r$ = vekstrate
- $C$ = konstant basert på startverdi

**Brukes når:**
- Begrenset vekst
- Spredning av sykdommer/rykter
- Adopsjon av ny teknologi
- Populasjonsvekst med begrensede ressurser`,
    },

    // ========== EKSEMPLER FRA VIRKELIGHETEN ==========
    {
      id: 'r2-6-4-eksempler-intro',
      type: 'text',
      content: `## Eksempler fra virkeligheten

La oss se på hvordan vi modellerer ulike situasjoner med passende funksjonstyper.`,
    },

    // Eksempel 1: Lineær - Taxitur
    {
      id: 'r2-6-4-example-1',
      type: 'example',
      title: 'Eksempel 1: Taxikostnad (lineær modell)',
      problem: `En taxi tar 50 kr i startgebyr og 15 kr per kilometer.

a) Sett opp en modell for totalkostnaden $K(x)$ som funksjon av kjørt distanse $x$ kilometer.
b) Hva koster en tur på 8 km?
c) Hvor langt kan man kjøre for 200 kr?`,
      solution: `**Løsning:**

**a)** Kostnaden består av fast del (startgebyr) og variabel del (pris per km):
$$K(x) = 50 + 15x$$

**b)** For $x = 8$ km:
$$K(8) = 50 + 15 \\cdot 8 = 50 + 120 = 170 \\text{ kr}$$

**c)** Løser $K(x) = 200$:
$$50 + 15x = 200$$
$$15x = 150$$
$$x = 10 \\text{ km}$$`,
    },

    // Eksempel 2: Eksponentiell - Bakterievekst
    {
      id: 'r2-6-4-example-2',
      type: 'example',
      title: 'Eksempel 2: Bakterievekst (eksponentiell modell)',
      problem: `En bakteriekoloni dobler seg hver 3. time. Ved tidspunkt $t = 0$ er det 1000 bakterier.

a) Sett opp en modell for antall bakterier $N(t)$ etter $t$ timer.
b) Hvor mange bakterier er det etter 12 timer?
c) Når er det 1 million bakterier?`,
      solution: `**Løsning:**

**a)** Bakteriene dobler seg hver 3. time, så vekstfaktoren per time er:
$$b = 2^{1/3} = \\sqrt[3]{2} \\approx 1{,}26$$

Modellen blir:
$$N(t) = 1000 \\cdot 2^{t/3}$$

eller ekvivalent: $N(t) = 1000 \\cdot e^{(\\ln 2/3) \\cdot t} = 1000 \\cdot e^{0{,}231t}$

**b)** Etter 12 timer:
$$N(12) = 1000 \\cdot 2^{12/3} = 1000 \\cdot 2^4 = 1000 \\cdot 16 = 16\\,000$$

**c)** Løser $N(t) = 1\\,000\\,000$:
$$1000 \\cdot 2^{t/3} = 1\\,000\\,000$$
$$2^{t/3} = 1000$$
$$\\frac{t}{3} = \\log_2 1000 = \\frac{\\ln 1000}{\\ln 2} \\approx 9{,}97$$
$$t \\approx 29{,}9 \\text{ timer}$$`,
    },

    // Eksempel 3: Eksponentiell - Radioaktiv nedbrytning
    {
      id: 'r2-6-4-example-3',
      type: 'example',
      title: 'Eksempel 3: Radioaktiv nedbrytning (eksponentiell modell)',
      problem: `Karbon-14 har en halveringstid på 5730 år. Et fossilt bein inneholder 25% av den opprinnelige mengden C-14.

a) Sett opp en modell for gjenværende mengde C-14 som funksjon av tid.
b) Hvor gammelt er fossilet?`,
      solution: `**Løsning:**

**a)** Med halveringstid $T_{1/2} = 5730$ år får vi:
$$N(t) = N_0 \\cdot \\left(\\frac{1}{2}\\right)^{t/5730}$$

eller med $e$-form: $N(t) = N_0 \\cdot e^{-\\lambda t}$ der $\\lambda = \\frac{\\ln 2}{5730} \\approx 0{,}000121$

**b)** Når $N(t) = 0{,}25 N_0$:
$$\\left(\\frac{1}{2}\\right)^{t/5730} = 0{,}25 = \\frac{1}{4} = \\left(\\frac{1}{2}\\right)^2$$
$$\\frac{t}{5730} = 2$$
$$t = 11\\,460 \\text{ år}$$

Fossilet er ca. 11 500 år gammelt.`,
    },

    // Eksempel 4: Polynommodell - Kastet bevegelse
    {
      id: 'r2-6-4-example-4',
      type: 'example',
      title: 'Eksempel 4: Kastet bevegelse (polynommodell)',
      problem: `En ball kastes rett opp med starthastighet $v_0 = 20$ m/s fra bakkenivå. Høyden over bakken etter $t$ sekunder er gitt ved:
$$h(t) = v_0 t - \\frac{1}{2}gt^2 = 20t - 4{,}9t^2$$

a) Når er ballen på topp?
b) Hva er maksimalhøyden?
c) Når treffer ballen bakken?`,
      solution: `**Løsning:**

**a)** Toppen nås når $h'(t) = 0$:
$$h'(t) = 20 - 9{,}8t = 0$$
$$t = \\frac{20}{9{,}8} \\approx 2{,}04 \\text{ s}$$

**b)** Maksimalhøyden:
$$h(2{,}04) = 20 \\cdot 2{,}04 - 4{,}9 \\cdot 2{,}04^2$$
$$= 40{,}8 - 20{,}4 \\approx 20{,}4 \\text{ m}$$

**c)** Ballen treffer bakken når $h(t) = 0$:
$$20t - 4{,}9t^2 = 0$$
$$t(20 - 4{,}9t) = 0$$
$$t = 0 \\text{ (start) eller } t = \\frac{20}{4{,}9} \\approx 4{,}08 \\text{ s}$$`,
    },

    // Eksempel 5: Trigonometrisk - Temperatur
    {
      id: 'r2-6-4-example-5',
      type: 'example',
      title: 'Eksempel 5: Årlig temperaturvariasjon (trigonometrisk modell)',
      problem: `Gjennomsnittstemperaturen i en by varierer mellom $-5°C$ i januar og $+15°C$ i juli. La $t$ være månedsnummer ($t = 1$ for januar).

a) Bestem parameterne $A$, $\\omega$, $\\varphi$ og $D$ for modellen $T(t) = A\\sin(\\omega t + \\varphi) + D$.
b) Hva er modellert temperatur i april ($t = 4$)?`,
      solution: `**Løsning:**

**a)**
- **Middelverdi:** $D = \\frac{-5 + 15}{2} = 5°C$
- **Amplitude:** $A = \\frac{15 - (-5)}{2} = 10°C$
- **Periode:** 12 måneder, så $\\omega = \\frac{2\\pi}{12} = \\frac{\\pi}{6}$
- **Faseforskyvning:** Minimum i januar ($t = 1$), så:
  - For sinus: minimum når argumentet er $-\\frac{\\pi}{2}$
  - $\\frac{\\pi}{6} \\cdot 1 + \\varphi = -\\frac{\\pi}{2}$
  - $\\varphi = -\\frac{\\pi}{2} - \\frac{\\pi}{6} = -\\frac{2\\pi}{3}$

Modellen:
$$T(t) = 10\\sin\\left(\\frac{\\pi t}{6} - \\frac{2\\pi}{3}\\right) + 5$$

**b)** I april ($t = 4$):
$$T(4) = 10\\sin\\left(\\frac{4\\pi}{6} - \\frac{2\\pi}{3}\\right) + 5 = 10\\sin(0) + 5 = 5°C$$`,
    },

    // Eksempel 6: Potensmodell - Keplers lov
    {
      id: 'r2-6-4-example-6',
      type: 'example',
      title: 'Eksempel 6: Keplers tredje lov (potensmodell)',
      problem: `Keplers tredje lov sier at kvadratet av en planets omløpstid $T$ er proporsjonalt med kuben av gjennomsnittlig avstand $r$ fra solen: $T^2 \\propto r^3$.

For jorden er $T = 1$ år og $r = 1$ AU (astronomisk enhet).

a) Sett opp modellen for $T$ som funksjon av $r$.
b) Mars har gjennomsnittlig avstand 1,52 AU fra solen. Finn omløpstiden.`,
      solution: `**Løsning:**

**a)** Fra $T^2 = k \\cdot r^3$ og jordens data ($T = 1$, $r = 1$):
$$1^2 = k \\cdot 1^3 \\Rightarrow k = 1$$

Altså: $T^2 = r^3$, som gir:
$$T = r^{3/2}$$

**b)** For Mars med $r = 1{,}52$ AU:
$$T = (1{,}52)^{3/2} = \\sqrt{1{,}52^3} = \\sqrt{3{,}51} \\approx 1{,}87 \\text{ år}$$

(Faktisk omløpstid for Mars er 1,88 år - modellen stemmer godt!)`,
    },

    // Eksempel 7: Logistisk - Epidemi
    {
      id: 'r2-6-4-example-7',
      type: 'example',
      title: 'Eksempel 7: Epidemispredning (logistisk modell)',
      problem: `I en by med 50 000 innbyggere starter en epidemi. Antall smittede etter $t$ dager modelleres med:
$$I(t) = \\frac{50\\,000}{1 + 999 \\cdot e^{-0{,}3t}}$$

a) Hvor mange var smittet ved $t = 0$?
b) Når er halvparten av befolkningen smittet?
c) Hva er veksthastigheten ved $t = 20$ dager?`,
      solution: `**Løsning:**

**a)** Ved $t = 0$:
$$I(0) = \\frac{50\\,000}{1 + 999 \\cdot e^0} = \\frac{50\\,000}{1000} = 50 \\text{ personer}$$

**b)** Halvparten smittet betyr $I(t) = 25\\,000$:
$$\\frac{50\\,000}{1 + 999 \\cdot e^{-0{,}3t}} = 25\\,000$$
$$1 + 999 \\cdot e^{-0{,}3t} = 2$$
$$e^{-0{,}3t} = \\frac{1}{999}$$
$$-0{,}3t = \\ln\\left(\\frac{1}{999}\\right) = -\\ln(999)$$
$$t = \\frac{\\ln(999)}{0{,}3} \\approx \\frac{6{,}91}{0{,}3} \\approx 23 \\text{ dager}$$

**c)** Veksthastigheten er $I'(t)$. Ved $t = 20$:
$$I(20) = \\frac{50\\,000}{1 + 999 \\cdot e^{-6}} \\approx \\frac{50\\,000}{1 + 2{,}47} \\approx 14\\,400$$

For logistisk vekst: $I'(t) = r \\cdot I(t) \\cdot \\left(1 - \\frac{I(t)}{K}\\right)$
$$I'(20) = 0{,}3 \\cdot 14\\,400 \\cdot \\left(1 - \\frac{14\\,400}{50\\,000}\\right) \\approx 3070 \\text{ nye smittede per dag}$$`,
    },

    // Eksempel 8: Bestemme parametere fra data
    {
      id: 'r2-6-4-example-8',
      type: 'example',
      title: 'Eksempel 8: Bestemme parametere fra måledata',
      problem: `En biolog måler veksten til en plantepopulasjon og får følgende data:

| Tid (uker) | 0 | 2 | 4 | 6 |
|------------|---|---|---|---|
| Antall | 100 | 180 | 320 | 580 |

Anta eksponentiell vekst $N(t) = N_0 \\cdot e^{kt}$.

a) Bestem $N_0$ og $k$.
b) Hvor mange planter forventes etter 10 uker?`,
      solution: `**Løsning:**

**a)** Fra $t = 0$: $N_0 = 100$

For å finne $k$, bruk to datapunkter. Med $t = 4$:
$$320 = 100 \\cdot e^{4k}$$
$$e^{4k} = 3{,}2$$
$$4k = \\ln(3{,}2) \\approx 1{,}163$$
$$k \\approx 0{,}29$$

**Sjekk med $t = 6$:**
$$N(6) = 100 \\cdot e^{0{,}29 \\cdot 6} = 100 \\cdot e^{1{,}74} \\approx 100 \\cdot 5{,}7 \\approx 570$$

Dette stemmer bra med målt verdi 580.

Modellen: $N(t) = 100 \\cdot e^{0{,}29t}$

**b)** Etter 10 uker:
$$N(10) = 100 \\cdot e^{0{,}29 \\cdot 10} = 100 \\cdot e^{2{,}9} \\approx 100 \\cdot 18{,}2 \\approx 1820$$`,
    },

    // Eksempel 9: Newtons avkjølingslov
    {
      id: 'r2-6-4-example-9',
      type: 'example',
      title: 'Eksempel 9: Avkjøling av kaffe (Newtons avkjølingslov)',
      problem: `En kopp kaffe med temperatur $90°C$ plasseres i et rom med temperatur $20°C$. Etter 10 minutter er kaffetemperaturen $70°C$.

Newtons avkjølingslov: $T(t) = T_\\infty + (T_0 - T_\\infty) \\cdot e^{-kt}$

a) Bestem konstanten $k$.
b) Hva er temperaturen etter 30 minutter?
c) Når er kaffen $40°C$?`,
      solution: `**Løsning:**

**a)** Vi har $T_\\infty = 20°C$ og $T_0 = 90°C$, så:
$$T(t) = 20 + 70 \\cdot e^{-kt}$$

Med $T(10) = 70$:
$$70 = 20 + 70 \\cdot e^{-10k}$$
$$50 = 70 \\cdot e^{-10k}$$
$$e^{-10k} = \\frac{5}{7}$$
$$-10k = \\ln\\left(\\frac{5}{7}\\right) \\approx -0{,}336$$
$$k \\approx 0{,}0336$$

**b)** Etter 30 minutter:
$$T(30) = 20 + 70 \\cdot e^{-0{,}0336 \\cdot 30} = 20 + 70 \\cdot e^{-1{,}01}$$
$$\\approx 20 + 70 \\cdot 0{,}364 \\approx 20 + 25{,}5 \\approx 45{,}5°C$$

**c)** Når $T(t) = 40$:
$$40 = 20 + 70 \\cdot e^{-0{,}0336t}$$
$$20 = 70 \\cdot e^{-0{,}0336t}$$
$$e^{-0{,}0336t} = \\frac{2}{7}$$
$$t = \\frac{-\\ln(2/7)}{0{,}0336} = \\frac{\\ln(3{,}5)}{0{,}0336} \\approx 37 \\text{ minutter}$$`,
    },

    // Eksempel 10: Bremselengde
    {
      id: 'r2-6-4-example-10',
      type: 'example',
      title: 'Eksempel 10: Bremselengde (polynommodell)',
      problem: `Bremselengden $s$ for en bil er tilnærmet proporsjonal med kvadratet av farten $v$:
$$s(v) = kv^2$$

Ved 50 km/t er bremselengden 12 meter.

a) Bestem konstanten $k$.
b) Finn bremselengden ved 80 km/t.
c) Med hvilken fart kan man kjøre hvis bremselengden ikke skal overstige 50 meter?`,
      solution: `**Løsning:**

**a)** Med $s(50) = 12$ m:
$$12 = k \\cdot 50^2 = 2500k$$
$$k = \\frac{12}{2500} = 0{,}0048$$

Modellen: $s(v) = 0{,}0048 \\cdot v^2$

**b)** Ved 80 km/t:
$$s(80) = 0{,}0048 \\cdot 80^2 = 0{,}0048 \\cdot 6400 = 30{,}7 \\text{ m}$$

**c)** Med $s(v) \\leq 50$:
$$0{,}0048 \\cdot v^2 \\leq 50$$
$$v^2 \\leq \\frac{50}{0{,}0048} \\approx 10\\,417$$
$$v \\leq \\sqrt{10\\,417} \\approx 102 \\text{ km/t}$$`,
    },

    // Eksempel 11: Tidevann
    {
      id: 'r2-6-4-example-11',
      type: 'example',
      title: 'Eksempel 11: Tidevann (trigonometrisk modell)',
      problem: `Ved en kystby varierer vannstanden mellom 0,5 m og 3,5 m over referansenivået. Perioden er ca. 12,4 timer (halvt månedøgn). Høyvann inntreffer kl. 03:00.

a) Sett opp en modell for vannstanden $h(t)$ der $t$ er timer etter midnatt.
b) Når er det lavvann?
c) Når kan en båt som trenger minst 2 m dybde, seile inn?`,
      solution: `**Løsning:**

**a)**
- Middelverdi: $D = \\frac{0{,}5 + 3{,}5}{2} = 2$ m
- Amplitude: $A = \\frac{3{,}5 - 0{,}5}{2} = 1{,}5$ m
- Periode: $T = 12{,}4$ timer, så $\\omega = \\frac{2\\pi}{12{,}4} \\approx 0{,}507$
- Høyvann kl. 03:00, så cosinus med forskyvning:

$$h(t) = 1{,}5 \\cos(0{,}507(t - 3)) + 2$$

**b)** Lavvann når $\\cos = -1$, altså:
$$0{,}507(t - 3) = \\pi$$
$$t - 3 = \\frac{\\pi}{0{,}507} \\approx 6{,}2$$
$$t \\approx 9{,}2 \\text{ timer}$$

Lavvann er ca. kl. 09:12.

**c)** Trenger $h(t) \\geq 2$:
$$1{,}5 \\cos(0{,}507(t-3)) + 2 \\geq 2$$
$$\\cos(0{,}507(t-3)) \\geq 0$$

Dette er oppfylt når argumentet er i $[-\\frac{\\pi}{2}, \\frac{\\pi}{2}]$:
$$-\\frac{\\pi}{2} \\leq 0{,}507(t-3) \\leq \\frac{\\pi}{2}$$
$$-3{,}1 \\leq t - 3 \\leq 3{,}1$$
$$-0{,}1 \\leq t \\leq 6{,}1$$

Altså fra ca. kl. 00:00 til kl. 06:00 (og tilsvarende 12,4 timer senere).`,
    },

    // Eksempel 12: CO2-konsentrasjon
    {
      id: 'r2-6-4-example-12',
      type: 'example',
      title: 'Eksempel 12: CO2-konsentrasjon (kombinert modell)',
      problem: `Atmosfærisk CO$_2$-konsentrasjon viser både langsiktig økning og sesongvariasjon. Data fra Mauna Loa viser:
- 1960: ca. 317 ppm
- 2020: ca. 414 ppm
- Årlig variasjon: ca. $\\pm 3$ ppm med maksimum i mai

a) Sett opp en modell som inkluderer både trend og sesongvariasjon.
b) Beregn forventet verdi i desember 2025.`,
      solution: `**Løsning:**

**a)** La $t$ være år etter 1960.

**Trend:** Tilnærmet eksponentiell, men ofte modellert lineært for kortere perioder:
$$\\text{Trend}(t) = 317 + 1{,}62t$$

(Vekst ca. $\\frac{414-317}{60} \\approx 1{,}62$ ppm/år)

**Sesongvariasjon:** Periode 1 år, maksimum i mai (måned 5):
$$\\text{Sesong}(t) = 3\\cos\\left(2\\pi(t - \\frac{4}{12})\\right)$$

**Kombinert modell:**
$$C(t) = 317 + 1{,}62t + 3\\cos\\left(2\\pi\\left(t - \\frac{1}{3}\\right)\\right)$$

**b)** Desember 2025 tilsvarer $t = 65{,}92$ (65 år + 11/12):
$$C(65{,}92) = 317 + 1{,}62 \\cdot 65{,}92 + 3\\cos(2\\pi \\cdot 65{,}58)$$
$$\\approx 317 + 106{,}8 + 3\\cos(0{,}58 \\cdot 2\\pi)$$
$$\\approx 423{,}8 + 3 \\cdot (-0{,}95) \\approx 421 \\text{ ppm}$$`,
    },

    // ========== VALIDERING AV MODELLER ==========
    {
      id: 'r2-6-4-validering-intro',
      type: 'text',
      content: `## Validere modeller

En modell må testes mot virkeligheten før den kan brukes til prediksjon.`,
    },

    {
      id: 'r2-6-4-validering-def',
      type: 'definition',
      title: 'Valideringsmetoder',
      content: `**1. Sammenligne med data**
- Beregn modellverdier for kjente datapunkter
- Finn avvik (residualer)

**2. Grafisk validering**
- Plott modell og data i samme diagram
- Se etter systematiske avvik

**3. Statistiske mål**
- Korrelasjonskoeffisient $R^2$
- Gjennomsnittlig kvadratisk avvik (RMSE)

**4. Sjekke grenseverdier**
- Gir modellen fornuftige verdier for $x \\to 0$, $x \\to \\infty$?

**5. Kryss-validering**
- Del data i trenings- og testdatasett
- Tilpass modell på trening, valider på test`,
    },

    // Eksempel 13: Validering
    {
      id: 'r2-6-4-example-13',
      type: 'example',
      title: 'Eksempel 13: Validering av modell',
      problem: `Vi har tilpasset modellen $y = 2{,}5x + 3$ til følgende data:

| $x$ | 1 | 2 | 3 | 4 | 5 |
|-----|---|---|---|---|---|
| $y$ (målt) | 5 | 8 | 12 | 13 | 16 |

Valider modellen ved å beregne avvik og $R^2$.`,
      solution: `**Løsning:**

**Modellverdier:**
| $x$ | $y$ (målt) | $y$ (modell) | Avvik | Avvik$^2$ |
|-----|------------|--------------|-------|-----------|
| 1 | 5 | 5,5 | -0,5 | 0,25 |
| 2 | 8 | 8,0 | 0 | 0 |
| 3 | 12 | 10,5 | 1,5 | 2,25 |
| 4 | 13 | 13,0 | 0 | 0 |
| 5 | 16 | 15,5 | 0,5 | 0,25 |

**Sum av kvadratiske avvik (SSE):** $0{,}25 + 0 + 2{,}25 + 0 + 0{,}25 = 2{,}75$

**Gjennomsnitt av $y$:** $\\bar{y} = \\frac{5+8+12+13+16}{5} = 10{,}8$

**Total variasjon (SST):**
$$\\sum(y_i - \\bar{y})^2 = 33{,}64 + 7{,}84 + 1{,}44 + 4{,}84 + 27{,}04 = 74{,}8$$

**$R^2$-verdi:**
$$R^2 = 1 - \\frac{\\text{SSE}}{\\text{SST}} = 1 - \\frac{2{,}75}{74{,}8} \\approx 0{,}96$$

$R^2 = 0{,}96$ betyr at modellen forklarer 96% av variasjonen i dataene, som er meget bra.`,
    },

    // ========== BEGRENSNINGER ==========
    {
      id: 'r2-6-4-begrensninger-intro',
      type: 'text',
      content: `## Begrensninger ved modeller

Alle modeller er forenklinger av virkeligheten og har begrensninger som må vurderes.`,
    },

    {
      id: 'r2-6-4-begrensninger-def',
      type: 'definition',
      title: 'Typiske begrensninger',
      content: `**1. Gyldighetsområde**
- Modeller gjelder bare innenfor et visst intervall
- Ekstrapolering (prediksjon utenfor dataområdet) er risikabelt

**2. Forenklinger**
- Modeller ignorerer ofte sekundære faktorer
- F.eks. luftmotstand, friksjon, forstyrrelser

**3. Antakelser**
- Eksponentiell vekst forutsetter ubegrensede ressurser
- Lineær modell forutsetter konstant endringsrate

**4. Måleusikkerhet**
- Data inneholder alltid målefeil
- Modellparametrene blir usikre

**5. Endrede betingelser**
- Forutsetningene kan endre seg over tid
- Modellen må oppdateres`,
    },

    {
      id: 'r2-6-4-warning-ekstrapolering',
      type: 'warning',
      title: 'Forsiktighet ved ekstrapolering',
      content: `Å bruke en modell utenfor dataområdet (ekstrapolering) kan gi svært upålitelige resultater.

**Eksempel:** En lineær modell for befolkningsvekst de siste 10 år kan ikke brukes til å forutsi befolkningen om 100 år - veksten er ikke lineær på lang sikt.

Ekstrapolering kan være nyttig for kortsiktige prediksjoner, men usikkerheten øker raskt med avstanden fra kjente data.`,
    },

    // Eksempel 14: Begrensninger
    {
      id: 'r2-6-4-example-14',
      type: 'example',
      title: 'Eksempel 14: Begrensninger ved modell',
      problem: `Modellen $N(t) = 1000 \\cdot e^{0{,}1t}$ beskriver veksten i en bakteriekoloni der $t$ er timer.

Diskuter begrensningene ved denne modellen.`,
      solution: `**Løsning:**

**1. Gyldighetsområde:**
- Modellen gir rimelige verdier for små $t$
- For store $t$ blir tallene urealistisk store:
  - $N(100) = 1000 \\cdot e^{10} \\approx 22$ millioner
  - $N(200) = 1000 \\cdot e^{20} \\approx 485$ milliarder

**2. Fysiske begrensninger:**
- Bakterier trenger næring og plass
- Avfallsstoffer hoper seg opp
- Ressurser er endelige

**3. Bedre modell:**
Logistisk vekst tar hensyn til bæreevne:
$$N(t) = \\frac{K}{1 + (K/N_0 - 1)e^{-rt}}$$

**4. Tidsavhengighet:**
- Eksponentiell vekst gjelder bare i oppstartsfasen
- Modellen bør ha et angitt gyldighetsintervall, f.eks. $0 \\leq t \\leq 24$ timer

**Konklusjon:** Modellen er nyttig for å forstå tidlig vekstdynamikk, men må erstattes med en mer realistisk modell for langsiktige prediksjoner.`,
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-6-4-oppsummering',
      type: 'note',
      content: `## Oppsummering

**Modelleringsprosessen:**
1. Identifiser problemet og variablene
2. Velg funksjonstype basert på hvordan systemet oppfører seg
3. Bestem parametere fra data
4. Valider modellen mot virkeligheten
5. Bruk modellen med bevissthet om begrensninger

**Funksjonstyper:**
- **Lineær:** Konstant endringsrate
- **Eksponentiell:** Prosentvis vekst/nedgang
- **Polynom:** Vendepunkter, optimalitet
- **Trigonometrisk:** Periodiske fenomener
- **Logistisk:** Begrenset vekst

**Husk:**
- Alle modeller er forenklinger
- Ekstrapolering er risikabelt
- Valider alltid mot data`,
    },

    // ========== OPPGAVER ==========
    {
      id: 'r2-6-4-oppgaver-intro',
      type: 'text',
      content: `## Oppgaver`,
    },

    // Oppgave 1
    {
      id: 'r2-6-4-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-1',
        number: '6.4.1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Hvilken funksjonstype passer best for å modellere følgende situasjoner?',
        subTasks: [
          { label: 'a', task: 'Kostnaden for å leie en bil der du betaler en fast døgnavgift pluss en pris per kilometer.', solution: '**Lineær modell**: $K(x) = ax + b$, der $b$ er døgnavgiften og $a$ er pris per km.' },
          { label: 'b', task: 'Verdien av en aksje som stiger med 5% per år.', solution: '**Eksponentiell modell**: $V(t) = V_0 \\cdot 1{,}05^t$' },
          { label: 'c', task: 'Høyden på en ball som kastes opp i luften.', solution: '**Polynommodell (andregradsfunksjon)**: $h(t) = -\\frac{1}{2}gt^2 + v_0 t + h_0$' },
          { label: 'd', task: 'Antall timer dagslys gjennom året.', solution: '**Trigonometrisk modell**: Periodisk med periode 365 dager.' },
        ],
        solution: 'a) Lineær, b) Eksponentiell, c) Andregradsfunksjon, d) Trigonometrisk',
        hints: ['Tenk på hvordan den avhengige variabelen endrer seg.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 2
    {
      id: 'r2-6-4-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-2',
        number: '6.4.2',
        type: 'classic',
        difficulty: 'lett',
        task: `Et mobilabonnement koster 199 kr/mnd pluss 0,50 kr per MB over inkludert datakvote.

a) Sett opp en modell for månedlig kostnad $K(x)$ som funksjon av ekstra databruk $x$ MB.
b) Hva blir kostnaden hvis du bruker 500 MB over kvoten?
c) Du har budsjett på 350 kr/mnd. Hvor mye ekstra data kan du bruke?`,
        solution: `a) $K(x) = 199 + 0{,}50x$

b) $K(500) = 199 + 0{,}50 \\cdot 500 = 199 + 250 = 449$ kr

c) $199 + 0{,}50x = 350 \\Rightarrow x = 302$ MB`,
        hints: ['Lineær modell med fast og variabel del.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 3
    {
      id: 'r2-6-4-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-3',
        number: '6.4.3',
        type: 'classic',
        difficulty: 'lett',
        task: `En investering på 50 000 kr gir 4% rente per år.

a) Sett opp en modell for beløpet $B(t)$ etter $t$ år.
b) Hva er beløpet etter 10 år?
c) Når har beløpet doblet seg?`,
        solution: `a) $B(t) = 50\\,000 \\cdot 1{,}04^t$

b) $B(10) = 50\\,000 \\cdot 1{,}04^{10} \\approx 50\\,000 \\cdot 1{,}48 \\approx 74\\,012$ kr

c) $50\\,000 \\cdot 1{,}04^t = 100\\,000$
$1{,}04^t = 2$
$t = \\frac{\\ln 2}{\\ln 1{,}04} \\approx \\frac{0{,}693}{0{,}0392} \\approx 17{,}7$ år`,
        hints: ['Eksponentiell modell med vekstfaktor 1,04.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 4
    {
      id: 'r2-6-4-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-4',
        number: '6.4.4',
        type: 'classic',
        difficulty: 'medium',
        task: `Et stoff brytes ned i kroppen slik at halvparten er borte etter 6 timer. Startdosen er 400 mg.

a) Sett opp en modell for gjenværende mengde $M(t)$ etter $t$ timer.
b) Hvor mye er igjen etter 15 timer?
c) Når er det mindre enn 50 mg igjen?`,
        subTasks: [
          { label: 'a', task: 'Sett opp modellen.', solution: '$M(t) = 400 \\cdot \\left(\\frac{1}{2}\\right)^{t/6}$' },
          { label: 'b', task: 'Beregn $M(15)$.', solution: '$M(15) = 400 \\cdot \\left(\\frac{1}{2}\\right)^{15/6} = 400 \\cdot \\left(\\frac{1}{2}\\right)^{2{,}5} \\approx 400 \\cdot 0{,}177 \\approx 71$ mg' },
          { label: 'c', task: 'Finn når $M(t) < 50$ mg.', solution: '$400 \\cdot \\left(\\frac{1}{2}\\right)^{t/6} = 50$\n$\\left(\\frac{1}{2}\\right)^{t/6} = 0{,}125 = \\left(\\frac{1}{2}\\right)^3$\n$\\frac{t}{6} = 3 \\Rightarrow t = 18$ timer' },
        ],
        solution: 'a) $M(t) = 400 \\cdot (1/2)^{t/6}$, b) ca. 71 mg, c) etter 18 timer',
        hints: ['Eksponentiell nedbrytning med halveringstid 6 timer.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 5
    {
      id: 'r2-6-4-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-5',
        number: '6.4.5',
        type: 'classic',
        difficulty: 'medium',
        task: `Dybdetemperaturen i en innsjø gjennom året varierer mellom $4°C$ (februar) og $18°C$ (august). La $t$ være månedsnummer ($t = 1$ for januar).

a) Bestem amplitude, middelverdi og periode for modellen.
b) Sett opp modellen $T(t) = A\\cos(\\omega(t - \\varphi)) + D$.
c) Hva er modellert temperatur i mai ($t = 5$)?`,
        subTasks: [
          { label: 'a', task: 'Finn parametrene.', solution: 'Amplitude: $A = \\frac{18-4}{2} = 7°C$\nMiddelverdi: $D = \\frac{18+4}{2} = 11°C$\nPeriode: 12 måneder' },
          { label: 'b', task: 'Sett opp modellen.', solution: 'Maksimum i august ($t = 8$):\n$T(t) = 7\\cos\\left(\\frac{\\pi}{6}(t - 8)\\right) + 11$' },
          { label: 'c', task: 'Beregn $T(5)$.', solution: '$T(5) = 7\\cos\\left(\\frac{\\pi}{6}(5-8)\\right) + 11 = 7\\cos\\left(-\\frac{\\pi}{2}\\right) + 11 = 7 \\cdot 0 + 11 = 11°C$' },
        ],
        solution: 'a) $A = 7$, $D = 11$, $T = 12$; b) $T(t) = 7\\cos(\\frac{\\pi}{6}(t-8)) + 11$; c) $11°C$',
        hints: ['Cosinus-funksjon med maksimum i august.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 6
    {
      id: 'r2-6-4-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-6',
        number: '6.4.6',
        type: 'classic',
        difficulty: 'medium',
        task: `Følgende data viser sammenhengen mellom en bils fart (km/t) og stopplengde (meter):

| Fart | 30 | 50 | 70 | 90 |
|------|-----|-----|-----|-----|
| Stopplengde | 13 | 28 | 50 | 80 |

a) Plott dataene og avgjør om en lineær eller kvadratisk modell passer best.
b) Tilpass modellen $s(v) = kv^2$ og finn $k$.
c) Beregn forventet stopplengde ved 110 km/t.`,
        subTasks: [
          { label: 'a', task: 'Vurder modelltype.', solution: 'Stopplengden øker raskere enn lineært - kvadratisk modell passer.' },
          { label: 'b', task: 'Finn $k$.', solution: 'Bruk $s = 28$ ved $v = 50$:\n$28 = k \\cdot 50^2 = 2500k$\n$k = 0{,}0112$\n\nSjekk: $s(70) = 0{,}0112 \\cdot 4900 \\approx 55$ (nær 50), $s(90) = 0{,}0112 \\cdot 8100 \\approx 91$ (nær 80). Rimelig tilpasning.' },
          { label: 'c', task: 'Beregn $s(110)$.', solution: '$s(110) = 0{,}0112 \\cdot 110^2 = 0{,}0112 \\cdot 12100 \\approx 136$ meter' },
        ],
        solution: 'b) $k \\approx 0{,}0112$; c) ca. 136 meter',
        hints: ['Stopplengde er tilnærmet proporsjonal med fart i annen.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 7
    {
      id: 'r2-6-4-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-7',
        number: '6.4.7',
        type: 'classic',
        difficulty: 'medium',
        task: `Populasjonen i en by har vokst slik de siste årene (i tusen):

| År | 2010 | 2015 | 2020 |
|-----|------|------|------|
| Befolkning | 45 | 52 | 60 |

a) Anta lineær vekst og finn modellen.
b) Anta eksponentiell vekst og finn modellen.
c) Sammenlign prediksjonene for 2030 med begge modeller.`,
        subTasks: [
          { label: 'a', task: 'Lineær modell.', solution: 'Vekst: $\\frac{60-45}{10} = 1{,}5$ tusen/år\nLa $t = 0$ i 2010: $P(t) = 45 + 1{,}5t$' },
          { label: 'b', task: 'Eksponentiell modell.', solution: '$60 = 45 \\cdot b^{10}$\n$b^{10} = \\frac{60}{45} = 1{,}333$\n$b = 1{,}333^{0{,}1} \\approx 1{,}029$\n$P(t) = 45 \\cdot 1{,}029^t$' },
          { label: 'c', task: 'Sammenlign for 2030 ($t = 20$).', solution: 'Lineær: $P(20) = 45 + 1{,}5 \\cdot 20 = 75$ tusen\nEksponentiell: $P(20) = 45 \\cdot 1{,}029^{20} \\approx 45 \\cdot 1{,}78 \\approx 80$ tusen' },
        ],
        solution: 'Lineær gir 75 000, eksponentiell gir ca. 80 000 i 2030.',
        hints: ['Lineær: konstant tilvekst. Eksponentiell: konstant prosentvis vekst.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 8
    {
      id: 'r2-6-4-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-8',
        number: '6.4.8',
        type: 'classic',
        difficulty: 'medium',
        task: `En suppe med temperatur $85°C$ settes i et rom med temperatur $22°C$. Etter 5 minutter er suppetemperaturen $70°C$.

a) Sett opp modellen etter Newtons avkjølingslov.
b) Hva er temperaturen etter 15 minutter?
c) Når kan du spise suppen (ved $50°C$)?`,
        subTasks: [
          { label: 'a', task: 'Finn modellen.', solution: '$T(t) = 22 + 63 \\cdot e^{-kt}$\n$70 = 22 + 63 \\cdot e^{-5k}$\n$48 = 63 \\cdot e^{-5k}$\n$e^{-5k} = 0{,}762$\n$k = \\frac{-\\ln(0{,}762)}{5} \\approx 0{,}054$\n\n$T(t) = 22 + 63 \\cdot e^{-0{,}054t}$' },
          { label: 'b', task: 'Beregn $T(15)$.', solution: '$T(15) = 22 + 63 \\cdot e^{-0{,}054 \\cdot 15} = 22 + 63 \\cdot e^{-0{,}81} \\approx 22 + 63 \\cdot 0{,}445 \\approx 50°C$' },
          { label: 'c', task: 'Finn $t$ når $T(t) = 50$.', solution: '$50 = 22 + 63 \\cdot e^{-0{,}054t}$\n$28 = 63 \\cdot e^{-0{,}054t}$\n$e^{-0{,}054t} = 0{,}444$\n$t = \\frac{-\\ln(0{,}444)}{0{,}054} \\approx 15$ minutter' },
        ],
        solution: 'a) $T(t) = 22 + 63e^{-0{,}054t}$; b) ca. 50°C; c) ca. 15 minutter',
        hints: ['Newtons avkjølingslov: $T(t) = T_\\infty + (T_0 - T_\\infty)e^{-kt}$'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 9
    {
      id: 'r2-6-4-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-9',
        number: '6.4.9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Et rykte sprer seg i en skole med 800 elever. I starten kjenner 5 elever ryktet. Etter 3 dager kjenner 100 elever det.

Bruk logistisk modell: $R(t) = \\frac{K}{1 + Ce^{-rt}}$

a) Bestem $K$, $C$ og $r$.
b) Når kjenner halvparten av elevene ryktet?
c) Når sprer ryktet seg raskest?`,
        subTasks: [
          { label: 'a', task: 'Finn parametrene.', solution: '$K = 800$ (alle elever)\n\nVed $t = 0$: $5 = \\frac{800}{1+C} \\Rightarrow C = 159$\n\nVed $t = 3$: $100 = \\frac{800}{1 + 159 \\cdot e^{-3r}}$\n$1 + 159 \\cdot e^{-3r} = 8$\n$e^{-3r} = \\frac{7}{159} \\approx 0{,}044$\n$r = \\frac{-\\ln(0{,}044)}{3} \\approx 1{,}04$' },
          { label: 'b', task: 'Finn $t$ når $R(t) = 400$.', solution: '$\\frac{800}{1 + 159 \\cdot e^{-1{,}04t}} = 400$\n$1 + 159 \\cdot e^{-1{,}04t} = 2$\n$e^{-1{,}04t} = \\frac{1}{159}$\n$t = \\frac{\\ln 159}{1{,}04} \\approx 4{,}9$ dager' },
          { label: 'c', task: 'Finn vendepunktet (maksimal spredningshastighet).', solution: 'Vendepunkt ved $R(t) = K/2 = 400$, altså ved $t \\approx 4{,}9$ dager. Her er $R\'(t)$ maksimal.' },
        ],
        solution: 'a) $K=800$, $C=159$, $r \\approx 1{,}04$; b) ca. 4,9 dager; c) ca. 4,9 dager',
        hints: ['Logistisk vekst har vendepunkt ved halv kapasitet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 10
    {
      id: 'r2-6-4-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-10',
        number: '6.4.10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Strømforbruket i en husholdning varierer gjennom døgnet. Måledata viser:
- Minimumsforbruk: 0,5 kW (kl. 04:00)
- Maksimumsforbruk: 4,5 kW (kl. 19:00)

a) Sett opp en trigonometrisk modell for forbruket $P(t)$ der $t$ er timer etter midnatt.
b) Hva er forbruket kl. 08:00?
c) Når på dagen er forbruket over 3 kW?`,
        subTasks: [
          { label: 'a', task: 'Sett opp modellen.', solution: 'Amplitude: $A = \\frac{4{,}5 - 0{,}5}{2} = 2$ kW\nMiddelverdi: $D = \\frac{4{,}5 + 0{,}5}{2} = 2{,}5$ kW\nPeriode: 24 timer, $\\omega = \\frac{2\\pi}{24} = \\frac{\\pi}{12}$\n\nMaksimum ved $t = 19$, minimum ved $t = 4$. Bruker cosinus:\n$P(t) = 2\\cos\\left(\\frac{\\pi}{12}(t - 19)\\right) + 2{,}5$\n\nAlternativt med sinus og faseforskyvning.' },
          { label: 'b', task: 'Beregn $P(8)$.', solution: '$P(8) = 2\\cos\\left(\\frac{\\pi}{12}(8-19)\\right) + 2{,}5 = 2\\cos\\left(-\\frac{11\\pi}{12}\\right) + 2{,}5$\n$\\cos\\left(-\\frac{11\\pi}{12}\\right) \\approx -0{,}966$\n$P(8) \\approx 2 \\cdot (-0{,}966) + 2{,}5 \\approx 0{,}57$ kW' },
          { label: 'c', task: 'Finn når $P(t) > 3$ kW.', solution: '$2\\cos\\left(\\frac{\\pi}{12}(t-19)\\right) + 2{,}5 > 3$\n$\\cos\\left(\\frac{\\pi}{12}(t-19)\\right) > 0{,}25$\n\n$\\cos^{-1}(0{,}25) \\approx 1{,}32$ rad\n$-1{,}32 < \\frac{\\pi}{12}(t-19) < 1{,}32$\n$14 < t < 24$ (ca. kl. 14:00 til midnatt)' },
        ],
        solution: 'a) $P(t) = 2\\cos(\\frac{\\pi}{12}(t-19)) + 2{,}5$; b) ca. 0,6 kW; c) ca. kl. 14-24',
        hints: ['Cosinus-modell med maksimum ved $t = 19$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 11
    {
      id: 'r2-6-4-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-11',
        number: '6.4.11',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En forsker modellerer sammenhengen mellom kroppsvekt $W$ (kg) og hjertets slagfrekvens $f$ (slag/min) hos pattedyr med potensmodellen $f = aW^b$.

Data:
| Dyr | Vekt (kg) | Puls (slag/min) |
|-----|-----------|-----------------|
| Mus | 0,03 | 600 |
| Kanin | 2 | 200 |
| Menneske | 70 | 70 |

a) Ta logaritmen og vis at $\\ln f = \\ln a + b \\cdot \\ln W$.
b) Bruk to datapunkter til å estimere $a$ og $b$.
c) Beregn forventet puls for en elefant (5000 kg).`,
        subTasks: [
          { label: 'a', task: 'Logtransformer.', solution: '$f = aW^b$\n$\\ln f = \\ln(aW^b) = \\ln a + b \\cdot \\ln W$\n\nDette er lineært i $\\ln W$ med stigningstall $b$.' },
          { label: 'b', task: 'Finn $a$ og $b$.', solution: 'Med mus og menneske:\n$\\ln 600 = \\ln a + b \\cdot \\ln 0{,}03$\n$\\ln 70 = \\ln a + b \\cdot \\ln 70$\n\n$6{,}40 = \\ln a - 3{,}51b$\n$4{,}25 = \\ln a + 4{,}25b$\n\nTrekker fra: $2{,}15 = -7{,}76b \\Rightarrow b \\approx -0{,}28$\n\n$\\ln a = 4{,}25 - 4{,}25 \\cdot (-0{,}28) = 5{,}44$\n$a \\approx 230$' },
          { label: 'c', task: 'Beregn puls for elefant.', solution: '$f = 230 \\cdot 5000^{-0{,}28} = 230 \\cdot 0{,}097 \\approx 22$ slag/min' },
        ],
        solution: 'b) $a \\approx 230$, $b \\approx -0{,}28$; c) ca. 22 slag/min',
        hints: ['Logaritmetransformasjon gjør potensmodell lineær.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 12
    {
      id: 'r2-6-4-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-12',
        number: '6.4.12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En fabrikk produserer varer med kostnad $K(x) = 1000 + 50x + 0{,}1x^2$ kroner for $x$ enheter.

a) Finn gjennomsnittskostnaden per enhet $G(x) = K(x)/x$.
b) Finn produksjonsnivået som minimerer gjennomsnittskostnaden.
c) Vis at ved dette nivået er gjennomsnittskostnad lik marginalkostnad.`,
        subTasks: [
          { label: 'a', task: 'Finn $G(x)$.', solution: '$G(x) = \\frac{1000 + 50x + 0{,}1x^2}{x} = \\frac{1000}{x} + 50 + 0{,}1x$' },
          { label: 'b', task: 'Minimer $G(x)$.', solution: '$G\'(x) = -\\frac{1000}{x^2} + 0{,}1 = 0$\n$\\frac{1000}{x^2} = 0{,}1$\n$x^2 = 10\\,000$\n$x = 100$ enheter\n\n$G\'\'(x) = \\frac{2000}{x^3} > 0$ for $x > 0$, så minimum.' },
          { label: 'c', task: 'Sammenlign med marginalkostnad.', solution: 'Marginalkostnad: $K\'(x) = 50 + 0{,}2x$\n$K\'(100) = 50 + 20 = 70$\n\nGjennomsnittskostnad ved $x = 100$:\n$G(100) = \\frac{1000}{100} + 50 + 0{,}1 \\cdot 100 = 10 + 50 + 10 = 70$\n\n$G(100) = K\'(100)$ - minimumspunktet oppstår når de er like.' },
        ],
        solution: 'b) 100 enheter; c) Ved minimum: $G = K\' = 70$ kr/enhet',
        hints: ['Deriverer $G(x)$ og setter lik null.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 13
    {
      id: 'r2-6-4-ex-block-13',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-13',
        number: '6.4.13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Havnivået i en fjord påvirkes av både tidevann (periode 12,4 timer) og en daglig variasjon (periode 24 timer).

Modell: $h(t) = 0{,}8\\cos\\left(\\frac{2\\pi t}{12{,}4}\\right) + 0{,}3\\cos\\left(\\frac{2\\pi t}{24}\\right) + 2$

der $h$ er i meter og $t$ er timer etter midnatt.

a) Hva er havnivået ved midnatt ($t = 0$)?
b) Finn tidspunkter de første 12 timene der $h\'(t) = 0$.
c) Hva er maksimalt og minimalt havnivå i løpet av et døgn (tilnærmet)?`,
        subTasks: [
          { label: 'a', task: 'Beregn $h(0)$.', solution: '$h(0) = 0{,}8\\cos(0) + 0{,}3\\cos(0) + 2 = 0{,}8 + 0{,}3 + 2 = 3{,}1$ m' },
          { label: 'b', task: 'Finn ekstremalpunkter.', solution: '$h\'(t) = -0{,}8 \\cdot \\frac{2\\pi}{12{,}4}\\sin\\left(\\frac{2\\pi t}{12{,}4}\\right) - 0{,}3 \\cdot \\frac{2\\pi}{24}\\sin\\left(\\frac{2\\pi t}{24}\\right)$\n\n$= -0{,}405\\sin\\left(\\frac{\\pi t}{6{,}2}\\right) - 0{,}0785\\sin\\left(\\frac{\\pi t}{12}\\right)$\n\nNumerisk/grafisk løsning gir ca. $t \\approx 0$, $t \\approx 5{,}8$, $t \\approx 11{,}5$ i de første 12 timene.' },
          { label: 'c', task: 'Finn ekstremverdier.', solution: 'Teoretisk maksimum: $2 + 0{,}8 + 0{,}3 = 3{,}1$ m (oppnås når begge cosinus = 1)\nTeoretisk minimum: $2 - 0{,}8 - 0{,}3 = 0{,}9$ m (når begge = -1)\n\nMen siden periodene er ulike, skjer ikke dette samtidig. Praktisk varierer nivået mellom ca. 1,0 m og 3,1 m.' },
        ],
        solution: 'a) 3,1 m; b) ca. $t = 0, 5{,}8, 11{,}5$ timer; c) ca. 0,9 m til 3,1 m',
        hints: ['Summen av to trigonometriske ledd med ulike perioder.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 14
    {
      id: 'r2-6-4-ex-block-14',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-14',
        number: '6.4.14',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `En modell for global gjennomsnittstemperatur (relativt til 1900) er:

$T(t) = 0{,}006t + 0{,}0001t^2 + 0{,}1\\sin\\left(\\frac{2\\pi t}{11}\\right)$

der $t$ er år etter 1900. Sinusleddet representerer solsyklusen.

a) Hva predikerer modellen for år 2000 og 2050?
b) Finn gjennomsnittlig temperaturøkning per tiår for perioden 2000-2050.
c) Diskuter minst to begrensninger ved denne modellen.`,
        subTasks: [
          { label: 'a', task: 'Beregn $T(100)$ og $T(150)$.', solution: '$T(100) = 0{,}006 \\cdot 100 + 0{,}0001 \\cdot 10000 + 0{,}1\\sin(18{,}2\\pi)$\n$= 0{,}6 + 1{,}0 + 0{,}1 \\cdot \\sin(0{,}2\\pi) \\approx 1{,}6 + 0{,}06 \\approx 1{,}66°C$\n\n$T(150) = 0{,}006 \\cdot 150 + 0{,}0001 \\cdot 22500 + 0{,}1\\sin(27{,}3\\pi)$\n$= 0{,}9 + 2{,}25 + 0{,}1 \\cdot \\sin(0{,}3\\pi) \\approx 3{,}15 + 0{,}08 \\approx 3{,}23°C$' },
          { label: 'b', task: 'Finn gjennomsnittlig økning per tiår.', solution: 'Økning: $3{,}23 - 1{,}66 = 1{,}57°C$ over 50 år\nPer tiår: $\\frac{1{,}57}{5} \\approx 0{,}31°C$ per tiår' },
          { label: 'c', task: 'Diskuter begrensninger.', solution: '1. **Polynomvekst uten grense**: Modellen gir uendelig høye temperaturer for store $t$. Realistisk er det fysiske begrensninger.\n\n2. **Forenklet solsyklus**: Solsyklusen er ikke perfekt periodisk og amplituden varierer.\n\n3. **Ingen tilbakekoblingsmekanismer**: Klimasystemet har komplekse tilbakekoblinger som ikke fanges opp.\n\n4. **Historisk tilpasning**: Modellen er tilpasset historiske data og kan ikke forutsi framtidige endringer i utslipp eller politikk.' },
        ],
        solution: 'a) 1,66°C (2000), 3,23°C (2050); b) ca. 0,31°C/tiår; c) Se løsning',
        hints: ['Sett inn $t$-verdier. For begrensninger: tenk på fysiske realiteter.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 15
    {
      id: 'r2-6-4-ex-block-15',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-15',
        number: '6.4.15',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Du skal lage en modell for vindkraftverk-effekt. Effekten $P$ avhenger av vindhastigheten $v$ og følger tilnærmet:

$P(v) = \\begin{cases} 0 & v < 3 \\\\ k(v-3)^3 & 3 \\leq v \\leq 12 \\\\ P_{\\max} & 12 < v < 25 \\\\ 0 & v \\geq 25 \\end{cases}$

Vindturbinen har makseffekt $P_{\\max} = 2000$ kW ved $v = 12$ m/s.

a) Bestem konstanten $k$.
b) Hva er effekten ved 8 m/s?
c) Diskuter hvorfor modellen er delt opp slik.`,
        subTasks: [
          { label: 'a', task: 'Finn $k$.', solution: 'Ved $v = 12$: $P(12) = k(12-3)^3 = k \\cdot 729 = 2000$\n$k = \\frac{2000}{729} \\approx 2{,}74$' },
          { label: 'b', task: 'Beregn $P(8)$.', solution: '$P(8) = 2{,}74 \\cdot (8-3)^3 = 2{,}74 \\cdot 125 = 342{,}5$ kW' },
          { label: 'c', task: 'Forklar modellens struktur.', solution: '**$v < 3$ m/s (cut-in):** For lav vind til å overvinne friksjon og starte rotasjon.\n\n**$3 \\leq v \\leq 12$ m/s:** Effekten øker med tredjepotens av (effektiv) vindhastighet, basert på kinetisk energi i vinden.\n\n**$12 < v < 25$ m/s:** Regulering (pitch-kontroll) holder effekten konstant for å unngå overbelastning.\n\n**$v \\geq 25$ m/s (cut-out):** Turbinen stopper for å unngå skader ved sterk vind.' },
        ],
        solution: 'a) $k \\approx 2{,}74$; b) 342,5 kW; c) Se forklaring',
        hints: ['Effekten i vind er proporsjonal med $v^3$.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // Oppgave 16
    {
      id: 'r2-6-4-ex-block-16',
      type: 'exercise',
      exercise: {
        id: 'r2-6-4-ex-16',
        number: '6.4.16',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `**Prosjektoppgave: Modellering av COVID-19-bølge**

I en tidlig fase av en epidemi ble følgende data registrert (smittetilfeller per dag):

| Dag | 1 | 5 | 10 | 15 | 20 | 25 | 30 |
|-----|---|---|----|----|----|----|-----|
| Tilfeller | 10 | 30 | 120 | 400 | 800 | 900 | 850 |

a) Forklar hvorfor en ren eksponentiell modell ikke passer for hele datasettet.
b) Tilpass en logistisk modell til dataene (bruk regresjon eller manuell tilpasning).
c) Når nådde epidemien toppen ifølge modellen?
d) Diskuter minst tre faktorer som kan gjøre modellen upålitelig.`,
        subTasks: [
          { label: 'a', task: 'Hvorfor ikke eksponentiell?', solution: 'Dataene viser først rask vekst (dag 1-15), deretter avtagende vekst og så nedgang (dag 25-30). Eksponentiell modell ville fortsatt å vokse uten grenser, men dataene flater ut og synker - typisk for logistisk/epidemiologisk forløp.' },
          { label: 'b', task: 'Tilpass logistisk modell.', solution: 'Fra dataene: Maksimum rundt 900 tilfeller/dag.\n$N(t) = \\frac{K}{1 + Ce^{-rt}}$\n\nEstimerer: $K \\approx 1000$, $N(1) = 10$ gir $C \\approx 99$.\nVed $t = 15$: $400 = \\frac{1000}{1 + 99e^{-15r}}$\n$e^{-15r} = \\frac{6}{99 \\cdot 4} \\approx 0{,}015$\n$r \\approx 0{,}28$\n\nModell: $N(t) \\approx \\frac{1000}{1 + 99e^{-0{,}28t}}$' },
          { label: 'c', task: 'Finn toppen.', solution: 'For daglige tilfeller: deriverer $N(t)$ og finner vendepunkt.\nVendepunkt ved $N = K/2 = 500$ tilfeller akkumulert per dag.\nLøser $N(t) = 500$: $t \\approx 16-17$ dager.' },
          { label: 'd', task: 'Diskuter usikkerheter.', solution: '1. **Testkapasitet**: Registrerte tilfeller avhenger av testing, ikke bare faktisk smitte.\n\n2. **Tiltak**: Nedstengning, vaksinering og atferdsendringer påvirker dynamikken.\n\n3. **Varianter**: Nye virusvarianter kan endre smittsomhet.\n\n4. **Sesongvariasjon**: Luftveisinfeksjoner påvirkes av årstid.\n\n5. **Underrapportering**: Asymptomatiske tilfeller telles ikke.\n\n6. **Modellforutsetninger**: Logistisk modell antar homogen blanding av befolkningen.' },
        ],
        solution: 'Se løsningsforslag for hver deloppgave.',
        hints: ['Logistisk modell fanger opp metning. Vendepunkt ved halv kapasitet.'],
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_6_5: TextbookChapter = {
  id: 'r2-6-5',
  courseId: 'r2',
  chapterNumber: '6.5',
  title: 'Modellering med reelle data',
  description: 'Analysere virkelige datasett med matematikk.',
  estimatedMinutes: 60,
  competenceGoals: [
    'bruke derivasjon og integrasjon til a analysere og tolke eigne matematiske modellar av reelle data',
  ],
  content: [
    // ========== INTRODUKSJON ==========
    {
      id: 'r2-6-5-intro',
      type: 'text',
      content: `## Matematisk modellering med reelle data

I den virkelige verden har vi ofte tilgang til maledata fra eksperimenter, observasjoner eller statistikk. Matematisk modellering handler om å finne matematiske funksjoner som beskriver disse dataene på en god mate.

**Hvorfor modellere data?**
- **Forstae sammenhenger**: Se monstre og trender i dataene
- **Gjore spaadom**: Anslaa verdier utenfor maleomradet
- **Ta beslutninger**: Basert på matematiske analyser
- **Kommunisere**: Presentere funn på en presis mate

I dette kapitlet laerer du a:
1. Velge riktig regresjonstype
2. Bruke digitale verktøy til regresjon
3. Vurdere modellens kvalitet
4. Skille mellom interpolasjon og ekstrapolasjon`,
    },

    // ========== REGRESJON - GRUNNLEGGENDE ==========
    {
      id: 'r2-6-5-regresjon-intro',
      type: 'text',
      content: `## Regresjon

**Regresjon** er en statistisk metode for å finne en funksjon som best tilpasser seg et sett med datapunkter. Malet er a minimere avstanden mellom funksjonen og datapunktene.`,
    },
    {
      id: 'r2-6-5-def-1',
      type: 'definition',
      title: 'Minste kvadraters metode',
      content: `Ved **minste kvadraters metode** finner vi den funksjonen $f(x)$ som minimerer summen av kvadrerte avvik:

$$S = \\sum_{i=1}^{n} (y_i - f(x_i))^2$$

der $(x_i, y_i)$ er datapunktene og $f(x_i)$ er funksjonsverdien.

Denne metoden gir den "beste" tilpasningen i statistisk forstand.`,
    },

    // ========== LINEAER REGRESJON ==========
    {
      id: 'r2-6-5-linear-intro',
      type: 'text',
      content: `## Lineaer regresjon

Ved lineær regresjon tilpasser vi en rett linje $y = ax + b$ til dataene. Dette er den enkleste formen for regresjon og passer nar dataene viser en tilnaermet lineær sammenheng.`,
    },
    {
      id: 'r2-6-5-theorem-1',
      type: 'theorem',
      title: 'Formler for lineær regresjon',
      content: `For datapunkter $(x_1, y_1), (x_2, y_2), \\ldots, (x_n, y_n)$ er:

$$a = \\frac{n\\sum x_i y_i - \\sum x_i \\sum y_i}{n\\sum x_i^2 - (\\sum x_i)^2}$$

$$b = \\bar{y} - a\\bar{x}$$

der $\\bar{x}$ og $\\bar{y}$ er gjennomsnittene.`,
    },
    {
      id: 'r2-6-5-example-1',
      type: 'example',
      title: 'Eksempel 1: Befolkningsvekst i en by',
      problem: `Tabellen viser befolkningen i en norsk by (i tusen):

| Ar   | 2010 | 2012 | 2014 | 2016 | 2018 | 2020 |
|------|------|------|------|------|------|------|
| Befolkning | 45.2 | 47.1 | 49.3 | 51.0 | 53.2 | 55.1 |

a) Bruk lineær regresjon til å finne en modell $y = ax + b$ der $x$ er antall år etter 2010.
b) Estimer befolkningen i 2025.`,
      solution: `**a) Lineaer regresjon**

La $x$ være antall år etter 2010. Da har vi datapunktene:
$(0, 45.2), (2, 47.1), (4, 49.3), (6, 51.0), (8, 53.2), (10, 55.1)$

Ved a bruke GeoGebra/kalkulator far vi:
$$y = 0.99x + 45.2$$

**b) Estimat for 2025**

For 2025 er $x = 15$:
$$y = 0.99 \\cdot 15 + 45.2 = 14.85 + 45.2 = 60.05$$

Befolkningen i 2025 anslaps til ca. **60 000**.

**Merk:** Dette er en ekstrapolasjon (utenfor maleomradet), sa anslaget er usikkert.`,
    },
    {
      id: 'r2-6-5-ex-1',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: `Tabellen viser gjennomsnittlig arstemperatur i en by (i $^\\circ$C):

| Ar   | 2015 | 2016 | 2017 | 2018 | 2019 | 2020 |
|------|------|------|------|------|------|------|
| Temp | 7.2  | 7.5  | 7.8  | 8.0  | 8.1  | 8.4  |

a) Finn en lineær modell $T = at + b$ der $t$ er antall år etter 2015.
b) Hva forutsier modellen for 2025?`,
        solution: `a) Ved lineær regresjon: $T = 0.23t + 7.2$

b) For 2025 er $t = 10$: $T = 0.23 \\cdot 10 + 7.2 = 9.5^\\circ$C`,
        hints: ['Bruk GeoGebra eller kalkulator for regresjon.'],
      },
    },

    // ========== EKSPONENTIELL REGRESJON ==========
    {
      id: 'r2-6-5-exp-intro',
      type: 'text',
      content: `## Eksponentiell regresjon

Nar data viser prosentvis vekst eller nedgang, passer ofte en eksponentiell modell:

$$y = a \\cdot b^x$$

eller på eksponentialform:

$$y = a \\cdot e^{kx}$$

der $k = \\ln(b)$.`,
    },
    {
      id: 'r2-6-5-note-1',
      type: 'note',
      content: `**Nar bruke eksponentiell regresjon?**

- Befolkningsvekst
- Radioaktiv nedbrytning
- Rentevekst
- Spredning av sykdommer
- Teknologisk utvikling (Moores lov)

**Kjennetegn:** Dataene viser tilnaermet konstant prosentvis endring.`,
    },
    {
      id: 'r2-6-5-example-2',
      type: 'example',
      title: 'Eksempel 2: Bakterievekst',
      problem: `I et eksperiment males antall bakterier i en kultur:

| Timer (t) | 0    | 2    | 4    | 6    | 8    |
|-----------|------|------|------|------|------|
| Antall (N)| 1000 | 1480 | 2190 | 3240 | 4790 |

a) Bruk eksponentiell regresjon til å finne en modell $N = N_0 \\cdot e^{kt}$.
b) Finn doblingstiden.
c) Estimer antall bakterier etter 12 timer.`,
      solution: `**a) Eksponentiell regresjon**

Ved a bruke eksponentiell regresjon i GeoGebra far vi:
$$N = 1000 \\cdot e^{0.2t}$$

eller tilsvarende $N = 1000 \\cdot 1.221^t$

**b) Doblingstid**

Doblingstiden finnes ved $e^{kt_{1/2}} = 2$:
$$t_{1/2} = \\frac{\\ln 2}{k} = \\frac{\\ln 2}{0.2} \\approx 3.47 \\text{ timer}$$

**c) Antall etter 12 timer**

$$N(12) = 1000 \\cdot e^{0.2 \\cdot 12} = 1000 \\cdot e^{2.4} \\approx 11\\,023$$

Etter 12 timer er det ca. **11 000 bakterier**.`,
    },
    {
      id: 'r2-6-5-ex-2',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: `En radioaktiv prove har folgende aktivitet (i Becquerel):

| Dager   | 0    | 5    | 10   | 15   | 20   |
|---------|------|------|------|------|------|
| Aktivitet | 800 | 565 | 400 | 283 | 200 |

a) Finn en eksponentiell modell $A = A_0 \\cdot e^{-\\lambda t}$.
b) Bestem halveringstiden.
c) Nar er aktiviteten redusert til 50 Bq?`,
        solution: `a) $A = 800 \\cdot e^{-0.0693t}$ (eller $A = 800 \\cdot 0.933^t$)

b) Halveringstid: $t_{1/2} = \\frac{\\ln 2}{0.0693} \\approx 10$ dager

c) $50 = 800 \\cdot e^{-0.0693t}$ gir $t \\approx 40$ dager`,
        hints: ['Ved halveringstid er $A = A_0/2$.'],
      },
    },

    // ========== POLYNOMISK REGRESJON ==========
    {
      id: 'r2-6-5-poly-intro',
      type: 'text',
      content: `## Polynomisk regresjon

Nar data har krumning som ikke passer lineært eller eksponentielt, kan vi bruke polynomer:

- **Andregrads** (parabel): $y = ax^2 + bx + c$
- **Tredjegrads**: $y = ax^3 + bx^2 + cx + d$
- **Hoyere grader**: Brukes sjeldnere

Jo hoyere grad, jo bedre tilpasning til dataene - men ogsa storre risiko for **overtilpasning**.`,
    },
    {
      id: 'r2-6-5-warning-1',
      type: 'warning',
      title: 'Overtilpasning',
      content: `Et polynom av hoey nok grad vil ga gjennom alle datapunktene, men det betyr ikke at modellen er god!

**Overtilpasning** (overfitting) oppstar nar modellen fanger opp stoy i dataene i stedet for den underliggende trenden. En god modell skal være enkel nok til a generalisere.`,
    },
    {
      id: 'r2-6-5-example-3',
      type: 'example',
      title: 'Eksempel 3: Kastet ball',
      problem: `En ball kastes oppover. Hoeyden (i meter) males ved ulike tidspunkt:

| Tid (s)  | 0   | 0.5 | 1.0 | 1.5 | 2.0 | 2.5 |
|----------|-----|-----|-----|-----|-----|-----|
| Hoeyde (m)| 1.5 | 6.3 | 9.1 | 9.9 | 8.7 | 5.5 |

a) Forklar hvorfor en andregradsfunksjon er passende.
b) Finn modellen $h(t) = at^2 + bt + c$.
c) Finn maksimal hoeyde og nar den nas.`,
      solution: `**a) Hvorfor andregradsmodell?**

Bevegelse under tyngdekraften følger: $h(t) = h_0 + v_0 t - \\frac{1}{2}gt^2$

Dette er en andregradsfunksjon med negativt ledende koeffisient.

**b) Regresjonsmodell**

Ved andregradstilpasning i GeoGebra:
$$h(t) = -4.9t^2 + 9.8t + 1.5$$

**c) Maksimal hoeyde**

Toppunktet finnes der $h'(t) = 0$:
$$h'(t) = -9.8t + 9.8 = 0$$
$$t = 1 \\text{ sekund}$$

Maksimal hoeyde:
$$h(1) = -4.9 \\cdot 1^2 + 9.8 \\cdot 1 + 1.5 = 6.4 \\text{ m}$$

Ballen nar maksimal hoeyde **6.4 m** etter **1 sekund**.`,
    },
    {
      id: 'r2-6-5-ex-3',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: `Bremselengden (i meter) for en bil ved ulike hastigheter:

| Hastighet (km/h) | 30  | 50  | 70  | 90  | 110 |
|------------------|-----|-----|-----|-----|-----|
| Bremselengde (m) | 6   | 15  | 28  | 45  | 66  |

a) Finn en andregradmodell $s(v) = av^2 + bv + c$.
b) Hva er bremselengden ved 100 km/h?
c) Ved hvilken hastighet er bremselengden 80 m?`,
        solution: `a) $s(v) = 0.005v^2 + 0.05v + 0.5$ (tilnaermet)

b) $s(100) = 0.005 \\cdot 100^2 + 0.05 \\cdot 100 + 0.5 \\approx 55.5$ m

c) Loser $80 = 0.005v^2 + 0.05v + 0.5$ gir $v \\approx 121$ km/h`,
        hints: ['Bremselengde vokser omtrent med kvadratet av hastigheten.'],
      },
    },

    // ========== DIGITALE VERKTOY ==========
    {
      id: 'r2-6-5-digital-intro',
      type: 'text',
      content: `## Bruk av digitale verktøy

I praksis bruker vi alltid digitale verktøy for regresjon. Her er de vanligste:

**GeoGebra:**
1. Lag en liste med x-verdier: \`L1 = {x1, x2, ...}\`
2. Lag en liste med y-verdier: \`L2 = {y1, y2, ...}\`
3. Bruk kommandoer som:
   - \`RegLin(L1, L2)\` - lineær regresjon
   - \`RegExp(L1, L2)\` - eksponentiell regresjon
   - \`RegPoly(L1, L2, n)\` - polynom av grad n

**Kalkulator (TI/Casio):**
- Legg inn data i statistikkmodulen
- Velg regresjonstype
- Les av koeffisientene`,
    },
    {
      id: 'r2-6-5-geogebra-1',
      type: 'geogebra',
      title: 'Interaktiv regresjon i GeoGebra',
      description: 'Prov a legge inn data og utfore regresjon. Klikk på punkter for a se hvordan regresjonskurven tilpasses.',
      appType: 'graphing',
      commands: [
        'L1 = {0, 2, 4, 6, 8, 10}',
        'L2 = {45.2, 47.1, 49.3, 51.0, 53.2, 55.1}',
        'RegLin(L1, L2)',
      ],
    },
    {
      id: 'r2-6-5-example-4',
      type: 'example',
      title: 'Eksempel 4: CO2-konsentrasjon (Mauna Loa)',
      problem: `Malt CO2-konsentrasjon (ppm) ved Mauna Loa-observatoriet:

| Ar   | 1960 | 1970 | 1980 | 1990 | 2000 | 2010 | 2020 |
|------|------|------|------|------|------|------|------|
| CO2  | 317  | 326  | 339  | 354  | 370  | 390  | 414  |

a) Bruk GeoGebra til å finne bade lineær og andregradstilpasning.
b) Hvilken modell passer best?
c) Estimer CO2-nivaet i 2030.`,
      solution: `**a) Regresjon i GeoGebra**

La $x$ være antall år etter 1960.

**Lineaer:** $y = 1.58x + 314.6$ ($R^2 = 0.987$)

**Andregrads:** $y = 0.012x^2 + 0.87x + 316.8$ ($R^2 = 0.999$)

**b) Beste modell**

Andregradstilpasningen har hoyere $R^2$ og fanger opp at veksten akselererer. Den er fysisk rimelig fordi utslippene har okt over tid.

**c) Estimat for 2030**

For $x = 70$ (ar 2030):

Lineaer: $y = 1.58 \\cdot 70 + 314.6 = 425$ ppm

Andregrads: $y = 0.012 \\cdot 70^2 + 0.87 \\cdot 70 + 316.8 = 436$ ppm

Andregradmodellen forutsier ca. **436 ppm** i 2030.`,
    },
    {
      id: 'r2-6-5-ex-4',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-4',
        number: '4',
        type: 'interactive',
        difficulty: 'medium',
        tool: 'geogebra-graph',
        task: `Verdensrekorden på 100 m sprint (menn) over tid:

| Ar   | 1912 | 1936 | 1968 | 1988 | 1999 | 2009 |
|------|------|------|------|------|------|------|
| Tid (s)| 10.6 | 10.2 | 9.95 | 9.92 | 9.79 | 9.58 |

a) Lag en lineær modell i GeoGebra.
b) Hva forutsier modellen for 2050?
c) Er dette realistisk? Diskuter begrensninger.`,
        solution: `a) La $x$ være antall år etter 1900. Lineaer regresjon gir: $t = -0.0097x + 10.7$

b) For 2050 ($x = 150$): $t = -0.0097 \\cdot 150 + 10.7 = 9.24$ s

c) Dette er urealistisk langsiktig - modellen antyder at rekorden til slutt blir negativ! Lineaere modeller egner seg darlig for ekstrapolasjon langt frem i tid.`,
        hints: ['Bruk RegLin-kommandoen i GeoGebra.'],
        initialCommands: [
          'L1 = {12, 36, 68, 88, 99, 109}',
          'L2 = {10.6, 10.2, 9.95, 9.92, 9.79, 9.58}',
        ],
      },
    },

    // ========== RESIDUALER ==========
    {
      id: 'r2-6-5-residual-intro',
      type: 'text',
      content: `## Residualer og modellvurdering

Et **residual** er forskjellen mellom observert verdi og modellens verdi:

$$e_i = y_i - \\hat{y}_i$$

der $y_i$ er observert verdi og $\\hat{y}_i$ er modellens predikerte verdi.`,
    },
    {
      id: 'r2-6-5-def-2',
      type: 'definition',
      title: 'Residualanalyse',
      content: `**God modell:**
- Residualene bor være tilfeldige (ingen monster)
- Residualene bor være sma sammenlignet med y-verdiene
- Residualene bor være omtrent normalfordelte

**Tegn på darlig modell:**
- Systematisk monster i residualene (f.eks. kurve)
- Store residualer
- Residualer som vokser med x`,
    },
    {
      id: 'r2-6-5-theorem-2',
      type: 'theorem',
      title: 'Bestemmelseskoeffisienten $R^2$',
      content: `$$R^2 = 1 - \\frac{\\sum(y_i - \\hat{y}_i)^2}{\\sum(y_i - \\bar{y})^2}$$

**Tolkning:**
- $R^2 = 1$: Perfekt tilpasning
- $R^2 = 0$: Modellen forklarer ingenting
- $R^2 > 0.9$: Veldig god tilpasning
- $R^2 > 0.7$: God tilpasning

$R^2$ angir andelen av variasjonen i $y$ som forklares av modellen.`,
    },
    {
      id: 'r2-6-5-example-5',
      type: 'example',
      title: 'Eksempel 5: Residualanalyse',
      problem: `For befolkningseksempelet (Eksempel 1) hadde vi modellen $y = 0.99x + 45.2$.

Beregn residualene og vurder modellen.

| x   | 0    | 2    | 4    | 6    | 8    | 10   |
|-----|------|------|------|------|------|------|
| y   | 45.2 | 47.1 | 49.3 | 51.0 | 53.2 | 55.1 |`,
      solution: `**Beregner modellverdier og residualer:**

| x | $y$ | $\\hat{y} = 0.99x + 45.2$ | $e = y - \\hat{y}$ |
|---|-----|---------------------------|-------------------|
| 0 | 45.2 | 45.20 | 0.00 |
| 2 | 47.1 | 47.18 | -0.08 |
| 4 | 49.3 | 49.16 | 0.14 |
| 6 | 51.0 | 51.14 | -0.14 |
| 8 | 53.2 | 53.12 | 0.08 |
| 10| 55.1 | 55.10 | 0.00 |

**Vurdering:**
- Residualene er sma (alle $|e| < 0.15$)
- Ingen tydelig monster
- $R^2 = 0.999$ (meget god tilpasning)

Konklusjon: Den lineære modellen passer godt til dataene.`,
    },
    {
      id: 'r2-6-5-ex-5',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'medium',
        task: `For bakterieeksempelet (Eksempel 2) hadde vi $N = 1000 \\cdot e^{0.2t}$.

a) Beregn residualene for $t = 0, 2, 4, 6, 8$.
b) Vurder om modellen passer godt.`,
        solution: `a) Residualer:
| t | N (observert) | $\\hat{N}$ (modell) | Residual |
|---|---------------|---------------------|----------|
| 0 | 1000 | 1000 | 0 |
| 2 | 1480 | 1492 | -12 |
| 4 | 2190 | 2226 | -36 |
| 6 | 3240 | 3320 | -80 |
| 8 | 4790 | 4953 | -163 |

b) Residualene har en systematisk tendens (alle negative etter $t=0$), noe som tyder på at modellen kanskje kan forbedres. Men relativt sett er avvikene sma (< 4%).`,
        hints: ['Bruk formelen $\\hat{N} = 1000 \\cdot e^{0.2t}$ for hver t-verdi.'],
      },
    },

    // ========== INTERPOLASJON OG EKSTRAPOLASJON ==========
    {
      id: 'r2-6-5-interpol-intro',
      type: 'text',
      content: `## Interpolasjon vs ekstrapolasjon

Nar vi bruker en modell til a anslaa verdier, skiller vi mellom to tilfeller:`,
    },
    {
      id: 'r2-6-5-def-3',
      type: 'definition',
      title: 'Interpolasjon og ekstrapolasjon',
      content: `**Interpolasjon:** Anslae verdier **innenfor** maleomradet.
- Relativt sikre anslag
- Modellen er testet mot data i omradet

**Ekstrapolasjon:** Anslae verdier **utenfor** maleomradet.
- Usikre anslag
- Modellen er ikke testet i dette omradet
- Risiko for store feil

**Tommelregel:** Vaer forsiktig med ekstrapolasjon, saerlig langt utenfor maleomradet!`,
    },
    {
      id: 'r2-6-5-example-6',
      type: 'example',
      title: 'Eksempel 6: Farlig ekstrapolasjon',
      problem: `En elev maler temperaturen i en kopp kaffe mens den kjoeles ned:

| Tid (min) | 0  | 5  | 10 | 15 | 20 |
|-----------|----|----|----|----|----|
| Temp (C)  | 80 | 65 | 54 | 45 | 38 |

Eleven lager en lineær modell: $T = -2.1t + 78$

a) Hva forutsier modellen for $t = 40$ min?
b) Hva er problemet med denne spaadomsn?`,
      solution: `**a) Modellens spaadom**

$T(40) = -2.1 \\cdot 40 + 78 = -6^\\circ$C

**b) Problemet**

Modellen forutsier negativ temperatur, noe som er fysisk umulig for en kopp kaffe i romtemperatur!

**Forklaring:**

Avkjoling av kaffe følger **Newtons avkjolingslov**:
$$T(t) = T_{rom} + (T_0 - T_{rom}) \\cdot e^{-kt}$$

Temperaturen naermer seg romtemperaturen asymptotisk. Den lineære modellen er bare god for kort tid.

Dette illustrerer faren ved ekstrapolasjon langt utenfor maleomradet.`,
    },
    {
      id: 'r2-6-5-warning-2',
      type: 'warning',
      title: 'Forsiktighetsregler for ekstrapolasjon',
      content: `1. **Fysisk rimelighet:** Gir modellen mening? Kan temperaturen bli negativ?

2. **Tidshorisont:** Jo lengre ut du ekstrapolerer, jo storre usikkerhet.

3. **Modellvalg:** En modell som passer lokalt, passer ikke nodvendigvis globalt.

4. **Konfidensintervaller:** Ved ekstrapolasjon bor usikkerheten alltid oppgis.`,
    },
    {
      id: 'r2-6-5-ex-6',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-6',
        number: '6',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Norges befolkning (i millioner):

| Ar   | 1900 | 1950 | 1980 | 2000 | 2020 |
|------|------|------|------|------|------|
| Bef. | 2.2  | 3.3  | 4.1  | 4.5  | 5.4  |

a) Lag bade en lineær og en eksponentiell modell.
b) Sammenlign spådommene for år 2050.
c) Hvilken modell er mest rimelig? Begrunn.`,
        solution: `a) La $x$ være antall år etter 1900:
   - Lineaer: $B = 0.026x + 2.3$
   - Eksponentiell: $B = 2.2 \\cdot e^{0.0075x}$

b) For 2050 ($x = 150$):
   - Lineaer: $B = 0.026 \\cdot 150 + 2.3 = 6.2$ millioner
   - Eksponentiell: $B = 2.2 \\cdot e^{0.0075 \\cdot 150} = 6.8$ millioner

c) Den lineære modellen er trolig mer rimelig fordi befolkningsveksten i Norge har avtatt. Eksponentiell vekst forutsetter konstant vekstrate, noe som ikke gjelder for modne okonomier.`,
        hints: ['Tenk på om vekstraten har vaert konstant gjennom perioden.'],
      },
    },

    // ========== FLERE EKSEMPLER MED REELLE DATA ==========
    {
      id: 'r2-6-5-example-7',
      type: 'example',
      title: 'Eksempel 7: Issmelting i Arktis',
      problem: `Arlig minimum isutbredelse i Arktis (millioner km$^2$):

| Ar   | 1980 | 1990 | 2000 | 2005 | 2010 | 2015 | 2020 |
|------|------|------|------|------|------|------|------|
| Is   | 7.8  | 6.2  | 6.3  | 5.6  | 4.9  | 4.6  | 3.9  |

a) Bruk lineær regresjon til a modellere utviklingen.
b) Nar forutsier modellen at Arktis er isfritt om sommeren?`,
      solution: `**a) Lineaer regresjon**

La $x$ være antall år etter 1980:
$$A = -0.095x + 7.6$$

($R^2 \\approx 0.93$, god tilpasning)

**b) Isfritt Arktis**

Setter $A = 0$:
$$0 = -0.095x + 7.6$$
$$x = 80$$

Dette tilsvarer aret $1980 + 80 = 2060$.

**Viktig forbehold:** Dette er en grov ekstrapolasjon. Klimasystemer er komplekse, og modellen tar ikke hensyn til tilbakekoblingsmekanismer eller tiltak mot klimaendringer.`,
    },
    {
      id: 'r2-6-5-example-8',
      type: 'example',
      title: 'Eksempel 8: Smarttelefonpenetrasjon',
      problem: `Andel av nordmenn med smarttelefon (%):

| Ar   | 2010 | 2012 | 2014 | 2016 | 2018 | 2020 |
|------|------|------|------|------|------|------|
| %    | 30   | 55   | 75   | 85   | 92   | 95   |

a) Forklar hvorfor verken lineær eller eksponentiell modell passer.
b) Foresla en bedre modelltype.`,
      solution: `**a) Hvorfor standard modeller ikke passer**

**Lineaer modell:** Ville forutsi over 100% etter hvert, noe som er umulig.

**Eksponentiell modell:** Veksten avtar nar markedet mettes. Eksponentiell vekst passer bare i begynnelsen.

**b) Bedre modell: Logistisk vekst**

En logistisk funksjon passer:
$$y = \\frac{L}{1 + e^{-k(x-x_0)}}$$

der $L = 100$ (maksimalt 100%).

Ved logistisk regresjon far vi omtrent:
$$y = \\frac{100}{1 + e^{-0.4(x-11)}}$$

der $x$ er antall år etter 2000.

Logistisk vekst kjennetegnes av:
- Sakte start
- Rask vekst i midtfasen
- Avtagende vekst nar metning naermer seg`,
    },
    {
      id: 'r2-6-5-ex-7',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-7',
        number: '7',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Stroemforbruk i et hus malt gjennom et dogn (kWh):

| Kl.  | 00  | 04  | 08  | 12  | 16  | 20  |
|------|-----|-----|-----|-----|-----|-----|
| kWh  | 0.8 | 0.5 | 2.5 | 1.8 | 3.2 | 2.0 |

a) Hvorfor passer ikke et polynom av lav grad?
b) Foresla en modell som kan fange opp det periodiske monsteret.`,
        solution: `a) Stroemforbruket varierer periodisk gjennom dognet (hoeyt om morgenen og kvelden, lavt om natten). Et polynom vil ikke fange opp denne sykliske oppfoerselen.

b) En trigonometrisk modell passer bedre:
$$P(t) = A + B\\sin\\left(\\frac{2\\pi t}{24} + \\phi\\right) + C\\sin\\left(\\frac{4\\pi t}{24} + \\psi\\right)$$

Her brukes sinusfunksjoner med periode 24 timer for a modellere den daglige variasjonen. Flere ledd kan legges til for a fange mer komplekse monstre.`,
        hints: ['Tenk på hva slags funksjon som gjentar seg med fast periode.'],
      },
    },
    {
      id: 'r2-6-5-example-9',
      type: 'example',
      title: 'Eksempel 9: Oekonomisk vekst',
      problem: `Norges BNP (milliarder NOK, faste 2015-priser):

| Ar   | 2000 | 2005 | 2010 | 2015 | 2020 |
|------|------|------|------|------|------|
| BNP  | 2450 | 2750 | 2900 | 3100 | 3050 |

a) Finn en passende regresjonsmodell.
b) Beregn gjennomsnittlig arlig vekstrate.
c) Diskuter hvorfor BNP falt i 2020.`,
      solution: `**a) Regresjonsmodell**

La $x$ være antall år etter 2000.

Lineaer tilpasning: $BNP = 29x + 2480$

Eksponentiell tilpasning: $BNP = 2450 \\cdot e^{0.011x}$

Begge gir $R^2 \\approx 0.85$, men ingen fanger fallet i 2020.

**b) Gjennomsnittlig vekstrate**

Fra eksponentiell modell: ca. 1.1% per ar

Eller direkte: $\\left(\\frac{3050}{2450}\\right)^{1/20} - 1 \\approx 1.1\\%$

**c) Diskusjon av 2020**

BNP falt i 2020 på grunn av koronapandemien. Dette er et eksempel på en **ekstern sjokk** som modellen ikke kan forutsi. Maledata fra kriseperioder bor behandles forsiktig i modellering.`,
    },
    {
      id: 'r2-6-5-example-10',
      type: 'example',
      title: 'Eksempel 10: Vindhastighetens effekt på vindkraft',
      problem: `Malt effekt (kW) fra en vindturbin ved ulike vindhastigheter:

| v (m/s) | 3   | 5   | 7   | 9   | 11  | 13  |
|---------|-----|-----|-----|-----|-----|-----|
| P (kW)  | 15  | 70  | 190 | 400 | 730 | 1200|

a) Forklar teoretisk hvilken sammenheng vi forventer.
b) Test hypotesen med regresjon.`,
      solution: `**a) Teoretisk sammenheng**

Teorien sier at vindkraft følger:
$$P = \\frac{1}{2}\\rho A v^3 \\cdot C_p$$

der $v$ er vindhastigheten. Vi forventer altsa $P \\propto v^3$.

**b) Test med regresjon**

Vi bruker potensregresjon $P = av^b$ eller tilpasser $\\ln P = \\ln a + b \\cdot \\ln v$.

Ved regresjon far vi:
$$P = 0.55 v^{3.02}$$

Eksponenten $b \\approx 3$ bekrefter teorien!

**Konklusjon:** Dataene stemmer godt med den teoretiske kubiske sammenhengen mellom vindhastighet og effekt.`,
    },
    {
      id: 'r2-6-5-ex-8',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-8',
        number: '8',
        type: 'classic',
        difficulty: 'medium',
        task: `Bilens drivstofforbruk (liter/mil) ved ulike hastigheter:

| Hastighet (km/h) | 50  | 70  | 90  | 110 | 130 |
|------------------|-----|-----|-----|-----|-----|
| Forbruk (l/mil)  | 0.52| 0.48| 0.50| 0.58| 0.72|

a) Finn et andregradspolynom som modellerer forbruket.
b) Ved hvilken hastighet er forbruket lavest?`,
        solution: `a) Andregradstilpasning: $F(v) = 0.00008v^2 - 0.013v + 0.98$

b) Minimum finnes der $F'(v) = 0$:
$F'(v) = 0.00016v - 0.013 = 0$
$v = 81$ km/h

Forbruket er lavest ved ca. **80 km/h**.`,
        hints: ['Bruk RegPoly(L1, L2, 2) i GeoGebra.'],
      },
    },

    // ========== PRESENTASJON AV RESULTATER ==========
    {
      id: 'r2-6-5-present-intro',
      type: 'text',
      content: `## Presentasjon av resultater

Nar du presenterer en matematisk modell, bor du inkludere:

1. **Datakilden:** Hvor kommer dataene fra? Er de palitelige?

2. **Modellvalg:** Hvilken type modell ble valgt og hvorfor?

3. **Modellens parametere:** Skriv ut funksjonen med koeffisienter.

4. **Tilpasningsmal:** Oppgi $R^2$ eller andre kvalitetsmal.

5. **Grafisk fremstilling:** Vis data og modell sammen.

6. **Residualanalyse:** Er det systematiske avvik?

7. **Gyldighetsomrade:** Hvor gjelder modellen?

8. **Usikkerhet:** Vurder begrensninger og usikkerhet.`,
    },
    {
      id: 'r2-6-5-example-11',
      type: 'example',
      title: 'Eksempel 11: Fullstendig modellrapport',
      problem: `Skriv en kort rapport for befolkningsmodellen fra Eksempel 1.`,
      solution: `**Modellrapport: Befolkningsutvikling**

**1. Datakilde**
Data fra SSB for befolkning i perioden 2010-2020.

**2. Modellvalg**
Lineaer modell valgt fordi dataene viser jevn vekst uten akselerasjon.

**3. Modell**
$$B(t) = 0.99t + 45.2$$
der $t$ er antall år etter 2010 og $B$ er befolkning i tusen.

**4. Tilpasning**
$R^2 = 0.999$, noe som indikerer svært god tilpasning.

**5. Residualanalyse**
Residualene viser ingen systematisk monster og er alle under 0.15 (tusen).

**6. Gyldighetsomrade**
Modellen er gyldig for interpolasjon i perioden 2010-2020. Ekstrapolasjon utover 5-10 år er usikker.

**7. Konklusjon**
Befolkningen vokser med ca. 1000 personer per ar. Modellen kan brukes til kortsiktige prognoser.`,
    },
    {
      id: 'r2-6-5-ex-9',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-9',
        number: '9',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Skriv en kort modellrapport for et av de tidligere eksemplene (bakterievekst, CO2-konsentrasjon, eller vindkraft). Inkluder alle punktene fra seksjonen om presentasjon.`,
        solution: `Eksempel på rapport for bakterievekst:

**1. Datakilde:** Laboratoriemalinger over 8 timer.

**2. Modellvalg:** Eksponentiell modell fordi bakterier formerer seg ved celledeling.

**3. Modell:** $N = 1000 \\cdot e^{0.2t}$ der $t$ er tid i timer.

**4. Tilpasning:** $R^2 = 0.998$

**5. Residualanalyse:** Sma systematiske avvik tyder på at veksten kanskje avtar mot slutten.

**6. Gyldighetsomrade:** 0-8 timer. Utenfor dette vil naeringsbegrensning pavirke veksten.

**7. Konklusjon:** Bakteriene dobler seg ca. hver 3.5 time i denne fasen.`,
        hints: ['Velg ett eksempel og folg malen systematisk.'],
      },
    },

    // ========== FLERE OEVINGSOPPGAVER ==========
    {
      id: 'r2-6-5-example-12',
      type: 'example',
      title: 'Eksempel 12: Korrelasjon uten kausalitet',
      problem: `To datasett fra USA viser:

| Ar   | Iskremssalg (mill $) | Drukningsulykker |
|------|---------------------|------------------|
| 2015 | 6.8 | 3200 |
| 2016 | 7.2 | 3400 |
| 2017 | 7.5 | 3550 |
| 2018 | 7.9 | 3700 |
| 2019 | 8.3 | 3850 |

a) Finn korrelasjonen mellom iskremssalg og drukningsulykker.
b) Betyr dette at iskrem forarsaker drukning?`,
      solution: `**a) Korrelasjon**

Ved a plotte dataene og beregne, finner vi:
$r \\approx 0.99$ (svært sterk positiv korrelasjon)

**b) Kausalitet?**

**Nei!** Dette er et klassisk eksempel på **spurios korrelasjon**.

Begge variablene pavirkes av en tredje faktor: **varmt vaer**.
- Nar det er varmt, spiser folk mer iskrem
- Nar det er varmt, bader flere mennesker, og dermed skjer flere drukningsulykker

**Konklusjon:** Korrelasjon innebærer ikke kausalitet. Selv en perfekt matematisk sammenheng betyr ikke at den ene variabelen forarsaker den andre.`,
    },
    {
      id: 'r2-6-5-ex-10',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-10',
        number: '10',
        type: 'classic',
        difficulty: 'lett',
        task: `Hvilken type regresjon (lineær, eksponentiell, polynomisk) ville du brukt for folgende situasjoner? Begrunn valget.

a) Hoeyden til en plante som funksjon av tid (fra spaedeplante til voksen)
b) Akselerasjon av en bil fra stillstand
c) Befolkningsvekst i et utviklingsland
d) Temperatur i en stekeovn som varmes opp`,
        solution: `a) **Logistisk** (S-kurve): Planten vokser raskt i begynnelsen, men veksten avtar nar den naermer seg maksimal hoeyde.

b) **Lineaer** (tilnaermet): Hvis kraften er konstant, er akselerasjonen konstant og hastigheten oker lineært.

c) **Eksponentiell**: Befolkninger vokser ofte eksponentielt i tidlige faser, men kan ga over til logistisk nar ressurser begrenser.

d) **Eksponentiell tilnaerming**: Temperaturen naermer seg en grense (innstilt temperatur) asymptotisk. Newtons avkjolingslov i revers.`,
        hints: ['Tenk på om veksten er konstant, proporsjonal med naværende verdi, eller avtar mot en grense.'],
      },
    },
    {
      id: 'r2-6-5-ex-11',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-11',
        number: '11',
        type: 'classic',
        difficulty: 'medium',
        task: `Et firma maler antall solgte enheter av et nytt produkt:

| Maned   | 1   | 2   | 3   | 4   | 5   | 6   |
|---------|-----|-----|-----|-----|-----|-----|
| Salg    | 120 | 180 | 260 | 350 | 420 | 470 |

a) Finn bade lineær og andregradstilpasning.
b) Beregn $R^2$ for begge modellene.
c) Hvilken modell forutsier mest salg i maned 12?`,
        solution: `a) Lineaer: $S = 72m + 60$
   Andregrads: $S = -8m^2 + 120m + 10$

b) Lineaer: $R^2 \\approx 0.97$
   Andregrads: $R^2 \\approx 0.995$

c) For maned 12:
   Lineaer: $S = 72 \\cdot 12 + 60 = 924$
   Andregrads: $S = -8 \\cdot 144 + 120 \\cdot 12 + 10 = 298$

Den lineære modellen gir mye hoyere anslag. Andregradmodellen antyder at veksten avtar og salget vil synke, noe som kan være realistisk for et produkt som mettes i markedet.`,
        hints: ['Sammenlign $R^2$-verdiene og vurder hvilken modell som er mest realistisk på lang sikt.'],
      },
    },
    {
      id: 'r2-6-5-example-13',
      type: 'example',
      title: 'Eksempel 13: Integrasjon av regresjonsmodell',
      problem: `Vannforingen i en elv (i $m^3/s$) varierer gjennom aret:

| Maned   | Jan | Mar | Mai | Jul | Sep | Nov |
|---------|-----|-----|-----|-----|-----|-----|
| $Q$     | 15  | 20  | 45  | 35  | 25  | 18  |

En modell for vannføringen er: $Q(t) = 25 + 18\\sin\\left(\\frac{\\pi t}{6}\\right)$

der $t$ er antall måneder etter januar.

Beregn total vannmengde som renner forbi i løpet av et år.`,
      solution: `**Total vannmengde**

Total vannmengde er integralet av vannføringen over ett år (12 måneder):

$$V = \\int_0^{12} Q(t) \\, dt = \\int_0^{12} \\left(25 + 18\\sin\\left(\\frac{\\pi t}{6}\\right)\\right) dt$$

$$V = \\left[25t - 18 \\cdot \\frac{6}{\\pi}\\cos\\left(\\frac{\\pi t}{6}\\right)\\right]_0^{12}$$

$$V = \\left(25 \\cdot 12 - \\frac{108}{\\pi}\\cos(2\\pi)\\right) - \\left(0 - \\frac{108}{\\pi}\\cos(0)\\right)$$

$$V = 300 - \\frac{108}{\\pi} + \\frac{108}{\\pi} = 300 \\text{ (i enheter maned} \\cdot m^3/s\\text{)}$$

For a fa $m^3$: $V = 300 \\cdot 30 \\cdot 24 \\cdot 3600 \\approx 7.8 \\cdot 10^8 \\, m^3$

**Konklusjon:** Ca. 780 millioner kubikkmeter vann renner forbi i løpet av aret.`,
    },
    {
      id: 'r2-6-5-example-14',
      type: 'example',
      title: 'Eksempel 14: Derivasjon av modell',
      problem: `Befolkningen i en by modelleres med:
$$P(t) = \\frac{100}{1 + 9e^{-0.1t}}$$ (i tusen)

der $t$ er antall år etter 2000.

a) Finn $P'(t)$ og tolk denne.
b) Nar er befolkningsveksten størst?`,
      solution: `**a) Derivasjon**

La $u = 1 + 9e^{-0.1t}$. Da er $P = 100u^{-1}$.

$$P'(t) = -100u^{-2} \\cdot u' = -100 \\cdot \\frac{9 \\cdot (-0.1)e^{-0.1t}}{(1 + 9e^{-0.1t})^2}$$

$$P'(t) = \\frac{90e^{-0.1t}}{(1 + 9e^{-0.1t})^2}$$

**Tolkning:** $P'(t)$ er vekstraten (antall tusen nye innbyggere per ar).

**b) Maksimal vekst**

For logistisk vekst er veksten maksimal nar $P = \\frac{L}{2}$, alts $P = 50$.

$$50 = \\frac{100}{1 + 9e^{-0.1t}}$$
$$1 + 9e^{-0.1t} = 2$$
$$e^{-0.1t} = \\frac{1}{9}$$
$$t = \\frac{\\ln 9}{0.1} \\approx 22$$

Befolkningsveksten er størst rundt år **2022**.`,
    },
    {
      id: 'r2-6-5-ex-12',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-12',
        number: '12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Temperaturen i et rom etter at varmen slas av modelleres med:
$$T(t) = 5 + 15e^{-0.05t}$$
der $t$ er tid i timer og $T$ er i grader Celsius.

a) Hva er starttemperaturen?
b) Hva naermer temperaturen seg nar $t \\to \\infty$?
c) Finn $T'(t)$ og tolk fortegnet.
d) Nar synker temperaturen raskest?`,
        solution: `a) $T(0) = 5 + 15e^0 = 5 + 15 = 20^\\circ$C

b) Nar $t \\to \\infty$: $e^{-0.05t} \\to 0$, sa $T \\to 5^\\circ$C (utetemperaturen)

c) $T'(t) = 15 \\cdot (-0.05)e^{-0.05t} = -0.75e^{-0.05t}$

Fortegnet er alltid negativt, noe som betyr at temperaturen synker hele tiden.

d) $|T'(t)| = 0.75e^{-0.05t}$ er størst nar $t = 0$.
Temperaturen synker raskest i begynnelsen, med $T'(0) = -0.75^\\circ$C per time.`,
        hints: ['Bruk kjerneregelen ved derivasjon av $e^{-0.05t}$.'],
      },
    },
    {
      id: 'r2-6-5-ex-13',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-13',
        number: '13',
        type: 'classic',
        difficulty: 'vanskelig',
        task: `Effekten fra et solcellepanel gjennom en dag modelleres med:
$$P(t) = 500\\sin^2\\left(\\frac{\\pi t}{12}\\right)$$ for $0 \\leq t \\leq 12$

der $t$ er timer etter soloppgang og $P$ er i watt.

a) Nar er effekten maksimal?
b) Beregn total energiproduksjon gjennom dagen (i kWh).`,
        solution: `a) Maksimal effekt nar $\\sin^2\\left(\\frac{\\pi t}{12}\\right) = 1$, altsa nar $\\frac{\\pi t}{12} = \\frac{\\pi}{2}$, som gir $t = 6$ timer.

Maksimal effekt er $P_{max} = 500$ W midt på dagen.

b) Total energi:
$$E = \\int_0^{12} 500\\sin^2\\left(\\frac{\\pi t}{12}\\right) dt$$

Bruker $\\sin^2(x) = \\frac{1 - \\cos(2x)}{2}$:

$$E = 250\\int_0^{12} \\left(1 - \\cos\\left(\\frac{\\pi t}{6}\\right)\\right) dt$$

$$E = 250\\left[t - \\frac{6}{\\pi}\\sin\\left(\\frac{\\pi t}{6}\\right)\\right]_0^{12}$$

$$E = 250 \\cdot 12 = 3000 \\text{ Wh} = 3 \\text{ kWh}$$`,
        hints: ['Bruk identiteten $\\sin^2(x) = \\frac{1 - \\cos(2x)}{2}$.'],
      },
    },
    {
      id: 'r2-6-5-ex-14',
      type: 'exercise',
      exercise: {
        id: 'r2-6-5-ex-14',
        number: '14',
        type: 'interactive',
        difficulty: 'vanskelig',
        tool: 'geogebra-graph',
        task: `Nedenfor er temperaturen i en innsjoe malt på ulike dyp om sommeren:

| Dyp (m)   | 0   | 2   | 4   | 6   | 8   | 10  |
|-----------|-----|-----|-----|-----|-----|-----|
| Temp (C)  | 22  | 21  | 18  | 12  | 8   | 6   |

a) Finn en passende regresjonsmodell (prov bade lineær, eksponentiell og polynom).
b) Beregn gjennomsnittstemperaturen i de overste 10 meterne ved integrasjon.
c) Bruk derivasjon til å finne ved hvilket dyp temperaturen synker raskest.`,
        solution: `a) Andregradstilpasning gir: $T(d) = 0.08d^2 - 2.4d + 22$

Eksponentiell: $T(d) = 22 \\cdot e^{-0.13d}$

Begge gir god tilpasning, men polynomet er noe bedre ($R^2 \\approx 0.995$).

b) Gjennomsnittstemperatur:
$$\\bar{T} = \\frac{1}{10}\\int_0^{10} (0.08d^2 - 2.4d + 22) \\, dd$$
$$= \\frac{1}{10}\\left[\\frac{0.08d^3}{3} - 1.2d^2 + 22d\\right]_0^{10}$$
$$= \\frac{1}{10}(26.7 - 120 + 220) = 12.7^\\circ C$$

c) $T'(d) = 0.16d - 2.4$

Raskest nedgang nar $|T'|$ er størst. $T'(0) = -2.4$, $T'(10) = -0.8$.
Temperaturen synker raskest naer overflaten (ved $d = 0$).`,
        hints: ['Sammenlign $R^2$-verdier for ulike regresjonstyper.'],
        initialCommands: [
          'L1 = {0, 2, 4, 6, 8, 10}',
          'L2 = {22, 21, 18, 12, 8, 6}',
        ],
      },
    },

    // ========== OPPSUMMERING ==========
    {
      id: 'r2-6-5-summary',
      type: 'text',
      content: `## Oppsummering

I dette kapitlet har du laert:

**Regresjonstyper:**
- **Lineaer:** $y = ax + b$ - for jevn vekst/nedgang
- **Eksponentiell:** $y = ae^{bx}$ - for prosentvis vekst
- **Polynomisk:** $y = a_nx^n + \\ldots + a_0$ - for mer komplekse monstre

**Modellvurdering:**
- Bruk $R^2$ for a male tilpasning
- Analyser residualer for systematiske avvik
- Vurder fysisk rimelighet

**Interpolasjon vs ekstrapolasjon:**
- Interpolasjon (innenfor data): Relativt sikkert
- Ekstrapolasjon (utenfor data): Krever forsiktighet

**Presentasjon:**
- Oppgi datakilde og modellvalg
- Vis graf med data og modell
- Diskuter gyldighetsomrade og usikkerhet

**Derivasjon og integrasjon:**
- Derivasjon gir endringsrate
- Integrasjon gir totalmengder`,
    },
  ],
  exercises: [],
};

export const CHAPTER_R2_6_6: TextbookChapter = {
  id: 'r2-6-6',
  courseId: 'r2',
  chapterNumber: '6.6',
  title: 'Bevis og matematisk argumentasjon',
  description: 'Analysere og utvikle matematiske bevis.',
  estimatedMinutes: 60,
  competenceGoals: [
    'analysere og forsta matematiske bevis, forklare sentrale idear i bevis og utvikle eigne bevis',
  ],
  content: [
    // ============================================================================
    // INTRODUKSJON: HVA ER ET MATEMATISK BEVIS?
    // ============================================================================
    {
      id: 'r2-6-6-intro',
      type: 'text',
      content: `## Hva er et matematisk bevis?

Et **matematisk bevis** er en logisk argumentasjonsrekke som viser at en pastand (et teorem eller en setning) er sann. I motsetning til naturvitenskapelige fag, hvor vi tester hypoteser gjennom eksperimenter, bruker matematikken logiske slutninger til a utlede sannheter fra aksepterte premisser.

Et godt bevis kjennetegnes ved:
- **Presisjon**: Hver pastand er klart formulert
- **Logisk sammenheng**: Hvert steg følger logisk fra det forrige
- **Fullstendighet**: Ingen steg mangler i argumentasjonen
- **Gyldige slutninger**: Kun aksepterte logiske regler brukes

I dette kapitlet skal vi lare om de tre viktigste bevismetodene: **direkte bevis**, **motsigelsesbevis** og **induksjonsbevis**.`,
    },

    {
      id: 'r2-6-6-def-teorem',
      type: 'definition',
      title: 'Teorem og bevis',
      content: `Et **teorem** (eller en **setning**) er en matematisk pastand som kan bevises a vare sann.

Et **bevis** er en logisk argumentasjon som viser at et teorem er sant, basert pa:
- **Aksiomer**: Grunnleggende sannheter vi aksepterer uten bevis
- **Definisjoner**: Presise beskrivelser av matematiske begreper
- **Tidligere beviste teoremer**: Resultater vi allerede har vist er sanne`,
    },

    // ============================================================================
    // DIREKTE BEVIS
    // ============================================================================
    {
      id: 'r2-6-6-direkte-intro',
      type: 'text',
      content: `## Direkte bevis

Et **direkte bevis** starter med kjente sannheter (premisser) og bruker logiske slutninger for a na frem til konklusjonen. Dette er den mest intuitive bevisformen.

**Struktur for direkte bevis:**
1. Anta at premissene er sanne
2. Utfor logiske operasjoner og slutninger
3. Konkluder med det vi onsker a vise`,
    },

    {
      id: 'r2-6-6-def-partall-oddetall',
      type: 'definition',
      title: 'Partall og oddetall',
      content: `Et heltall $n$ er et **partall** hvis det finnes et heltall $k$ slik at $n = 2k$.

Et heltall $n$ er et **oddetall** hvis det finnes et heltall $k$ slik at $n = 2k + 1$.`,
    },

    // EKSEMPEL 1: Summen av to partall
    {
      id: 'r2-6-6-example-1',
      type: 'example',
      title: 'Eksempel 1: Summen av to partall',
      problem: `Bevis at summen av to partall er et partall.`,
      solution: `**Bevis:**

La $a$ og $b$ vare to partall.

**Steg 1:** Siden $a$ er et partall, finnes det et heltall $m$ slik at $a = 2m$.

**Steg 2:** Siden $b$ er et partall, finnes det et heltall $n$ slik at $b = 2n$.

**Steg 3:** Vi beregner summen:
$$a + b = 2m + 2n = 2(m + n)$$

**Steg 4:** Siden $m + n$ er et heltall (summen av to heltall er et heltall), og $a + b = 2(m + n)$, er $a + b$ et partall per definisjon.

$$\\blacksquare$$`,
    },

    // EKSEMPEL 2: Produktet av to oddetall
    {
      id: 'r2-6-6-example-2',
      type: 'example',
      title: 'Eksempel 2: Produktet av to oddetall',
      problem: `Bevis at produktet av to oddetall er et oddetall.`,
      solution: `**Bevis:**

La $a$ og $b$ vare to oddetall.

**Steg 1:** Siden $a$ er et oddetall, finnes det et heltall $m$ slik at $a = 2m + 1$.

**Steg 2:** Siden $b$ er et oddetall, finnes det et heltall $n$ slik at $b = 2n + 1$.

**Steg 3:** Vi beregner produktet:
$$a \\cdot b = (2m + 1)(2n + 1)$$

**Steg 4:** Vi utvider:
$$a \\cdot b = 4mn + 2m + 2n + 1 = 2(2mn + m + n) + 1$$

**Steg 5:** La $k = 2mn + m + n$. Da er $k$ et heltall, og vi har:
$$a \\cdot b = 2k + 1$$

Dette er formen til et oddetall, sa $a \\cdot b$ er et oddetall.

$$\\blacksquare$$`,
    },

    // EKSEMPEL 3: Kvadrat av partall
    {
      id: 'r2-6-6-example-3',
      type: 'example',
      title: 'Eksempel 3: Kvadratet av et partall',
      problem: `Bevis at kvadratet av et partall er delelig med 4.`,
      solution: `**Bevis:**

La $n$ vare et partall.

**Steg 1:** Siden $n$ er et partall, finnes det et heltall $k$ slik at $n = 2k$.

**Steg 2:** Vi beregner $n^2$:
$$n^2 = (2k)^2 = 4k^2$$

**Steg 3:** Siden $k^2$ er et heltall, og $n^2 = 4k^2 = 4 \\cdot k^2$, er $n^2$ delelig med 4.

$$\\blacksquare$$`,
    },

    // OPPGAVE 1
    {
      id: 'r2-6-6-ex-block-1',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-1',
        number: '1',
        type: 'classic',
        difficulty: 'lett',
        task: 'Bruk direkte bevis til a vise folgende pastander:',
        subTasks: [
          {
            label: 'a',
            task: 'Summen av to oddetall er et partall.',
            solution: `La $a = 2m + 1$ og $b = 2n + 1$ vare to oddetall. Da er $a + b = 2m + 1 + 2n + 1 = 2(m + n + 1)$, som er et partall.`,
          },
          {
            label: 'b',
            task: 'Summen av et partall og et oddetall er et oddetall.',
            solution: `La $a = 2m$ vare et partall og $b = 2n + 1$ vare et oddetall. Da er $a + b = 2m + 2n + 1 = 2(m + n) + 1$, som er et oddetall.`,
          },
          {
            label: 'c',
            task: 'Produktet av et partall og et heltall er alltid et partall.',
            solution: `La $a = 2m$ vare et partall og $b$ vare et vilkarlig heltall. Da er $a \\cdot b = 2m \\cdot b = 2(mb)$, som er et partall.`,
          },
        ],
        hints: ['Bruk definisjonene av partall og oddetall', 'Skriv tallene på formen $2k$ eller $2k+1$'],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // EKSEMPEL 4: Summen av tre pafolgende heltall
    {
      id: 'r2-6-6-example-4',
      type: 'example',
      title: 'Eksempel 4: Summen av tre pafolgende heltall',
      problem: `Bevis at summen av tre pafolgende heltall alltid er delelig med 3.`,
      solution: `**Bevis:**

La de tre pafolgende heltallene vare $n$, $n+1$ og $n+2$.

**Steg 1:** Vi beregner summen:
$$n + (n+1) + (n+2) = 3n + 3 = 3(n + 1)$$

**Steg 2:** Siden $n + 1$ er et heltall, og summen kan skrives som $3 \\cdot (n+1)$, er summen delelig med 3.

$$\\blacksquare$$`,
    },

    // ============================================================================
    // MOTSIGELSESBEVIS
    // ============================================================================
    {
      id: 'r2-6-6-motsigelse-intro',
      type: 'text',
      content: `## Motsigelsesbevis (bevis ved selvmotsigelse)

Et **motsigelsesbevis** (lat. *reductio ad absurdum*) fungerer ved at vi antar det motsatte av det vi onsker a bevise, og viser at denne antagelsen forer til en logisk selvmotsigelse.

**Struktur for motsigelsesbevis:**
1. Anta det motsatte av det vi onsker a bevise
2. Utled logiske konsekvenser fra denne antagelsen
3. Vis at konsekvensene forer til en selvmotsigelse
4. Konkluder at antagelsen var feil, og det motsatte (det vi ville bevise) ma vare sant

Denne metoden er spesielt nyttig nar det er vanskelig a bevise noe direkte.`,
    },

    // EKSEMPEL 5: sqrt(2) er irrasjonal
    {
      id: 'r2-6-6-example-5',
      type: 'example',
      title: 'Eksempel 5: $\\sqrt{2}$ er irrasjonal (klassisk bevis)',
      problem: `Bevis at $\\sqrt{2}$ er et irrasjonalt tall, dvs. at det ikke kan skrives som en brok $\\frac{p}{q}$ der $p$ og $q$ er heltall.`,
      solution: `**Bevis ved motsigelse:**

**Steg 1 (Antagelse):** Anta at $\\sqrt{2}$ er rasjonalt. Da kan vi skrive:
$$\\sqrt{2} = \\frac{p}{q}$$
der $p$ og $q$ er heltall uten felles faktorer (broken er maksimalt forkortet) og $q \\neq 0$.

**Steg 2:** Vi kvadrerer begge sider:
$$2 = \\frac{p^2}{q^2}$$

**Steg 3:** Vi ganger med $q^2$:
$$2q^2 = p^2$$

**Steg 4:** Siden $p^2 = 2q^2$, er $p^2$ et partall. Men da ma ogsa $p$ vare et partall (for hvis $p$ var oddetall, ville $p^2$ ogsa vart oddetall).

**Steg 5:** Siden $p$ er et partall, kan vi skrive $p = 2k$ for et heltall $k$. Vi setter inn:
$$2q^2 = (2k)^2 = 4k^2$$

**Steg 6:** Vi deler på 2:
$$q^2 = 2k^2$$

**Steg 7:** Siden $q^2 = 2k^2$, er $q^2$ et partall, og derfor er ogsa $q$ et partall.

**Steg 8 (Motsigelse):** Bade $p$ og $q$ er partall, noe som betyr at de har felles faktor 2. Men vi antok at broken var maksimalt forkortet! Dette er en selvmotsigelse.

**Konklusjon:** Antagelsen om at $\\sqrt{2}$ er rasjonalt ma vare feil. Derfor er $\\sqrt{2}$ irrasjonalt.

$$\\blacksquare$$`,
    },

    // EKSEMPEL 6: Uendelig mange primtall
    {
      id: 'r2-6-6-example-6',
      type: 'example',
      title: 'Eksempel 6: Det finnes uendelig mange primtall (Euklids bevis)',
      problem: `Bevis at det finnes uendelig mange primtall.`,
      solution: `**Bevis ved motsigelse (Euklid, ca. 300 f.Kr.):**

**Steg 1 (Antagelse):** Anta at det bare finnes endelig mange primtall. La disse vare $p_1, p_2, p_3, \\ldots, p_n$.

**Steg 2:** Betrakt tallet:
$$N = p_1 \\cdot p_2 \\cdot p_3 \\cdots p_n + 1$$

Dette er produktet av alle primtall pluss 1.

**Steg 3:** Vi undersoker om $N$ er delelig med noen av primtallene $p_1, p_2, \\ldots, p_n$:
- Nar vi deler $N$ på $p_1$, far vi rest 1 (siden $N = p_1 \\cdot (\\text{noe}) + 1$)
- Nar vi deler $N$ på $p_2$, far vi rest 1
- Generelt: Nar vi deler $N$ på $p_i$, far vi alltid rest 1

Altsa er $N$ ikke delelig med noen av primtallene $p_1, \\ldots, p_n$.

**Steg 4:** Men alle tall storre enn 1 har minst en primfaktor. Siden $N > 1$ og $N$ ikke er delelig med noen av $p_1, \\ldots, p_n$, ma $N$ enten:
- Vare et primtall selv (som ikke er i listen), eller
- Ha en primfaktor som ikke er i listen

**Steg 5 (Motsigelse):** Uansett har vi funnet et primtall som ikke er i listen var over alle primtall. Dette motsier antagelsen.

**Konklusjon:** Det finnes uendelig mange primtall.

$$\\blacksquare$$`,
    },

    // OPPGAVE 2
    {
      id: 'r2-6-6-ex-block-2',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-2',
        number: '2',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bruk motsigelsesbevis:',
        subTasks: [
          {
            label: 'a',
            task: 'Vis at $\\sqrt{3}$ er irrasjonalt.',
            solution: `Anta at $\\sqrt{3} = \\frac{p}{q}$ er rasjonalt med $\\gcd(p,q) = 1$. Da er $3q^2 = p^2$, sa $p^2$ er delelig med 3, og dermed er $p$ delelig med 3. Skriv $p = 3k$, sa $3q^2 = 9k^2$, altsaa $q^2 = 3k^2$. Da er ogsa $q$ delelig med 3. Motsigelse: $p$ og $q$ har felles faktor 3.`,
          },
          {
            label: 'b',
            task: 'Vis at det ikke finnes noe største partall.',
            solution: `Anta at $n$ er det største partallet. Men da er $n + 2$ ogsa et partall (siden $n + 2 = 2k + 2 = 2(k+1)$), og $n + 2 > n$. Motsigelse.`,
          },
          {
            label: 'c',
            task: 'Vis at summen av et rasjonalt tall og et irrasjonalt tall er irrasjonalt.',
            solution: `La $r$ vare rasjonalt og $i$ irrasjonalt. Anta at $r + i = s$ er rasjonalt. Da er $i = s - r$, som er differansen av to rasjonale tall, altsa rasjonalt. Motsigelse: $i$ var antatt irrasjonalt.`,
          },
        ],
        hints: ['Folg samme struktur som i beviset for at $\\sqrt{2}$ er irrasjonalt'],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // EKSEMPEL 7: Ingen minste positive rasjonale tall
    {
      id: 'r2-6-6-example-7',
      type: 'example',
      title: 'Eksempel 7: Det finnes ikke noe minste positivt rasjonalt tall',
      problem: `Bevis at det ikke finnes noe minste positivt rasjonalt tall.`,
      solution: `**Bevis ved motsigelse:**

**Steg 1 (Antagelse):** Anta at det finnes et minste positivt rasjonalt tall $r$.

**Steg 2:** Betrakt tallet $\\frac{r}{2}$.

**Steg 3:** Vi observerer at:
- $\\frac{r}{2}$ er rasjonalt (kvotienten av to rasjonale tall er rasjonalt)
- $\\frac{r}{2} > 0$ (halvparten av et positivt tall er positivt)
- $\\frac{r}{2} < r$

**Steg 4 (Motsigelse):** Vi har funnet et positivt rasjonalt tall $\\frac{r}{2}$ som er mindre enn $r$. Men $r$ var antatt a vare det minste. Dette er en selvmotsigelse.

**Konklusjon:** Det finnes ikke noe minste positivt rasjonalt tall.

$$\\blacksquare$$`,
    },

    // ============================================================================
    // INDUKSJONSBEVIS
    // ============================================================================
    {
      id: 'r2-6-6-induksjon-intro',
      type: 'text',
      content: `## Induksjonsbevis (matematisk induksjon)

**Matematisk induksjon** er en bevismetode som brukes til a bevise pastander som gjelder for alle naturlige tall (eller alle heltall fra et visst punkt).

Tenk på induksjon som en uendelig rekke med dominobrikker:
- Hvis vi vet at den forste brikken faller (basissteget)
- Og vi vet at nar en brikke faller, sa faller den neste (induksjonssteget)
- Da vil alle brikkene falle`,
    },

    {
      id: 'r2-6-6-theorem-induksjon',
      type: 'theorem',
      title: 'Prinsippet om matematisk induksjon',
      content: `La $P(n)$ vare en pastand som avhenger av et naturlig tall $n$. For a bevise at $P(n)$ er sann for alle $n \\geq n_0$, viser vi:

**1. Basissteg:** $P(n_0)$ er sann.

**2. Induksjonssteg:** For alle $k \\geq n_0$: Hvis $P(k)$ er sann, så er $P(k+1)$ sann.

Da er $P(n)$ sann for alle $n \\geq n_0$.`,
    },

    {
      id: 'r2-6-6-note-induksjon',
      type: 'note',
      content: `I induksjonssteget kaller vi antagelsen "$P(k)$ er sann" for **induksjonsantagelsen** eller **induksjonshypotesen**. Det er viktig a vare tydelig på hva denne antagelsen er, og hvordan den brukes til a bevise $P(k+1)$.`,
    },

    // EKSEMPEL 8: Summen av de n forste naturlige tallene
    {
      id: 'r2-6-6-example-8',
      type: 'example',
      title: 'Eksempel 8: Summen av de $n$ forste naturlige tallene',
      problem: `Bevis ved induksjon at for alle naturlige tall $n \\geq 1$:
$$1 + 2 + 3 + \\cdots + n = \\frac{n(n+1)}{2}$$`,
      solution: `**Bevis ved induksjon:**

La $P(n)$ vare pastanden: $1 + 2 + 3 + \\cdots + n = \\frac{n(n+1)}{2}$

**Basissteg ($n = 1$):**

Venstre side: $1$

Hoyre side: $\\frac{1 \\cdot 2}{2} = 1$

Siden venstre side = hoyre side, er $P(1)$ sann.

**Induksjonssteg:**

**Induksjonsantagelse:** Anta at $P(k)$ er sann for en vilkarlig $k \\geq 1$, dvs.:
$$1 + 2 + 3 + \\cdots + k = \\frac{k(k+1)}{2}$$

**A vise:** $P(k+1)$ er sann, dvs.:
$$1 + 2 + 3 + \\cdots + k + (k+1) = \\frac{(k+1)(k+2)}{2}$$

**Bevis:**
$$1 + 2 + 3 + \\cdots + k + (k+1) = \\underbrace{\\frac{k(k+1)}{2}}_{\\text{induksjonsantagelsen}} + (k+1)$$

$$= \\frac{k(k+1)}{2} + \\frac{2(k+1)}{2} = \\frac{k(k+1) + 2(k+1)}{2}$$

$$= \\frac{(k+1)(k + 2)}{2}$$

Dette er nettopp $P(k+1)$.

**Konklusjon:** Ved induksjonsprinsippet er $P(n)$ sann for alle $n \\geq 1$.

$$\\blacksquare$$`,
    },

    // EKSEMPEL 9: Summen av de n forste oddetallene
    {
      id: 'r2-6-6-example-9',
      type: 'example',
      title: 'Eksempel 9: Summen av de $n$ forste oddetallene',
      problem: `Bevis ved induksjon at for alle $n \\geq 1$:
$$1 + 3 + 5 + \\cdots + (2n-1) = n^2$$`,
      solution: `**Bevis ved induksjon:**

La $P(n)$ vare pastanden: $1 + 3 + 5 + \\cdots + (2n-1) = n^2$

**Basissteg ($n = 1$):**

Venstre side: $1$

Hoyre side: $1^2 = 1$

$P(1)$ er sann.

**Induksjonssteg:**

**Induksjonsantagelse:** Anta $P(k)$: $1 + 3 + 5 + \\cdots + (2k-1) = k^2$

**A vise:** $P(k+1)$: $1 + 3 + 5 + \\cdots + (2k-1) + (2(k+1)-1) = (k+1)^2$

**Bevis:**
$$1 + 3 + 5 + \\cdots + (2k-1) + (2k+1) = k^2 + (2k+1)$$

$$= k^2 + 2k + 1 = (k+1)^2$$

**Konklusjon:** Ved induksjonsprinsippet er $P(n)$ sann for alle $n \\geq 1$.

$$\\blacksquare$$`,
    },

    // EKSEMPEL 10: Delelighetsbevis
    {
      id: 'r2-6-6-example-10',
      type: 'example',
      title: 'Eksempel 10: Delelighetsbevis',
      problem: `Bevis ved induksjon at $n^3 - n$ er delelig med 6 for alle naturlige tall $n \\geq 1$.`,
      solution: `**Bevis ved induksjon:**

La $P(n)$ vare pastanden: $6 \\mid (n^3 - n)$ (6 deler $n^3 - n$)

**Basissteg ($n = 1$):**

$1^3 - 1 = 0 = 6 \\cdot 0$

Siden 0 er delelig med 6, er $P(1)$ sann.

**Induksjonssteg:**

**Induksjonsantagelse:** Anta at $P(k)$ er sann, dvs. $k^3 - k = 6m$ for et heltall $m$.

**A vise:** $P(k+1)$: $(k+1)^3 - (k+1)$ er delelig med 6.

**Bevis:**
$$(k+1)^3 - (k+1) = k^3 + 3k^2 + 3k + 1 - k - 1$$
$$= k^3 + 3k^2 + 2k$$
$$= (k^3 - k) + 3k^2 + 3k$$
$$= (k^3 - k) + 3k(k + 1)$$

Na bruker vi at:
- $(k^3 - k) = 6m$ (induksjonsantagelsen)
- $k(k+1)$ er produktet av to pafolgende tall, sa ett av dem er partall. Dermed er $k(k+1)$ delelig med 2, og $3k(k+1)$ er delelig med 6.

Altsa er $(k+1)^3 - (k+1) = 6m + 6 \\cdot (\\text{heltall})$, som er delelig med 6.

$$\\blacksquare$$`,
    },

    // OPPGAVE 3
    {
      id: 'r2-6-6-ex-block-3',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-3',
        number: '3',
        type: 'classic',
        difficulty: 'medium',
        task: 'Bevis ved induksjon:',
        subTasks: [
          {
            label: 'a',
            task: '$1 + 2 + 4 + 8 + \\cdots + 2^{n-1} = 2^n - 1$ for alle $n \\geq 1$',
            solution: `Basissteg: $n=1$: VS = $2^0 = 1$, HS = $2^1 - 1 = 1$. OK.
Induksjonssteg: Anta $1 + 2 + \\cdots + 2^{k-1} = 2^k - 1$. Da er $1 + 2 + \\cdots + 2^{k-1} + 2^k = 2^k - 1 + 2^k = 2 \\cdot 2^k - 1 = 2^{k+1} - 1$.`,
          },
          {
            label: 'b',
            task: '$1^2 + 2^2 + 3^2 + \\cdots + n^2 = \\frac{n(n+1)(2n+1)}{6}$ for alle $n \\geq 1$',
            solution: `Basissteg: $n=1$: VS = 1, HS = $\\frac{1 \\cdot 2 \\cdot 3}{6} = 1$. OK.
Induksjonssteg: Anta formelen for $k$. Da er $\\sum_{i=1}^{k+1} i^2 = \\frac{k(k+1)(2k+1)}{6} + (k+1)^2 = \\frac{(k+1)(k(2k+1) + 6(k+1))}{6} = \\frac{(k+1)(2k^2 + 7k + 6)}{6} = \\frac{(k+1)(k+2)(2k+3)}{6}$.`,
          },
          {
            label: 'c',
            task: '$n^2 + n$ er alltid et partall for alle $n \\geq 1$',
            solution: `Basissteg: $n=1$: $1 + 1 = 2$, som er partall. OK.
Induksjonssteg: Anta $k^2 + k = 2m$. Da er $(k+1)^2 + (k+1) = k^2 + 2k + 1 + k + 1 = (k^2 + k) + 2k + 2 = 2m + 2(k+1) = 2(m + k + 1)$, som er partall.`,
          },
        ],
        hints: ['Husk a sjekke basissteget forst', 'I induksjonssteget, bruk induksjonsantagelsen eksplisitt'],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // EKSEMPEL 11: Geometrisk rekke
    {
      id: 'r2-6-6-example-11',
      type: 'example',
      title: 'Eksempel 11: Formelen for geometrisk rekke',
      problem: `Bevis ved induksjon at for $r \\neq 1$:
$$1 + r + r^2 + \\cdots + r^n = \\frac{r^{n+1} - 1}{r - 1}$$`,
      solution: `**Bevis ved induksjon:**

La $P(n)$ vare formelen ovenfor.

**Basissteg ($n = 0$):**

VS: $r^0 = 1$

HS: $\\frac{r^1 - 1}{r - 1} = \\frac{r - 1}{r - 1} = 1$

$P(0)$ er sann.

**Induksjonssteg:**

**Induksjonsantagelse:** $1 + r + r^2 + \\cdots + r^k = \\frac{r^{k+1} - 1}{r - 1}$

**A vise:** $1 + r + r^2 + \\cdots + r^k + r^{k+1} = \\frac{r^{k+2} - 1}{r - 1}$

**Bevis:**
$$1 + r + \\cdots + r^k + r^{k+1} = \\frac{r^{k+1} - 1}{r - 1} + r^{k+1}$$

$$= \\frac{r^{k+1} - 1 + r^{k+1}(r - 1)}{r - 1} = \\frac{r^{k+1} - 1 + r^{k+2} - r^{k+1}}{r - 1}$$

$$= \\frac{r^{k+2} - 1}{r - 1}$$

$$\\blacksquare$$`,
    },

    // ============================================================================
    // ANALYSERE OG FORSTA BEVIS
    // ============================================================================
    {
      id: 'r2-6-6-analyse-intro',
      type: 'text',
      content: `## Analysere og forsta bevis

A lese og forsta matematiske bevis er en viktig ferdighet. Her er noen strategier:

**1. Identifiser strukturen:**
- Hva er premissene (det vi starter med)?
- Hva er konklusjonen (det vi vil bevise)?
- Hvilken bevismetode brukes?

**2. Folg hvert steg:**
- Er hvert steg logisk gyldig?
- Hvilke regler eller tidligere resultater brukes?
- Kan du forklare hvert steg med egne ord?

**3. Se etter nodvendig bruk av premissene:**
- Hvor brukes hver premiss?
- Kunne beviset fungert uten noen av premissene?

**4. Vurder generalitet:**
- Er beviset gyldig i alle tilfeller?
- Finnes det spesialtilfeller som ma behandles separat?`,
    },

    // EKSEMPEL 12: Analysere et bevis
    {
      id: 'r2-6-6-example-12',
      type: 'example',
      title: 'Eksempel 12: Analysere et bevis',
      problem: `Analyser folgende bevis og identifiser eventuelle feil:

"**Pastand:** Alle hester har samme farge.

**Bevis ved induksjon:**

**Basissteg:** For $n = 1$ hest er pastanden triviell: En hest har samme farge som seg selv.

**Induksjonssteg:** Anta at enhver mengde med $k$ hester har samme farge. Betrakt en mengde med $k + 1$ hester: $H_1, H_2, \\ldots, H_{k+1}$.

Mengden $\\{H_1, H_2, \\ldots, H_k\\}$ har $k$ hester, sa alle har samme farge (induksjonsantagelsen).

Mengden $\\{H_2, H_3, \\ldots, H_{k+1}\\}$ har ogsa $k$ hester, sa alle har samme farge.

Siden $H_2$ er i begge mengder, har alle $k + 1$ hestene samme farge.

**Konklusjon:** Alle hester har samme farge. $\\blacksquare$"`,
      solution: `**Analyse av beviset:**

Dette beviset inneholder en **subtil feil i induksjonssteget**.

**Feilen:** Induksjonssteget fungerer bare nar de to mengdene $\\{H_1, \\ldots, H_k\\}$ og $\\{H_2, \\ldots, H_{k+1}\\}$ har en **felles** hest.

**Problemet oppstar ved $k = 1$:**
- Mengde 1: $\\{H_1\\}$ (1 hest)
- Mengde 2: $\\{H_2\\}$ (1 hest)
- Disse mengdene har **ingen felles hester**!

Dermed kan vi ikke konkludere at $H_1$ og $H_2$ har samme farge.

**Lardommen:** I induksjonsbevis ma vi vare forsiktige med a sjekke at argumentet faktisk fungerer for alle verdier av $k$, spesielt for de forste verdiene. Her svikter argumentet ved overgangen fra $n = 1$ til $n = 2$.`,
    },

    // OPPGAVE 4
    {
      id: 'r2-6-6-ex-block-4',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-4',
        number: '4',
        type: 'classic',
        difficulty: 'medium',
        task: 'Analyser folgene bevis og identifiser feil:',
        subTasks: [
          {
            label: 'a',
            task: `"**Pastand:** $1 = 2$

**Bevis:** La $a = b$. Da er $a^2 = ab$. Altsa $a^2 - b^2 = ab - b^2$, dvs. $(a-b)(a+b) = b(a-b)$. Vi deler på $(a-b)$ og far $a + b = b$. Siden $a = b$, har vi $2b = b$, altsa $2 = 1$."

Hva er feilen?`,
            solution: `Feilen er at vi deler på $(a - b)$, men siden $a = b$, har vi $a - b = 0$. Vi kan ikke dele på null. Dette er en ugyldig operasjon.`,
          },
          {
            label: 'b',
            task: `"**Pastand:** Alle positive heltall er like.

**Bevis:** La $P(n)$ vare: Alle tall i mengden $\\{1, 2, \\ldots, n\\}$ er like.
$P(1)$ er sann (kun ett tall).
Anta $P(k)$: $1 = 2 = \\cdots = k$. Da er spesielt $k = 1$, sa $k + 1 = 2 = 1$. Altsa $P(k+1)$ er sann."

Hva er feilen?`,
            solution: `Feilen er at induksjonssteget ma vise at *hvis* alle tall opptil $k$ er like, så er ogsa $k+1$ lik disse. Men argumentet "da er spesielt $k = 1$" bruker konklusjonen ulovlig. Det riktige ville vart a forklare hvorfor $k+1$ er lik tallene $1, \\ldots, k$, noe som ikke gjores.`,
          },
        ],
        hints: ['Se etter divisjon med null', 'Sjekk om induksjonssteget faktisk beviser det det pastar'],
        solution: 'Se deloppgavene for analyse.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ============================================================================
    // UTVIKLE EGNE BEVIS
    // ============================================================================
    {
      id: 'r2-6-6-utvikle-intro',
      type: 'text',
      content: `## Utvikle egne bevis

A skrive egne bevis er en ferdighet som utvikles med ovelse. Her er en steg-for-steg-tilnarming:

**1. Forsta problemet:**
- Hva er det eksakt vi skal bevise?
- Hva vet vi (premissene)?
- Skriv opp relevante definisjoner.

**2. Velg bevismetode:**
- **Direkte bevis**: Naturlig nar vi kan arbeide fremover fra premissene.
- **Motsigelsesbevis**: Nyttig nar pastanden er negativ ("det finnes ikke...") eller nar direkte bevis virker vanskelig.
- **Induksjon**: Nar pastanden gjelder for alle naturlige tall.

**3. Skriv beviset:**
- Vær presis og tydelig
- Begrunn hvert steg
- Marker tydelig start og slutt på beviset

**4. Sjekk beviset:**
- Er hvert steg logisk gyldig?
- Har du brukt alle nodvendige premisser?
- Fungerer beviset i alle tilfeller?`,
    },

    // EKSEMPEL 13: Bygge et bevis fra bunnen
    {
      id: 'r2-6-6-example-13',
      type: 'example',
      title: 'Eksempel 13: Utvikle et bevis',
      problem: `Bevis at for alle reelle tall $a$ og $b$: Hvis $a + b$ er rasjonalt og $a$ er rasjonalt, så er $b$ rasjonalt.`,
      solution: `**Steg 1: Forsta problemet**
- Premisser: $a + b \\in \\mathbb{Q}$ og $a \\in \\mathbb{Q}$
- Konklusjon: $b \\in \\mathbb{Q}$
- Definisjon: Et tall $r$ er rasjonalt hvis $r = \\frac{p}{q}$ der $p, q \\in \\mathbb{Z}$, $q \\neq 0$.

**Steg 2: Velg bevismetode**
Dette virker som et naturlig direkte bevis: Vi kan bruke at rasjonale tall er lukket under subtraksjon.

**Steg 3: Skriv beviset**

**Bevis:**

La $a$ og $a + b$ vare rasjonale tall.

Siden $a$ er rasjonalt, finnes heltall $p_1, q_1$ med $q_1 \\neq 0$ slik at $a = \\frac{p_1}{q_1}$.

Siden $a + b$ er rasjonalt, finnes heltall $p_2, q_2$ med $q_2 \\neq 0$ slik at $a + b = \\frac{p_2}{q_2}$.

Da er:
$$b = (a + b) - a = \\frac{p_2}{q_2} - \\frac{p_1}{q_1} = \\frac{p_2 q_1 - p_1 q_2}{q_1 q_2}$$

Siden $p_2 q_1 - p_1 q_2$ og $q_1 q_2$ er heltall, og $q_1 q_2 \\neq 0$, er $b$ rasjonalt.

$$\\blacksquare$$

**Steg 4: Sjekk beviset**
- Vi brukte begge premissene
- Hvert steg er begrunnet
- Det er ingen spesialtilfeller vi har oversett`,
    },

    // EKSEMPEL 14: Kontraposisjon
    {
      id: 'r2-6-6-example-14',
      type: 'example',
      title: 'Eksempel 14: Bevis ved kontraposisjon',
      problem: `Bevis: Hvis $n^2$ er et partall, så er $n$ et partall.`,
      solution: `**Bevismetode:** Vi bruker **kontraposisjon**. A bevise "Hvis $P$, sa $Q$" er logisk ekvivalent med a bevise "Hvis ikke $Q$, sa ikke $P$".

**Kontraposisjon:** Hvis $n$ er et oddetall, så er $n^2$ et oddetall.

**Bevis:**

Anta at $n$ er et oddetall. Da finnes et heltall $k$ slik at $n = 2k + 1$.

Vi beregner $n^2$:
$$n^2 = (2k + 1)^2 = 4k^2 + 4k + 1 = 2(2k^2 + 2k) + 1$$

La $m = 2k^2 + 2k$. Da er $m$ et heltall, og $n^2 = 2m + 1$, som er formen til et oddetall.

Altsa er $n^2$ et oddetall.

**Konklusjon:** Ved kontraposisjon har vi vist at hvis $n^2$ er et partall, så er $n$ et partall.

$$\\blacksquare$$`,
    },

    // OPPGAVE 5
    {
      id: 'r2-6-6-ex-block-5',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-5',
        number: '5',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utvikle fullstendige bevis for folgende pastander. Velg passende bevismetode.',
        subTasks: [
          {
            label: 'a',
            task: 'Hvis $n^2$ er delelig med 3, så er $n$ delelig med 3.',
            solution: `Bevis ved kontraposisjon: Anta at $n$ ikke er delelig med 3. Da er $n = 3k + 1$ eller $n = 3k + 2$.
Tilfelle 1: $n = 3k + 1 \\Rightarrow n^2 = 9k^2 + 6k + 1 = 3(3k^2 + 2k) + 1$, ikke delelig med 3.
Tilfelle 2: $n = 3k + 2 \\Rightarrow n^2 = 9k^2 + 12k + 4 = 3(3k^2 + 4k + 1) + 1$, ikke delelig med 3.
Altsaa: Hvis $n^2$ er delelig med 3, så er $n$ delelig med 3.`,
          },
          {
            label: 'b',
            task: '$\\sqrt{5}$ er irrasjonalt.',
            solution: `Anta at $\\sqrt{5} = \\frac{p}{q}$ med $\\gcd(p,q) = 1$. Da er $5q^2 = p^2$, sa 5 deler $p^2$, og dermed deler 5 $p$. Skriv $p = 5k$, sa $5q^2 = 25k^2$, altsaa $q^2 = 5k^2$. Da deler 5 ogsa $q$. Motsigelse: $p$ og $q$ har felles faktor 5.`,
          },
          {
            label: 'c',
            task: 'For alle $n \\geq 1$: $1 \\cdot 1! + 2 \\cdot 2! + \\cdots + n \\cdot n! = (n+1)! - 1$',
            solution: `Basissteg: $n = 1$: VS = $1 \\cdot 1! = 1$, HS = $2! - 1 = 1$. OK.
Induksjonssteg: Anta formelen for $k$. Da er $\\sum_{i=1}^{k+1} i \\cdot i! = (k+1)! - 1 + (k+1) \\cdot (k+1)! = (k+1)!(1 + k + 1) - 1 = (k+1)!(k+2) - 1 = (k+2)! - 1$.`,
          },
        ],
        hints: [
          'a) Prøv kontraposisjon: anta at $n$ ikke er delelig med 3',
          'b) Bruk samme teknikk som for $\\sqrt{2}$',
          'c) Bruk induksjon og at $(k+1)(k+1)! = (k+2)! - (k+1)!$',
        ],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ============================================================================
    // LOGISK ARGUMENTASJON
    // ============================================================================
    {
      id: 'r2-6-6-logikk-intro',
      type: 'text',
      content: `## Logisk argumentasjon

Matematiske bevis bygger på formell logikk. Her er de viktigste logiske begrepene:

**Logiske konnektiver:**
- **Konjunksjon** ($P \\land Q$): "$P$ og $Q$" - sann bare nar bade $P$ og $Q$ er sanne
- **Disjunksjon** ($P \\lor Q$): "$P$ eller $Q$" - sann nar minst en av dem er sann
- **Negasjon** ($\\neg P$): "ikke $P$" - sann nar $P$ er usann
- **Implikasjon** ($P \\Rightarrow Q$): "hvis $P$, sa $Q$" - usann bare nar $P$ er sann og $Q$ er usann
- **Ekvivalens** ($P \\Leftrightarrow Q$): "$P$ hvis og bare hvis $Q$" - sann nar bade har samme sannhetsverdi`,
    },

    {
      id: 'r2-6-6-theorem-logikk',
      type: 'theorem',
      title: 'Viktige logiske ekvivalenser',
      content: `**1. Kontraposisjon:**
$$(P \\Rightarrow Q) \\Leftrightarrow (\\neg Q \\Rightarrow \\neg P)$$

**2. De Morgans lover:**
$$\\neg(P \\land Q) \\Leftrightarrow (\\neg P \\lor \\neg Q)$$
$$\\neg(P \\lor Q) \\Leftrightarrow (\\neg P \\land \\neg Q)$$

**3. Negasjon av implikasjon:**
$$\\neg(P \\Rightarrow Q) \\Leftrightarrow (P \\land \\neg Q)$$`,
    },

    // EKSEMPEL 15: Logiske ekvivalenser
    {
      id: 'r2-6-6-example-15',
      type: 'example',
      title: 'Eksempel 15: Bruk av logiske ekvivalenser',
      problem: `Skriv negasjonen av folgende pastander:

a) "Alle primtall storre enn 2 er oddetall."

b) "Det finnes et reelt tall $x$ slik at $x^2 < 0$."

c) "Hvis det regner, så er bakken vat."`,
      solution: `**Løsning:**

**a)** Original: $\\forall p > 2$ primtall: $p$ er oddetall.

Negasjon: Det finnes et primtall $p > 2$ som er partall.

(Merk: Negasjonen er usann, noe som bekrefter at originalen er sann.)

**b)** Original: $\\exists x \\in \\mathbb{R}: x^2 < 0$

Negasjon: For alle reelle tall $x$ er $x^2 \\geq 0$.

(Negasjonen er sann, sa originalen er usann.)

**c)** Original: Regn $\\Rightarrow$ Vat bakke

Negasjon: Det regner OG bakken er ikke vat.

(Bruker $\\neg(P \\Rightarrow Q) \\Leftrightarrow (P \\land \\neg Q)$)`,
    },

    // EKSEMPEL 16: Kvantorer
    {
      id: 'r2-6-6-example-16',
      type: 'example',
      title: 'Eksempel 16: Bevis med kvantorer',
      problem: `Bevis at det finnes uendelig mange primtall på formen $4k + 3$.`,
      solution: `**Bevis ved motsigelse:**

**Antagelse:** Anta at det bare finnes endelig mange primtall på formen $4k + 3$. La disse vare $p_1, p_2, \\ldots, p_n$.

**Konstruksjon:** Betrakt tallet:
$$N = 4 \\cdot p_1 \\cdot p_2 \\cdots p_n - 1 = 4(p_1 p_2 \\cdots p_n) - 1$$

**Observasjon 1:** $N$ er på formen $4m - 1 = 4(m-1) + 3$, altsa på formen $4k + 3$.

**Observasjon 2:** Ethvert oddetall er enten på formen $4k + 1$ eller $4k + 3$.

**Observasjon 3:** Produktet av tall på formen $4k + 1$ er igjen på formen $4k + 1$:
$$(4a + 1)(4b + 1) = 16ab + 4a + 4b + 1 = 4(4ab + a + b) + 1$$

**Konklusjon fra observasjonene:** Siden $N$ er på formen $4k + 3$, ma $N$ ha minst en primfaktor på formen $4k + 3$.

**Motsigelse:** Men $N$ er ikke delelig med noen av $p_1, \\ldots, p_n$ (siden $N \\equiv -1 \\pmod{p_i}$ for alle $i$). Sa denne primfaktoren er ikke i listen var.

**Konklusjon:** Det finnes uendelig mange primtall på formen $4k + 3$.

$$\\blacksquare$$`,
    },

    // OPPGAVE 6
    {
      id: 'r2-6-6-ex-block-6',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-6',
        number: '6',
        type: 'classic',
        difficulty: 'medium',
        task: 'Logisk argumentasjon:',
        subTasks: [
          {
            label: 'a',
            task: 'Skriv negasjonen av: "For alle $\\epsilon > 0$ finnes det en $\\delta > 0$ slik at $|f(x) - L| < \\epsilon$ nar $|x - a| < \\delta$."',
            solution: `Negasjon: Det finnes en $\\epsilon > 0$ slik at for alle $\\delta > 0$ finnes det en $x$ med $|x - a| < \\delta$ og $|f(x) - L| \\geq \\epsilon$.`,
          },
          {
            label: 'b',
            task: 'Bruk kontraposisjon til a bevise: Hvis $n^2$ er oddetall, så er $n$ oddetall.',
            solution: `Kontraposisjon: Hvis $n$ er partall, så er $n^2$ partall. Bevis: $n = 2k \\Rightarrow n^2 = 4k^2 = 2(2k^2)$, som er partall.`,
          },
          {
            label: 'c',
            task: 'Bruk De Morgans lover til a forenkle: $\\neg((x > 0) \\land (x < 10))$',
            solution: `$\\neg((x > 0) \\land (x < 10)) = (x \\leq 0) \\lor (x \\geq 10)$, dvs. "$x \\leq 0$ eller $x \\geq 10$".`,
          },
        ],
        hints: ['Negasjon av $\\forall$ er $\\exists$, og omvendt', 'Negasjon av $<$ er $\\geq$'],
        solution: 'Se deloppgavene for losninger.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // ============================================================================
    // OPPSUMMERING OG FLERE OPPGAVER
    // ============================================================================
    {
      id: 'r2-6-6-oppsummering',
      type: 'text',
      content: `## Oppsummering

I dette kapitlet har vi lart om:

**Direkte bevis:**
- Start med premissene og arbeid logisk mot konklusjonen
- Bruk definisjoner og tidligere resultater

**Motsigelsesbevis:**
- Anta det motsatte av det du vil bevise
- Vis at dette forer til en selvmotsigelse
- Konkluder at originalen ma vare sann

**Induksjonsbevis:**
- Vis basissteget (vanligvis $n = 1$ eller $n = 0$)
- Vis induksjonssteget: $P(k) \\Rightarrow P(k+1)$
- Konkluder at pastanden gjelder for alle $n$

**Logisk argumentasjon:**
- Bruk formelle logiske regler
- Vær bevisst på kvantorer ($\\forall$, $\\exists$) og deres negasjoner
- Kontraposisjon er et kraftig verktøy`,
    },

    // OPPGAVE 7
    {
      id: 'r2-6-6-ex-block-7',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-7',
        number: '7',
        type: 'classic',
        difficulty: 'lett',
        task: 'Klassifiser hvilken bevismetode som passer best:',
        subTasks: [
          {
            label: 'a',
            task: '"Summen av vinklene i en trekant er $180°$"',
            solution: 'Direkte bevis (geometrisk konstruksjon med parallelle linjer).',
          },
          {
            label: 'b',
            task: '"Det finnes ikke noe største primtall"',
            solution: 'Motsigelsesbevis (anta at det finnes, og konstruer et storre).',
          },
          {
            label: 'c',
            task: '"$2^n > n$ for alle $n \\geq 1$"',
            solution: 'Induksjonsbevis (pastanden gjelder for alle naturlige tall).',
          },
          {
            label: 'd',
            task: '"Produktet av to irrasjonale tall kan vare rasjonalt"',
            solution: 'Direkte bevis ved moteksempel: $\\sqrt{2} \\cdot \\sqrt{2} = 2$.',
          },
        ],
        hints: ['Tenk på strukturen i pastanden'],
        solution: 'Se deloppgavene.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // OPPGAVE 8
    {
      id: 'r2-6-6-ex-block-8',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-8',
        number: '8',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Bevis ved induksjon:',
        subTasks: [
          {
            label: 'a',
            task: '$2^n > n^2$ for alle $n \\geq 5$',
            solution: `Basissteg: $n = 5$: $2^5 = 32 > 25 = 5^2$. OK.
Induksjonssteg: Anta $2^k > k^2$ for $k \\geq 5$. Da er $2^{k+1} = 2 \\cdot 2^k > 2k^2$. Vi ma vise $2k^2 > (k+1)^2 = k^2 + 2k + 1$, dvs. $k^2 > 2k + 1$, dvs. $k^2 - 2k - 1 > 0$. For $k \\geq 5$: $25 - 10 - 1 = 14 > 0$. OK.`,
          },
          {
            label: 'b',
            task: '$n! > 2^n$ for alle $n \\geq 4$',
            solution: `Basissteg: $n = 4$: $4! = 24 > 16 = 2^4$. OK.
Induksjonssteg: Anta $k! > 2^k$ for $k \\geq 4$. Da er $(k+1)! = (k+1) \\cdot k! > (k+1) \\cdot 2^k$. Siden $k + 1 \\geq 5 > 2$, har vi $(k+1) \\cdot 2^k > 2 \\cdot 2^k = 2^{k+1}$.`,
          },
          {
            label: 'c',
            task: 'Fibonaccitallene: $F_1 + F_2 + \\cdots + F_n = F_{n+2} - 1$ der $F_1 = F_2 = 1$',
            solution: `Basissteg: $n = 1$: VS = $F_1 = 1$, HS = $F_3 - 1 = 2 - 1 = 1$. OK.
Induksjonssteg: Anta formelen for $k$. Da er $\\sum_{i=1}^{k+1} F_i = F_{k+2} - 1 + F_{k+1} = F_{k+3} - 1$ (siden $F_{k+2} + F_{k+1} = F_{k+3}$).`,
          },
        ],
        hints: ['Vær noye med a sjekke basissteget for riktig startverdi', 'For a) ma du vise en tilleggsnelikhet'],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // OPPGAVE 9
    {
      id: 'r2-6-6-ex-block-9',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-9',
        number: '9',
        type: 'classic',
        difficulty: 'medium',
        task: 'Direkte bevis:',
        subTasks: [
          {
            label: 'a',
            task: 'Bevis at hvis $a$ deler $b$ og $b$ deler $c$, sa deler $a$ $c$.',
            solution: `$a \\mid b$ betyr $b = ka$ for et heltall $k$. $b \\mid c$ betyr $c = mb$ for et heltall $m$. Da er $c = mb = m(ka) = (mk)a$, sa $a \\mid c$.`,
          },
          {
            label: 'b',
            task: 'Bevis at summen av to rasjonale tall er rasjonalt.',
            solution: `La $r_1 = \\frac{a}{b}$ og $r_2 = \\frac{c}{d}$ med $b, d \\neq 0$. Da er $r_1 + r_2 = \\frac{ad + bc}{bd}$, som er rasjonalt siden teller og nevner er heltall og $bd \\neq 0$.`,
          },
          {
            label: 'c',
            task: 'Bevis at diagonalen i et kvadrat med side 1 har lengde $\\sqrt{2}$.',
            solution: `Ved Pytagoras: $d^2 = 1^2 + 1^2 = 2$, sa $d = \\sqrt{2}$.`,
          },
        ],
        hints: ['Bruk definisjoner presist', 'For delelighet: $a \\mid b$ betyr $b = ka$ for et heltall $k$'],
        solution: 'Se deloppgavene.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // OPPGAVE 10
    {
      id: 'r2-6-6-ex-block-10',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-10',
        number: '10',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Motsigelsesbevis:',
        subTasks: [
          {
            label: 'a',
            task: 'Bevis at $\\log_2 3$ er irrasjonalt.',
            solution: `Anta $\\log_2 3 = \\frac{p}{q}$ med $p, q \\in \\mathbb{Z}^+$. Da er $2^{p/q} = 3$, altsa $2^p = 3^q$. Men VS er partall og HS er oddetall. Motsigelse.`,
          },
          {
            label: 'b',
            task: 'Bevis at det ikke finnes heltall $a$ og $b$ slik at $6a + 9b = 1$.',
            solution: `Anta at det finnes. Da er $3(2a + 3b) = 1$, sa 3 deler 1. Motsigelse.`,
          },
          {
            label: 'c',
            task: 'Bevis at $\\sqrt{2} + \\sqrt{3}$ er irrasjonalt.',
            solution: `Anta $\\sqrt{2} + \\sqrt{3} = r$ rasjonalt. Da er $\\sqrt{3} = r - \\sqrt{2}$, sa $3 = r^2 - 2r\\sqrt{2} + 2$, altsaa $\\sqrt{2} = \\frac{r^2 - 1}{2r}$ rasjonalt. Motsigelse.`,
          },
        ],
        hints: ['For a) tenk på partall/oddetall', 'For c) kvadrer begge sider'],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // OPPGAVE 11
    {
      id: 'r2-6-6-ex-block-11',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-11',
        number: '11',
        type: 'classic',
        difficulty: 'medium',
        task: 'Beviskritikk - finn feilen:',
        subTasks: [
          {
            label: 'a',
            task: `"**Bevis:** La $a = b = 1$. Da er $a^2 - b^2 = a - b$, dvs. $(a-b)(a+b) = a - b$. Del på $(a-b)$: $a + b = 1$, dvs. $2 = 1$."`,
            solution: `Feilen: $a - b = 0$, sa vi deler på null.`,
          },
          {
            label: 'b',
            task: `"**Bevis ved induksjon at alle tall er like:** $P(1)$ er trivielt sann. Anta $P(k)$: alle tall opptil $k$ er like. For $P(k+1)$: Vi har $1 = 2 = \\ldots = k$, og $2 = 3 = \\ldots = k+1$. Altsa $1 = k+1$."`,
            solution: `Feilen: Induksjonssteget krever at mengdene overlapper, noe de ikke gjor for $k = 1$.`,
          },
        ],
        hints: ['Se etter divisjon med null', 'Sjekk om argumentet fungerer for sma verdier'],
        solution: 'Se deloppgavene.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // OPPGAVE 12
    {
      id: 'r2-6-6-ex-block-12',
      type: 'exercise',
      exercise: {
        id: 'r2-6-6-ex-12',
        number: '12',
        type: 'classic',
        difficulty: 'vanskelig',
        task: 'Utfordringsoppgaver:',
        subTasks: [
          {
            label: 'a',
            task: 'Bevis at $\\sqrt{p}$ er irrasjonalt for alle primtall $p$.',
            solution: `Anta $\\sqrt{p} = \\frac{a}{b}$ med $\\gcd(a,b) = 1$. Da $pb^2 = a^2$, sa $p \\mid a^2$. Siden $p$ er primtall, $p \\mid a$. Skriv $a = pk$, sa $pb^2 = p^2k^2$, altsaa $b^2 = pk^2$. Da $p \\mid b^2$, sa $p \\mid b$. Motsigelse: $\\gcd(a,b) \\geq p > 1$.`,
          },
          {
            label: 'b',
            task: 'Bevis at det finnes irrasjonale tall $a$ og $b$ slik at $a^b$ er rasjonalt.',
            solution: `Betrakt $\\sqrt{2}^{\\sqrt{2}}$. Enten er dette rasjonalt (og vi er ferdige med $a = b = \\sqrt{2}$), eller det er irrasjonalt. I sistnevnte tilfelle: $(\\sqrt{2}^{\\sqrt{2}})^{\\sqrt{2}} = \\sqrt{2}^2 = 2$, som er rasjonalt. Da er $a = \\sqrt{2}^{\\sqrt{2}}$ og $b = \\sqrt{2}$.`,
          },
          {
            label: 'c',
            task: 'Bevis Bernoullis ulikhet ved induksjon: $(1 + x)^n \\geq 1 + nx$ for alle $n \\geq 1$ og $x > -1$.',
            solution: `Basissteg: $(1+x)^1 = 1 + x \\geq 1 + x$. OK.
Induksjonssteg: Anta $(1+x)^k \\geq 1 + kx$. Da $(1+x)^{k+1} = (1+x)^k(1+x) \\geq (1+kx)(1+x) = 1 + kx + x + kx^2 = 1 + (k+1)x + kx^2 \\geq 1 + (k+1)x$ siden $kx^2 \\geq 0$.`,
          },
        ],
        hints: ['a) Bruk at primtall bare har seg selv og 1 som faktorer', 'b) Dette er et ikke-konstruktivt bevis'],
        solution: 'Se deloppgavene for fullstendige bevis.',
        allowsUpload: true,
        allowsCanvasDrawing: true,
      },
    },

    // TILLEGGSOPPGAVER
    {
      id: 'r2-6-6-tillegg',
      type: 'collapsible',
      title: 'Ekstraoppgaver',
      buttonText: 'Vis ekstraoppgaver',
      content: [
        {
          id: 'r2-6-6-tillegg-1',
          type: 'exercise',
          exercise: {
            id: 'r2-6-6-tillegg-ex-1',
            number: 'T1',
            type: 'classic',
            difficulty: 'medium',
            task: 'Bevis ved induksjon at $\\sum_{i=1}^{n} i^3 = \\left(\\frac{n(n+1)}{2}\\right)^2$',
            solution: `Basissteg: $n = 1$: VS = 1, HS = 1. OK.
Induksjonssteg: $\\sum_{i=1}^{k+1} i^3 = \\left(\\frac{k(k+1)}{2}\\right)^2 + (k+1)^3 = (k+1)^2\\left(\\frac{k^2}{4} + (k+1)\\right) = (k+1)^2 \\cdot \\frac{k^2 + 4k + 4}{4} = \\left(\\frac{(k+1)(k+2)}{2}\\right)^2$.`,
            hints: ['Faktoriser $(k+1)^2$ ut'],
            allowsUpload: true,
            allowsCanvasDrawing: true,
          },
        },
        {
          id: 'r2-6-6-tillegg-2',
          type: 'exercise',
          exercise: {
            id: 'r2-6-6-tillegg-ex-2',
            number: 'T2',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'Bevis at mellom ethvert par av rasjonale tall finnes det et irrasjonalt tall.',
            solution: `La $r < s$ vare rasjonale. Betrakt $t = r + \\frac{(s-r)}{\\sqrt{2}}$. Da $r < t < s$ og $t$ er irrasjonalt (siden $t - r = \\frac{s-r}{\\sqrt{2}}$ er irrasjonalt).`,
            hints: ['Bruk $\\sqrt{2}$ til a konstruere et irrasjonalt tall i intervallet'],
            allowsUpload: true,
            allowsCanvasDrawing: true,
          },
        },
        {
          id: 'r2-6-6-tillegg-3',
          type: 'exercise',
          exercise: {
            id: 'r2-6-6-tillegg-ex-3',
            number: 'T3',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'Bevis at for alle $n \\geq 1$: $\\frac{1}{1 \\cdot 2} + \\frac{1}{2 \\cdot 3} + \\cdots + \\frac{1}{n(n+1)} = \\frac{n}{n+1}$',
            solution: `Basissteg: $n = 1$: VS = $\\frac{1}{2}$, HS = $\\frac{1}{2}$. OK.
Induksjonssteg: $\\sum_{i=1}^{k+1} \\frac{1}{i(i+1)} = \\frac{k}{k+1} + \\frac{1}{(k+1)(k+2)} = \\frac{k(k+2) + 1}{(k+1)(k+2)} = \\frac{k^2 + 2k + 1}{(k+1)(k+2)} = \\frac{(k+1)^2}{(k+1)(k+2)} = \\frac{k+1}{k+2}$.`,
            hints: ['Finn fellesnevner i induksjonssteget'],
            allowsUpload: true,
            allowsCanvasDrawing: true,
          },
        },
        {
          id: 'r2-6-6-tillegg-4',
          type: 'exercise',
          exercise: {
            id: 'r2-6-6-tillegg-ex-4',
            number: 'T4',
            type: 'classic',
            difficulty: 'vanskelig',
            task: 'Bevis at $\\sqrt[3]{2}$ er irrasjonalt.',
            solution: `Anta $\\sqrt[3]{2} = \\frac{p}{q}$ med $\\gcd(p,q) = 1$. Da $2q^3 = p^3$, sa 2 deler $p^3$, og dermed deler 2 $p$. Skriv $p = 2k$, sa $2q^3 = 8k^3$, altsaa $q^3 = 4k^3 = 2(2k^3)$, sa 2 deler $q$. Motsigelse.`,
            hints: ['Folg samme struktur som for $\\sqrt{2}$'],
            allowsUpload: true,
            allowsCanvasDrawing: true,
          },
        },
      ],
    },
  ],
  exercises: [],
};

// Eksporter alle kapitler som et objekt
export const CHAPTERS_R2: Record<string, TextbookChapter> = {
  'r2-1-1': CHAPTER_R2_1_1,
  'r2-1-2': CHAPTER_R2_1_2,
  'r2-5-1': CHAPTER_R2_5_1,
  'r2-5-2': CHAPTER_R2_5_2,
  'r2-5-3': CHAPTER_R2_5_3,
  'r2-5-4': CHAPTER_R2_5_4,
  'r2-5-5': CHAPTER_R2_5_5,
  'r2-5-6': CHAPTER_R2_5_6,
  'r2-5-7': CHAPTER_R2_5_7,
  'r2-5-8': CHAPTER_R2_5_8,
  'r2-1-3': CHAPTER_R2_1_3,
  'r2-1-4': CHAPTER_R2_1_4,
  'r2-1-5': CHAPTER_R2_1_5,
  'r2-1-6': CHAPTER_R2_1_6,
  'r2-1-7': CHAPTER_R2_1_7,
  'r2-2-1': CHAPTER_R2_2_1,
  'r2-2-2': CHAPTER_R2_2_2,
  'r2-2-3': CHAPTER_R2_2_3,
  'r2-2-4': CHAPTER_R2_2_4,
  'r2-2-5': CHAPTER_R2_2_5,
  'r2-2-6': CHAPTER_R2_2_6,
  'r2-2-7': CHAPTER_R2_2_7,
  'r2-3-1': CHAPTER_R2_3_1,
  'r2-3-2': CHAPTER_R2_3_2,
  'r2-3-3': CHAPTER_R2_3_3,
  'r2-3-4': CHAPTER_R2_3_4,
  'r2-3-5': CHAPTER_R2_3_5,
  'r2-3-6': CHAPTER_R2_3_6,
  'r2-3-7': CHAPTER_R2_3_7,
  'r2-4-1': CHAPTER_R2_4_1,
  'r2-4-2': CHAPTER_R2_4_2,
  'r2-4-3': CHAPTER_R2_4_3,
  'r2-4-4': CHAPTER_R2_4_4,
  'r2-4-5': CHAPTER_R2_4_5,
  'r2-4-6': CHAPTER_R2_4_6,
  'r2-4-7': CHAPTER_R2_4_7,
  'r2-4-8': CHAPTER_R2_4_8,
  'r2-4-9': CHAPTER_R2_4_9,
  'r2-6-1': CHAPTER_R2_6_1,
  'r2-6-2': CHAPTER_R2_6_2,
  'r2-6-3': CHAPTER_R2_6_3,
  'r2-6-4': CHAPTER_R2_6_4,
  'r2-6-5': CHAPTER_R2_6_5,
  'r2-6-6': CHAPTER_R2_6_6,
};
